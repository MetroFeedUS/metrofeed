<!DOCTYPE html>
<html lang="en">
<head>
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2219550569810489"
     crossorigin="anonymous"></script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 11 - To Vancouver Way & Middlefield | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder ‚Äî 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">‚¨Ö Back</button>
  </div>

  <h1>Route 11 - To Vancouver Way & Middlefield</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 11;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.58736, -122.752127],
  [45.587297, -122.752168],
  [45.587055, -122.752324],
  [45.586543, -122.752656],
  [45.586422, -122.752737],
  [45.586389, -122.752596],
  [45.586129, -122.75179],
  [45.586678, -122.75143],
  [45.586751, -122.751382],
  [45.586902, -122.75185],
  [45.587055, -122.752324],
  [45.587297, -122.752168],
  [45.58741, -122.752095],
  [45.587621, -122.751958],
  [45.5877, -122.751907],
  [45.587837, -122.751821],
  [45.587985, -122.751721],
  [45.588203, -122.751565],
  [45.588345, -122.75147],
  [45.588383, -122.751596],
  [45.58842, -122.751713],
  [45.588474, -122.751858],
  [45.588546, -122.752076],
  [45.588662, -122.752423],
  [45.588841, -122.752999],
  [45.58895, -122.753344],
  [45.589084, -122.753756],
  [45.589251, -122.754269],
  [45.589418, -122.75478],
  [45.589431, -122.754822],
  [45.589518, -122.755086],
  [45.589573, -122.755226],
  [45.589553, -122.755326],
  [45.589532, -122.755402],
  [45.589497, -122.755495],
  [45.589603, -122.755578],
  [45.589671, -122.755643],
  [45.589875, -122.755838],
  [45.590143, -122.756095],
  [45.590389, -122.756337],
  [45.590505, -122.756452],
  [45.590626, -122.756571],
  [45.590655, -122.756598],
  [45.590731, -122.756673],
  [45.590912, -122.756846],
  [45.590982, -122.756912],
  [45.591081, -122.757007],
  [45.591315, -122.75723],
  [45.591906, -122.757812],
  [45.592128, -122.758021],
  [45.592508, -122.758381],
  [45.592627, -122.758137],
  [45.592745, -122.757906],
  [45.592825, -122.757749],
  [45.592876, -122.757658],
  [45.592937, -122.757572],
  [45.592989, -122.757498],
  [45.593153, -122.757168],
  [45.593348, -122.756767],
  [45.593739, -122.755965],
  [45.593931, -122.755569],
  [45.593981, -122.755467],
  [45.594449, -122.754505],
  [45.594464, -122.754473],
  [45.594893, -122.753592],
  [45.594951, -122.753474],
  [45.595148, -122.753071],
  [45.595397, -122.752562],
  [45.59567, -122.752],
  [45.59578, -122.751772],
  [45.595869, -122.751589],
  [45.596372, -122.750556],
  [45.59646, -122.750367],
  [45.596498, -122.750277],
  [45.596534, -122.750178],
  [45.596571, -122.750064],
  [45.596608, -122.749924],
  [45.596616, -122.74989],
  [45.596635, -122.749806],
  [45.596657, -122.749684],
  [45.596675, -122.749541],
  [45.596689, -122.749403],
  [45.596696, -122.749297],
  [45.596697, -122.749172],
  [45.596693, -122.749046],
  [45.596687, -122.748933],
  [45.596675, -122.74881],
  [45.59666, -122.748695],
  [45.596644, -122.748608],
  [45.596618, -122.748479],
  [45.59649, -122.747934],
  [45.596263, -122.746976],
  [45.596193, -122.746684],
  [45.596163, -122.746558],
  [45.596031, -122.74601],
  [45.595918, -122.745529],
  [45.595804, -122.745048],
  [45.595578, -122.744095],
  [45.595515, -122.743831],
  [45.595346, -122.743125],
  [45.595121, -122.742181],
  [45.594925, -122.741348],
  [45.59489, -122.741199],
  [45.59466, -122.740234],
  [45.594438, -122.739273],
  [45.594239, -122.738402],
  [45.594236, -122.738392],
  [45.594216, -122.738306],
  [45.593989, -122.737346],
  [45.593757, -122.736377],
  [45.59353, -122.735424],
  [45.593467, -122.735159],
  [45.593415, -122.734938],
  [45.59326, -122.734334],
  [45.59289, -122.732919],
  [45.592836, -122.732693],
  [45.592879, -122.732526],
  [45.592909, -122.732429],
  [45.593166, -122.731618],
  [45.593565, -122.730359],
  [45.59369, -122.730379],
  [45.593808, -122.730379],
  [45.593999, -122.730379],
  [45.594195, -122.730379],
  [45.594574, -122.730379],
  [45.59495, -122.730378],
  [45.595196, -122.730378],
  [45.595306, -122.730389],
  [45.595315, -122.730526],
  [45.595321, -122.730628],
  [45.595327, -122.730934],
  [45.595327, -122.731322],
  [45.595327, -122.731516],
  [45.595326, -122.731893],
  [45.595325, -122.73201],
  [45.595324, -122.732283],
  [45.595323, -122.732441],
  [45.595328, -122.732674],
  [45.595335, -122.732799],
  [45.595344, -122.732902],
  [45.59536, -122.733045],
  [45.595377, -122.733157],
  [45.5954, -122.733292],
  [45.59544, -122.733469],
  [45.595474, -122.733588],
  [45.595508, -122.733703],
  [45.595549, -122.733816],
  [45.59558, -122.733901],
  [45.595609, -122.733969],
  [45.595667, -122.734096],
  [45.595722, -122.734205],
  [45.596078, -122.734844],
  [45.596379, -122.735386],
  [45.596418, -122.735457],
  [45.59672, -122.736001],
  [45.59688, -122.736289],
  [45.597206, -122.736873],
  [45.597342, -122.737119],
  [45.597469, -122.737328],
  [45.597614, -122.737552],
  [45.597725, -122.737707],
  [45.597831, -122.737846],
  [45.597922, -122.737954],
  [45.598086, -122.73814],
  [45.598334, -122.738404],
  [45.598444, -122.738534],
  [45.598543, -122.738665],
  [45.598688, -122.738868],
  [45.598859, -122.739115],
  [45.599468, -122.740029],
  [45.599693, -122.740377],
  [45.599915, -122.740758],
  [45.600014, -122.740941],
  [45.600207, -122.741318],
  [45.600311, -122.741541],
  [45.600436, -122.74181],
  [45.600519, -122.741992],
  [45.60056, -122.742082],
  [45.60072, -122.742427],
  [45.601196, -122.743458],
  [45.601328, -122.743782],
  [45.601376, -122.743911],
  [45.601455, -122.744135],
  [45.601506, -122.744289],
  [45.601542, -122.74442],
  [45.601651, -122.744824],
  [45.60171, -122.74502],
  [45.601771, -122.745205],
  [45.601828, -122.745363],
  [45.601885, -122.745516],
  [45.601939, -122.745643],
  [45.60214, -122.746107],
  [45.60254, -122.747008],
  [45.603362, -122.748871],
  [45.603518, -122.749222],
  [45.603902, -122.750083],
  [45.604729, -122.751915],
  [45.605494, -122.753601],
  [45.605732, -122.75413],
  [45.606106, -122.754956],
  [45.606564, -122.755967],
  [45.607202, -122.757371],
  [45.607303, -122.757579],
  [45.607409, -122.757775],
  [45.607558, -122.758025],
  [45.607644, -122.758154],
  [45.607731, -122.758279],
  [45.607821, -122.758401],
  [45.607918, -122.758522],
  [45.60808, -122.758709],
  [45.608167, -122.758801],
  [45.608261, -122.758893],
  [45.6084, -122.75902],
  [45.60845, -122.759065],
  [45.608543, -122.759149],
  [45.608832, -122.759408],
  [45.609473, -122.759977],
  [45.609657, -122.760141],
  [45.61041, -122.76081],
  [45.610964, -122.761302],
  [45.611038, -122.761373],
  [45.611102, -122.761441],
  [45.611185, -122.761538],
  [45.611282, -122.761664],
  [45.611362, -122.761776],
  [45.611418, -122.761864],
  [45.611491, -122.761979],
  [45.611555, -122.762075],
  [45.611624, -122.762165],
  [45.611725, -122.762287],
  [45.611813, -122.762377],
  [45.611894, -122.762453],
  [45.611983, -122.762527],
  [45.612088, -122.762603],
  [45.612195, -122.762676],
  [45.612261, -122.762711],
  [45.61234, -122.762746],
  [45.612429, -122.762782],
  [45.612451, -122.762792],
  [45.612571, -122.762832],
  [45.612691, -122.762775],
  [45.613224, -122.762857],
  [45.61329, -122.762938],
  [45.613709, -122.762999],
  [45.614156, -122.763065],
  [45.614492, -122.763115],
  [45.614634, -122.763147],
  [45.614741, -122.763175],
  [45.614844, -122.763212],
  [45.614969, -122.763265],
  [45.615092, -122.763327],
  [45.6152, -122.763387],
  [45.615271, -122.763431],
  [45.615334, -122.763476],
  [45.615435, -122.763553],
  [45.61556, -122.763656],
  [45.615645, -122.763736],
  [45.61572, -122.763814],
  [45.615825, -122.763929],
  [45.615906, -122.764027],
  [45.615991, -122.764137],
  [45.61606, -122.764236],
  [45.616127, -122.764338],
  [45.616204, -122.76447],
  [45.616275, -122.764596],
  [45.616349, -122.764751],
  [45.616434, -122.764949],
  [45.616479, -122.765063],
  [45.616522, -122.765182],
  [45.616575, -122.76534],
  [45.616614, -122.765476],
  [45.616645, -122.765594],
  [45.616675, -122.765726],
  [45.616702, -122.765863],
  [45.616735, -122.766075],
  [45.616878, -122.767071],
  [45.616946, -122.767499],
  [45.617052, -122.768153],
  [45.617175, -122.768953],
  [45.617202, -122.769101],
  [45.617225, -122.769216],
  [45.617257, -122.769363],
  [45.617286, -122.76948],
  [45.617316, -122.769588],
  [45.61734, -122.769663],
  [45.617369, -122.76974],
  [45.617407, -122.769845],
  [45.617454, -122.769958],
  [45.617538, -122.770135],
  [45.617598, -122.770249],
  [45.617665, -122.770371],
  [45.617759, -122.770437],
  [45.617901, -122.770612],
  [45.617988, -122.770716],
  [45.618068, -122.770806],
  [45.61811, -122.770906],
  [45.618253, -122.771032],
  [45.618367, -122.771117],
  [45.618433, -122.77116],
  [45.618587, -122.771248],
  [45.61867, -122.771288],
  [45.618828, -122.771352],
  [45.618938, -122.771388],
  [45.619059, -122.771418],
  [45.619118, -122.77143],
  [45.619172, -122.771437],
  [45.619271, -122.771444],
  [45.619372, -122.771449],
  [45.619389, -122.77145],
  [45.620314, -122.771485],
  [45.620954, -122.771511],
  [45.621366, -122.771527],
  [45.622399, -122.771566],
  [45.623, -122.771595],
  [45.623611, -122.771615],
  [45.623826, -122.771623],
  [45.627614, -122.771775],
  [45.628791, -122.771822],
  [45.629197, -122.771839],
  [45.630051, -122.771872],
  [45.630385, -122.771885],
  [45.630474, -122.771889],
  [45.630791, -122.771901],
  [45.631189, -122.771917],
  [45.632353, -122.771964],
  [45.632588, -122.771973],
  [45.632757, -122.771965],
  [45.632874, -122.771951],
  [45.63299, -122.771928],
  [45.633123, -122.771892],
  [45.63324, -122.771852],
  [45.633364, -122.771801],
  [45.633476, -122.771745],
  [45.633615, -122.771667],
  [45.63374, -122.77158],
  [45.633865, -122.771485],
  [45.63399, -122.771373],
  [45.634104, -122.771259],
  [45.634184, -122.771169],
  [45.634279, -122.771058],
  [45.634376, -122.770927],
  [45.635081, -122.769872],
  [45.635203, -122.76969],
  [45.636102, -122.768343],
  [45.636641, -122.767536],
  [45.637447, -122.76633],
  [45.637516, -122.766227],
  [45.637828, -122.765768],
  [45.637857, -122.765648],
  [45.638344, -122.76492],
  [45.638447, -122.764813],
  [45.638519, -122.764693],
  [45.638594, -122.764564],
  [45.638664, -122.764429],
  [45.638733, -122.76428],
  [45.638798, -122.764124],
  [45.638861, -122.763951],
  [45.638923, -122.763756],
  [45.638972, -122.763578],
  [45.638999, -122.763458],
  [45.639029, -122.763317],
  [45.63906, -122.763145],
  [45.639085, -122.762969],
  [45.639104, -122.762784],
  [45.639112, -122.762631],
  [45.639116, -122.762531],
  [45.639118, -122.762422],
  [45.639115, -122.76216],
  [45.639107, -122.761999],
  [45.639078, -122.761721],
  [45.639057, -122.761565],
  [45.639027, -122.761388],
  [45.639006, -122.761285],
  [45.638983, -122.761176],
  [45.638948, -122.761038],
  [45.63889, -122.760849],
  [45.638836, -122.760685],
  [45.638774, -122.760526],
  [45.638712, -122.760378],
  [45.638617, -122.760184],
  [45.638496, -122.759966],
  [45.637935, -122.758992],
  [45.637554, -122.758322],
  [45.637466, -122.75826],
  [45.637387, -122.758125],
  [45.63718, -122.757761],
  [45.637138, -122.757571],
  [45.636718, -122.756836],
  [45.636555, -122.756559],
  [45.636378, -122.756261],
  [45.63633, -122.75618],
  [45.636141, -122.755858],
  [45.636023, -122.75599],
  [45.635854, -122.756182],
  [45.635654, -122.756403],
  [45.635349, -122.756738],
  [45.635269, -122.756827],
  [45.635121, -122.756972],
  [45.635032, -122.757049],
  [45.634966, -122.757102],
  [45.634914, -122.75714],
  [45.63481, -122.757208],
  [45.634685, -122.757281],
  [45.634556, -122.757344],
  [45.634386, -122.75741],
  [45.63423, -122.757457],
  [45.634089, -122.757488],
  [45.633965, -122.757501],
  [45.633865, -122.757505],
  [45.633773, -122.757498],
  [45.633666, -122.757479],
  [45.633597, -122.75746],
  [45.633524, -122.757434],
  [45.633395, -122.75738],
  [45.633321, -122.757338],
  [45.633241, -122.757277],
  [45.633111, -122.757169],
  [45.633012, -122.757075],
  [45.632916, -122.756958],
  [45.632826, -122.756835],
  [45.632675, -122.756561],
  [45.631656, -122.754717],
  [45.631639, -122.754686],
  [45.631199, -122.75389],
  [45.630936, -122.753411],
  [45.630455, -122.752535],
  [45.630296, -122.752246],
  [45.630002, -122.75171],
  [45.629804, -122.75135],
  [45.629759, -122.751268],
  [45.629634, -122.751039],
  [45.629355, -122.750532],
  [45.629227, -122.750259],
  [45.629155, -122.750012],
  [45.629078, -122.749595],
  [45.629093, -122.74885],
  [45.629118, -122.747554],
  [45.629128, -122.747054],
  [45.629158, -122.746712],
  [45.629179, -122.746603],
  [45.629206, -122.746453],
  [45.629242, -122.746314],
  [45.629281, -122.746184],
  [45.629363, -122.745978],
  [45.629442, -122.745803],
  [45.629536, -122.745637],
  [45.629615, -122.745526],
  [45.629914, -122.745183],
  [45.630028, -122.745054],
  [45.630139, -122.744928],
  [45.629933, -122.744562],
  [45.629615, -122.743998],
  [45.62831, -122.741628],
  [45.627978, -122.741022],
  [45.627902, -122.741001],
  [45.627807, -122.740832],
  [45.627727, -122.740689],
  [45.627722, -122.740665],
  [45.627694, -122.740516],
  [45.627321, -122.73985],
  [45.6266, -122.738535],
  [45.625821, -122.737138],
  [45.624962, -122.735583],
  [45.624711, -122.735128],
  [45.624188, -122.734186],
  [45.623843, -122.733553],
  [45.623611, -122.733117],
  [45.622937, -122.731788],
  [45.622892, -122.73174],
  [45.622814, -122.731657],
  [45.622583, -122.731211],
  [45.621318, -122.728901],
  [45.620723, -122.727821],
  [45.620679, -122.727735],
  [45.620664, -122.727664],
  [45.620636, -122.72754],
  [45.62037, -122.727022],
  [45.62023, -122.726732],
  [45.620085, -122.726437],
  [45.619983, -122.726335],
  [45.619838, -122.726027],
  [45.619674, -122.725671],
  [45.61961, -122.725524],
  [45.619608, -122.72539],
  [45.619444, -122.725019],
  [45.619078, -122.724176],
  [45.61887, -122.723698],
  [45.618797, -122.723654],
  [45.618701, -122.723435],
  [45.618711, -122.723333],
  [45.618647, -122.723184],
  [45.618321, -122.72244],
  [45.618224, -122.722218],
  [45.617846, -122.721354],
  [45.617749, -122.721125],
  [45.617698, -122.720998],
  [45.61766, -122.7209],
  [45.617631, -122.720819],
  [45.617596, -122.720715],
  [45.617529, -122.720499],
  [45.617483, -122.720331],
  [45.617441, -122.720152],
  [45.617409, -122.72],
  [45.61738, -122.719845],
  [45.617345, -122.719623],
  [45.617321, -122.71942],
  [45.617304, -122.719228],
  [45.617294, -122.719064],
  [45.617286, -122.718858],
  [45.617286, -122.718675],
  [45.617289, -122.718476],
  [45.617298, -122.718315],
  [45.617312, -122.718137],
  [45.617329, -122.717969],
  [45.61737, -122.717644],
  [45.617494, -122.716732],
  [45.617538, -122.7164],
  [45.617591, -122.715981],
  [45.617612, -122.715764],
  [45.617628, -122.715539],
  [45.617636, -122.715386],
  [45.617642, -122.715197],
  [45.617644, -122.71488],
  [45.617639, -122.714714],
  [45.617631, -122.71452],
  [45.617619, -122.714335],
  [45.617604, -122.714157],
  [45.617579, -122.713932],
  [45.617549, -122.71371],
  [45.617526, -122.713558],
  [45.617501, -122.713414],
  [45.617455, -122.713187],
  [45.617413, -122.713004],
  [45.617367, -122.712814],
  [45.617314, -122.712627],
  [45.617274, -122.712488],
  [45.617228, -122.712347],
  [45.617171, -122.71218],
  [45.617107, -122.712007],
  [45.617026, -122.711805],
  [45.616894, -122.711506],
  [45.616825, -122.711365],
  [45.616734, -122.711191],
  [45.616346, -122.710488],
  [45.616101, -122.710044],
  [45.615698, -122.709317],
  [45.615468, -122.708896],
  [45.615375, -122.708696],
  [45.615283, -122.708474],
  [45.614759, -122.707043],
  [45.61445, -122.706196],
  [45.613778, -122.704395],
  [45.6137, -122.704193],
  [45.613612, -122.703964],
  [45.613531, -122.703748],
  [45.613409, -122.703614],
  [45.613376, -122.703546],
  [45.613301, -122.703391],
  [45.61311, -122.703016],
  [45.613088, -122.70282],
  [45.612973, -122.702587],
  [45.612772, -122.702176],
  [45.612599, -122.701836],
  [45.612555, -122.701752],
  [45.612399, -122.701456],
  [45.612225, -122.70112],
  [45.612079, -122.700806],
  [45.612001, -122.700622],
  [45.611931, -122.700445],
  [45.611867, -122.700266],
  [45.61181, -122.700099],
  [45.611777, -122.699999],
  [45.611698, -122.699756],
  [45.611285, -122.698392],
  [45.61082, -122.696853],
  [45.610637, -122.696247],
  [45.610424, -122.695542],
  [45.610057, -122.694333],
  [45.609997, -122.694137],
  [45.609707, -122.693182],
  [45.609382, -122.692111],
  [45.60911, -122.691217],
  [45.609055, -122.691041],
  [45.608916, -122.690598],
  [45.608089, -122.688084],
  [45.607925, -122.687577],
  [45.607877, -122.687418],
  [45.607804, -122.687172],
  [45.607671, -122.68674],
  [45.607599, -122.686508],
  [45.607534, -122.686315],
  [45.607456, -122.686091],
  [45.607379, -122.685902],
  [45.607309, -122.685748],
  [45.607251, -122.685632],
  [45.607192, -122.68552],
  [45.607102, -122.685369],
  [45.607009, -122.685236],
  [45.606944, -122.685149],
  [45.606874, -122.685068],
  [45.606778, -122.684968],
  [45.606647, -122.684844],
  [45.606604, -122.684807],
  [45.606556, -122.684766],
  [45.606501, -122.68472],
  [45.60645, -122.684679],
  [45.606381, -122.684624],
  [45.605792, -122.684191],
  [45.6057, -122.684115],
  [45.605621, -122.684049],
  [45.60555, -122.683991],
  [45.605169, -122.683706],
  [45.605039, -122.683612],
  [45.604895, -122.683511],
  [45.604766, -122.683417],
  [45.60465, -122.683323],
  [45.604522, -122.683208],
  [45.604433, -122.683124],
  [45.604337, -122.683027],
  [45.604232, -122.68291],
  [45.60414, -122.682793],
  [45.604064, -122.682692],
  [45.603997, -122.682591],
  [45.603938, -122.682491],
  [45.603877, -122.682383],
  [45.603814, -122.682261],
  [45.603756, -122.682128],
  [45.603697, -122.68199],
  [45.603647, -122.68186],
  [45.603602, -122.681731],
  [45.603559, -122.681601],
  [45.603518, -122.68147],
  [45.603447, -122.681249],
  [45.603409, -122.681118],
  [45.603367, -122.680981],
  [45.603256, -122.680605],
  [45.60321, -122.680454],
  [45.603161, -122.680302],
  [45.603108, -122.680151],
  [45.603054, -122.680009],
  [45.603, -122.679881],
  [45.602949, -122.679767],
  [45.602883, -122.679637],
  [45.602807, -122.679496],
  [45.602737, -122.679378],
  [45.602672, -122.679271],
  [45.602604, -122.67917],
  [45.602532, -122.679067],
  [45.602461, -122.678964],
  [45.602315, -122.678761],
  [45.602091, -122.678454],
  [45.601962, -122.67845],
  [45.6019, -122.678416],
  [45.601802, -122.678376],
  [45.601711, -122.678366],
  [45.601613, -122.678374],
  [45.601521, -122.678417],
  [45.601441, -122.678485],
  [45.601365, -122.678626],
  [45.601311, -122.678788],
  [45.601296, -122.678924],
  [45.601301, -122.679068],
  [45.601329, -122.679194],
  [45.601365, -122.679283],
  [45.601414, -122.67937],
  [45.601582, -122.679621],
  [45.601657, -122.679647],
  [45.601746, -122.67965],
  [45.601818, -122.679641],
  [45.601908, -122.679607],
  [45.601988, -122.67956],
  [45.602132, -122.679444],
  [45.602177, -122.679396],
  [45.602255, -122.679298],
  [45.602612, -122.678778],
  [45.602655, -122.678716],
  [45.602866, -122.678398],
  [45.602964, -122.678245],
  [45.603048, -122.678109],
  [45.603138, -122.677953],
  [45.603166, -122.677889],
  [45.603181, -122.67782],
  [45.603188, -122.677734],
  [45.603171, -122.677612],
  [45.603143, -122.67741],
  [45.6031, -122.677092],
  [45.603093, -122.677051],
  [45.603026, -122.676604],
  [45.60294, -122.675954],
  [45.602866, -122.675439],
  [45.602802, -122.675032],
  [45.602698, -122.674437],
  [45.602627, -122.673988],
  [45.602578, -122.673672],
  [45.602537, -122.673389],
  [45.602498, -122.673087],
  [45.602432, -122.672584],
  [45.60239, -122.672276],
  [45.602359, -122.672073],
  [45.602337, -122.671937],
  [45.602309, -122.671764],
  [45.602281, -122.671617],
  [45.60224, -122.67142],
  [45.60215, -122.671005],
  [45.602068, -122.670624],
  [45.601867, -122.669705],
  [45.601844, -122.669583],
  [45.601818, -122.66944],
  [45.601792, -122.669299],
  [45.601774, -122.669203],
  [45.601615, -122.668234],
  [45.60152, -122.667653],
  [45.60131, -122.666356],
  [45.601156, -122.665434],
  [45.601089, -122.66505],
  [45.601055, -122.664881],
  [45.601015, -122.664704],
  [45.600961, -122.664497],
  [45.600917, -122.664348],
  [45.600876, -122.664224],
  [45.600803, -122.664031],
  [45.600728, -122.663851],
  [45.600671, -122.663721],
  [45.600557, -122.663487],
  [45.60038, -122.663092],
  [45.600325, -122.662957],
  [45.600264, -122.662798],
  [45.600198, -122.662611],
  [45.600027, -122.662106],
  [45.599828, -122.661501],
  [45.599636, -122.660912],
  [45.599587, -122.660748],
  [45.599551, -122.660605],
  [45.599513, -122.660452],
  [45.599484, -122.660295],
  [45.599458, -122.660139],
  [45.599437, -122.659968],
  [45.599424, -122.659841],
  [45.599413, -122.65971],
  [45.59941, -122.659591],
  [45.59941, -122.659446],
  [45.599328, -122.659446],
  [45.599264, -122.659457],
  [45.599217, -122.659474],
  [45.599141, -122.659532],
  [45.598959, -122.659675],
  [45.598666, -122.659916],
  [45.598322, -122.660203],
  [45.59772, -122.660705],
  [45.59703, -122.661273],
  [45.596355, -122.661832],
  [45.595998, -122.662123],
  [45.595903, -122.662203],
  [45.595717, -122.66236],
  [45.595874, -122.66289],
  [45.595906, -122.663023],
  [45.59593, -122.663149],
  [45.595953, -122.663293],
  [45.595976, -122.663473],
  [45.596009, -122.663725],
  [45.596097, -122.664402],
  [45.596287, -122.665859],
  [45.596332, -122.666209],
  [45.596349, -122.666362],
  [45.596354, -122.666513],
  [45.596347, -122.666632],
  [45.596327, -122.666757],
  [45.596297, -122.66689],
  [45.596256, -122.66702],
  [45.596213, -122.667117],
  [45.596159, -122.667224],
  [45.596081, -122.667342],
  [45.595913, -122.66759],
  [45.595564, -122.668108],
  [45.595895, -122.668561],
  [45.59603, -122.668745],
  [45.596088, -122.668824],
  [45.596321, -122.669143],
  [45.596358, -122.669193],
  [45.596302, -122.669372],
  [45.596087, -122.669114],
  [45.595932, -122.668928],
  [45.59603, -122.668745],
  [45.595895, -122.668561],
  [45.595564, -122.668108],
  [45.595901, -122.667609]
];

const stopNames = {
  "1699": "N Fessenden &amp; Allegheny",
  "1703": "N Fessenden &amp; Burr",
  "1712": "N Fessenden &amp; Midway",
  "1714": "N Fessenden &amp; Richmond",
  "3008": "N Ivanhoe &amp; Baltimore",
  "3540": "13200 Block N Columbia",
  "4817": "N Richmond &amp; Syracuse",
  "5373": "N St Louis &amp; New York",
  "5376": "N St Louis &amp; Smith",
  "9197": "N Columbia &amp; Simmons",
  "9199": "5900 Block N Marine",
  "9200": "5700 Block N Marine",
  "9308": "N Columbia &amp; Ramsey",
  "9334": "N Marine &amp; Leadbetter",
  "9434": "14500 Block N Columbia",
  "9439": "N Marine &amp; Leadbetter",
  "9440": "N Marine &amp; Bybee Lake Road",
  "9441": "6100 Block N Marine",
  "9442": "5300 Block N Marine",
  "9444": "N Marine &amp; Gantenbein",
  "9477": "NE Middlefield Rd &amp; N Vancouver Way",
  "9478": "1000 Block N Marine",
  "10163": "N Columbia &amp; Terminal 5 Access Rd",
  "10177": "N Ivanhoe &amp; Leavitt",
  "10477": "2600 Block N Marine",
  "10614": "N Fessenden &amp; Tioga",
  "11007": "N Fessenden &amp; Seneca",
  "11824": "N Macrum &amp; Powers",
  "11825": "N Columbia Blvd &amp; Oregonian",
  "11826": "N Columbia Blvd &amp; Bank",
  "11827": "N Columbia Blvd &amp; Upland Dr",
  "11828": "N Columbia Blvd &amp; Swift",
  "11829": "N Marine &amp; Pier 99 St",
  "11850": "9500 Block N Columbia Blvd",
  "11934": "N Ivanhoe &amp; New York",
  "11936": "N St Louis &amp; Central",
  "12465": "N Marine &amp; Portland Rd",
  "13520": "N Leadbetter &amp; Bybee Lake Ct",
  "13526": "N Columbia Blvd &amp; Lombard (Burgard)",
  "13818": "10400 Block NE 6th Dr",
  "14215": "N Richmond &amp; Princeton"
};

const stops = [
  { stop_id: "14215", name: "N Richmond &amp; Princeton", lat: 45.587387, lon: -122.75221, times: ["2:54 PM"] },
  { stop_id: "4817", name: "N Richmond &amp; Syracuse", lat: 45.587592, lon: -122.751862, times: ["2:55 PM"] },
  { stop_id: "10177", name: "N Ivanhoe &amp; Leavitt", lat: 45.589485, lon: -122.754788, times: ["2:56 PM"] },
  { stop_id: "3008", name: "N Ivanhoe &amp; Baltimore", lat: 45.590694, lon: -122.756521, times: ["2:57 PM"] },
  { stop_id: "11934", name: "N Ivanhoe &amp; New York", lat: 45.592164, lon: -122.757933, times: ["2:57 PM"] },
  { stop_id: "11936", name: "N St Louis &amp; Central", lat: 45.593867, lon: -122.755506, times: ["2:58 PM"] },
  { stop_id: "5376", name: "N St Louis &amp; Smith", lat: 45.59484, lon: -122.75354, times: ["2:59 PM"] },
  { stop_id: "5373", name: "N St Louis &amp; New York", lat: 45.595604, lon: -122.751935, times: ["3:00 PM"] },
  { stop_id: "11007", name: "N Fessenden &amp; Seneca", lat: 45.596548, lon: -122.749858, times: ["3:00 PM"] },
  { stop_id: "1714", name: "N Fessenden &amp; Richmond", lat: 45.596122, lon: -122.746717, times: ["3:01 PM"] },
  { stop_id: "1699", name: "N Fessenden &amp; Allegheny", lat: 45.595446, lon: -122.743864, times: ["3:02 PM"] },
  { stop_id: "10614", name: "N Fessenden &amp; Tioga", lat: 45.594856, lon: -122.741381, times: ["3:02 PM"] },
  { stop_id: "1703", name: "N Fessenden &amp; Burr", lat: 45.594162, lon: -122.738439, times: ["3:03 PM"] },
  { stop_id: "1712", name: "N Fessenden &amp; Midway", lat: 45.593412, lon: -122.735186, times: ["3:04 PM"] },
  { stop_id: "11824", name: "N Macrum &amp; Powers", lat: 45.593995, lon: -122.730244, times: ["3:06 PM"] },
  { stop_id: "11825", name: "N Columbia Blvd &amp; Oregonian", lat: 45.595413, lon: -122.732285, times: ["3:06 PM"] },
  { stop_id: "11826", name: "N Columbia Blvd &amp; Bank", lat: 45.596955, lon: -122.736203, times: ["3:06 PM"] },
  { stop_id: "11827", name: "N Columbia Blvd &amp; Upland Dr", lat: 45.600823, lon: -122.742327, times: ["3:07 PM"] },
  { stop_id: "11828", name: "N Columbia Blvd &amp; Swift", lat: 45.603598, lon: -122.749144, times: ["3:08 PM"] },
  { stop_id: "11850", name: "9500 Block N Columbia Blvd", lat: 45.608505, lon: -122.758927, times: ["3:10 PM"] },
  { stop_id: "13526", name: "N Columbia Blvd &amp; Lombard (Burgard)", lat: 45.612458, lon: -122.762611, times: ["3:10 PM"] },
  { stop_id: "3540", name: "13200 Block N Columbia", lat: 45.619386, lon: -122.771344, times: ["3:12 PM"] },
  { stop_id: "9308", name: "N Columbia &amp; Ramsey", lat: 45.623616, lon: -122.771502, times: ["3:13 PM"] },
  { stop_id: "9434", name: "14500 Block N Columbia", lat: 45.630388, lon: -122.77174, times: ["3:14 PM"] },
  { stop_id: "10163", name: "N Columbia &amp; Terminal 5 Access Rd", lat: 45.63503, lon: -122.769803, times: ["3:15 PM"] },
  { stop_id: "9197", name: "N Columbia &amp; Simmons", lat: 45.637387, lon: -122.766248, times: ["3:15 PM"] },
  { stop_id: "9439", name: "N Marine &amp; Leadbetter", lat: 45.63624, lon: -122.756287, times: ["3:16 PM"] },
  { stop_id: "13520", name: "N Leadbetter &amp; Bybee Lake Ct", lat: 45.630885, lon: -122.753469, times: ["3:18 PM"] },
  { stop_id: "9334", name: "N Marine &amp; Leadbetter", lat: 45.62984, lon: -122.744663, times: ["3:19 PM"] },
  { stop_id: "9440", name: "N Marine &amp; Bybee Lake Road", lat: 45.627641, lon: -122.740693, times: ["3:19 PM"] },
  { stop_id: "9441", name: "6100 Block N Marine", lat: 45.62487, lon: -122.735681, times: ["3:20 PM"] },
  { stop_id: "9199", name: "5900 Block N Marine", lat: 45.622832, lon: -122.731849, times: ["3:21 PM"] },
  { stop_id: "9200", name: "5700 Block N Marine", lat: 45.620579, lon: -122.727698, times: ["3:21 PM"] },
  { stop_id: "9442", name: "5300 Block N Marine", lat: 45.618628, lon: -122.723434, times: ["3:22 PM"] },
  { stop_id: "12465", name: "N Marine &amp; Portland Rd", lat: 45.613326, lon: -122.703591, times: ["3:24 PM"] },
  { stop_id: "10477", name: "2600 Block N Marine", lat: 45.609982, lon: -122.69438, times: ["3:25 PM"] },
  { stop_id: "11829", name: "N Marine &amp; Pier 99 St", lat: 45.606526, lon: -122.684989, times: ["3:27 PM"] },
  { stop_id: "9478", name: "1000 Block N Marine", lat: 45.602999, lon: -122.67708, times: ["3:29 PM"] },
  { stop_id: "9444", name: "N Marine &amp; Gantenbein", lat: 45.601746, lon: -122.669467, times: ["3:30 PM"] },
  { stop_id: "13818", name: "10400 Block NE 6th Dr", lat: 45.598352, lon: -122.660276, times: ["3:31 PM"] },
  { stop_id: "9477", name: "NE Middlefield Rd &amp; N Vancouver Way", lat: 45.59585, lon: -122.667541, times: ["3:34 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  üì¢ We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>