<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 70 - To Milwaukie | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-70-dir1-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 70 - To Milwaukie</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 70;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.589874, -122.635765],
  [45.589798, -122.635765],
  [45.589705, -122.635749],
  [45.589652, -122.635731],
  [45.589597, -122.635699],
  [45.589539, -122.635643],
  [45.589474, -122.635561],
  [45.589439, -122.635493],
  [45.589403, -122.635389],
  [45.589385, -122.63529],
  [45.589376, -122.635201],
  [45.589374, -122.635095],
  [45.5894, -122.632701],
  [45.589407, -122.632076],
  [45.589189, -122.632021],
  [45.589, -122.631985],
  [45.588836, -122.631966],
  [45.588684, -122.631958],
  [45.587995, -122.631954],
  [45.5871, -122.631951],
  [45.586236, -122.631958],
  [45.586113, -122.631968],
  [45.586006, -122.631985],
  [45.585832, -122.63202],
  [45.585669, -122.632074],
  [45.585527, -122.632135],
  [45.585053, -122.632389],
  [45.584674, -122.632594],
  [45.584424, -122.632709],
  [45.584234, -122.632779],
  [45.584063, -122.63283],
  [45.58395, -122.632858],
  [45.583828, -122.632881],
  [45.58343, -122.632944],
  [45.581987, -122.633162],
  [45.581849, -122.633183],
  [45.581735, -122.6332],
  [45.581341, -122.633259],
  [45.580946, -122.633318],
  [45.580834, -122.633334],
  [45.580815, -122.633336],
  [45.580639, -122.633356],
  [45.580344, -122.633374],
  [45.580075, -122.633375],
  [45.580075, -122.634025],
  [45.580075, -122.634704],
  [45.580075, -122.635367],
  [45.580074, -122.635506],
  [45.580075, -122.635725],
  [45.580076, -122.636523],
  [45.580084, -122.636757],
  [45.580097, -122.63693],
  [45.580099, -122.636961],
  [45.580123, -122.637155],
  [45.580141, -122.63726],
  [45.580149, -122.637305],
  [45.580198, -122.637533],
  [45.580242, -122.637694],
  [45.580303, -122.637896],
  [45.58033, -122.637979],
  [45.580372, -122.638104],
  [45.580586, -122.638751],
  [45.580612, -122.638828],
  [45.580703, -122.639101],
  [45.581285, -122.640856],
  [45.581456, -122.641371],
  [45.581622, -122.641867],
  [45.581754, -122.642228],
  [45.582079, -122.643059],
  [45.58219, -122.643346],
  [45.582101, -122.643423],
  [45.581916, -122.643577],
  [45.581671, -122.64377],
  [45.581604, -122.643815],
  [45.58152, -122.643856],
  [45.581482, -122.64387],
  [45.581473, -122.643874],
  [45.581407, -122.643891],
  [45.581361, -122.643897],
  [45.58132, -122.6439],
  [45.580963, -122.643904],
  [45.579622, -122.643919],
  [45.579396, -122.64392],
  [45.57806, -122.643928],
  [45.577365, -122.643938],
  [45.577123, -122.643942],
  [45.576649, -122.643944],
  [45.57656, -122.644004],
  [45.576532, -122.643879],
  [45.576474, -122.643608],
  [45.576452, -122.643502],
  [45.57643, -122.643398],
  [45.576401, -122.643265],
  [45.576242, -122.642518],
  [45.576217, -122.642402],
  [45.576164, -122.642164],
  [45.576105, -122.641899],
  [45.576072, -122.641751],
  [45.575976, -122.64133],
  [45.575749, -122.640354],
  [45.575713, -122.640198],
  [45.575591, -122.639675],
  [45.575466, -122.639106],
  [45.575296, -122.638297],
  [45.575255, -122.6381],
  [45.575175, -122.63772],
  [45.574972, -122.636752],
  [45.574921, -122.636513],
  [45.574914, -122.63648],
  [45.574848, -122.63617],
  [45.574788, -122.635891],
  [45.574742, -122.635678],
  [45.574559, -122.634826],
  [45.57454, -122.634739],
  [45.574321, -122.633748],
  [45.574241, -122.633371],
  [45.574025, -122.632382],
  [45.57388, -122.632134],
  [45.573815, -122.631817],
  [45.573769, -122.6316],
  [45.573724, -122.631417],
  [45.573686, -122.631293],
  [45.573652, -122.631198],
  [45.573572, -122.630992],
  [45.573544, -122.630934],
  [45.573508, -122.630869],
  [45.573438, -122.63079],
  [45.573405, -122.630761],
  [45.573374, -122.630741],
  [45.573352, -122.630732],
  [45.573326, -122.630723],
  [45.573278, -122.630711],
  [45.573216, -122.630703],
  [45.573127, -122.630648],
  [45.57259, -122.630647],
  [45.572344, -122.630647],
  [45.572109, -122.630645],
  [45.571894, -122.630643],
  [45.571072, -122.630644],
  [45.57069, -122.63065],
  [45.570151, -122.630656],
  [45.570133, -122.630656],
  [45.569985, -122.630656],
  [45.568312, -122.630655],
  [45.568292, -122.630682],
  [45.568246, -122.630683],
  [45.568218, -122.630684],
  [45.56819, -122.630651],
  [45.568108, -122.630652],
  [45.566781, -122.630659],
  [45.566412, -122.63066],
  [45.566296, -122.63066],
  [45.565982, -122.630661],
  [45.565926, -122.630661],
  [45.565125, -122.630661],
  [45.564545, -122.630661],
  [45.564459, -122.630662],
  [45.563886, -122.630662],
  [45.5635, -122.630663],
  [45.563051, -122.630665],
  [45.563, -122.630665],
  [45.562715, -122.630666],
  [45.56265, -122.630667],
  [45.562403, -122.630667],
  [45.562134, -122.630668],
  [45.561601, -122.630669],
  [45.561508, -122.630669],
  [45.561442, -122.630669],
  [45.560301, -122.63067],
  [45.559821, -122.630673],
  [45.559112, -122.630673],
  [45.559095, -122.630673],
  [45.559023, -122.630674],
  [45.558954, -122.630675],
  [45.5583, -122.630675],
  [45.557638, -122.630678],
  [45.556733, -122.630679],
  [45.556279, -122.630679],
  [45.555474, -122.63068],
  [45.555444, -122.63068],
  [45.555369, -122.630681],
  [45.555236, -122.630682],
  [45.555144, -122.630683],
  [45.55439, -122.630685],
  [45.554303, -122.630686],
  [45.553682, -122.630685],
  [45.553103, -122.630685],
  [45.553042, -122.630686],
  [45.552976, -122.630687],
  [45.552273, -122.630688],
  [45.551904, -122.63069],
  [45.551779, -122.630691],
  [45.55021, -122.630692],
  [45.550069, -122.630693],
  [45.549925, -122.630695],
  [45.549307, -122.63071],
  [45.548942, -122.630707],
  [45.548561, -122.630705],
  [45.548381, -122.630704],
  [45.548327, -122.630704],
  [45.548255, -122.630702],
  [45.548189, -122.630701],
  [45.547956, -122.6307],
  [45.547012, -122.630697],
  [45.546924, -122.630746],
  [45.546789, -122.630746],
  [45.546732, -122.630698],
  [45.546017, -122.630695],
  [45.545361, -122.630693],
  [45.545287, -122.630692],
  [45.544638, -122.630691],
  [45.543712, -122.630687],
  [45.54364, -122.630686],
  [45.54267, -122.630685],
  [45.542386, -122.630685],
  [45.542211, -122.630686],
  [45.542167, -122.630687],
  [45.542068, -122.630685],
  [45.54167, -122.630683],
  [45.540996, -122.63068],
  [45.540209, -122.63068],
  [45.540098, -122.63068],
  [45.539037, -122.630676],
  [45.538959, -122.630676],
  [45.538179, -122.630674],
  [45.538036, -122.630672],
  [45.537871, -122.630673],
  [45.537779, -122.630674],
  [45.537583, -122.630675],
  [45.537349, -122.630673],
  [45.537095, -122.630671],
  [45.53669, -122.630672],
  [45.536595, -122.630672],
  [45.536514, -122.630672],
  [45.536448, -122.630672],
  [45.536399, -122.630671],
  [45.536302, -122.630672],
  [45.536272, -122.630672],
  [45.535868, -122.630674],
  [45.535782, -122.630674],
  [45.535626, -122.630676],
  [45.53556, -122.630677],
  [45.535381, -122.630679],
  [45.535158, -122.630682],
  [45.535159, -122.630849],
  [45.53516, -122.631152],
  [45.53516, -122.631264],
  [45.53516, -122.631423],
  [45.53516, -122.632345],
  [45.535161, -122.633252],
  [45.535159, -122.633732],
  [45.535159, -122.634123],
  [45.53521, -122.634549],
  [45.535215, -122.634785],
  [45.535217, -122.634997],
  [45.535209, -122.635194],
  [45.535204, -122.635327],
  [45.535164, -122.635527],
  [45.535164, -122.636595],
  [45.535164, -122.636716],
  [45.535164, -122.636809],
  [45.535165, -122.637606],
  [45.535165, -122.637845],
  [45.535164, -122.638152],
  [45.535167, -122.639124],
  [45.535168, -122.639228],
  [45.535168, -122.639568],
  [45.535168, -122.640027],
  [45.535168, -122.640119],
  [45.535168, -122.640332],
  [45.535168, -122.640446],
  [45.535167, -122.640537],
  [45.535164, -122.640628],
  [45.53516, -122.640714],
  [45.535153, -122.640813],
  [45.535137, -122.641024],
  [45.53513, -122.641113],
  [45.535119, -122.6412],
  [45.535105, -122.641306],
  [45.535095, -122.641379],
  [45.535061, -122.641583],
  [45.535058, -122.641601],
  [45.535034, -122.641746],
  [45.535022, -122.641837],
  [45.535012, -122.641964],
  [45.53501, -122.642104],
  [45.535008, -122.642318],
  [45.535006, -122.642999],
  [45.535007, -122.643396],
  [45.535008, -122.643611],
  [45.535009, -122.643958],
  [45.535011, -122.644712],
  [45.535011, -122.644834],
  [45.534927, -122.644837],
  [45.534532, -122.644836],
  [45.534373, -122.644836],
  [45.534311, -122.644837],
  [45.534245, -122.644839],
  [45.533597, -122.644841],
  [45.533019, -122.644844],
  [45.532878, -122.644845],
  [45.532167, -122.64485],
  [45.531453, -122.644855],
  [45.531455, -122.645373],
  [45.53146, -122.646693],
  [45.531451, -122.647514],
  [45.531451, -122.647948],
  [45.531451, -122.648305],
  [45.531457, -122.648471],
  [45.531469, -122.648734],
  [45.531471, -122.649259],
  [45.531471, -122.649362],
  [45.53147, -122.649483],
  [45.53147, -122.649656],
  [45.53147, -122.650394],
  [45.531471, -122.650513],
  [45.531476, -122.651321],
  [45.531476, -122.651451],
  [45.531479, -122.651906],
  [45.531481, -122.652351],
  [45.531482, -122.652543],
  [45.531488, -122.654494],
  [45.531487, -122.654597],
  [45.531391, -122.654592],
  [45.530817, -122.654589],
  [45.53065, -122.654591],
  [45.530574, -122.654588],
  [45.530401, -122.654583],
  [45.530202, -122.654577],
  [45.530178, -122.654578],
  [45.530119, -122.654579],
  [45.530104, -122.65458],
  [45.530051, -122.654581],
  [45.529999, -122.654583],
  [45.529938, -122.654585],
  [45.529522, -122.654586],
  [45.529491, -122.654585],
  [45.529446, -122.654574],
  [45.529409, -122.654557],
  [45.529301, -122.654482],
  [45.529237, -122.654443],
  [45.529147, -122.654388],
  [45.52906, -122.654334],
  [45.529104, -122.654163],
  [45.529238, -122.653617],
  [45.529111, -122.653607],
  [45.529044, -122.653605],
  [45.528175, -122.653596],
  [45.528043, -122.653596],
  [45.527932, -122.65359],
  [45.527852, -122.653587],
  [45.527234, -122.653591],
  [45.526719, -122.653591],
  [45.52659, -122.653591],
  [45.526561, -122.653591],
  [45.525765, -122.653596],
  [45.524427, -122.653605],
  [45.524335, -122.653608],
  [45.523618, -122.653618],
  [45.523385, -122.653622],
  [45.52337, -122.653622],
  [45.523201, -122.653618],
  [45.523016, -122.653619],
  [45.522907, -122.653618],
  [45.522797, -122.653649],
  [45.52272, -122.653684],
  [45.522658, -122.653751],
  [45.52251, -122.654035],
  [45.522194, -122.654615],
  [45.521845, -122.654621],
  [45.521761, -122.65463],
  [45.521486, -122.654637],
  [45.520782, -122.654642],
  [45.520062, -122.654652],
  [45.519502, -122.654652],
  [45.519464, -122.654652],
  [45.519343, -122.654652],
  [45.519278, -122.654653],
  [45.518634, -122.654654],
  [45.51792, -122.654661],
  [45.517312, -122.654664],
  [45.517211, -122.654668],
  [45.517109, -122.654671],
  [45.516575, -122.654669],
  [45.516507, -122.654669],
  [45.516235, -122.654672],
  [45.515068, -122.654682],
  [45.514357, -122.654685],
  [45.513643, -122.65469],
  [45.51321, -122.654691],
  [45.513139, -122.654692],
  [45.513079, -122.654692],
  [45.512991, -122.654692],
  [45.51293, -122.654693],
  [45.512861, -122.654693],
  [45.512308, -122.654699],
  [45.512224, -122.654699],
  [45.512221, -122.654578],
  [45.512218, -122.654413],
  [45.512212, -122.654055],
  [45.512201, -122.653991],
  [45.512192, -122.653943],
  [45.512191, -122.65369],
  [45.512105, -122.653546],
  [45.512078, -122.653509],
  [45.511806, -122.653208],
  [45.511675, -122.653132],
  [45.511497, -122.652939],
  [45.511386, -122.652807],
  [45.511334, -122.652674],
  [45.510301, -122.651467],
  [45.510278, -122.65144],
  [45.510266, -122.651454],
  [45.510252, -122.651463],
  [45.510236, -122.651467],
  [45.510221, -122.651464],
  [45.510206, -122.651455],
  [45.510194, -122.651442],
  [45.510184, -122.651422],
  [45.510178, -122.6514],
  [45.510178, -122.651376],
  [45.510182, -122.651353],
  [45.51019, -122.651332],
  [45.508989, -122.649929],
  [45.50893, -122.649915],
  [45.508865, -122.649898],
  [45.50883, -122.649893],
  [45.508789, -122.649888],
  [45.508739, -122.649892],
  [45.508702, -122.64992],
  [45.508635, -122.649953],
  [45.508535, -122.649969],
  [45.508483, -122.649963],
  [45.50842, -122.64994],
  [45.508343, -122.649889],
  [45.508275, -122.649815],
  [45.508251, -122.649778],
  [45.508202, -122.649672],
  [45.508176, -122.649582],
  [45.508163, -122.649497],
  [45.508159, -122.649426],
  [45.508162, -122.649353],
  [45.508173, -122.649273],
  [45.508167, -122.649187],
  [45.508158, -122.64912],
  [45.508147, -122.649066],
  [45.508097, -122.648893],
  [45.50693, -122.64756],
  [45.506894, -122.647518],
  [45.506882, -122.647532],
  [45.506867, -122.647543],
  [45.506852, -122.647548],
  [45.506836, -122.64755],
  [45.50682, -122.647546],
  [45.506805, -122.647537],
  [45.506792, -122.647524],
  [45.50678, -122.647507],
  [45.506772, -122.647487],
  [45.506767, -122.647464],
  [45.506765, -122.64744],
  [45.506767, -122.647416],
  [45.506773, -122.647394],
  [45.506782, -122.647374],
  [45.50515, -122.645471],
  [45.505097, -122.645412],
  [45.505041, -122.64535],
  [45.504923, -122.645219],
  [45.504822, -122.645075],
  [45.504821, -122.644695],
  [45.50482, -122.644603],
  [45.504564, -122.644605],
  [45.504111, -122.644609],
  [45.503399, -122.644619],
  [45.502836, -122.644623],
  [45.502685, -122.644624],
  [45.502003, -122.644626],
  [45.501332, -122.644628],
  [45.500849, -122.644634],
  [45.500625, -122.644636],
  [45.499798, -122.644642],
  [45.499451, -122.644644],
  [45.499355, -122.644646],
  [45.499426, -122.644746],
  [45.499535, -122.645177],
  [45.499577, -122.645383],
  [45.499626, -122.645653],
  [45.499742, -122.646358],
  [45.499788, -122.646692],
  [45.499848, -122.647216],
  [45.499889, -122.647707],
  [45.499929, -122.648246],
  [45.499985, -122.648736],
  [45.50002, -122.649018],
  [45.500075, -122.649358],
  [45.500131, -122.649655],
  [45.500192, -122.649953],
  [45.500291, -122.650419],
  [45.500382, -122.650817],
  [45.500492, -122.65124],
  [45.500544, -122.651444],
  [45.500631, -122.651807],
  [45.500798, -122.652544],
  [45.500794, -122.652719],
  [45.500841, -122.652905],
  [45.500891, -122.653098],
  [45.500939, -122.653282],
  [45.501035, -122.653439],
  [45.501144, -122.653851],
  [45.501192, -122.654071],
  [45.501223, -122.654225],
  [45.501108, -122.654223],
  [45.501018, -122.654221],
  [45.500696, -122.654223],
  [45.500663, -122.654222],
  [45.500569, -122.654223],
  [45.50037, -122.654223],
  [45.500282, -122.654223],
  [45.500204, -122.654223],
  [45.499681, -122.65422],
  [45.499614, -122.654219],
  [45.498902, -122.654219],
  [45.498862, -122.654219],
  [45.49877, -122.654203],
  [45.498206, -122.654049],
  [45.498183, -122.654043],
  [45.497507, -122.653846],
  [45.497177, -122.653752],
  [45.496789, -122.653641],
  [45.496378, -122.653526],
  [45.496068, -122.653434],
  [45.495399, -122.653243],
  [45.495335, -122.653224],
  [45.494973, -122.653112],
  [45.494122, -122.65284],
  [45.493999, -122.6528],
  [45.493059, -122.652383],
  [45.492702, -122.652219],
  [45.492297, -122.65204],
  [45.492144, -122.65197],
  [45.491999, -122.651902],
  [45.491514, -122.651686],
  [45.491437, -122.651652],
  [45.491307, -122.651593],
  [45.490851, -122.651394],
  [45.490668, -122.651309],
  [45.490407, -122.651188],
  [45.49033, -122.651157],
  [45.490251, -122.651126],
  [45.490021, -122.651072],
  [45.489612, -122.650976],
  [45.489483, -122.650944],
  [45.489168, -122.650866],
  [45.488864, -122.65079],
  [45.488735, -122.650758],
  [45.488372, -122.650667],
  [45.488198, -122.650623],
  [45.487557, -122.650419],
  [45.487048, -122.65026],
  [45.486612, -122.650125],
  [45.486355, -122.650034],
  [45.48603, -122.649895],
  [45.485981, -122.649874],
  [45.485712, -122.649756],
  [45.485655, -122.649733],
  [45.485321, -122.649595],
  [45.485226, -122.649587],
  [45.483915, -122.649609],
  [45.483855, -122.649611],
  [45.48355, -122.649616],
  [45.483304, -122.649624],
  [45.483122, -122.649629],
  [45.483082, -122.64963],
  [45.482672, -122.649639],
  [45.482363, -122.649647],
  [45.482001, -122.649656],
  [45.481787, -122.649661],
  [45.481667, -122.64966],
  [45.481527, -122.649649],
  [45.480927, -122.649583],
  [45.480845, -122.649574],
  [45.48003, -122.649483],
  [45.479326, -122.649409],
  [45.479055, -122.64938],
  [45.47862, -122.649334],
  [45.478389, -122.649307],
  [45.478347, -122.649302],
  [45.478227, -122.649288],
  [45.477959, -122.649257],
  [45.477892, -122.649249],
  [45.477594, -122.649213],
  [45.4775, -122.649201],
  [45.47733, -122.649181],
  [45.477294, -122.649177],
  [45.477183, -122.649164],
  [45.477084, -122.649152],
  [45.476992, -122.649142],
  [45.47693, -122.649134],
  [45.476756, -122.649112],
  [45.47654, -122.649086],
  [45.476465, -122.649076],
  [45.476418, -122.649071],
  [45.476152, -122.649039],
  [45.475902, -122.649008],
  [45.475526, -122.648963],
  [45.475331, -122.64894],
  [45.475229, -122.648927],
  [45.475144, -122.648917],
  [45.474968, -122.648895],
  [45.47473, -122.648867],
  [45.474431, -122.64883],
  [45.474071, -122.648787],
  [45.473795, -122.648756],
  [45.47372, -122.648745],
  [45.473457, -122.648713],
  [45.472998, -122.648656],
  [45.472945, -122.64865],
  [45.472703, -122.648622],
  [45.472341, -122.648579],
  [45.472291, -122.648573],
  [45.472062, -122.648545],
  [45.471915, -122.648527],
  [45.471565, -122.648484],
  [45.470862, -122.648398],
  [45.470136, -122.648311],
  [45.469949, -122.648288],
  [45.469437, -122.648224],
  [45.46861, -122.648117],
  [45.468297, -122.648078],
  [45.467928, -122.648029],
  [45.467882, -122.648022],
  [45.467674, -122.647996],
  [45.467174, -122.647931],
  [45.467066, -122.647916],
  [45.466969, -122.647903],
  [45.466462, -122.647837],
  [45.466311, -122.647821],
  [45.466257, -122.647809],
  [45.466206, -122.647785],
  [45.466162, -122.647756],
  [45.466111, -122.647706],
  [45.465748, -122.647229],
  [45.465658, -122.647124],
  [45.465622, -122.647095],
  [45.465573, -122.647069],
  [45.465504, -122.647046],
  [45.465448, -122.647041],
  [45.465167, -122.647046],
  [45.465122, -122.647083],
  [45.465034, -122.647082],
  [45.464954, -122.647081],
  [45.464893, -122.647044],
  [45.464802, -122.647043],
  [45.464646, -122.647042],
  [45.464571, -122.647041],
  [45.464471, -122.64704],
  [45.464397, -122.647039],
  [45.464318, -122.64704],
  [45.464098, -122.647041],
  [45.464047, -122.647041],
  [45.464003, -122.647041],
  [45.463771, -122.647042],
  [45.463606, -122.647042],
  [45.4632, -122.647044],
  [45.462894, -122.647045],
  [45.462614, -122.647045],
  [45.462559, -122.647045],
  [45.462181, -122.647044],
  [45.46147, -122.647048],
  [45.461091, -122.647049],
  [45.460886, -122.64705],
  [45.460758, -122.64705],
  [45.460335, -122.64705],
  [45.460041, -122.64705],
  [45.459876, -122.64705],
  [45.45933, -122.64705],
  [45.459013, -122.647052],
  [45.458894, -122.647042],
  [45.458799, -122.647026],
  [45.458747, -122.647004],
  [45.458662, -122.646969],
  [45.458497, -122.646891],
  [45.458355, -122.646843],
  [45.458286, -122.646832],
  [45.458214, -122.646818],
  [45.458024, -122.64679],
  [45.456847, -122.646649],
  [45.456417, -122.646593],
  [45.455715, -122.646508],
  [45.455008, -122.646428],
  [45.454734, -122.646395],
  [45.454279, -122.646338],
  [45.453997, -122.646306],
  [45.453878, -122.646289],
  [45.45365, -122.646252],
  [45.45357, -122.64623],
  [45.453272, -122.646139],
  [45.453257, -122.646135],
  [45.453174, -122.646112],
  [45.453068, -122.646072],
  [45.452825, -122.645982],
  [45.45246, -122.645851],
  [45.452266, -122.645767],
  [45.451857, -122.645538],
  [45.451401, -122.645263],
  [45.450991, -122.645046],
  [45.450316, -122.644712],
  [45.449938, -122.644525],
  [45.449816, -122.64447],
  [45.449638, -122.644386],
  [45.449021, -122.644101],
  [45.44865, -122.643933],
  [45.448293, -122.64377],
  [45.447885, -122.643589],
  [45.447536, -122.643455],
  [45.447466, -122.643426],
  [45.44737, -122.643388],
  [45.447225, -122.643346],
  [45.447127, -122.643319],
  [45.447013, -122.643294],
  [45.446949, -122.643284],
  [45.446892, -122.643276],
  [45.446745, -122.643261],
  [45.446578, -122.643252],
  [45.446402, -122.643258],
  [45.446238, -122.643271],
  [45.446162, -122.643277],
  [45.445981, -122.643308],
  [45.445822, -122.643338],
  [45.445613, -122.643397],
  [45.445546, -122.643395],
  [45.445511, -122.643386],
  [45.445469, -122.643359],
  [45.445438, -122.643324],
  [45.445408, -122.643266],
  [45.445382, -122.643173],
  [45.445374, -122.643067],
  [45.445377, -122.642967],
  [45.445385, -122.642861],
  [45.445397, -122.642711],
  [45.445405, -122.642606],
  [45.445506, -122.641754],
  [45.445522, -122.641654],
  [45.445438, -122.641633],
  [45.445061, -122.641542],
  [45.44488, -122.641499],
  [45.444784, -122.641478],
  [45.4448, -122.641333],
  [45.444843, -122.640938],
  [45.444867, -122.640731]
];

const stopNames = {
  "118": "NE 21st &amp; Argyle",
  "635": "NE Broadway &amp; 24th",
  "637": "NE Broadway &amp; 26th",
  "639": "NE Broadway &amp; 28th",
  "644": "NE Broadway &amp; 33rd",
  "2599": "SE Hawthorne &amp; 12th",
  "3302": "SE Ladd &amp; Division",
  "3304": "SE Ladd &amp; Ladd Circle",
  "3308": "SE Ladd &amp; Lavender",
  "3309": "SE Ladd &amp; Palm St",
  "3909": "SE Milwaukie &amp; Center",
  "3911": "SE Milwaukie &amp; Claybourne",
  "3916": "SE Milwaukie &amp; Haig",
  "3921": "SE Milwaukie &amp; Insley",
  "3928": "SE Milwaukie &amp; Long",
  "3931": "SE Milwaukie &amp; Mall",
  "3935": "SE Milwaukie &amp; Mitchell",
  "3938": "SE Milwaukie &amp; Ramona",
  "3946": "SE Milwaukie &amp; Tolman",
  "4045": "NE Multnomah &amp; 13th",
  "4049": "NE Multnomah &amp; 16th",
  "6542": "SE 11th &amp; Belmont",
  "6551": "SE 11th &amp; Madison",
  "6554": "SE 11th &amp; Stark",
  "6577": "NE 12th &amp; Couch",
  "6580": "NE 12th &amp; Glisan",
  "6852": "SE 17th &amp; Clatsop",
  "6872": "SE 17th &amp; Lava",
  "6886": "SE 17th &amp; Ochoco St",
  "6896": "SE 17th &amp; Tacoma",
  "6900": "SE 17th &amp; Umatilla",
  "6902": "SE 17th &amp; Waverly",
  "7106": "NE 21st &amp; Clackamas",
  "7139": "NE 21st &amp; Weidler",
  "7361": "NE 33rd &amp; Ainsworth",
  "7363": "NE 33rd &amp; Alberta",
  "7366": "NE 33rd &amp; Brazee",
  "7370": "NE 33rd &amp; Dekum",
  "7372": "NE 33rd &amp; Emerson",
  "7374": "NE 33rd &amp; Fremont",
  "7377": "NE 33rd &amp; Hancock",
  "7379": "NE 33rd &amp; Holman",
  "7381": "NE 33rd &amp; Jarrett",
  "7382": "NE 33rd &amp; Killingsworth",
  "7386": "NE 33rd &amp; Knott",
  "7388": "NE 33rd &amp; Rosa Parks Way",
  "7391": "NE 33rd &amp; Prescott",
  "7394": "NE 33rd &amp; Shaver",
  "7396": "NE 33rd &amp; Siskiyou",
  "7397": "NE 33rd &amp; Skidmore",
  "7400": "NE 33rd &amp; Stanton",
  "7403": "NE 33rd &amp; US Grant Pl",
  "8304": "7500 Block NE 21st",
  "8499": "NE Columbia Blvd &amp; 29th",
  "8500": "NE Columbia Blvd &amp; 27th",
  "8507": "NE Columbia Blvd &amp; 24th",
  "9368": "NE Sunderland &amp; Columbia River Corr Inst",
  "9369": "NE 33rd Dr &amp; Elrod Dr",
  "9371": "2400 Block NE Riverside Way",
  "9402": "NE 21st &amp; Riverside Way",
  "9414": "NE Sunderland &amp; 33rd Dr (In)",
  "9549": "NE Riverside Way &amp; 33rd Dr",
  "10472": "SE Milwaukie &amp; Powell",
  "10986": "NE 11th &amp; Holladay",
  "13477": "SE Jackson &amp; Main",
  "13892": "NE Multnomah &amp; 21st",
  "14245": "SE Milwaukie &amp; Rex St",
  "14414": "SE Milwaukie &amp; Lexington",
  "14478": "SE 21st &amp; Powell"
};

const stops = [
  { stop_id: "9368", name: "NE Sunderland &amp; Columbia River Corr Inst", lat: 45.589872, lon: -122.635888, times: ["6:12 PM", "6:43 PM", "7:15 PM", "7:47 PM", "8:18 PM", "8:49 PM", "9:19 PM", "9:50 PM"] },
  { stop_id: "9414", name: "NE Sunderland &amp; 33rd Dr (In)", lat: 45.589336, lon: -122.632698, times: ["6:12 PM", "6:43 PM", "7:15 PM", "7:47 PM", "8:18 PM", "8:49 PM", "9:19 PM", "9:50 PM"] },
  { stop_id: "9369", name: "NE 33rd Dr &amp; Elrod Dr", lat: 45.581996, lon: -122.633283, times: ["6:14 PM", "6:45 PM", "7:17 PM", "7:49 PM", "8:20 PM", "8:51 PM", "9:21 PM", "9:52 PM"] },
  { stop_id: "9549", name: "NE Riverside Way &amp; 33rd Dr", lat: 45.580133, lon: -122.635505, times: ["6:15 PM", "6:46 PM", "7:18 PM", "7:50 PM", "8:21 PM", "8:52 PM", "9:22 PM", "9:53 PM"] },
  { stop_id: "9371", name: "2400 Block NE Riverside Way", lat: 45.580659, lon: -122.638798, times: ["6:15 PM", "6:46 PM", "7:18 PM", "7:50 PM", "8:21 PM", "8:52 PM", "9:22 PM", "9:53 PM"] },
  { stop_id: "9402", name: "NE 21st &amp; Riverside Way", lat: 45.581496, lon: -122.64397, times: ["6:16 PM", "6:47 PM", "7:19 PM", "7:51 PM", "8:22 PM", "8:53 PM", "9:23 PM", "9:54 PM"] },
  { stop_id: "118", name: "NE 21st &amp; Argyle", lat: 45.579391, lon: -122.644007, times: ["6:17 PM", "6:48 PM", "7:19 PM", "7:51 PM", "8:22 PM", "8:53 PM", "9:23 PM", "9:54 PM"] },
  { stop_id: "8304", name: "7500 Block NE 21st", lat: 45.577361, lon: -122.644026, times: ["6:17 PM", "6:48 PM", "7:20 PM", "7:52 PM", "8:23 PM", "8:54 PM", "9:24 PM", "9:55 PM"] },
  { stop_id: "8507", name: "NE Columbia Blvd &amp; 24th", lat: 45.575662, lon: -122.640392, times: ["6:18 PM", "6:49 PM", "7:21 PM", "7:53 PM", "8:24 PM", "8:55 PM", "9:25 PM", "9:56 PM"] },
  { stop_id: "8500", name: "NE Columbia Blvd &amp; 27th", lat: 45.575206, lon: -122.638335, times: ["6:19 PM", "6:50 PM", "7:21 PM", "7:53 PM", "8:24 PM", "8:55 PM", "9:25 PM", "9:56 PM"] },
  { stop_id: "8499", name: "NE Columbia Blvd &amp; 29th", lat: 45.574849, lon: -122.636544, times: ["6:19 PM", "6:50 PM", "7:21 PM", "7:53 PM", "8:24 PM", "8:55 PM", "9:25 PM", "9:56 PM"] },
  { stop_id: "7370", name: "NE 33rd &amp; Dekum", lat: 45.572106, lon: -122.630733, times: ["6:20 PM", "6:51 PM", "7:23 PM", "7:55 PM", "8:26 PM", "8:57 PM", "9:27 PM", "9:58 PM"] },
  { stop_id: "7388", name: "NE 33rd &amp; Rosa Parks Way", lat: 45.57013, lon: -122.630731, times: ["6:21 PM", "6:52 PM", "7:23 PM", "7:55 PM", "8:26 PM", "8:57 PM", "9:27 PM", "9:58 PM"] },
  { stop_id: "7379", name: "NE 33rd &amp; Holman", lat: 45.568108, lon: -122.630739, times: ["6:21 PM", "6:52 PM", "7:23 PM", "7:55 PM", "8:26 PM", "8:57 PM", "9:27 PM", "9:58 PM"] },
  { stop_id: "7361", name: "NE 33rd &amp; Ainsworth", lat: 45.565978, lon: -122.63073, times: ["6:22 PM", "6:53 PM", "7:24 PM", "7:56 PM", "8:27 PM", "8:58 PM", "9:28 PM", "9:59 PM"] },
  { stop_id: "7381", name: "NE 33rd &amp; Jarrett", lat: 45.564559, lon: -122.630706, times: ["6:22 PM", "6:53 PM", "7:24 PM", "7:56 PM", "8:27 PM", "8:58 PM", "9:28 PM", "9:59 PM"] },
  { stop_id: "7382", name: "NE 33rd &amp; Killingsworth", lat: 45.563015, lon: -122.630742, times: ["6:23 PM", "6:54 PM", "7:25 PM", "7:57 PM", "8:28 PM", "8:59 PM", "9:29 PM", "10:00 PM"] },
  { stop_id: "7372", name: "NE 33rd &amp; Emerson", lat: 45.561609, lon: -122.630712, times: ["6:23 PM", "6:54 PM", "7:25 PM", "7:57 PM", "8:28 PM", "8:59 PM", "9:29 PM", "10:00 PM"] },
  { stop_id: "7363", name: "NE 33rd &amp; Alberta", lat: 45.559118, lon: -122.630742, times: ["6:24 PM", "6:55 PM", "7:26 PM", "7:58 PM", "8:29 PM", "8:59 PM", "9:29 PM", "10:00 PM"] },
  { stop_id: "7391", name: "NE 33rd &amp; Prescott", lat: 45.55547, lon: -122.63076, times: ["6:25 PM", "6:56 PM", "7:27 PM", "7:59 PM", "8:30 PM", "9:00 PM", "9:30 PM", "10:01 PM"] },
  { stop_id: "7397", name: "NE 33rd &amp; Skidmore", lat: 45.554402, lon: -122.630754, times: ["6:25 PM", "6:56 PM", "7:27 PM", "7:59 PM", "8:30 PM", "9:00 PM", "9:30 PM", "10:01 PM"] },
  { stop_id: "7394", name: "NE 33rd &amp; Shaver", lat: 45.5519, lon: -122.630767, times: ["6:26 PM", "6:57 PM", "7:28 PM", "8:00 PM", "8:31 PM", "9:01 PM", "9:31 PM", "10:02 PM"] },
  { stop_id: "7374", name: "NE 33rd &amp; Fremont", lat: 45.548379, lon: -122.63078, times: ["6:27 PM", "6:58 PM", "7:29 PM", "8:01 PM", "8:32 PM", "9:02 PM", "9:32 PM", "10:03 PM"] },
  { stop_id: "7396", name: "NE 33rd &amp; Siskiyou", lat: 45.545358, lon: -122.630771, times: ["6:27 PM", "6:58 PM", "7:29 PM", "8:01 PM", "8:32 PM", "9:02 PM", "9:32 PM", "10:03 PM"] },
  { stop_id: "7400", name: "NE 33rd &amp; Stanton", lat: 45.543711, lon: -122.630759, times: ["6:28 PM", "6:59 PM", "7:30 PM", "8:02 PM", "8:33 PM", "9:03 PM", "9:33 PM", "10:04 PM"] },
  { stop_id: "7386", name: "NE 33rd &amp; Knott", lat: 45.542212, lon: -122.63076, times: ["6:28 PM", "6:59 PM", "7:30 PM", "8:02 PM", "8:33 PM", "9:03 PM", "9:33 PM", "10:04 PM"] },
  { stop_id: "7366", name: "NE 33rd &amp; Brazee", lat: 45.540204, lon: -122.630741, times: ["6:29 PM", "7:00 PM", "7:31 PM", "8:03 PM", "8:34 PM", "9:04 PM", "9:34 PM", "10:05 PM"] },
  { stop_id: "7403", name: "NE 33rd &amp; US Grant Pl", lat: 45.537868, lon: -122.630749, times: ["6:30 PM", "7:01 PM", "7:32 PM", "8:04 PM", "8:35 PM", "9:05 PM", "9:35 PM", "10:06 PM"] },
  { stop_id: "7377", name: "NE 33rd &amp; Hancock", lat: 45.536591, lon: -122.630745, times: ["6:30 PM", "7:01 PM", "7:32 PM", "8:04 PM", "8:35 PM", "9:05 PM", "9:35 PM", "10:06 PM"] },
  { stop_id: "644", name: "NE Broadway &amp; 33rd", lat: 45.535239, lon: -122.63115, times: ["6:31 PM", "7:02 PM", "7:33 PM", "8:05 PM", "8:36 PM", "9:06 PM", "9:36 PM", "10:07 PM"] },
  { stop_id: "639", name: "NE Broadway &amp; 28th", lat: 45.535262, lon: -122.636596, times: ["6:32 PM", "7:03 PM", "7:34 PM", "8:06 PM", "8:37 PM", "9:07 PM", "9:37 PM", "10:08 PM"] },
  { stop_id: "637", name: "NE Broadway &amp; 26th", lat: 45.535238, lon: -122.639566, times: ["6:33 PM", "7:04 PM", "7:35 PM", "8:07 PM", "8:38 PM", "9:08 PM", "9:38 PM", "10:09 PM"] },
  { stop_id: "635", name: "NE Broadway &amp; 24th", lat: 45.535122, lon: -122.641606, times: ["6:34 PM", "7:05 PM", "7:36 PM", "8:07 PM", "8:38 PM", "9:08 PM", "9:38 PM", "10:09 PM"] },
  { stop_id: "7139", name: "NE 21st &amp; Weidler", lat: 45.534522, lon: -122.644914, times: ["6:35 PM", "7:06 PM", "7:37 PM", "8:08 PM", "8:39 PM", "9:09 PM", "9:39 PM", "10:10 PM"] },
  { stop_id: "7106", name: "NE 21st &amp; Clackamas", lat: 45.533019, lon: -122.644919, times: ["6:36 PM", "7:07 PM", "7:38 PM", "8:09 PM", "8:40 PM", "9:10 PM", "9:40 PM", "10:11 PM"] },
  { stop_id: "13892", name: "NE Multnomah &amp; 21st", lat: 45.531518, lon: -122.645372, times: ["6:37 PM", "7:08 PM", "7:39 PM", "8:10 PM", "8:41 PM", "9:11 PM", "9:41 PM", "10:12 PM"] },
  { stop_id: "4049", name: "NE Multnomah &amp; 16th", lat: 45.531549, lon: -122.649259, times: ["6:38 PM", "7:09 PM", "7:40 PM", "8:11 PM", "8:42 PM", "9:12 PM", "9:42 PM", "10:13 PM"] },
  { stop_id: "4045", name: "NE Multnomah &amp; 13th", lat: 45.531571, lon: -122.65235, times: ["6:39 PM", "7:10 PM", "7:41 PM", "8:11 PM", "8:42 PM", "9:12 PM", "9:42 PM", "10:13 PM"] },
  { stop_id: "10986", name: "NE 11th &amp; Holladay", lat: 45.530399, lon: -122.654674, times: ["6:41 PM", "7:12 PM", "7:43 PM", "8:13 PM", "8:44 PM", "9:14 PM", "9:44 PM", "10:15 PM"] },
  { stop_id: "6580", name: "NE 12th &amp; Glisan", lat: 45.526719, lon: -122.653684, times: ["6:12 PM", "6:43 PM", "7:13 PM", "7:44 PM", "8:14 PM", "8:45 PM", "9:15 PM", "9:45 PM"] },
  { stop_id: "6577", name: "NE 12th &amp; Couch", lat: 45.523369, lon: -122.653723, times: ["6:14 PM", "6:45 PM", "7:15 PM", "7:46 PM", "8:16 PM", "8:47 PM", "9:17 PM", "9:47 PM"] },
  { stop_id: "6554", name: "SE 11th &amp; Stark", lat: 45.519432, lon: -122.654725, times: ["6:16 PM", "6:47 PM", "7:17 PM", "7:48 PM", "8:18 PM", "8:48 PM", "9:18 PM", "9:48 PM"] },
  { stop_id: "6542", name: "SE 11th &amp; Belmont", lat: 45.516235, lon: -122.654737, times: ["6:18 PM", "6:48 PM", "7:18 PM", "7:49 PM", "8:19 PM", "8:49 PM", "9:19 PM", "9:49 PM"] },
  { stop_id: "6551", name: "SE 11th &amp; Madison", lat: 45.513139, lon: -122.654763, times: ["6:20 PM", "6:50 PM", "7:20 PM", "7:51 PM", "8:21 PM", "8:51 PM", "9:21 PM", "9:51 PM"] },
  { stop_id: "2599", name: "SE Hawthorne &amp; 12th", lat: 45.512141, lon: -122.654012, times: ["6:20 PM", "6:50 PM", "7:20 PM", "7:51 PM", "8:21 PM", "8:51 PM", "9:21 PM", "9:51 PM"] },
  { stop_id: "3309", name: "SE Ladd &amp; Palm St", lat: 45.51026, lon: -122.651532, times: ["6:21 PM", "6:51 PM", "7:21 PM", "7:52 PM", "8:22 PM", "8:52 PM", "9:22 PM", "9:52 PM"] },
  { stop_id: "3304", name: "SE Ladd &amp; Ladd Circle", lat: 45.508923, lon: -122.649961, times: ["6:22 PM", "6:52 PM", "7:22 PM", "7:53 PM", "8:23 PM", "8:53 PM", "9:23 PM", "9:53 PM"] },
  { stop_id: "3308", name: "SE Ladd &amp; Lavender", lat: 45.506906, lon: -122.647603, times: ["6:23 PM", "6:53 PM", "7:23 PM", "7:54 PM", "8:24 PM", "8:54 PM", "9:24 PM", "9:54 PM"] },
  { stop_id: "3302", name: "SE Ladd &amp; Division", lat: 45.504976, lon: -122.64537, times: ["6:24 PM", "6:54 PM", "7:24 PM", "7:55 PM", "8:25 PM", "8:55 PM", "9:25 PM", "9:55 PM"] },
  { stop_id: "14478", name: "SE 21st &amp; Powell", lat: 45.4998, lon: -122.644711, times: ["6:26 PM", "6:56 PM", "7:26 PM", "7:57 PM", "8:27 PM", "8:57 PM", "9:27 PM", "9:57 PM"] },
  { stop_id: "10472", name: "SE Milwaukie &amp; Powell", lat: 45.500663, lon: -122.654335, times: ["6:30 PM", "7:00 PM", "7:30 PM", "8:00 PM", "8:30 PM", "9:00 PM", "9:30 PM", "10:00 PM"] },
  { stop_id: "3916", name: "SE Milwaukie &amp; Haig", lat: 45.498193, lon: -122.654144, times: ["6:30 PM", "7:00 PM", "7:30 PM", "8:00 PM", "8:30 PM", "9:00 PM", "9:30 PM", "10:00 PM"] },
  { stop_id: "3909", name: "SE Milwaukie &amp; Center", lat: 45.494113, lon: -122.652899, times: ["6:31 PM", "7:01 PM", "7:31 PM", "8:01 PM", "8:31 PM", "9:01 PM", "9:31 PM", "10:01 PM"] },
  { stop_id: "3931", name: "SE Milwaukie &amp; Mall", lat: 45.491495, lon: -122.651771, times: ["6:32 PM", "7:02 PM", "7:32 PM", "8:02 PM", "8:32 PM", "9:02 PM", "9:32 PM", "10:02 PM"] },
  { stop_id: "3928", name: "SE Milwaukie &amp; Long", lat: 45.488363, lon: -122.650745, times: ["6:33 PM", "7:03 PM", "7:33 PM", "8:03 PM", "8:33 PM", "9:03 PM", "9:33 PM", "10:03 PM"] },
  { stop_id: "3935", name: "SE Milwaukie &amp; Mitchell", lat: 45.486015, lon: -122.649966, times: ["6:34 PM", "7:04 PM", "7:34 PM", "8:04 PM", "8:33 PM", "9:03 PM", "9:33 PM", "10:03 PM"] },
  { stop_id: "3921", name: "SE Milwaukie &amp; Insley", lat: 45.483855, lon: -122.649675, times: ["6:34 PM", "7:04 PM", "7:34 PM", "8:04 PM", "8:34 PM", "9:04 PM", "9:34 PM", "10:04 PM"] },
  { stop_id: "3938", name: "SE Milwaukie &amp; Ramona", lat: 45.480924, lon: -122.649656, times: ["6:35 PM", "7:05 PM", "7:35 PM", "8:05 PM", "8:34 PM", "9:04 PM", "9:34 PM", "10:04 PM"] },
  { stop_id: "3946", name: "SE Milwaukie &amp; Tolman", lat: 45.47729, lon: -122.64925, times: ["6:36 PM", "7:06 PM", "7:36 PM", "8:06 PM", "8:35 PM", "9:05 PM", "9:35 PM", "10:05 PM"] },
  { stop_id: "3911", name: "SE Milwaukie &amp; Claybourne", lat: 45.475223, lon: -122.648984, times: ["6:36 PM", "7:06 PM", "7:36 PM", "8:06 PM", "8:36 PM", "9:06 PM", "9:36 PM", "10:06 PM"] },
  { stop_id: "14245", name: "SE Milwaukie &amp; Rex St", lat: 45.469946, lon: -122.648362, times: ["6:38 PM", "7:08 PM", "7:38 PM", "8:08 PM", "8:37 PM", "9:07 PM", "9:37 PM", "10:07 PM"] },
  { stop_id: "14414", name: "SE Milwaukie &amp; Lexington", lat: 45.466966, lon: -122.647982, times: ["6:39 PM", "7:09 PM", "7:39 PM", "8:09 PM", "8:38 PM", "9:08 PM", "9:38 PM", "10:08 PM"] },
  { stop_id: "6896", name: "SE 17th &amp; Tacoma", lat: 45.46401, lon: -122.64713, times: ["6:40 PM", "7:10 PM", "7:40 PM", "8:10 PM", "8:39 PM", "9:09 PM", "9:39 PM", "10:09 PM"] },
  { stop_id: "6900", name: "SE 17th &amp; Umatilla", lat: 45.46256, lon: -122.647116, times: ["6:10 PM", "6:40 PM", "7:10 PM", "7:40 PM", "8:10 PM", "8:39 PM", "9:09 PM", "9:39 PM"] },
  { stop_id: "6852", name: "SE 17th &amp; Clatsop", lat: 45.460893, lon: -122.647117, times: ["6:11 PM", "6:41 PM", "7:11 PM", "7:40 PM", "8:10 PM", "8:39 PM", "9:09 PM", "9:39 PM"] },
  { stop_id: "6886", name: "SE 17th &amp; Ochoco St", lat: 45.458725, lon: -122.647112, times: ["6:11 PM", "6:41 PM", "7:11 PM", "7:41 PM", "8:11 PM", "8:40 PM", "9:10 PM", "9:40 PM"] },
  { stop_id: "6902", name: "SE 17th &amp; Waverly", lat: 45.453257, lon: -122.646234, times: ["6:13 PM", "6:43 PM", "7:13 PM", "7:43 PM", "8:13 PM", "8:42 PM", "9:12 PM", "9:42 PM"] },
  { stop_id: "6872", name: "SE 17th &amp; Lava", lat: 45.446939, lon: -122.643374, times: ["6:15 PM", "6:45 PM", "7:15 PM", "7:44 PM", "8:14 PM", "8:43 PM", "9:13 PM", "9:43 PM"] },
  { stop_id: "13477", name: "SE Jackson &amp; Main", lat: 45.444786, lon: -122.640713, times: ["6:17 PM", "6:47 PM", "7:17 PM", "7:46 PM", "8:16 PM", "8:45 PM", "9:15 PM", "9:45 PM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>