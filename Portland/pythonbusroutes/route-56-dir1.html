<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 56 - To Marquam Hill | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 100px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0.5rem 0;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>

<body>
 
 <div class="ad-banner">
    <a href="advertise.html" target="_blank">
      <img src="assets/ad-placeholder.png" alt="Advertise Here">
    </a>
  </div>

 <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 56 - To Marquam Hill</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 56;
    const direction = parseInt(1);

    // Initialize map
    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    // Injected shape & stop data
    const shapeOutbound = [
  [45.452696, -122.778895],
  [45.45279, -122.778894],
  [45.452859, -122.778892],
  [45.452865, -122.77906],
  [45.452876, -122.779268],
  [45.452887, -122.779468],
  [45.45289, -122.779519],
  [45.452904, -122.77968],
  [45.452926, -122.779837],
  [45.452929, -122.779929],
  [45.452932, -122.780172],
  [45.452942, -122.780237],
  [45.452954, -122.780286],
  [45.452978, -122.780338],
  [45.453018, -122.780406],
  [45.453082, -122.780488],
  [45.453158, -122.780569],
  [45.453221, -122.780645],
  [45.453313, -122.780552],
  [45.453367, -122.780528],
  [45.453914, -122.780433],
  [45.45406, -122.78042],
  [45.454175, -122.780419],
  [45.45443, -122.780422],
  [45.454728, -122.780422],
  [45.45493, -122.780422],
  [45.454989, -122.780379],
  [45.455066, -122.780381],
  [45.455161, -122.780382],
  [45.455241, -122.780433],
  [45.455523, -122.780429],
  [45.455581, -122.780421],
  [45.455612, -122.780412],
  [45.455641, -122.780393],
  [45.455694, -122.780351],
  [45.455794, -122.780258],
  [45.45587, -122.78038],
  [45.455935, -122.780485],
  [45.455991, -122.780587],
  [45.456046, -122.780693],
  [45.456105, -122.780817],
  [45.456245, -122.781128],
  [45.456343, -122.781347],
  [45.456608, -122.781934],
  [45.456742, -122.782231],
  [45.456765, -122.782283],
  [45.456833, -122.782436],
  [45.456958, -122.782371],
  [45.45728, -122.782198],
  [45.457485, -122.782088],
  [45.457737, -122.781953],
  [45.457831, -122.781902],
  [45.457863, -122.781885],
  [45.458416, -122.781585],
  [45.458728, -122.781416],
  [45.459205, -122.78115],
  [45.460115, -122.780659],
  [45.460349, -122.780532],
  [45.46054, -122.78043],
  [45.460551, -122.780424],
  [45.460805, -122.780286],
  [45.461097, -122.78013],
  [45.46208, -122.779604],
  [45.462156, -122.779568],
  [45.462399, -122.779451],
  [45.462537, -122.779383],
  [45.462988, -122.779153],
  [45.463144, -122.779076],
  [45.463488, -122.778902],
  [45.463831, -122.778711],
  [45.464489, -122.778345],
  [45.464511, -122.778326],
  [45.464548, -122.778312],
  [45.464963, -122.778079],
  [45.464991, -122.778067],
  [45.465015, -122.778056],
  [45.465866, -122.777603],
  [45.466431, -122.777308],
  [45.467024, -122.777008],
  [45.467485, -122.776781],
  [45.467554, -122.776744],
  [45.467637, -122.776705],
  [45.467915, -122.776566],
  [45.46798, -122.776533],
  [45.468354, -122.776346],
  [45.468661, -122.776192],
  [45.46897, -122.77604],
  [45.469268, -122.775893],
  [45.469285, -122.775885],
  [45.469356, -122.775848],
  [45.469438, -122.775806],
  [45.469651, -122.775683],
  [45.469748, -122.775627],
  [45.470031, -122.775464],
  [45.470289, -122.775322],
  [45.470515, -122.775207],
  [45.470747, -122.775082],
  [45.470824, -122.775039],
  [45.471228, -122.774812],
  [45.471258, -122.774796],
  [45.471313, -122.774757],
  [45.471351, -122.774728],
  [45.471431, -122.77465],
  [45.471603, -122.774429],
  [45.471683, -122.774309],
  [45.471734, -122.774233],
  [45.471872, -122.774028],
  [45.47197, -122.773884],
  [45.472035, -122.773771],
  [45.472156, -122.773586],
  [45.472208, -122.773508],
  [45.472369, -122.773269],
  [45.472374, -122.77326],
  [45.472476, -122.773099],
  [45.472546, -122.772955],
  [45.472577, -122.772862],
  [45.472602, -122.77277],
  [45.472631, -122.772611],
  [45.472633, -122.772525],
  [45.472627, -122.772411],
  [45.472582, -122.771946],
  [45.47253, -122.771446],
  [45.472528, -122.771423],
  [45.472503, -122.771125],
  [45.472487, -122.770845],
  [45.472488, -122.77075],
  [45.472489, -122.770587],
  [45.472503, -122.770424],
  [45.472525, -122.770259],
  [45.472606, -122.769743],
  [45.472622, -122.769643],
  [45.472824, -122.768471],
  [45.472878, -122.768083],
  [45.47296, -122.76756],
  [45.472996, -122.767386],
  [45.473031, -122.767305],
  [45.47314, -122.76705],
  [45.473187, -122.766939],
  [45.473389, -122.766525],
  [45.473516, -122.766304],
  [45.47369, -122.766056],
  [45.474019, -122.765622],
  [45.474097, -122.765519],
  [45.474222, -122.765361],
  [45.474245, -122.765333],
  [45.474295, -122.765277],
  [45.474393, -122.765176],
  [45.474879, -122.764728],
  [45.475359, -122.764306],
  [45.475576, -122.764127],
  [45.475768, -122.763986],
  [45.475973, -122.763862],
  [45.476157, -122.763769],
  [45.476555, -122.763637],
  [45.476903, -122.763582],
  [45.477206, -122.763572],
  [45.477352, -122.763575],
  [45.477498, -122.763578],
  [45.478166, -122.763582],
  [45.478357, -122.76357],
  [45.478455, -122.763542],
  [45.478523, -122.763515],
  [45.478591, -122.763479],
  [45.478712, -122.763394],
  [45.479127, -122.763054],
  [45.479214, -122.762983],
  [45.479408, -122.7628],
  [45.479522, -122.762672],
  [45.479632, -122.762534],
  [45.47977, -122.762346],
  [45.479918, -122.762122],
  [45.479961, -122.762041],
  [45.480085, -122.761805],
  [45.480239, -122.761514],
  [45.480348, -122.761283],
  [45.480431, -122.761124],
  [45.480477, -122.761015],
  [45.480544, -122.760887],
  [45.480604, -122.760771],
  [45.480885, -122.760194],
  [45.480948, -122.760065],
  [45.481282, -122.759378],
  [45.481536, -122.758857],
  [45.481641, -122.758641],
  [45.481841, -122.758229],
  [45.481874, -122.758162],
  [45.482068, -122.757765],
  [45.482382, -122.757113],
  [45.482564, -122.756722],
  [45.482584, -122.75668],
  [45.482628, -122.756584],
  [45.482813, -122.756189],
  [45.48299, -122.755815],
  [45.483082, -122.755617],
  [45.483084, -122.755613],
  [45.483228, -122.755297],
  [45.48324, -122.755272],
  [45.483337, -122.755061],
  [45.48337, -122.754989],
  [45.483527, -122.754664],
  [45.483805, -122.754075],
  [45.484071, -122.753498],
  [45.48428, -122.753044],
  [45.484648, -122.752245],
  [45.48468, -122.752175],
  [45.48483, -122.751844],
  [45.485173, -122.75109],
  [45.485422, -122.750559],
  [45.485557, -122.750272],
  [45.485591, -122.750199],
  [45.485593, -122.750101],
  [45.485707, -122.749854],
  [45.485733, -122.749797],
  [45.485874, -122.749495],
  [45.485938, -122.749358],
  [45.486022, -122.749274],
  [45.486031, -122.749175],
  [45.48604, -122.749091],
  [45.486053, -122.748996],
  [45.486079, -122.748845],
  [45.486109, -122.748697],
  [45.486172, -122.748434],
  [45.486215, -122.748259],
  [45.486246, -122.748124],
  [45.486286, -122.747973],
  [45.486396, -122.747528],
  [45.486481, -122.747421],
  [45.486532, -122.747216],
  [45.486579, -122.747031],
  [45.486608, -122.746913],
  [45.486673, -122.746641],
  [45.486768, -122.746277],
  [45.486808, -122.74613],
  [45.486835, -122.746013],
  [45.486853, -122.745935],
  [45.486904, -122.745689],
  [45.486951, -122.745446],
  [45.486966, -122.745359],
  [45.486982, -122.745263],
  [45.487017, -122.745007],
  [45.487051, -122.744675],
  [45.48706, -122.744556],
  [45.487069, -122.744416],
  [45.487075, -122.74434],
  [45.487085, -122.744168],
  [45.48709, -122.744],
  [45.487091, -122.743907],
  [45.487091, -122.743693],
  [45.487088, -122.742661],
  [45.487085, -122.742312],
  [45.487083, -122.741764],
  [45.487082, -122.741489],
  [45.487081, -122.741064],
  [45.487079, -122.74054],
  [45.487079, -122.740469],
  [45.487078, -122.74033],
  [45.487022, -122.740259],
  [45.487022, -122.740064],
  [45.487075, -122.739994],
  [45.487073, -122.739704],
  [45.487068, -122.739107],
  [45.487065, -122.738518],
  [45.487063, -122.738328],
  [45.487062, -122.738057],
  [45.487061, -122.73799],
  [45.48706, -122.73782],
  [45.48706, -122.737625],
  [45.487059, -122.737462],
  [45.487056, -122.736725],
  [45.487056, -122.736639],
  [45.487054, -122.736194],
  [45.487053, -122.735647],
  [45.487053, -122.735467],
  [45.487052, -122.734902],
  [45.487052, -122.734866],
  [45.487052, -122.734778],
  [45.487051, -122.73474],
  [45.487051, -122.734626],
  [45.48705, -122.734404],
  [45.48705, -122.734312],
  [45.487049, -122.734071],
  [45.487048, -122.733746],
  [45.487046, -122.733114],
  [45.487045, -122.732739],
  [45.487045, -122.732526],
  [45.487044, -122.732294],
  [45.487044, -122.732196],
  [45.487044, -122.732192],
  [45.487042, -122.731766],
  [45.487043, -122.731642],
  [45.487043, -122.73148],
  [45.487042, -122.731385],
  [45.487041, -122.731142],
  [45.48704, -122.731066],
  [45.48704, -122.730967],
  [45.487038, -122.730796],
  [45.487036, -122.730458],
  [45.487035, -122.730322],
  [45.487034, -122.730083],
  [45.487035, -122.729608],
  [45.487028, -122.728791],
  [45.487024, -122.728615],
  [45.487019, -122.728429],
  [45.487019, -122.728421],
  [45.487008, -122.728255],
  [45.486994, -122.728105],
  [45.486983, -122.728027],
  [45.48695, -122.727849],
  [45.486924, -122.727735],
  [45.486883, -122.727571],
  [45.486829, -122.727394],
  [45.486793, -122.727286],
  [45.486749, -122.72718],
  [45.486665, -122.72699],
  [45.48643, -122.726499],
  [45.486276, -122.726174],
  [45.486207, -122.726004],
  [45.486133, -122.725792],
  [45.486071, -122.725572],
  [45.486042, -122.725443],
  [45.486013, -122.725301],
  [45.485989, -122.725167],
  [45.485949, -122.72485],
  [45.485918, -122.724536],
  [45.485877, -122.724135],
  [45.485848, -122.723855],
  [45.485823, -122.723612],
  [45.485796, -122.723352],
  [45.48579, -122.723252],
  [45.485783, -122.723144],
  [45.485724, -122.722502],
  [45.485711, -122.722362],
  [45.485693, -122.722151],
  [45.485687, -122.722081],
  [45.485662, -122.721781],
  [45.485617, -122.721248],
  [45.485572, -122.720739],
  [45.485563, -122.720653],
  [45.485523, -122.720248],
  [45.485494, -122.720007],
  [45.485471, -122.71985],
  [45.48545, -122.719706],
  [45.485381, -122.719342],
  [45.485307, -122.71899],
  [45.485225, -122.718667],
  [45.485136, -122.718325],
  [45.485051, -122.718027],
  [45.485001, -122.717855],
  [45.484963, -122.717738],
  [45.48492, -122.717604],
  [45.484865, -122.717451],
  [45.484817, -122.717332],
  [45.484796, -122.717278],
  [45.484753, -122.717172],
  [45.484584, -122.716765],
  [45.484316, -122.716158],
  [45.484169, -122.715829],
  [45.483748, -122.714906],
  [45.483676, -122.714743],
  [45.482983, -122.713163],
  [45.48289, -122.712953],
  [45.482755, -122.712651],
  [45.482483, -122.712048],
  [45.482114, -122.711202],
  [45.48206, -122.711072],
  [45.482036, -122.711009],
  [45.482009, -122.710934],
  [45.481971, -122.710824],
  [45.481921, -122.710669],
  [45.481867, -122.710459],
  [45.481862, -122.710438],
  [45.48184, -122.710334],
  [45.48181, -122.710187],
  [45.481788, -122.710073],
  [45.48177, -122.70996],
  [45.481755, -122.709847],
  [45.481743, -122.709723],
  [45.481727, -122.709482],
  [45.481723, -122.70938],
  [45.481703, -122.708813],
  [45.481692, -122.708536],
  [45.481685, -122.708432],
  [45.481675, -122.708321],
  [45.481664, -122.70823],
  [45.481648, -122.708113],
  [45.481613, -122.707927],
  [45.481607, -122.707898],
  [45.481576, -122.707758],
  [45.48153, -122.707603],
  [45.481466, -122.707409],
  [45.481379, -122.707168],
  [45.481251, -122.706843],
  [45.481146, -122.706596],
  [45.481127, -122.706553],
  [45.481067, -122.706417],
  [45.480995, -122.706244],
  [45.480907, -122.706033],
  [45.480846, -122.705876],
  [45.480785, -122.70571],
  [45.480729, -122.705552],
  [45.48068, -122.705408],
  [45.480545, -122.704979],
  [45.480489, -122.704784],
  [45.480438, -122.704593],
  [45.480394, -122.704409],
  [45.480361, -122.704276],
  [45.480318, -122.704088],
  [45.480318, -122.704087],
  [45.480279, -122.703901],
  [45.480222, -122.703608],
  [45.480202, -122.703501],
  [45.480164, -122.703293],
  [45.480122, -122.70306],
  [45.48005, -122.702662],
  [45.480032, -122.702563],
  [45.48001, -122.702432],
  [45.479993, -122.702346],
  [45.479975, -122.702269],
  [45.479945, -122.702151],
  [45.47994, -122.702132],
  [45.479896, -122.701978],
  [45.479854, -122.701849],
  [45.479806, -122.701719],
  [45.479768, -122.701631],
  [45.47965, -122.701374],
  [45.47958, -122.701245],
  [45.479435, -122.701021],
  [45.479354, -122.700913],
  [45.479248, -122.700769],
  [45.479223, -122.700736],
  [45.479155, -122.700647],
  [45.47895, -122.700352],
  [45.478879, -122.700238],
  [45.478818, -122.700131],
  [45.478793, -122.700087],
  [45.478735, -122.699979],
  [45.478694, -122.699885],
  [45.478653, -122.699783],
  [45.478586, -122.699609],
  [45.478513, -122.699417],
  [45.478444, -122.69922],
  [45.4784, -122.699094],
  [45.478362, -122.698965],
  [45.47833, -122.698847],
  [45.478301, -122.698738],
  [45.478215, -122.698403],
  [45.478175, -122.698157],
  [45.478153, -122.697977],
  [45.47813, -122.69774],
  [45.478093, -122.697667],
  [45.478065, -122.697286],
  [45.478048, -122.697137],
  [45.478134, -122.696662],
  [45.478136, -122.696651],
  [45.478178, -122.696413],
  [45.47818, -122.696405],
  [45.478208, -122.696248],
  [45.478253, -122.695961],
  [45.478324, -122.695575],
  [45.478362, -122.69537],
  [45.478385, -122.695254],
  [45.478404, -122.69516],
  [45.478421, -122.695065],
  [45.478443, -122.69494],
  [45.478492, -122.694672],
  [45.478566, -122.694257],
  [45.478577, -122.694201],
  [45.478623, -122.693956],
  [45.478649, -122.693818],
  [45.478681, -122.693655],
  [45.478729, -122.693469],
  [45.478788, -122.693288],
  [45.478879, -122.693029],
  [45.47891, -122.692949],
  [45.479003, -122.692714],
  [45.47909, -122.692449],
  [45.479251, -122.692018],
  [45.479596, -122.691088],
  [45.479672, -122.690884],
  [45.479779, -122.690584],
  [45.47997, -122.690073],
  [45.480052, -122.689845],
  [45.480104, -122.689692],
  [45.480146, -122.689529],
  [45.480164, -122.689457],
  [45.480182, -122.689382],
  [45.480201, -122.689298],
  [45.480217, -122.689204],
  [45.480232, -122.689113],
  [45.480242, -122.689023],
  [45.480248, -122.688944],
  [45.480255, -122.688785],
  [45.480258, -122.688701],
  [45.480256, -122.688639],
  [45.480253, -122.688555],
  [45.480247, -122.688457],
  [45.480203, -122.688022],
  [45.480173, -122.687723],
  [45.48016, -122.687578],
  [45.480151, -122.687436],
  [45.480149, -122.687343],
  [45.480153, -122.68725],
  [45.480162, -122.687153],
  [45.480182, -122.687048],
  [45.480318, -122.686995],
  [45.480393, -122.686973],
  [45.480428, -122.686965],
  [45.48053, -122.686934],
  [45.480572, -122.686906],
  [45.480617, -122.686848],
  [45.480635, -122.686798],
  [45.480651, -122.686724],
  [45.480648, -122.686649],
  [45.480548, -122.68627],
  [45.480532, -122.686193],
  [45.480497, -122.686028],
  [45.480477, -122.685864],
  [45.480472, -122.685653],
  [45.480484, -122.685486],
  [45.480499, -122.685324],
  [45.480501, -122.685233],
  [45.480501, -122.685146],
  [45.480496, -122.685064],
  [45.480486, -122.684948],
  [45.48046, -122.684783],
  [45.480429, -122.684605],
  [45.480407, -122.684468],
  [45.4804, -122.684403],
  [45.480391, -122.68429],
  [45.480389, -122.684225],
  [45.480391, -122.684162],
  [45.480395, -122.684106],
  [45.480404, -122.684041],
  [45.480416, -122.683979],
  [45.480428, -122.683927],
  [45.480441, -122.683876],
  [45.480454, -122.683837],
  [45.480503, -122.683733],
  [45.480535, -122.683676],
  [45.480569, -122.683629],
  [45.480608, -122.683585],
  [45.48068, -122.68351],
  [45.480754, -122.683437],
  [45.480875, -122.683352],
  [45.480956, -122.683303],
  [45.481018, -122.683276],
  [45.481089, -122.683255],
  [45.481189, -122.683219],
  [45.481316, -122.683187],
  [45.481357, -122.683177],
  [45.481563, -122.683141],
  [45.48176, -122.683126],
  [45.481891, -122.683131],
  [45.482035, -122.683137],
  [45.482158, -122.683149],
  [45.482286, -122.683169],
  [45.482364, -122.683179],
  [45.482446, -122.683193],
  [45.482599, -122.683233],
  [45.482676, -122.683264],
  [45.482761, -122.683308],
  [45.482823, -122.683347],
  [45.482881, -122.683395],
  [45.482938, -122.683448],
  [45.482984, -122.683505],
  [45.483024, -122.683566],
  [45.483071, -122.683638],
  [45.483296, -122.683987],
  [45.483498, -122.684309],
  [45.483549, -122.684373],
  [45.48362, -122.684454],
  [45.483681, -122.684508],
  [45.483738, -122.684549],
  [45.483844, -122.684624],
  [45.483877, -122.684643],
  [45.483922, -122.684666],
  [45.483969, -122.684683],
  [45.484027, -122.684694],
  [45.484081, -122.684702],
  [45.484135, -122.684703],
  [45.484196, -122.684697],
  [45.484247, -122.68468],
  [45.484319, -122.684649],
  [45.484371, -122.68461],
  [45.484423, -122.684568],
  [45.484481, -122.684509],
  [45.48452, -122.684462],
  [45.484594, -122.684355],
  [45.484765, -122.684054],
  [45.484851, -122.683926],
  [45.484938, -122.683829],
  [45.485031, -122.683735],
  [45.485135, -122.683647],
  [45.48521, -122.683595],
  [45.485262, -122.683566],
  [45.485323, -122.683541],
  [45.485392, -122.68352],
  [45.485454, -122.683515],
  [45.485516, -122.68352],
  [45.485612, -122.683539],
  [45.485734, -122.683592],
  [45.48582, -122.683651],
  [45.485909, -122.683721],
  [45.485978, -122.683798],
  [45.486043, -122.683899],
  [45.486111, -122.684041],
  [45.486477, -122.685093],
  [45.486567, -122.685317],
  [45.486637, -122.685449],
  [45.486684, -122.685513],
  [45.486743, -122.685585],
  [45.48687, -122.68569],
  [45.48696, -122.685742],
  [45.487016, -122.685766],
  [45.48707, -122.685781],
  [45.487108, -122.685788],
  [45.487165, -122.685783],
  [45.487472, -122.685679],
  [45.487599, -122.685632],
  [45.487821, -122.685551],
  [45.48793, -122.685525],
  [45.488008, -122.685506],
  [45.488204, -122.685485],
  [45.488406, -122.685501],
  [45.488521, -122.685515],
  [45.488656, -122.685545],
  [45.488777, -122.685574],
  [45.488844, -122.685596],
  [45.488896, -122.685626],
  [45.489303, -122.685879],
  [45.489425, -122.685961],
  [45.489483, -122.685985],
  [45.489583, -122.68602],
  [45.489954, -122.686105],
  [45.490085, -122.686148],
  [45.49019, -122.686188],
  [45.490326, -122.686258],
  [45.490561, -122.686413],
  [45.490733, -122.686563],
  [45.490857, -122.686693],
  [45.491134, -122.687025],
  [45.49118, -122.68706],
  [45.491217, -122.687086],
  [45.491263, -122.687114],
  [45.491313, -122.687138],
  [45.491365, -122.687159],
  [45.491412, -122.687174],
  [45.491456, -122.68718],
  [45.491491, -122.687181],
  [45.491533, -122.687175],
  [45.4916, -122.687163],
  [45.491653, -122.687142],
  [45.491688, -122.687123],
  [45.491749, -122.687074],
  [45.491787, -122.687035],
  [45.491829, -122.686983],
  [45.491857, -122.686944],
  [45.491896, -122.686878],
  [45.491952, -122.686765],
  [45.491979, -122.686672],
  [45.491999, -122.686577],
  [45.492012, -122.686489],
  [45.49202, -122.686406],
  [45.492024, -122.68629],
  [45.492015, -122.68612],
  [45.491998, -122.685936],
  [45.491963, -122.685703],
  [45.491887, -122.685251],
  [45.491816, -122.684951],
  [45.491759, -122.684723],
  [45.491722, -122.684607],
  [45.491605, -122.684259],
  [45.491578, -122.684156],
  [45.491539, -122.684016],
  [45.491507, -122.683896],
  [45.491482, -122.683763],
  [45.49146, -122.683611],
  [45.491451, -122.68349],
  [45.491454, -122.683264],
  [45.491467, -122.683123],
  [45.491487, -122.682999],
  [45.49155, -122.682732],
  [45.491574, -122.682626],
  [45.491609, -122.682496],
  [45.491633, -122.682428],
  [45.491691, -122.682275],
  [45.491739, -122.682152],
  [45.491797, -122.682035],
  [45.491859, -122.681934],
  [45.491931, -122.681824],
  [45.491986, -122.681759],
  [45.492069, -122.681676],
  [45.492161, -122.681605],
  [45.492249, -122.681552],
  [45.49235, -122.681505],
  [45.492575, -122.681441],
  [45.492855, -122.681378],
  [45.493176, -122.681332],
  [45.493226, -122.68133],
  [45.493408, -122.681335],
  [45.493456, -122.681336],
  [45.493564, -122.681349],
  [45.493702, -122.681369],
  [45.493919, -122.681468],
  [45.49407, -122.68156],
  [45.49414, -122.681618],
  [45.494191, -122.68167],
  [45.494316, -122.681838],
  [45.494448, -122.682057],
  [45.494561, -122.682227],
  [45.494682, -122.682364],
  [45.49443, -122.683075],
  [45.494418, -122.683136],
  [45.49441, -122.683192],
  [45.494408, -122.683238],
  [45.494417, -122.683295],
  [45.494428, -122.683338],
  [45.494443, -122.683374],
  [45.4945, -122.683454],
  [45.49456, -122.68351],
  [45.494602, -122.683537],
  [45.49463, -122.683552],
  [45.49466, -122.683563],
  [45.494687, -122.683563],
  [45.494805, -122.683541],
  [45.494839, -122.683524],
  [45.494906, -122.683497],
  [45.494998, -122.68345],
  [45.495076, -122.683401],
  [45.495142, -122.683346],
  [45.495189, -122.683284],
  [45.495231, -122.683224],
  [45.495327, -122.683079],
  [45.49541, -122.682969],
  [45.495492, -122.682871],
  [45.495561, -122.682812],
  [45.495619, -122.682769],
  [45.495687, -122.682724],
  [45.495831, -122.682646],
  [45.49601, -122.682547],
  [45.496071, -122.682455],
  [45.496307, -122.682329],
  [45.496387, -122.682283],
  [45.496432, -122.682257],
  [45.496502, -122.682218],
  [45.496548, -122.682186],
  [45.496598, -122.682153],
  [45.496773, -122.682022],
  [45.496969, -122.681869],
  [45.497011, -122.681857],
  [45.497057, -122.681878],
  [45.497079, -122.681869],
  [45.497111, -122.681865],
  [45.497142, -122.681866],
  [45.49718, -122.681871],
  [45.497216, -122.681883],
  [45.497278, -122.681876],
  [45.497355, -122.681923],
  [45.497412, -122.681981],
  [45.497472, -122.682079],
  [45.497491, -122.682121],
  [45.497511, -122.682173],
  [45.497529, -122.682233],
  [45.497543, -122.682298],
  [45.497554, -122.682363],
  [45.497556, -122.682416],
  [45.497553, -122.682476],
  [45.497548, -122.682537],
  [45.497538, -122.682603],
  [45.49752, -122.682668],
  [45.497497, -122.682736],
  [45.497473, -122.682791],
  [45.49745, -122.682834],
  [45.497422, -122.682875],
  [45.497371, -122.682936],
  [45.497316, -122.682994],
  [45.49722, -122.68307],
  [45.497037, -122.683215],
  [45.496585, -122.683572],
  [45.496449, -122.683674],
  [45.496407, -122.683689],
  [45.496333, -122.683663],
  [45.496274, -122.683674],
  [45.496008, -122.683872],
  [45.495956, -122.683921],
  [45.495911, -122.683947],
  [45.495897, -122.683981],
  [45.495884, -122.684022],
  [45.495875, -122.68407],
  [45.495871, -122.68411],
  [45.495871, -122.68416],
  [45.495872, -122.684227],
  [45.495878, -122.684277],
  [45.49589, -122.684331],
  [45.495921, -122.684417],
  [45.49597, -122.684497],
  [45.496022, -122.684554],
  [45.496059, -122.68458],
  [45.496092, -122.684596],
  [45.49613, -122.684605],
  [45.496163, -122.684607],
  [45.496236, -122.684604],
  [45.496303, -122.684583],
  [45.496373, -122.684547],
  [45.496446, -122.684531],
  [45.496476, -122.684531],
  [45.496518, -122.684549],
  [45.49655, -122.684588],
  [45.496573, -122.684634],
  [45.496585, -122.684697],
  [45.496586, -122.684753],
  [45.496581, -122.684816],
  [45.496553, -122.68494],
  [45.496623, -122.684984],
  [45.496655, -122.685017],
  [45.496685, -122.685074],
  [45.496707, -122.685146],
  [45.496873, -122.685966],
  [45.496899, -122.686093],
  [45.496955, -122.686359],
  [45.496992, -122.686535],
  [45.49706, -122.686859],
  [45.497227, -122.687738],
  [45.497263, -122.687942],
  [45.497311, -122.688174],
  [45.497371, -122.68847],
  [45.497461, -122.688931],
  [45.497488, -122.689036],
  [45.497529, -122.689151],
  [45.497579, -122.689251],
  [45.497611, -122.689311],
  [45.497667, -122.689388],
  [45.497732, -122.689452],
  [45.497809, -122.689503],
  [45.49786, -122.689531],
  [45.497926, -122.689559],
  [45.498003, -122.689573],
  [45.498074, -122.689576],
  [45.498174, -122.689566],
  [45.49824, -122.68955],
  [45.498289, -122.689534],
  [45.498352, -122.689501],
  [45.498402, -122.689468],
  [45.49844, -122.689434],
  [45.498482, -122.68939],
  [45.498517, -122.689347],
  [45.498548, -122.689301],
  [45.498575, -122.689256],
  [45.498827, -122.688741],
  [45.498972, -122.688434],
  [45.499036, -122.6883],
  [45.499092, -122.688175],
  [45.499103, -122.688154],
  [45.499118, -122.688133],
  [45.499155, -122.688098],
  [45.499212, -122.688072],
  [45.499195, -122.687973],
  [45.499147, -122.687694],
  [45.499136, -122.687615],
  [45.499129, -122.687525],
  [45.499126, -122.687455],
  [45.499134, -122.687296],
  [45.499118, -122.687218],
  [45.499123, -122.68718],
  [45.499164, -122.686855],
  [45.499171, -122.686801],
  [45.499195, -122.686608],
  [45.499238, -122.686527],
  [45.499288, -122.686159],
  [45.499309, -122.685979],
  [45.49932, -122.685901],
  [45.499333, -122.685828],
  [45.499344, -122.685769],
  [45.499357, -122.685713],
  [45.499376, -122.685645],
  [45.499398, -122.685589]
];

const stopNames = {
  "325": "2600 Block SW Beaverton-Hillsdale",
  "326": "3600 Block SW Beaverton-Hillsdale",
  "328": "SW Beaverton-Hillsdale &amp; 59th",
  "336": "SW Beaverton-Hillsdale &amp; Bertha",
  "348": "SW Beaverton-Hillsdale &amp; Oleson",
  "351": "SW Beaverton-Hillsdale &amp; Shattuck",
  "364": "SW Beaverton-Hillsdale &amp; 25th",
  "367": "SW Beaverton-Hillsdale &amp; 30th",
  "368": "SW Beaverton-Hillsdale &amp; 33rd",
  "369": "SW Beaverton-Hillsdale &amp; 35th",
  "371": "SW Beaverton-Hillsdale &amp; 39th Dr",
  "373": "SW Beaverton-Hillsdale &amp; 42nd",
  "375": "SW Beaverton-Hillsdale &amp; 45th",
  "377": "SW Beaverton-Hillsdale &amp; 50th",
  "379": "SW Beaverton-Hillsdale &amp; 56th",
  "382": "SW Beaverton-Hillsdale &amp; 62nd",
  "383": "6500 Block SW Beaverton-Hillsdale",
  "925": "SW Capitol &amp; Bertha Ct",
  "929": "SW Capitol &amp; Sunset",
  "2295": "SW Hall &amp; Scholls Ferry",
  "5028": "SW Sam Jackson Pk &amp; OHSU",
  "5032": "SW Sam Jackson Pk &amp; US Veterans",
  "5156": "5900 Block SW Scholls Ferry (Crosswalk)",
  "5158": "6700 Block SW Scholls Ferry",
  "5160": "8600 Block SW Scholls Ferry",
  "5162": "SW Scholls Ferry &amp; Allen",
  "5168": "SW Scholls Ferry &amp; Crestwood",
  "5170": "SW Scholls Ferry &amp; Crystal",
  "5173": "SW Scholls Ferry &amp; Eagle",
  "5175": "SW Scholls Ferry &amp; Heather",
  "5181": "SW Scholls Ferry &amp; Marjorie",
  "5182": "SW Scholls Ferry &amp; Merry",
  "5186": "SW Scholls Ferry &amp; Stephen Lane",
  "5187": "SW Scholls Ferry &amp; Nicol",
  "5193": "5100 Block SW Scholls Ferry",
  "5201": "SW Scholls Ferry &amp; 86th",
  "5203": "SW Scholls Ferry &amp; 88th",
  "5204": "SW Scholls Ferry &amp; 90th",
  "5206": "SW Scholls Ferry &amp; 92nd",
  "5795": "SW Terwilliger &amp; Hamilton",
  "5796": "SW Terwilliger &amp; Hamilton Terrace",
  "5803": "SW Terwilliger &amp; Ralston Dr",
  "5811": "SW Terwilliger &amp; Westwood",
  "5975": "Portland VA Medical Center",
  "6175": "SW Eliander &amp; One Embassy Centre",
  "8455": "SW US Veterans Hosp Rd &amp; Bldg 16",
  "9488": "3500 Blk SW US Veterans Hosp Rd (CSB)",
  "9650": "Washington Square Transit Center ",
  "10612": "3500 Blk SW US Veterans Hosp Rd (Bldg 28)",
  "14406": "SW Terwilliger &amp; Capitol Hwy"
};

const stops = [
  { stop_id: "9650", name: "Washington Square Transit Center ", lat: 45.4527, lon: -122.77881, times: ["6:17 AM", "6:46 AM", "7:15 AM", "7:44 AM", "8:15 AM", "8:45 AM", "9:16 AM", "9:47 AM"] },
  { stop_id: "6175", name: "SW Eliander &amp; One Embassy Centre", lat: 45.454727, lon: -122.780345, times: ["6:17 AM", "6:46 AM", "7:15 AM", "7:44 AM", "8:15 AM", "8:45 AM", "9:16 AM", "9:47 AM"] },
  { stop_id: "2295", name: "SW Hall &amp; Scholls Ferry", lat: 45.456837, lon: -122.78214, times: ["6:18 AM", "6:47 AM", "7:16 AM", "7:45 AM", "8:16 AM", "8:46 AM", "9:17 AM", "9:48 AM"] },
  { stop_id: "5160", name: "8600 Block SW Scholls Ferry", lat: 45.457787, lon: -122.781737, times: ["6:18 AM", "6:47 AM", "7:16 AM", "7:46 AM", "8:16 AM", "8:46 AM", "9:17 AM", "9:48 AM"] },
  { stop_id: "5168", name: "SW Scholls Ferry &amp; Crestwood", lat: 45.460513, lon: -122.780326, times: ["6:19 AM", "6:48 AM", "7:17 AM", "7:46 AM", "8:17 AM", "8:47 AM", "9:18 AM", "9:49 AM"] },
  { stop_id: "5170", name: "SW Scholls Ferry &amp; Crystal", lat: 45.462128, lon: -122.779451, times: ["6:19 AM", "6:48 AM", "7:18 AM", "7:47 AM", "8:18 AM", "8:48 AM", "9:19 AM", "9:50 AM"] },
  { stop_id: "5173", name: "SW Scholls Ferry &amp; Eagle", lat: 45.463791, lon: -122.778584, times: ["6:20 AM", "6:49 AM", "7:18 AM", "7:48 AM", "8:18 AM", "8:48 AM", "9:19 AM", "9:50 AM"] },
  { stop_id: "5181", name: "SW Scholls Ferry &amp; Marjorie", lat: 45.464957, lon: -122.777934, times: ["6:20 AM", "6:49 AM", "7:19 AM", "7:48 AM", "8:19 AM", "8:49 AM", "9:20 AM", "9:51 AM"] },
  { stop_id: "5175", name: "SW Scholls Ferry &amp; Heather", lat: 45.467946, lon: -122.776409, times: ["6:21 AM", "6:50 AM", "7:19 AM", "7:49 AM", "8:19 AM", "8:49 AM", "9:20 AM", "9:51 AM"] },
  { stop_id: "5182", name: "SW Scholls Ferry &amp; Merry", lat: 45.469237, lon: -122.775768, times: ["6:21 AM", "6:50 AM", "7:20 AM", "7:49 AM", "8:20 AM", "8:50 AM", "9:21 AM", "9:52 AM"] },
  { stop_id: "5158", name: "6700 Block SW Scholls Ferry", lat: 45.471191, lon: -122.774681, times: ["6:22 AM", "6:51 AM", "7:20 AM", "7:50 AM", "8:20 AM", "8:50 AM", "9:21 AM", "9:52 AM"] },
  { stop_id: "5162", name: "SW Scholls Ferry &amp; Allen", lat: 45.472313, lon: -122.773183, times: ["6:22 AM", "6:51 AM", "7:21 AM", "7:50 AM", "8:21 AM", "8:51 AM", "9:22 AM", "9:53 AM"] },
  { stop_id: "5206", name: "SW Scholls Ferry &amp; 92nd", lat: 45.472434, lon: -122.771439, times: ["6:23 AM", "6:52 AM", "7:21 AM", "7:51 AM", "8:21 AM", "8:51 AM", "9:22 AM", "9:53 AM"] },
  { stop_id: "5204", name: "SW Scholls Ferry &amp; 90th", lat: 45.472541, lon: -122.769722, times: ["6:23 AM", "6:52 AM", "7:22 AM", "7:51 AM", "8:22 AM", "8:52 AM", "9:23 AM", "9:54 AM"] },
  { stop_id: "5203", name: "SW Scholls Ferry &amp; 88th", lat: 45.472938, lon: -122.767225, times: ["6:23 AM", "6:52 AM", "7:22 AM", "7:52 AM", "8:22 AM", "8:52 AM", "9:23 AM", "9:54 AM"] },
  { stop_id: "5201", name: "SW Scholls Ferry &amp; 86th", lat: 45.474205, lon: -122.765262, times: ["6:24 AM", "6:53 AM", "7:23 AM", "7:52 AM", "8:23 AM", "8:53 AM", "9:24 AM", "9:55 AM"] },
  { stop_id: "5156", name: "5900 Block SW Scholls Ferry (Crosswalk)", lat: 45.477353, lon: -122.763484, times: ["6:25 AM", "6:54 AM", "7:24 AM", "7:53 AM", "8:24 AM", "8:54 AM", "9:25 AM", "9:56 AM"] },
  { stop_id: "5187", name: "SW Scholls Ferry &amp; Nicol", lat: 45.480458, lon: -122.760798, times: ["6:26 AM", "6:55 AM", "7:25 AM", "7:54 AM", "8:25 AM", "8:55 AM", "9:26 AM", "9:57 AM"] },
  { stop_id: "5193", name: "5100 Block SW Scholls Ferry", lat: 45.483017, lon: -122.755557, times: ["6:27 AM", "6:56 AM", "7:26 AM", "7:56 AM", "8:26 AM", "8:56 AM", "9:27 AM", "9:58 AM"] },
  { stop_id: "5186", name: "SW Scholls Ferry &amp; Stephen Lane", lat: 45.484747, lon: -122.751773, times: ["6:00 AM", "6:28 AM", "6:57 AM", "7:27 AM", "7:57 AM", "8:27 AM", "8:57 AM", "9:28 AM"] },
  { stop_id: "348", name: "SW Beaverton-Hillsdale &amp; Oleson", lat: 45.486129, lon: -122.748414, times: ["6:01 AM", "6:29 AM", "6:58 AM", "7:28 AM", "7:58 AM", "8:28 AM", "8:58 AM", "9:29 AM"] },
  { stop_id: "383", name: "6500 Block SW Beaverton-Hillsdale", lat: 45.486956, lon: -122.7444, times: ["6:01 AM", "6:29 AM", "6:58 AM", "7:28 AM", "7:58 AM", "8:28 AM", "8:58 AM", "9:29 AM"] },
  { stop_id: "382", name: "SW Beaverton-Hillsdale &amp; 62nd", lat: 45.48696, lon: -122.740469, times: ["6:02 AM", "6:30 AM", "6:59 AM", "7:29 AM", "7:59 AM", "8:29 AM", "8:59 AM", "9:30 AM"] },
  { stop_id: "328", name: "SW Beaverton-Hillsdale &amp; 59th", lat: 45.486948, lon: -122.73782, times: ["6:02 AM", "6:30 AM", "7:00 AM", "7:30 AM", "8:00 AM", "8:30 AM", "9:00 AM", "9:30 AM"] },
  { stop_id: "379", name: "SW Beaverton-Hillsdale &amp; 56th", lat: 45.486931, lon: -122.734902, times: ["6:03 AM", "6:31 AM", "7:00 AM", "7:30 AM", "8:00 AM", "8:30 AM", "9:00 AM", "9:31 AM"] },
  { stop_id: "351", name: "SW Beaverton-Hillsdale &amp; Shattuck", lat: 45.486926, lon: -122.732185, times: ["6:03 AM", "6:31 AM", "7:01 AM", "7:31 AM", "8:01 AM", "8:31 AM", "9:01 AM", "9:31 AM"] },
  { stop_id: "377", name: "SW Beaverton-Hillsdale &amp; 50th", lat: 45.486912, lon: -122.728434, times: ["6:04 AM", "6:32 AM", "7:01 AM", "7:31 AM", "8:01 AM", "8:31 AM", "9:01 AM", "9:32 AM"] },
  { stop_id: "375", name: "SW Beaverton-Hillsdale &amp; 45th", lat: 45.485579, lon: -122.722176, times: ["6:05 AM", "6:33 AM", "7:03 AM", "7:33 AM", "8:03 AM", "8:33 AM", "9:03 AM", "9:33 AM"] },
  { stop_id: "373", name: "SW Beaverton-Hillsdale &amp; 42nd", lat: 45.48536, lon: -122.719881, times: ["6:05 AM", "6:33 AM", "7:03 AM", "7:33 AM", "8:03 AM", "8:33 AM", "9:03 AM", "9:33 AM"] },
  { stop_id: "371", name: "SW Beaverton-Hillsdale &amp; 39th Dr", lat: 45.484739, lon: -122.717397, times: ["6:06 AM", "6:34 AM", "7:03 AM", "7:33 AM", "8:03 AM", "8:33 AM", "9:03 AM", "9:34 AM"] },
  { stop_id: "326", name: "3600 Block SW Beaverton-Hillsdale", lat: 45.483593, lon: -122.714813, times: ["6:06 AM", "6:34 AM", "7:04 AM", "7:34 AM", "8:04 AM", "8:34 AM", "9:04 AM", "9:34 AM"] },
  { stop_id: "369", name: "SW Beaverton-Hillsdale &amp; 35th", lat: 45.482672, lon: -122.712726, times: ["6:07 AM", "6:35 AM", "7:04 AM", "7:34 AM", "8:04 AM", "8:34 AM", "9:04 AM", "9:35 AM"] },
  { stop_id: "368", name: "SW Beaverton-Hillsdale &amp; 33rd", lat: 45.481759, lon: -122.710514, times: ["6:07 AM", "6:35 AM", "7:05 AM", "7:35 AM", "8:05 AM", "8:35 AM", "9:05 AM", "9:35 AM"] },
  { stop_id: "367", name: "SW Beaverton-Hillsdale &amp; 30th", lat: 45.481497, lon: -122.707944, times: ["6:08 AM", "6:36 AM", "7:05 AM", "7:35 AM", "8:05 AM", "8:35 AM", "9:05 AM", "9:36 AM"] },
  { stop_id: "325", name: "2600 Block SW Beaverton-Hillsdale", lat: 45.480217, lon: -122.704126, times: ["6:08 AM", "6:36 AM", "7:06 AM", "7:36 AM", "8:06 AM", "8:36 AM", "9:06 AM", "9:36 AM"] },
  { stop_id: "364", name: "SW Beaverton-Hillsdale &amp; 25th", lat: 45.47987, lon: -122.702192, times: ["6:09 AM", "6:37 AM", "7:07 AM", "7:37 AM", "8:07 AM", "8:37 AM", "9:07 AM", "9:37 AM"] },
  { stop_id: "336", name: "SW Beaverton-Hillsdale &amp; Bertha", lat: 45.479156, lon: -122.700834, times: ["6:09 AM", "6:37 AM", "7:07 AM", "7:37 AM", "8:07 AM", "8:37 AM", "9:07 AM", "9:37 AM"] },
  { stop_id: "925", name: "SW Capitol &amp; Bertha Ct", lat: 45.478076, lon: -122.696368, times: ["6:10 AM", "6:38 AM", "7:08 AM", "7:38 AM", "8:08 AM", "8:38 AM", "9:08 AM", "9:38 AM"] },
  { stop_id: "929", name: "SW Capitol &amp; Sunset", lat: 45.478788, lon: -122.692856, times: ["6:11 AM", "6:39 AM", "7:09 AM", "7:39 AM", "8:09 AM", "8:39 AM", "9:09 AM", "9:39 AM"] },
  { stop_id: "14406", name: "SW Terwilliger &amp; Capitol Hwy", lat: 45.480463, lon: -122.68622, times: ["6:12 AM", "6:40 AM", "7:10 AM", "7:40 AM", "8:10 AM", "8:40 AM", "9:10 AM", "9:40 AM"] },
  { stop_id: "5803", name: "SW Terwilliger &amp; Ralston Dr", lat: 45.481296, lon: -122.683035, times: ["6:12 AM", "6:41 AM", "7:11 AM", "7:41 AM", "8:11 AM", "8:41 AM", "9:11 AM", "9:41 AM"] },
  { stop_id: "5811", name: "SW Terwilliger &amp; Westwood", lat: 45.483036, lon: -122.683429, times: ["6:13 AM", "6:41 AM", "7:11 AM", "7:41 AM", "8:11 AM", "8:41 AM", "9:11 AM", "9:41 AM"] },
  { stop_id: "5795", name: "SW Terwilliger &amp; Hamilton", lat: 45.491466, lon: -122.683913, times: ["6:16 AM", "6:45 AM", "7:15 AM", "7:45 AM", "8:15 AM", "8:45 AM", "9:15 AM", "9:45 AM"] },
  { stop_id: "5796", name: "SW Terwilliger &amp; Hamilton Terrace", lat: 45.49341, lon: -122.681244, times: ["6:17 AM", "6:46 AM", "7:16 AM", "7:46 AM", "8:16 AM", "8:46 AM", "9:16 AM", "9:46 AM"] },
  { stop_id: "8455", name: "SW US Veterans Hosp Rd &amp; Bldg 16", lat: 45.496418, lon: -122.68222, times: ["6:18 AM", "6:47 AM", "7:17 AM", "7:47 AM", "8:17 AM", "8:47 AM", "9:17 AM", "9:47 AM"] },
  { stop_id: "5975", name: "Portland VA Medical Center", lat: 45.497058, lon: -122.683271, times: ["6:19 AM", "6:48 AM", "7:18 AM", "7:48 AM", "8:18 AM", "8:48 AM", "9:18 AM", "9:48 AM"] },
  { stop_id: "10612", name: "3500 Blk SW US Veterans Hosp Rd (Bldg 28)", lat: 45.497026, lon: -122.686521, times: ["6:20 AM", "6:49 AM", "7:19 AM", "7:49 AM", "8:19 AM", "8:49 AM", "9:19 AM", "9:49 AM"] },
  { stop_id: "9488", name: "3500 Blk SW US Veterans Hosp Rd (CSB)", lat: 45.497355, lon: -122.688156, times: ["6:21 AM", "6:50 AM", "7:20 AM", "7:50 AM", "8:20 AM", "8:50 AM", "9:20 AM", "9:50 AM"] },
  { stop_id: "5032", name: "SW Sam Jackson Pk &amp; US Veterans", lat: 45.499042, lon: -122.687161, times: ["6:23 AM", "6:52 AM", "7:22 AM", "7:52 AM", "8:22 AM", "8:52 AM", "9:22 AM", "9:52 AM"] },
  { stop_id: "5028", name: "SW Sam Jackson Pk &amp; OHSU", lat: 45.499332, lon: -122.685535, times: ["6:24 AM", "6:53 AM", "7:23 AM", "7:53 AM", "8:23 AM", "8:53 AM", "9:23 AM", "9:53 AM"] },
]

    // Draw route polyline
    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    // 1. Get current time in PT
    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const datePT = nowPT.toDateString();

    // 2. Add stops with highlighted next time
    stops.forEach(stop => {
      const stamps = stop.times.map(t => new Date(`${datePT} ${t}`));
      const nextIdx = stamps.findIndex(ts => ts > nowPT);
      const timesHtml = stamps.slice(0, 8).map((ts, i) => {
        const lbl = ts.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        return i === nextIdx ? `<strong>${lbl}</strong>` : lbl;
      }).join('<br>');

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${timesHtml || 'No scheduled times'}`)
      .addTo(map);
    });

    // Bus markers fetch
    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
	   html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>