<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 287 – To Goose Hollow/SW Jefferson | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 287 – To Goose Hollow/SW Jefferson</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 287;
  const direction = parseInt(1);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.502351, -122.417994],
  [45.502346, -122.417994],
  [45.50234, -122.417994],
  [45.50233, -122.417997],
  [45.502197, -122.418115],
  [45.502012, -122.418114],
  [45.501954, -122.418072],
  [45.501924, -122.418007],
  [45.501918, -122.417954],
  [45.501923, -122.417903],
  [45.501948, -122.41782],
  [45.502009, -122.417778],
  [45.502892, -122.417805],
  [45.503055, -122.41781],
  [45.503052, -122.418016],
  [45.503045, -122.418492],
  [45.503038, -122.418962],
  [45.503034, -122.419209],
  [45.503023, -122.419908],
  [45.503017, -122.421107],
  [45.50299, -122.423046],
  [45.502981, -122.42367],
  [45.502973, -122.424301],
  [45.50297, -122.424479],
  [45.502948, -122.426062],
  [45.502938, -122.426245],
  [45.502933, -122.426334],
  [45.50293, -122.426627],
  [45.502928, -122.426838],
  [45.502922, -122.427323],
  [45.502919, -122.427622],
  [45.502919, -122.427821],
  [45.502948, -122.427975],
  [45.50297, -122.428087],
  [45.503008, -122.428251],
  [45.503056, -122.42843],
  [45.503201, -122.428927],
  [45.503418, -122.429668],
  [45.503776, -122.430915],
  [45.503792, -122.430991],
  [45.503858, -122.430991],
  [45.504327, -122.43099],
  [45.504407, -122.430991],
  [45.504513, -122.430993],
  [45.504513, -122.431138],
  [45.504514, -122.432219],
  [45.504514, -122.432359],
  [45.504517, -122.432908],
  [45.504517, -122.432951],
  [45.504517, -122.433016],
  [45.504513, -122.433595],
  [45.504512, -122.433902],
  [45.504513, -122.433998],
  [45.504522, -122.435396],
  [45.504523, -122.435508],
  [45.504526, -122.435663],
  [45.504528, -122.435828],
  [45.50453, -122.436564],
  [45.504532, -122.436959],
  [45.504532, -122.438172],
  [45.504538, -122.439357],
  [45.504537, -122.439434],
  [45.504539, -122.440917],
  [45.50454, -122.441099],
  [45.504612, -122.441099],
  [45.504677, -122.441099],
  [45.505217, -122.441096],
  [45.505876, -122.44109],
  [45.506673, -122.441087],
  [45.50764, -122.441082],
  [45.507722, -122.441075],
  [45.507825, -122.441057],
  [45.507887, -122.441037],
  [45.507928, -122.441025],
  [45.507984, -122.441009],
  [45.508149, -122.440959],
  [45.508229, -122.440926],
  [45.508334, -122.440867],
  [45.50848, -122.440786],
  [45.50914, -122.440412],
  [45.509806, -122.440043],
  [45.510325, -122.43975],
  [45.511023, -122.439356],
  [45.511133, -122.439294],
  [45.51136, -122.440121],
  [45.511572, -122.440863],
  [45.511642, -122.440935],
  [45.511791, -122.441483],
  [45.511783, -122.44164],
  [45.511919, -122.442123],
  [45.512319, -122.443569],
  [45.512639, -122.444769],
  [45.512667, -122.444882],
  [45.512849, -122.445624],
  [45.513239, -122.447322],
  [45.513599, -122.448929],
  [45.513978, -122.450604],
  [45.514033, -122.450852],
  [45.514261, -122.451869],
  [45.514496, -122.452918],
  [45.51461, -122.453422],
  [45.51495, -122.454984],
  [45.514981, -122.455118],
  [45.515392, -122.456931],
  [45.515739, -122.458443],
  [45.515812, -122.458568],
  [45.515883, -122.458855],
  [45.515995, -122.459274],
  [45.516086, -122.459595],
  [45.516248, -122.460136],
  [45.516294, -122.460287],
  [45.516343, -122.460433],
  [45.516366, -122.460503],
  [45.51646, -122.460789],
  [45.516554, -122.461062],
  [45.516666, -122.461376],
  [45.51674, -122.461569],
  [45.516764, -122.461633],
  [45.516875, -122.461919],
  [45.516993, -122.462206],
  [45.517148, -122.462571],
  [45.517277, -122.462872],
  [45.517549, -122.463516],
  [45.518051, -122.464703],
  [45.518233, -122.465132],
  [45.518521, -122.465773],
  [45.518647, -122.466072],
  [45.51882, -122.466474],
  [45.518976, -122.466848],
  [45.519104, -122.467141],
  [45.51918, -122.467314],
  [45.519463, -122.467954],
  [45.519666, -122.468427],
  [45.519882, -122.468942],
  [45.520031, -122.469341],
  [45.520331, -122.470049],
  [45.520404, -122.4702],
  [45.52047, -122.470336],
  [45.520649, -122.470757],
  [45.520698, -122.47087],
  [45.520837, -122.471207],
  [45.521059, -122.471775],
  [45.52118, -122.472091],
  [45.521272, -122.472344],
  [45.521333, -122.472517],
  [45.521417, -122.472781],
  [45.521474, -122.47297],
  [45.52154, -122.473211],
  [45.521587, -122.473375],
  [45.521658, -122.473653],
  [45.521726, -122.473952],
  [45.521764, -122.474121],
  [45.521796, -122.474282],
  [45.521847, -122.474554],
  [45.5219, -122.474874],
  [45.521938, -122.475131],
  [45.521969, -122.475376],
  [45.522026, -122.475789],
  [45.522052, -122.476034],
  [45.522068, -122.476243],
  [45.522079, -122.476424],
  [45.52209, -122.476645],
  [45.5221, -122.477125],
  [45.522104, -122.477352],
  [45.522108, -122.477573],
  [45.522111, -122.477748],
  [45.52211, -122.478742],
  [45.522096, -122.479928],
  [45.522097, -122.480406],
  [45.5221, -122.480794],
  [45.522103, -122.480916],
  [45.522108, -122.481021],
  [45.522115, -122.481266],
  [45.522123, -122.481551],
  [45.522129, -122.482118],
  [45.522131, -122.48236],
  [45.522142, -122.48348],
  [45.522143, -122.483641],
  [45.522146, -122.483761],
  [45.522148, -122.483835],
  [45.522166, -122.48438],
  [45.522169, -122.484556],
  [45.522175, -122.485448],
  [45.522179, -122.485924],
  [45.522183, -122.48615],
  [45.522187, -122.486382],
  [45.522189, -122.486682],
  [45.522194, -122.487488],
  [45.522183, -122.48829],
  [45.522189, -122.489236],
  [45.522203, -122.490668],
  [45.522204, -122.491163],
  [45.5222, -122.491449],
  [45.522196, -122.491785],
  [45.522196, -122.492038],
  [45.5222, -122.492295],
  [45.522205, -122.49253],
  [45.522217, -122.492881],
  [45.522224, -122.493284],
  [45.522226, -122.493387],
  [45.522231, -122.49399],
  [45.522251, -122.494705],
  [45.522255, -122.495528],
  [45.522264, -122.496237],
  [45.522268, -122.496468],
  [45.522272, -122.496684],
  [45.522273, -122.496953],
  [45.522276, -122.497354],
  [45.522275, -122.497893],
  [45.52227, -122.498237],
  [45.522266, -122.498618],
  [45.522267, -122.498805],
  [45.522269, -122.499019],
  [45.522275, -122.499632],
  [45.522278, -122.499996],
  [45.522284, -122.500555],
  [45.522295, -122.501577],
  [45.522295, -122.501681],
  [45.522291, -122.502078],
  [45.522282, -122.502511],
  [45.522282, -122.502788],
  [45.52229, -122.503314],
  [45.522291, -122.503625],
  [45.522297, -122.503842],
  [45.522308, -122.504144],
  [45.52232, -122.504631],
  [45.52232, -122.504729],
  [45.522319, -122.504994],
  [45.522312, -122.505474],
  [45.522309, -122.505678],
  [45.522323, -122.507134],
  [45.522325, -122.507387],
  [45.522337, -122.507746],
  [45.522346, -122.508087],
  [45.52237, -122.508946],
  [45.522376, -122.509711],
  [45.522386, -122.510659],
  [45.522387, -122.510883],
  [45.522391, -122.511247],
  [45.522394, -122.511491],
  [45.522395, -122.512136],
  [45.522389, -122.51278],
  [45.52239, -122.513239],
  [45.522412, -122.515816],
  [45.522423, -122.517106],
  [45.522433, -122.51838],
  [45.522434, -122.518489],
  [45.522454, -122.519367],
  [45.522457, -122.519667],
  [45.522459, -122.519952],
  [45.522462, -122.520372],
  [45.522465, -122.520745],
  [45.522467, -122.520959],
  [45.52247, -122.521199],
  [45.522476, -122.521918],
  [45.522477, -122.522383],
  [45.522473, -122.522971],
  [45.522465, -122.523529],
  [45.522464, -122.523635],
  [45.522461, -122.524089],
  [45.52247, -122.525377],
  [45.522478, -122.525791],
  [45.522486, -122.526107],
  [45.5225, -122.526613],
  [45.522502, -122.52694],
  [45.522501, -122.52741],
  [45.522501, -122.527747],
  [45.522497, -122.527925],
  [45.522494, -122.528092],
  [45.522499, -122.529102],
  [45.522512, -122.530816],
  [45.522512, -122.530859],
  [45.522534, -122.531709],
  [45.522535, -122.531807],
  [45.522534, -122.532151],
  [45.522527, -122.532561],
  [45.52253, -122.533905],
  [45.522536, -122.534494],
  [45.522541, -122.534728],
  [45.522553, -122.535246],
  [45.522585, -122.53592],
  [45.522589, -122.536235],
  [45.522583, -122.536502],
  [45.522578, -122.536745],
  [45.522583, -122.537546],
  [45.522588, -122.537773],
  [45.522592, -122.538008],
  [45.522596, -122.538477],
  [45.522598, -122.538706],
  [45.522598, -122.539194],
  [45.522587, -122.539904],
  [45.522594, -122.540835],
  [45.5226, -122.54116],
  [45.522613, -122.541574],
  [45.522616, -122.541787],
  [45.522615, -122.542372],
  [45.522617, -122.542923],
  [45.522617, -122.543093],
  [45.52263, -122.544916],
  [45.522639, -122.545356],
  [45.522643, -122.545532],
  [45.522641, -122.545836],
  [45.522644, -122.546228],
  [45.522646, -122.54677],
  [45.522646, -122.546949],
  [45.522634, -122.547459],
  [45.522627, -122.548],
  [45.52264, -122.549686],
  [45.522662, -122.55063],
  [45.522682, -122.551172],
  [45.522685, -122.551909],
  [45.522685, -122.552169],
  [45.522686, -122.552352],
  [45.522685, -122.552614],
  [45.522671, -122.553204],
  [45.522666, -122.553833],
  [45.522672, -122.554539],
  [45.522676, -122.554987],
  [45.52269, -122.55557],
  [45.52271, -122.556272],
  [45.522721, -122.556764],
  [45.522723, -122.557041],
  [45.522723, -122.557106],
  [45.522721, -122.557423],
  [45.522725, -122.558071],
  [45.52273, -122.558291],
  [45.522736, -122.558516],
  [45.522739, -122.55919],
  [45.522738, -122.55929],
  [45.522733, -122.559828],
  [45.522738, -122.560909],
  [45.522744, -122.561625],
  [45.52275, -122.562272],
  [45.522794, -122.56228],
  [45.523145, -122.562264],
  [45.524011, -122.562235],
  [45.524688, -122.562217],
  [45.525281, -122.562197],
  [45.525319, -122.562195],
  [45.525402, -122.562193],
  [45.525503, -122.56218],
  [45.525566, -122.562165],
  [45.525662, -122.562127],
  [45.525717, -122.562097],
  [45.5258, -122.56204],
  [45.525855, -122.562013],
  [45.525914, -122.561994],
  [45.526032, -122.561984],
  [45.526166, -122.561978],
  [45.526284, -122.561981],
  [45.52641, -122.561985],
  [45.527497, -122.561961],
  [45.52772, -122.561958],
  [45.528199, -122.561952],
  [45.528369, -122.56195],
  [45.528501, -122.561948],
  [45.528923, -122.561944],
  [45.529477, -122.561942],
  [45.52947, -122.562054],
  [45.529468, -122.562594],
  [45.529467, -122.562813],
  [45.529466, -122.563],
  [45.529533, -122.563066],
  [45.529537, -122.563312],
  [45.529537, -122.563337],
  [45.529538, -122.563394],
  [45.529547, -122.563465],
  [45.529549, -122.563479],
  [45.529567, -122.563548],
  [45.529588, -122.563598],
  [45.529653, -122.563654],
  [45.529748, -122.56368],
  [45.529938, -122.563661],
  [45.530105, -122.56369],
  [45.530678, -122.563903],
  [45.531008, -122.564005],
  [45.531055, -122.564003],
  [45.531106, -122.563969],
  [45.531154, -122.563897],
  [45.531162, -122.563873],
  [45.531172, -122.563846],
  [45.531186, -122.563794],
  [45.531199, -122.563739],
  [45.531234, -122.563555],
  [45.531163, -122.563535],
  [45.531062, -122.563504],
  [45.530303, -122.563198],
  [45.530197, -122.563158],
  [45.529906, -122.563116],
  [45.529894, -122.563118],
  [45.529758, -122.563141],
  [45.529692, -122.563131],
  [45.529684, -122.56313],
  [45.529636, -122.56312],
  [45.529533, -122.563066],
  [45.529466, -122.563],
  [45.529468, -122.562594],
  [45.52947, -122.562054],
  [45.529477, -122.561942],
  [45.528923, -122.561944],
  [45.528501, -122.561948],
  [45.528369, -122.56195],
  [45.528199, -122.561952],
  [45.52772, -122.561958],
  [45.527497, -122.561961],
  [45.52641, -122.561985],
  [45.526284, -122.561981],
  [45.526286, -122.562097],
  [45.526288, -122.562907],
  [45.526296, -122.563531],
  [45.526304, -122.56391],
  [45.526311, -122.564199],
  [45.526315, -122.564316],
  [45.526318, -122.564463],
  [45.526319, -122.56462],
  [45.526329, -122.56585],
  [45.526327, -122.566043],
  [45.526332, -122.566568],
  [45.526334, -122.566786],
  [45.526335, -122.566924],
  [45.52634, -122.567445],
  [45.526342, -122.567708],
  [45.526347, -122.568346],
  [45.52635, -122.568652],
  [45.526354, -122.569331],
  [45.526358, -122.56992],
  [45.526361, -122.570308],
  [45.526367, -122.571264],
  [45.526377, -122.572877],
  [45.526381, -122.573624],
  [45.526384, -122.573889],
  [45.526393, -122.574993],
  [45.526396, -122.575291],
  [45.526401, -122.575976],
  [45.526401, -122.57601],
  [45.526404, -122.576486],
  [45.526405, -122.57662],
  [45.526408, -122.577031],
  [45.526415, -122.578042],
  [45.526418, -122.578445],
  [45.526419, -122.578521],
  [45.526421, -122.578928],
  [45.52642, -122.579056],
  [45.526515, -122.579058],
  [45.526716, -122.579056],
  [45.526742, -122.579056],
  [45.526968, -122.579053],
  [45.527999, -122.579055],
  [45.528385, -122.579052],
  [45.529475, -122.579045],
  [45.530187, -122.579044],
  [45.530957, -122.579039],
  [45.5316, -122.579041],
  [45.531713, -122.579041],
  [45.531779, -122.579041],
  [45.532143, -122.579032],
  [45.532343, -122.579032],
  [45.532414, -122.579034],
  [45.532501, -122.579036],
  [45.532764, -122.579036],
  [45.532846, -122.579036],
  [45.532963, -122.579036],
  [45.533025, -122.578964],
  [45.533171, -122.578964],
  [45.533614, -122.578962],
  [45.53382, -122.578962],
  [45.533972, -122.579039],
  [45.533966, -122.578853],
  [45.533964, -122.578775],
  [45.533963, -122.578736],
  [45.533956, -122.578654],
  [45.533949, -122.578609],
  [45.533927, -122.578538],
  [45.533809, -122.578232],
  [45.533717, -122.577994],
  [45.53365, -122.577803],
  [45.533612, -122.577683],
  [45.533607, -122.57766],
  [45.533592, -122.577599],
  [45.533577, -122.577519],
  [45.533566, -122.577393],
  [45.533563, -122.577328],
  [45.533561, -122.577268],
  [45.533552, -122.576687],
  [45.533553, -122.576617],
  [45.533564, -122.576564],
  [45.533576, -122.576517],
  [45.533595, -122.576471],
  [45.533613, -122.576438],
  [45.533638, -122.576403],
  [45.533668, -122.576376],
  [45.533741, -122.576316],
  [45.533914, -122.576501],
  [45.534032, -122.576697],
  [45.534106, -122.576831],
  [45.534162, -122.576936],
  [45.534218, -122.577054],
  [45.534283, -122.577197],
  [45.534335, -122.577314],
  [45.534428, -122.577548],
  [45.534476, -122.57769],
  [45.534502, -122.577786],
  [45.534526, -122.577887],
  [45.534545, -122.578007],
  [45.534558, -122.578106],
  [45.534569, -122.578234],
  [45.534574, -122.578335],
  [45.534575, -122.578417],
  [45.534575, -122.578518],
  [45.534568, -122.578678],
  [45.5345, -122.578867],
  [45.53449, -122.578928],
  [45.534475, -122.579001],
  [45.534453, -122.579086],
  [45.534429, -122.579171],
  [45.534379, -122.579316],
  [45.534346, -122.579399],
  [45.534314, -122.579474],
  [45.534272, -122.579569],
  [45.53421, -122.579694],
  [45.534023, -122.580071],
  [45.533775, -122.580562],
  [45.533704, -122.580705],
  [45.533674, -122.580775],
  [45.533648, -122.580843],
  [45.533635, -122.580885],
  [45.533625, -122.58093],
  [45.533617, -122.58098],
  [45.533612, -122.581028],
  [45.533608, -122.581103],
  [45.533607, -122.581159],
  [45.533607, -122.581708],
  [45.533606, -122.58196],
  [45.533606, -122.582035],
  [45.533604, -122.582941],
  [45.533604, -122.583165],
  [45.533602, -122.583912],
  [45.533601, -122.584182],
  [45.5336, -122.584829],
  [45.533599, -122.585194],
  [45.533598, -122.585802],
  [45.533598, -122.586207],
  [45.533596, -122.586785],
  [45.533595, -122.58722],
  [45.533594, -122.587751],
  [45.533593, -122.588239],
  [45.533594, -122.588734],
  [45.533596, -122.58938],
  [45.533597, -122.589826],
  [45.5336, -122.590095],
  [45.533609, -122.590392],
  [45.533623, -122.590841],
  [45.533634, -122.591729],
  [45.533637, -122.59236],
  [45.533637, -122.592574],
  [45.533643, -122.593877],
  [45.533645, -122.594334],
  [45.533647, -122.594756],
  [45.533661, -122.595965],
  [45.533669, -122.596606],
  [45.533671, -122.596749],
  [45.533682, -122.59768],
  [45.53369, -122.598621],
  [45.533693, -122.598931],
  [45.533697, -122.599558],
  [45.533701, -122.60022],
  [45.533704, -122.600604],
  [45.533706, -122.601197],
  [45.533707, -122.601621],
  [45.533706, -122.602022],
  [45.533707, -122.602163],
  [45.533633, -122.602165],
  [45.533617, -122.602165],
  [45.533011, -122.602173],
  [45.532284, -122.602184],
  [45.531637, -122.602193],
  [45.531001, -122.602207],
  [45.530319, -122.602214],
  [45.529559, -122.602224],
  [45.52895, -122.602239],
  [45.528642, -122.602246],
  [45.528603, -122.602248],
  [45.528312, -122.602257],
  [45.528217, -122.602259],
  [45.527957, -122.602265],
  [45.527219, -122.602274],
  [45.526952, -122.602262],
  [45.526582, -122.602264],
  [45.526481, -122.602265],
  [45.526486, -122.603834],
  [45.52659, -122.603835],
  [45.526932, -122.603834],
  [45.527018, -122.603841],
  [45.527111, -122.603861],
  [45.527198, -122.60391],
  [45.527265, -122.603973],
  [45.527327, -122.60406],
  [45.527387, -122.604173],
  [45.527603, -122.604638],
  [45.527648, -122.604747],
  [45.527709, -122.604929],
  [45.527747, -122.605053],
  [45.527761, -122.605156],
  [45.527761, -122.605258],
  [45.527749, -122.605356],
  [45.527672, -122.605792],
  [45.527617, -122.606148],
  [45.527572, -122.606493],
  [45.527537, -122.606835],
  [45.527523, -122.606983],
  [45.527512, -122.607132],
  [45.527495, -122.607375],
  [45.527485, -122.607585],
  [45.52748, -122.607794],
  [45.527475, -122.607968],
  [45.527422, -122.608276],
  [45.527427, -122.608347],
  [45.527458, -122.608669],
  [45.527494, -122.608986],
  [45.527538, -122.609271],
  [45.527592, -122.609575],
  [45.527657, -122.609873],
  [45.527733, -122.610172],
  [45.527817, -122.61046],
  [45.527911, -122.610736],
  [45.528017, -122.611016],
  [45.528128, -122.61128],
  [45.528254, -122.611543],
  [45.528385, -122.611793],
  [45.528519, -122.612034],
  [45.528664, -122.612277],
  [45.528805, -122.612507],
  [45.530274, -122.614778],
  [45.53077, -122.61531],
  [45.530954, -122.615578],
  [45.531212, -122.615995],
  [45.531471, -122.616434],
  [45.531684, -122.616849],
  [45.531778, -122.617053],
  [45.532169, -122.617977],
  [45.532419, -122.618553],
  [45.53254, -122.61875],
  [45.532699, -122.618944],
  [45.532817, -122.619023],
  [45.532912, -122.619066],
  [45.533036, -122.619096],
  [45.533101, -122.619101],
  [45.53347, -122.619098],
  [45.533703, -122.619098],
  [45.53379, -122.619096],
  [45.53379, -122.619171],
  [45.533792, -122.619553],
  [45.533793, -122.619652],
  [45.533794, -122.619781],
  [45.533799, -122.620308],
  [45.533798, -122.62045],
  [45.533797, -122.620699],
  [45.533796, -122.620943],
  [45.533795, -122.621029],
  [45.533795, -122.621142],
  [45.533795, -122.621292],
  [45.533793, -122.621732],
  [45.533798, -122.621887],
  [45.5338, -122.621934],
  [45.533806, -122.622061],
  [45.533821, -122.622306],
  [45.533833, -122.622454],
  [45.533836, -122.622487],
  [45.533844, -122.622754],
  [45.533809, -122.62295],
  [45.533886, -122.622901],
  [45.533931, -122.622885],
  [45.534309, -122.622884],
  [45.534367, -122.622884],
  [45.534768, -122.622883],
  [45.534866, -122.622899],
  [45.534709, -122.623296],
  [45.534486, -122.623813],
  [45.534445, -122.623913],
  [45.534405, -122.624009],
  [45.534315, -122.624216],
  [45.534245, -122.624373],
  [45.534178, -122.624537],
  [45.534052, -122.624854],
  [45.534044, -122.624969],
  [45.534033, -122.625149],
  [45.533988, -122.62527],
  [45.533962, -122.625359],
  [45.533952, -122.625432],
  [45.533948, -122.625495],
  [45.53395, -122.62556],
  [45.533954, -122.625627],
  [45.533965, -122.625695],
  [45.53399, -122.625857],
  [45.534302, -122.627244],
  [45.534357, -122.627509],
  [45.534406, -122.627765],
  [45.534448, -122.628024],
  [45.534475, -122.628255],
  [45.534497, -122.628497],
  [45.534508, -122.628709],
  [45.534512, -122.628901],
  [45.534509, -122.629096],
  [45.534498, -122.629258],
  [45.534485, -122.629436],
  [45.534467, -122.629583],
  [45.534438, -122.629765],
  [45.5344, -122.629962],
  [45.53435, -122.630168],
  [45.534301, -122.630376],
  [45.534247, -122.630547],
  [45.534192, -122.630703],
  [45.53412, -122.630862],
  [45.534062, -122.630986],
  [45.533959, -122.631178],
  [45.533843, -122.631359],
  [45.533726, -122.631521],
  [45.533602, -122.631672],
  [45.53348, -122.631835],
  [45.533354, -122.631987],
  [45.533222, -122.632135],
  [45.533089, -122.632273],
  [45.532949, -122.632413],
  [45.532809, -122.632541],
  [45.532672, -122.632659],
  [45.532249, -122.633018],
  [45.532104, -122.633143],
  [45.531963, -122.633265],
  [45.531826, -122.63339],
  [45.531686, -122.633525],
  [45.531559, -122.633655],
  [45.531429, -122.633805],
  [45.531306, -122.633959],
  [45.531188, -122.634126],
  [45.531083, -122.6343],
  [45.530981, -122.634479],
  [45.530884, -122.634674],
  [45.530805, -122.634861],
  [45.530729, -122.635074],
  [45.530664, -122.635287],
  [45.530604, -122.635508],
  [45.530556, -122.635732],
  [45.530515, -122.635961],
  [45.530483, -122.636188],
  [45.530457, -122.636427],
  [45.530438, -122.63667],
  [45.530422, -122.6369],
  [45.53041, -122.637133],
  [45.530353, -122.638209],
  [45.529983, -122.646034],
  [45.529986, -122.646901],
  [45.529985, -122.647138],
  [45.529978, -122.647376],
  [45.529967, -122.647598],
  [45.529919, -122.648173],
  [45.529898, -122.648413],
  [45.529873, -122.648665],
  [45.529846, -122.64891],
  [45.529826, -122.649139],
  [45.529816, -122.649304],
  [45.529812, -122.649456],
  [45.529814, -122.64959],
  [45.529821, -122.649707],
  [45.52984, -122.649886],
  [45.529861, -122.650059],
  [45.529953, -122.650688],
  [45.529969, -122.650838],
  [45.529979, -122.650972],
  [45.529988, -122.651256],
  [45.529978, -122.651413],
  [45.529963, -122.651547],
  [45.529936, -122.651703],
  [45.529918, -122.651783],
  [45.529905, -122.651843],
  [45.529825, -122.652172],
  [45.529729, -122.652384],
  [45.529615, -122.652595],
  [45.529577, -122.652812],
  [45.529471, -122.653166],
  [45.529409, -122.653354],
  [45.529351, -122.65353],
  [45.529238, -122.653617],
  [45.529104, -122.654163],
  [45.52906, -122.654334],
  [45.529147, -122.654388],
  [45.529237, -122.654443],
  [45.529301, -122.654482],
  [45.529409, -122.654557],
  [45.529446, -122.654574],
  [45.529491, -122.654585],
  [45.529522, -122.654586],
  [45.529894, -122.654585],
  [45.529938, -122.654585],
  [45.529999, -122.654583],
  [45.530051, -122.654581],
  [45.530104, -122.65458],
  [45.530119, -122.654579],
  [45.530178, -122.654578],
  [45.530202, -122.654577],
  [45.530574, -122.654588],
  [45.53065, -122.654591],
  [45.530817, -122.654589],
  [45.531391, -122.654592],
  [45.531487, -122.654597],
  [45.531486, -122.6547],
  [45.531492, -122.65648],
  [45.531493, -122.656597],
  [45.531495, -122.656729],
  [45.531495, -122.657075],
  [45.531497, -122.657721],
  [45.5315, -122.658493],
  [45.531501, -122.658609],
  [45.531501, -122.658652],
  [45.5315, -122.658734],
  [45.531504, -122.659645],
  [45.531503, -122.659709],
  [45.531507, -122.660597],
  [45.531507, -122.660659],
  [45.531509, -122.661551],
  [45.531511, -122.661673],
  [45.531512, -122.661812],
  [45.531509, -122.661879],
  [45.531502, -122.661972],
  [45.531485, -122.662062],
  [45.531483, -122.662072],
  [45.53147, -122.662125],
  [45.531445, -122.662198],
  [45.531416, -122.662269],
  [45.531343, -122.662413],
  [45.53129, -122.662513],
  [45.531106, -122.662873],
  [45.531049, -122.662985],
  [45.530966, -122.66314],
  [45.530916, -122.663245],
  [45.530893, -122.663299],
  [45.53087, -122.663358],
  [45.530844, -122.663438],
  [45.53082, -122.66354],
  [45.530807, -122.663625],
  [45.530794, -122.66372],
  [45.530785, -122.663828],
  [45.530784, -122.663947],
  [45.530789, -122.664629],
  [45.530791, -122.664722],
  [45.530797, -122.665528],
  [45.530796, -122.665669],
  [45.530794, -122.665782],
  [45.530704, -122.665831],
  [45.530627, -122.66584],
  [45.530504, -122.665878],
  [45.530408, -122.665911],
  [45.530305, -122.665948],
  [45.530258, -122.665977],
  [45.530221, -122.66602],
  [45.530185, -122.666084],
  [45.530056, -122.666313],
  [45.529979, -122.666427],
  [45.529978, -122.666429],
  [45.52988, -122.666547],
  [45.529824, -122.666612],
  [45.529802, -122.666637],
  [45.529769, -122.666672],
  [45.529651, -122.666796],
  [45.529605, -122.666842],
  [45.529561, -122.666885],
  [45.529524, -122.666918],
  [45.529487, -122.666937],
  [45.529445, -122.666948],
  [45.529383, -122.66696],
  [45.529304, -122.666981],
  [45.529093, -122.66705],
  [45.528988, -122.667116],
  [45.52887, -122.667158],
  [45.528774, -122.667212],
  [45.528694, -122.667259],
  [45.528584, -122.667346],
  [45.528514, -122.667415],
  [45.528435, -122.667506],
  [45.528354, -122.667624],
  [45.528269, -122.667779],
  [45.527772, -122.668873],
  [45.527588, -122.669277],
  [45.52745, -122.669581],
  [45.527077, -122.670373],
  [45.526965, -122.670603],
  [45.526904, -122.670724],
  [45.526867, -122.670807],
  [45.526859, -122.670828],
  [45.526845, -122.670881],
  [45.526834, -122.670939],
  [45.52683, -122.670996],
  [45.526828, -122.671101],
  [45.52688, -122.672382],
  [45.526879, -122.672503],
  [45.526872, -122.672738],
  [45.526863, -122.672975],
  [45.52686, -122.673192],
  [45.526844, -122.673331],
  [45.526834, -122.673421],
  [45.526817, -122.673573],
  [45.526809, -122.673643],
  [45.526755, -122.67409],
  [45.526714, -122.67443],
  [45.526679, -122.674539],
  [45.526674, -122.674659],
  [45.52667, -122.674755],
  [45.526661, -122.67494],
  [45.526646, -122.675469],
  [45.526645, -122.675527],
  [45.526585, -122.675524],
  [45.52599, -122.675512],
  [45.52593, -122.67551],
  [45.525224, -122.675481],
  [45.524508, -122.675451],
  [45.524455, -122.675457],
  [45.523886, -122.675436],
  [45.523856, -122.675435],
  [45.523796, -122.675434],
  [45.523744, -122.675433],
  [45.523208, -122.675414],
  [45.523141, -122.675403],
  [45.523025, -122.675386],
  [45.522962, -122.67538],
  [45.522922, -122.675383],
  [45.52288, -122.675394],
  [45.522703, -122.675478],
  [45.522612, -122.675527],
  [45.52258, -122.675542],
  [45.522549, -122.675556],
  [45.522184, -122.67573],
  [45.522128, -122.67575],
  [45.52206, -122.675774],
  [45.521541, -122.67606],
  [45.521534, -122.676064],
  [45.521457, -122.67611],
  [45.52137, -122.67616],
  [45.520857, -122.676429],
  [45.52079, -122.676466],
  [45.520181, -122.676796],
  [45.520125, -122.676825],
  [45.520048, -122.676865],
  [45.519566, -122.677133],
  [45.519507, -122.677166],
  [45.519457, -122.67719],
  [45.519358, -122.677239],
  [45.51891, -122.67748],
  [45.518833, -122.677521],
  [45.518798, -122.677543],
  [45.518814, -122.677603],
  [45.518834, -122.67767],
  [45.519082, -122.678589],
  [45.519096, -122.678641],
  [45.519236, -122.679162],
  [45.519303, -122.67941],
  [45.519357, -122.679615],
  [45.519602, -122.680517],
  [45.519623, -122.680592],
  [45.51975, -122.681065],
  [45.51977, -122.681138],
  [45.519987, -122.681956],
  [45.519997, -122.681993],
  [45.520015, -122.68206],
  [45.520028, -122.682107],
  [45.520054, -122.682199],
  [45.520065, -122.682245],
  [45.520273, -122.68301],
  [45.520303, -122.683129],
  [45.520328, -122.683232],
  [45.520573, -122.684152],
  [45.520602, -122.684259],
  [45.520838, -122.685153],
  [45.520877, -122.685299],
  [45.521085, -122.686087],
  [45.521115, -122.686206],
  [45.521144, -122.686305],
  [45.521352, -122.687103],
  [45.521371, -122.687176],
  [45.521457, -122.687506],
  [45.521537, -122.687814],
  [45.5216, -122.688056],
  [45.521626, -122.688136],
  [45.521665, -122.688284],
  [45.521877, -122.689075],
  [45.521893, -122.689147],
  [45.52192, -122.689244],
  [45.52213, -122.690035],
  [45.522163, -122.690155],
  [45.522095, -122.690252],
  [45.521882, -122.690367],
  [45.521789, -122.690418],
  [45.521579, -122.690559],
  [45.521445, -122.690635],
  [45.520913, -122.69092],
  [45.520851, -122.690954],
  [45.520791, -122.690992],
  [45.520694, -122.691057],
  [45.520655, -122.691086],
  [45.52061, -122.691127],
  [45.520574, -122.691174],
  [45.520563, -122.691187],
  [45.520395, -122.691314],
  [45.520142, -122.691525],
  [45.520047, -122.691601],
  [45.519949, -122.691679],
  [45.519853, -122.69175],
  [45.519716, -122.691848],
  [45.519435, -122.692023],
  [45.519381, -122.692054],
  [45.51869, -122.692443],
  [45.518466, -122.692577],
  [45.518295, -122.692669],
  [45.518147, -122.69275],
  [45.518115, -122.692767],
  [45.518078, -122.692796],
  [45.51802, -122.692826],
  [45.518027, -122.692852],
  [45.518005, -122.692886],
  [45.517983, -122.69293],
  [45.517954, -122.692989],
  [45.517939, -122.693016],
  [45.51792, -122.693046],
  [45.517898, -122.693084],
  [45.517854, -122.693112],
  [45.517821, -122.693126],
  [45.517784, -122.693135],
  [45.517743, -122.693134],
  [45.517698, -122.693119],
  [45.517655, -122.693088],
  [45.517622, -122.693052]
];

const stopNames = {
  "1114": "SW 18th &amp; Goose Hollow MAX Station",
  "2592": "Rose Quarter Transit Center",
  "6911": "SW 18th &amp; Morrison",
  "7625": "SW 5th &amp; Morrison",
  "7627": "SW 5th &amp; Oak St MAX Station",
  "7828": "NE 60th &amp; 60th Ave MAX Stn/I-84",
  "7999": "NE 82nd &amp; 82nd Ave MAX Stn/I-84",
  "8321": "NE Pacific St &amp; The Oregon Clinic",
  "8513": "NE 11th &amp; Holladay",
  "9303": "NW 5th &amp; Couch MAX Station",
  "9311": "NW Glisan &amp; 3rd",
  "10859": "Gresham Central Transit Center ",
  "10864": "Gateway Transit Center ",
  "10876": "NE Multnomah &amp; 9th",
  "10877": "E Burnside &amp; NE 102nd",
  "11492": "NE Multnomah &amp; 3rd",
  "13535": "SW Morrison &amp; 10th",
  "14022": "E Burnside &amp; NE 148th",
  "14023": "E Burnside &amp; NE 122nd",
  "14079": "E Burnside &amp; SE 197th MAX Stn (at Kaiser)",
  "14144": "NE Halsey &amp; 42nd (Hollywood)",
  "14151": "E Burnside &amp; 187th/188th",
  "14152": "E Burnside &amp; NE 181st",
  "14153": "E Burnside &amp; NE 172nd",
  "14154": "E Burnside &amp; NE 162nd",
  "14232": "Cleveland Ave Park &amp; Ride",
  "14234": "NW Division &amp; Ava Ln",
  "14545": "NW Civic Dr &amp; 15th"
};

const stops = [
  { stop_id: "14232", name: "Cleveland Ave Park &amp; Ride", lat: 45.503106, lon: -122.418964, times: ["12:31 AM"] },
  { stop_id: "10859", name: "Gresham Central Transit Center ", lat: 45.503008, lon: -122.42684, times: ["12:32 AM"] },
  { stop_id: "14234", name: "NW Division &amp; Ava Ln", lat: 45.504597, lon: -122.436563, times: ["12:34 AM"] },
  { stop_id: "14545", name: "NW Civic Dr &amp; 15th", lat: 45.508285, lon: -122.440793, times: ["12:35 AM"] },
  { stop_id: "14079", name: "E Burnside &amp; SE 197th MAX Stn (at Kaiser)", lat: 45.516776, lon: -122.461523, times: ["12:40 AM"] },
  { stop_id: "14151", name: "E Burnside &amp; 187th/188th", lat: 45.520676, lon: -122.470697, times: ["12:41 AM"] },
  { stop_id: "14152", name: "E Burnside &amp; NE 181st", lat: 45.522143, lon: -122.477567, times: ["12:42 AM"] },
  { stop_id: "14153", name: "E Burnside &amp; NE 172nd", lat: 45.52222, lon: -122.486692, times: ["12:44 AM"] },
  { stop_id: "14154", name: "E Burnside &amp; NE 162nd", lat: 45.522307, lon: -122.497091, times: ["12:45 AM"] },
  { stop_id: "14022", name: "E Burnside &amp; NE 148th", lat: 45.522425, lon: -122.51117, times: ["12:47 AM"] },
  { stop_id: "14023", name: "E Burnside &amp; NE 122nd", lat: 45.522629, lon: -122.538549, times: ["12:51 AM"] },
  { stop_id: "10877", name: "E Burnside &amp; NE 102nd", lat: 45.522766, lon: -122.55929, times: ["12:55 AM"] },
  { stop_id: "8321", name: "NE Pacific St &amp; The Oregon Clinic", lat: 45.529559, lon: -122.562812, times: ["12:57 AM"] },
  { stop_id: "10864", name: "Gateway Transit Center ", lat: 45.5299, lon: -122.563177, times: ["12:58 AM"] },
  { stop_id: "7999", name: "NE 82nd &amp; 82nd Ave MAX Stn/I-84", lat: 45.53361, lon: -122.578852, times: ["1:03 AM"] },
  { stop_id: "7828", name: "NE 60th &amp; 60th Ave MAX Stn/I-84", lat: 45.528606, lon: -122.602393, times: ["1:10 AM"] },
  { stop_id: "14144", name: "NE Halsey &amp; 42nd (Hollywood)", lat: 45.53387, lon: -122.620711, times: ["1:14 AM"] },
  { stop_id: "8513", name: "NE 11th &amp; Holladay", lat: 45.529894, lon: -122.65446, times: ["1:20 AM"] },
  { stop_id: "10876", name: "NE Multnomah &amp; 9th", lat: 45.531573, lon: -122.657075, times: ["1:21 AM"] },
  { stop_id: "11492", name: "NE Multnomah &amp; 3rd", lat: 45.531159, lon: -122.66293, times: ["1:24 AM"] },
  { stop_id: "2592", name: "Rose Quarter Transit Center", lat: 45.530005, lon: -122.666476, times: ["1:26 AM"] },
  { stop_id: "9311", name: "NW Glisan &amp; 3rd", lat: 45.526817, lon: -122.674106, times: ["1:29 AM"] },
  { stop_id: "9303", name: "NW 5th &amp; Couch MAX Station", lat: 45.523885, lon: -122.675498, times: ["1:30 AM"] },
  { stop_id: "7627", name: "SW 5th &amp; Oak St MAX Station", lat: 45.521573, lon: -122.676178, times: ["1:31 AM"] },
  { stop_id: "7625", name: "SW 5th &amp; Morrison", lat: 45.518932, lon: -122.677571, times: ["1:33 AM"] },
  { stop_id: "13535", name: "SW Morrison &amp; 10th", lat: 45.520026, lon: -122.681933, times: ["1:34 AM"] },
  { stop_id: "6911", name: "SW 18th &amp; Morrison", lat: 45.52188, lon: -122.690453, times: ["1:37 AM"] },
  { stop_id: "1114", name: "SW 18th &amp; Goose Hollow MAX Station", lat: 45.517577, lon: -122.693099, times: ["1:39 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>