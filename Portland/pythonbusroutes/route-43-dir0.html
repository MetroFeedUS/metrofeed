<!DOCTYPE html>
<html lang="en">
<head>
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2219550569810489"
     crossorigin="anonymous"></script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 43 - To Tigard Transit Center | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
     .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      height: 90px;
      
      display: block;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
  width: 100vw;
  min-width: 100vw;
  height: 400px;
  border-radius: 0;
  margin-left: 50%;
  transform: translateX(-50%);
  border: none;
  box-shadow: none;
  padding: 0;
}
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }
  @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: rem;
      }
    }
  </style>
</head>
<body>
 
  <!-- üü¶ Auto-Injected Banner Ad (route-specific) -->
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-43-dir0-ad.html" style="border:none; width:100%; max-width 728px; height:90px;"></iframe>
  </div>


 <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">‚¨Ö Back</button>
  </div>

  <h1>Route 43 - To Tigard Transit Center</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 43;
  const direction = parseInt(0);

  // --- Set map bounds and zoom limits ---
  const bounds = L.latLngBounds(
    [45.40, -122.85], // SW
    [45.65, -122.45]  // NE
  );

  const map = L.map('map', {
    maxBounds: bounds,
    maxBoundsViscosity: 1.0,
    minZoom: 12,   // Don't allow zooming out past city
    maxZoom: 19,   // Allow good zoom in
    zoomControl: true,
    scrollWheelZoom: true,
    dragging: true
  }).setView([45.52, -122.68], 13);

  map.setMaxBounds(bounds);

// Keep map locked in bounds if user somehow escapes
map.on('moveend', function() {
  if (!bounds.contains(map.getCenter())) {
    map.panInsideBounds(bounds, { animate: true });
  }
});

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.499398, -122.685589],
  [45.499399, -122.685587],
  [45.499429, -122.685535],
  [45.49953, -122.68539],
  [45.499804, -122.684993],
  [45.500112, -122.684596],
  [45.500217, -122.684456],
  [45.500327, -122.684311],
  [45.500458, -122.684141],
  [45.500522, -122.684069],
  [45.500559, -122.684036],
  [45.500599, -122.684004],
  [45.500636, -122.683989],
  [45.500684, -122.683973],
  [45.50078, -122.683959],
  [45.500837, -122.683961],
  [45.500891, -122.683973],
  [45.500934, -122.683984],
  [45.500986, -122.684002],
  [45.501063, -122.684037],
  [45.501231, -122.684115],
  [45.501312, -122.684145],
  [45.501364, -122.684156],
  [45.501571, -122.68418],
  [45.501989, -122.684223],
  [45.502042, -122.684244],
  [45.502092, -122.684286],
  [45.502122, -122.684327],
  [45.502148, -122.684373],
  [45.502152, -122.684384],
  [45.502166, -122.684427],
  [45.502176, -122.684474],
  [45.502184, -122.684526],
  [45.502186, -122.684584],
  [45.502187, -122.684622],
  [45.502183, -122.684671],
  [45.502178, -122.684707],
  [45.502153, -122.684817],
  [45.501882, -122.685646],
  [45.501794, -122.685886],
  [45.501623, -122.686279],
  [45.50161, -122.686322],
  [45.501603, -122.686387],
  [45.501602, -122.68645],
  [45.501609, -122.686534],
  [45.501623, -122.686601],
  [45.50164, -122.686658],
  [45.501665, -122.686721],
  [45.501708, -122.686808],
  [45.501744, -122.686868],
  [45.501877, -122.68704],
  [45.501965, -122.687202],
  [45.502001, -122.687291],
  [45.50202, -122.687366],
  [45.502044, -122.687495],
  [45.502049, -122.687579],
  [45.502044, -122.687667],
  [45.502027, -122.687779],
  [45.501886, -122.688237],
  [45.501877, -122.688299],
  [45.501879, -122.688362],
  [45.501887, -122.688443],
  [45.501908, -122.688551],
  [45.501948, -122.688667],
  [45.502046, -122.688899],
  [45.502071, -122.688984],
  [45.502081, -122.689045],
  [45.502126, -122.689337],
  [45.502142, -122.689459],
  [45.50216, -122.689561],
  [45.502373, -122.690527],
  [45.502397, -122.690644],
  [45.502425, -122.690773],
  [45.502446, -122.69084],
  [45.502464, -122.690889],
  [45.502489, -122.690932],
  [45.502518, -122.690967],
  [45.502557, -122.690987],
  [45.50258, -122.690993],
  [45.502604, -122.690992],
  [45.502637, -122.690979],
  [45.502684, -122.690947],
  [45.502716, -122.690919],
  [45.502737, -122.690892],
  [45.502763, -122.690846],
  [45.50278, -122.690803],
  [45.502798, -122.69075],
  [45.502808, -122.690688],
  [45.502812, -122.690626],
  [45.502804, -122.690546],
  [45.502783, -122.690422],
  [45.50274, -122.690218],
  [45.502704, -122.690067],
  [45.502689, -122.689963],
  [45.50268, -122.68989],
  [45.502676, -122.689798],
  [45.50267, -122.689649],
  [45.502671, -122.689466],
  [45.502676, -122.689317],
  [45.502686, -122.68919],
  [45.502719, -122.688761],
  [45.502764, -122.688294],
  [45.502799, -122.687986],
  [45.502829, -122.687792],
  [45.502865, -122.687607],
  [45.50278, -122.68758],
  [45.50271, -122.687555],
  [45.502638, -122.68752],
  [45.502602, -122.687492],
  [45.502584, -122.687478],
  [45.502537, -122.687419],
  [45.502516, -122.687385],
  [45.502494, -122.687343],
  [45.502478, -122.687303],
  [45.50246, -122.687241],
  [45.50245, -122.687201],
  [45.502437, -122.687137],
  [45.502413, -122.686996],
  [45.502408, -122.68695],
  [45.502397, -122.686804],
  [45.502393, -122.686686],
  [45.502396, -122.686574],
  [45.50242, -122.686356],
  [45.502457, -122.686113],
  [45.502499, -122.685904],
  [45.502549, -122.685671],
  [45.502608, -122.68544],
  [45.502673, -122.685239],
  [45.502862, -122.684674],
  [45.502937, -122.68438],
  [45.50295, -122.68428],
  [45.502954, -122.684191],
  [45.502947, -122.684068],
  [45.502915, -122.683926],
  [45.502877, -122.683813],
  [45.502817, -122.683687],
  [45.502795, -122.683658],
  [45.502752, -122.683594],
  [45.502711, -122.683557],
  [45.502671, -122.683522],
  [45.502618, -122.683483],
  [45.502527, -122.683422],
  [45.502295, -122.68329],
  [45.500554, -122.682349],
  [45.500471, -122.682312],
  [45.500409, -122.682293],
  [45.500334, -122.682277],
  [45.500253, -122.682265],
  [45.500163, -122.682268],
  [45.500091, -122.682279],
  [45.500023, -122.682293],
  [45.499948, -122.682322],
  [45.499846, -122.682401],
  [45.49964, -122.682598],
  [45.499594, -122.682633],
  [45.499553, -122.682657],
  [45.499487, -122.682686],
  [45.499445, -122.682695],
  [45.499389, -122.682697],
  [45.499341, -122.682684],
  [45.499306, -122.682668],
  [45.499289, -122.68266],
  [45.49924, -122.682613],
  [45.499199, -122.682561],
  [45.49916, -122.682459],
  [45.499131, -122.682336],
  [45.499083, -122.682117],
  [45.499038, -122.681876],
  [45.498975, -122.681687],
  [45.498932, -122.681596],
  [45.498875, -122.681515],
  [45.498789, -122.681407],
  [45.498693, -122.681324],
  [45.498486, -122.681201],
  [45.497131, -122.680488],
  [45.497064, -122.680463],
  [45.49697, -122.680443],
  [45.496889, -122.680427],
  [45.496782, -122.680424],
  [45.496657, -122.680431],
  [45.496562, -122.680456],
  [45.496439, -122.680499],
  [45.496229, -122.680637],
  [45.496182, -122.680676],
  [45.496139, -122.680714],
  [45.496086, -122.680767],
  [45.49606, -122.680798],
  [45.495936, -122.680974],
  [45.495894, -122.681043],
  [45.495854, -122.681118],
  [45.495812, -122.681204],
  [45.495657, -122.681623],
  [45.495583, -122.681849],
  [45.495492, -122.682065],
  [45.495447, -122.682142],
  [45.495412, -122.6822],
  [45.495337, -122.682309],
  [45.495257, -122.682374],
  [45.495125, -122.682444],
  [45.494996, -122.682463],
  [45.49494, -122.682465],
  [45.494892, -122.682459],
  [45.494841, -122.682443],
  [45.494781, -122.682418],
  [45.494682, -122.682364],
  [45.494561, -122.682227],
  [45.494448, -122.682057],
  [45.494316, -122.681838],
  [45.494191, -122.68167],
  [45.49414, -122.681618],
  [45.49407, -122.68156],
  [45.493919, -122.681468],
  [45.493702, -122.681369],
  [45.493564, -122.681349],
  [45.493456, -122.681336],
  [45.493226, -122.68133],
  [45.493176, -122.681332],
  [45.492855, -122.681378],
  [45.49261, -122.681433],
  [45.492575, -122.681441],
  [45.49235, -122.681505],
  [45.492249, -122.681552],
  [45.492161, -122.681605],
  [45.492069, -122.681676],
  [45.491986, -122.681759],
  [45.491931, -122.681824],
  [45.491859, -122.681934],
  [45.491797, -122.682035],
  [45.491739, -122.682152],
  [45.491691, -122.682275],
  [45.491633, -122.682428],
  [45.491609, -122.682496],
  [45.491574, -122.682626],
  [45.49155, -122.682732],
  [45.491487, -122.682999],
  [45.491467, -122.683123],
  [45.491454, -122.683264],
  [45.491451, -122.68349],
  [45.49146, -122.683611],
  [45.491482, -122.683763],
  [45.491507, -122.683896],
  [45.491539, -122.684016],
  [45.491578, -122.684156],
  [45.491605, -122.684259],
  [45.491722, -122.684607],
  [45.491759, -122.684723],
  [45.491816, -122.684951],
  [45.491856, -122.685122],
  [45.491887, -122.685251],
  [45.491963, -122.685703],
  [45.491998, -122.685936],
  [45.492015, -122.68612],
  [45.492024, -122.68629],
  [45.49202, -122.686406],
  [45.492012, -122.686489],
  [45.491999, -122.686577],
  [45.491979, -122.686672],
  [45.491952, -122.686765],
  [45.491896, -122.686878],
  [45.491857, -122.686944],
  [45.491829, -122.686983],
  [45.491787, -122.687035],
  [45.491749, -122.687074],
  [45.491688, -122.687123],
  [45.491653, -122.687142],
  [45.4916, -122.687163],
  [45.491533, -122.687175],
  [45.491491, -122.687181],
  [45.491456, -122.68718],
  [45.491412, -122.687174],
  [45.491365, -122.687159],
  [45.491313, -122.687138],
  [45.491263, -122.687114],
  [45.491217, -122.687086],
  [45.49118, -122.68706],
  [45.491134, -122.687025],
  [45.490857, -122.686693],
  [45.490733, -122.686563],
  [45.490561, -122.686413],
  [45.490326, -122.686258],
  [45.49019, -122.686188],
  [45.490085, -122.686148],
  [45.489954, -122.686105],
  [45.489583, -122.68602],
  [45.489483, -122.685985],
  [45.489425, -122.685961],
  [45.489303, -122.685879],
  [45.488896, -122.685626],
  [45.488844, -122.685596],
  [45.488777, -122.685574],
  [45.488656, -122.685545],
  [45.488521, -122.685515],
  [45.488406, -122.685501],
  [45.488204, -122.685485],
  [45.488008, -122.685506],
  [45.48793, -122.685525],
  [45.487821, -122.685551],
  [45.487599, -122.685632],
  [45.487472, -122.685679],
  [45.487165, -122.685783],
  [45.487108, -122.685788],
  [45.48707, -122.685781],
  [45.487016, -122.685766],
  [45.48696, -122.685742],
  [45.48687, -122.68569],
  [45.486743, -122.685585],
  [45.486684, -122.685513],
  [45.486637, -122.685449],
  [45.486567, -122.685317],
  [45.486477, -122.685093],
  [45.486111, -122.684041],
  [45.486043, -122.683899],
  [45.485978, -122.683798],
  [45.485909, -122.683721],
  [45.48582, -122.683651],
  [45.485734, -122.683592],
  [45.485612, -122.683539],
  [45.485516, -122.68352],
  [45.485454, -122.683515],
  [45.485392, -122.68352],
  [45.485323, -122.683541],
  [45.485262, -122.683566],
  [45.48521, -122.683595],
  [45.485135, -122.683647],
  [45.485031, -122.683735],
  [45.484938, -122.683829],
  [45.484851, -122.683926],
  [45.484765, -122.684054],
  [45.484594, -122.684355],
  [45.48452, -122.684462],
  [45.484481, -122.684509],
  [45.484423, -122.684568],
  [45.484371, -122.68461],
  [45.484319, -122.684649],
  [45.484247, -122.68468],
  [45.484196, -122.684697],
  [45.484135, -122.684703],
  [45.484081, -122.684702],
  [45.484027, -122.684694],
  [45.483969, -122.684683],
  [45.483922, -122.684666],
  [45.483877, -122.684643],
  [45.483844, -122.684624],
  [45.483738, -122.684549],
  [45.483681, -122.684508],
  [45.48362, -122.684454],
  [45.483549, -122.684373],
  [45.483498, -122.684309],
  [45.483296, -122.683987],
  [45.483071, -122.683638],
  [45.483024, -122.683566],
  [45.483005, -122.683537],
  [45.482984, -122.683505],
  [45.482938, -122.683448],
  [45.482881, -122.683395],
  [45.482823, -122.683347],
  [45.482761, -122.683308],
  [45.482676, -122.683264],
  [45.482599, -122.683233],
  [45.482446, -122.683193],
  [45.482364, -122.683179],
  [45.482286, -122.683169],
  [45.482158, -122.683149],
  [45.482035, -122.683137],
  [45.481891, -122.683131],
  [45.48176, -122.683126],
  [45.481563, -122.683141],
  [45.481357, -122.683177],
  [45.481208, -122.683215],
  [45.481189, -122.683219],
  [45.481089, -122.683255],
  [45.481018, -122.683276],
  [45.480956, -122.683303],
  [45.480875, -122.683352],
  [45.480754, -122.683437],
  [45.48068, -122.68351],
  [45.480608, -122.683585],
  [45.480569, -122.683629],
  [45.480535, -122.683676],
  [45.480503, -122.683733],
  [45.480454, -122.683837],
  [45.480441, -122.683876],
  [45.480428, -122.683927],
  [45.480416, -122.683979],
  [45.480404, -122.684041],
  [45.480395, -122.684106],
  [45.480391, -122.684162],
  [45.480389, -122.684225],
  [45.480391, -122.68429],
  [45.4804, -122.684403],
  [45.480407, -122.684468],
  [45.480429, -122.684605],
  [45.48046, -122.684783],
  [45.480486, -122.684948],
  [45.480496, -122.685064],
  [45.480501, -122.685146],
  [45.480501, -122.685233],
  [45.480499, -122.685324],
  [45.480484, -122.685486],
  [45.480472, -122.685653],
  [45.480477, -122.685864],
  [45.480497, -122.686028],
  [45.480548, -122.68627],
  [45.480648, -122.686649],
  [45.480651, -122.686724],
  [45.480635, -122.686798],
  [45.480617, -122.686848],
  [45.480572, -122.686906],
  [45.48053, -122.686934],
  [45.480428, -122.686965],
  [45.480393, -122.686973],
  [45.480379, -122.686977],
  [45.480318, -122.686995],
  [45.480182, -122.687048],
  [45.480162, -122.687153],
  [45.480153, -122.68725],
  [45.480149, -122.687343],
  [45.480151, -122.687436],
  [45.48016, -122.687578],
  [45.480173, -122.687723],
  [45.480203, -122.688022],
  [45.480247, -122.688457],
  [45.480253, -122.688555],
  [45.480256, -122.688639],
  [45.480258, -122.688701],
  [45.480255, -122.688785],
  [45.480248, -122.688944],
  [45.480242, -122.689023],
  [45.480232, -122.689113],
  [45.480217, -122.689204],
  [45.480201, -122.689298],
  [45.480182, -122.689382],
  [45.480164, -122.689457],
  [45.480146, -122.689529],
  [45.480104, -122.689692],
  [45.480052, -122.689845],
  [45.47997, -122.690073],
  [45.479779, -122.690584],
  [45.479672, -122.690884],
  [45.479596, -122.691088],
  [45.479251, -122.692018],
  [45.47909, -122.692449],
  [45.479003, -122.692714],
  [45.478879, -122.693029],
  [45.478829, -122.693171],
  [45.478788, -122.693288],
  [45.478729, -122.693469],
  [45.478681, -122.693655],
  [45.478649, -122.693818],
  [45.478623, -122.693956],
  [45.478577, -122.694201],
  [45.478566, -122.694257],
  [45.478492, -122.694672],
  [45.478443, -122.69494],
  [45.478421, -122.695065],
  [45.478404, -122.69516],
  [45.478385, -122.695254],
  [45.478362, -122.69537],
  [45.478324, -122.695575],
  [45.478253, -122.695961],
  [45.478208, -122.696248],
  [45.478178, -122.696413],
  [45.478136, -122.696651],
  [45.478134, -122.696662],
  [45.478048, -122.697137],
  [45.477946, -122.697134],
  [45.477893, -122.697139],
  [45.477727, -122.697159],
  [45.477458, -122.697194],
  [45.477353, -122.697197],
  [45.477277, -122.697191],
  [45.477228, -122.697182],
  [45.477199, -122.697175],
  [45.477148, -122.697156],
  [45.47709, -122.697131],
  [45.477053, -122.697109],
  [45.477009, -122.69708],
  [45.476955, -122.697036],
  [45.476641, -122.696777],
  [45.476599, -122.696752],
  [45.47657, -122.696743],
  [45.476549, -122.696741],
  [45.476521, -122.696746],
  [45.476503, -122.696755],
  [45.476478, -122.696771],
  [45.476434, -122.696822],
  [45.476341, -122.696769],
  [45.476142, -122.696651],
  [45.476041, -122.696586],
  [45.475935, -122.696523],
  [45.475623, -122.696352],
  [45.475512, -122.696292],
  [45.475083, -122.696058],
  [45.474737, -122.695867],
  [45.474705, -122.69585],
  [45.474627, -122.695807],
  [45.474309, -122.695632],
  [45.473662, -122.695276],
  [45.472552, -122.694667],
  [45.472475, -122.694625],
  [45.472319, -122.69454],
  [45.471541, -122.694116],
  [45.471395, -122.694027],
  [45.471341, -122.693984],
  [45.471292, -122.693945],
  [45.471171, -122.693819],
  [45.471097, -122.693723],
  [45.471041, -122.69364],
  [45.470978, -122.693531],
  [45.470967, -122.693513],
  [45.470903, -122.69337],
  [45.470844, -122.69321],
  [45.470787, -122.692992],
  [45.470781, -122.692951],
  [45.470765, -122.692843],
  [45.47075, -122.692669],
  [45.47075, -122.692601],
  [45.470747, -122.692395],
  [45.470747, -122.692266],
  [45.470748, -122.692161],
  [45.470753, -122.692076],
  [45.470758, -122.691965],
  [45.470768, -122.691848],
  [45.470788, -122.691705],
  [45.470806, -122.691605],
  [45.470826, -122.691498],
  [45.470854, -122.691396],
  [45.470892, -122.691231],
  [45.47094, -122.691075],
  [45.471013, -122.690817],
  [45.471063, -122.690606],
  [45.471093, -122.69048],
  [45.471131, -122.690248],
  [45.471139, -122.69019],
  [45.471151, -122.690079],
  [45.471163, -122.689791],
  [45.47115, -122.689128],
  [45.47115, -122.689107],
  [45.471146, -122.688882],
  [45.471142, -122.688803],
  [45.471132, -122.688734],
  [45.471112, -122.688677],
  [45.471075, -122.688611],
  [45.471026, -122.688541],
  [45.470958, -122.688468],
  [45.470876, -122.688393],
  [45.470783, -122.68832],
  [45.47088, -122.687937],
  [45.470921, -122.687743],
  [45.470954, -122.68754],
  [45.470984, -122.687299],
  [45.471007, -122.687078],
  [45.471021, -122.686864],
  [45.471027, -122.686542],
  [45.471027, -122.686506],
  [45.471027, -122.686091],
  [45.470957, -122.685929],
  [45.470938, -122.685886],
  [45.470906, -122.68584],
  [45.470835, -122.685792],
  [45.470689, -122.685727],
  [45.470001, -122.686059],
  [45.469896, -122.68611],
  [45.469596, -122.68625],
  [45.46936, -122.686362],
  [45.469276, -122.686397],
  [45.469199, -122.686415],
  [45.469146, -122.686421],
  [45.469075, -122.686423],
  [45.468991, -122.686417],
  [45.468935, -122.686408],
  [45.468868, -122.686394],
  [45.468808, -122.686371],
  [45.468758, -122.686347],
  [45.468698, -122.686318],
  [45.468639, -122.686276],
  [45.468564, -122.686222],
  [45.468497, -122.686161],
  [45.468406, -122.686073],
  [45.468331, -122.685987],
  [45.468234, -122.685864],
  [45.468032, -122.685611],
  [45.467826, -122.68534],
  [45.467488, -122.684903],
  [45.467466, -122.684876],
  [45.467423, -122.684791],
  [45.467342, -122.684603],
  [45.467335, -122.684587],
  [45.467297, -122.684477],
  [45.467259, -122.684371],
  [45.467194, -122.684191],
  [45.467112, -122.684004],
  [45.467056, -122.683902],
  [45.466984, -122.683802],
  [45.46689, -122.683696],
  [45.466803, -122.683619],
  [45.466704, -122.683555],
  [45.466598, -122.683503],
  [45.466507, -122.683474],
  [45.466388, -122.683449],
  [45.466225, -122.683446],
  [45.465426, -122.683478],
  [45.46468, -122.683504],
  [45.46446, -122.683546],
  [45.46433, -122.683576],
  [45.464199, -122.683628],
  [45.464094, -122.683687],
  [45.464019, -122.683753],
  [45.463992, -122.683777],
  [45.463934, -122.683847],
  [45.463888, -122.683922],
  [45.463856, -122.683988],
  [45.463813, -122.684079],
  [45.463738, -122.684257],
  [45.463677, -122.68438],
  [45.463638, -122.684455],
  [45.463586, -122.684553],
  [45.463503, -122.684661],
  [45.463413, -122.684749],
  [45.463363, -122.684792],
  [45.463303, -122.684831],
  [45.463285, -122.684842],
  [45.46318, -122.684894],
  [45.463091, -122.684926],
  [45.463066, -122.685088],
  [45.463046, -122.685178],
  [45.463017, -122.68531],
  [45.463011, -122.685337],
  [45.462984, -122.685464],
  [45.462965, -122.685558],
  [45.462934, -122.685726],
  [45.462895, -122.685985],
  [45.462873, -122.686114],
  [45.462826, -122.686435],
  [45.462812, -122.68657],
  [45.462807, -122.686683],
  [45.462813, -122.686771],
  [45.462827, -122.686866],
  [45.462839, -122.686923],
  [45.462856, -122.686989],
  [45.462874, -122.687048],
  [45.462897, -122.687108],
  [45.46293, -122.687182],
  [45.463004, -122.687326],
  [45.463103, -122.687496],
  [45.463151, -122.687573],
  [45.463196, -122.68765],
  [45.46329, -122.687822],
  [45.463342, -122.687928],
  [45.46337, -122.687993],
  [45.463398, -122.68807],
  [45.463421, -122.688155],
  [45.463434, -122.688225],
  [45.463442, -122.688282],
  [45.463446, -122.68834],
  [45.463449, -122.688391],
  [45.463448, -122.688415],
  [45.463448, -122.688448],
  [45.463441, -122.688556],
  [45.463431, -122.688635],
  [45.463417, -122.688698],
  [45.463394, -122.688778],
  [45.463333, -122.688959],
  [45.46318, -122.689379],
  [45.463044, -122.689766],
  [45.463032, -122.689801],
  [45.462983, -122.689909],
  [45.463024, -122.689939],
  [45.463035, -122.689953],
  [45.463047, -122.689971],
  [45.463106, -122.69014],
  [45.463227, -122.690517],
  [45.463471, -122.691257],
  [45.463502, -122.691363],
  [45.463513, -122.691478],
  [45.463518, -122.691566],
  [45.463521, -122.691788],
  [45.463516, -122.692859],
  [45.463516, -122.692991],
  [45.463502, -122.69518],
  [45.463503, -122.69528],
  [45.463502, -122.69553],
  [45.463499, -122.696073],
  [45.463495, -122.696895],
  [45.463494, -122.697323],
  [45.463705, -122.697324],
  [45.464016, -122.697324],
  [45.464157, -122.697324],
  [45.464357, -122.697323],
  [45.464841, -122.697321],
  [45.465229, -122.697325],
  [45.465251, -122.697325],
  [45.465532, -122.697332],
  [45.465693, -122.697335],
  [45.465742, -122.697342],
  [45.465786, -122.697358],
  [45.465844, -122.697396],
  [45.465726, -122.697597],
  [45.465623, -122.697776],
  [45.465592, -122.697829],
  [45.465519, -122.69796],
  [45.465472, -122.698038],
  [45.465207, -122.698494],
  [45.4647, -122.699365],
  [45.464638, -122.699473],
  [45.464177, -122.700277],
  [45.464001, -122.700581],
  [45.463653, -122.701184],
  [45.463607, -122.701264],
  [45.463477, -122.701494],
  [45.463198, -122.701971],
  [45.463124, -122.702102],
  [45.463025, -122.70227],
  [45.462932, -122.70243],
  [45.462914, -122.702461],
  [45.46285, -122.702573],
  [45.462364, -122.703424],
  [45.462301, -122.703533],
  [45.46227, -122.703586],
  [45.462171, -122.70376],
  [45.462089, -122.703903],
  [45.462002, -122.704055],
  [45.461916, -122.704206],
  [45.461656, -122.704659],
  [45.461343, -122.705192],
  [45.461135, -122.705558],
  [45.460906, -122.705965],
  [45.460886, -122.706092],
  [45.460756, -122.706322],
  [45.460728, -122.706378],
  [45.460624, -122.706448],
  [45.460456, -122.70674],
  [45.460298, -122.707015],
  [45.460154, -122.707266],
  [45.460067, -122.707417],
  [45.459921, -122.707671],
  [45.459864, -122.707764],
  [45.459806, -122.707857],
  [45.459681, -122.708075],
  [45.459598, -122.708219],
  [45.459527, -122.708345],
  [45.459458, -122.708464],
  [45.459389, -122.708585],
  [45.459354, -122.708646],
  [45.459189, -122.708934],
  [45.458973, -122.709313],
  [45.458547, -122.710056],
  [45.458541, -122.710145],
  [45.458459, -122.710277],
  [45.45841, -122.710292],
  [45.458356, -122.710383],
  [45.458297, -122.710485],
  [45.458074, -122.71087],
  [45.457729, -122.711469],
  [45.457639, -122.711625],
  [45.457486, -122.711889],
  [45.457404, -122.712041],
  [45.457049, -122.712699],
  [45.456872, -122.713044],
  [45.456743, -122.713304],
  [45.456667, -122.713457],
  [45.456402, -122.714005],
  [45.45626, -122.71432],
  [45.456168, -122.714522],
  [45.45595, -122.715004],
  [45.455889, -122.715158],
  [45.455827, -122.715312],
  [45.455742, -122.715523],
  [45.455689, -122.715658],
  [45.455587, -122.715918],
  [45.455497, -122.716144],
  [45.455317, -122.716599],
  [45.455281, -122.716691],
  [45.455022, -122.717356],
  [45.454474, -122.718739],
  [45.454404, -122.718658],
  [45.454371, -122.718584],
  [45.454356, -122.718503],
  [45.454355, -122.718425],
  [45.45436, -122.718329],
  [45.454375, -122.718248],
  [45.454434, -122.718051],
  [45.454614, -122.717446],
  [45.454644, -122.717382],
  [45.454674, -122.717355],
  [45.454775, -122.717322],
  [45.45486, -122.717305],
  [45.454911, -122.717319],
  [45.455022, -122.717356],
  [45.454474, -122.718739],
  [45.454577, -122.718923],
  [45.454587, -122.718947],
  [45.454597, -122.718975],
  [45.454609, -122.719017],
  [45.454621, -122.719071],
  [45.454628, -122.719134],
  [45.45464, -122.719285],
  [45.454641, -122.719363],
  [45.454644, -122.71947],
  [45.454645, -122.719697],
  [45.454648, -122.720024],
  [45.45465, -122.720217],
  [45.454652, -122.720321],
  [45.454657, -122.720424],
  [45.454663, -122.720526],
  [45.454666, -122.720659],
  [45.454669, -122.720806],
  [45.454674, -122.720981],
  [45.454676, -122.721107],
  [45.454677, -122.721179],
  [45.454681, -122.721424],
  [45.45469, -122.721797],
  [45.4547, -122.722301],
  [45.454717, -122.723304],
  [45.454723, -122.724287],
  [45.454724, -122.724655],
  [45.454725, -122.72488],
  [45.454726, -122.725337],
  [45.454729, -122.725787],
  [45.454732, -122.726243],
  [45.454731, -122.726383],
  [45.45474, -122.727187],
  [45.454742, -122.727292],
  [45.454741, -122.727817],
  [45.454748, -122.728362],
  [45.454757, -122.728865],
  [45.454759, -122.729371],
  [45.454764, -122.72999],
  [45.454762, -122.730362],
  [45.454763, -122.730451],
  [45.454771, -122.731376],
  [45.454772, -122.731489],
  [45.454774, -122.731674],
  [45.454782, -122.732405],
  [45.454794, -122.733291],
  [45.454796, -122.733397],
  [45.454808, -122.734596],
  [45.454819, -122.735701],
  [45.454819, -122.735739],
  [45.454831, -122.737165],
  [45.45484, -122.73804],
  [45.454841, -122.738046],
  [45.454867, -122.740861],
  [45.454873, -122.741282],
  [45.454885, -122.742242],
  [45.454895, -122.743604],
  [45.4549, -122.744276],
  [45.454904, -122.744678],
  [45.454904, -122.744943],
  [45.454906, -122.74555],
  [45.454912, -122.747053],
  [45.454912, -122.747141],
  [45.454911, -122.747474],
  [45.454913, -122.748631],
  [45.454906, -122.748739],
  [45.454898, -122.748844],
  [45.45486, -122.749014],
  [45.454834, -122.749092],
  [45.454775, -122.749226],
  [45.454691, -122.749361],
  [45.454601, -122.749466],
  [45.454487, -122.749568],
  [45.454202, -122.749777],
  [45.454072, -122.749884],
  [45.453997, -122.749965],
  [45.453939, -122.750045],
  [45.453873, -122.750159],
  [45.453829, -122.750259],
  [45.453816, -122.75029],
  [45.453772, -122.750425],
  [45.453742, -122.750569],
  [45.45372, -122.750767],
  [45.45372, -122.750898],
  [45.453731, -122.75105],
  [45.453757, -122.751223],
  [45.453776, -122.751293],
  [45.453812, -122.751423],
  [45.45388, -122.751617],
  [45.454027, -122.751999],
  [45.454088, -122.752156],
  [45.454292, -122.752684],
  [45.454386, -122.752922],
  [45.454443, -122.753069],
  [45.454598, -122.753478],
  [45.454693, -122.753746],
  [45.454732, -122.753862],
  [45.454787, -122.754045],
  [45.454843, -122.754284],
  [45.45487, -122.754426],
  [45.454886, -122.754521],
  [45.454906, -122.754698],
  [45.45493, -122.754915],
  [45.454947, -122.755491],
  [45.454952, -122.756076],
  [45.454958, -122.756886],
  [45.454959, -122.75706],
  [45.454956, -122.758884],
  [45.454955, -122.759031],
  [45.453823, -122.759034],
  [45.453765, -122.759033],
  [45.452697, -122.759028],
  [45.452481, -122.759028],
  [45.451571, -122.759029],
  [45.450528, -122.759028],
  [45.450425, -122.759028],
  [45.449936, -122.759028],
  [45.449368, -122.759025],
  [45.449311, -122.759025],
  [45.448631, -122.759028],
  [45.447753, -122.759028],
  [45.447734, -122.759028],
  [45.446742, -122.759027],
  [45.446604, -122.759027],
  [45.446607, -122.761484],
  [45.446606, -122.761758],
  [45.446606, -122.762175],
  [45.446605, -122.763948],
  [45.446603, -122.764425],
  [45.446602, -122.764823],
  [45.446601, -122.764919],
  [45.446602, -122.764995],
  [45.446601, -122.765479],
  [45.446596, -122.76563],
  [45.446595, -122.765763],
  [45.446594, -122.765993],
  [45.446593, -122.766172],
  [45.446593, -122.766256],
  [45.446594, -122.766367],
  [45.446596, -122.766635],
  [45.446598, -122.766814],
  [45.446607, -122.766942],
  [45.446631, -122.767094],
  [45.446658, -122.767216],
  [45.446717, -122.767414],
  [45.446773, -122.767591],
  [45.446845, -122.767825],
  [45.446869, -122.767952],
  [45.446883, -122.768049],
  [45.446891, -122.768218],
  [45.446894, -122.768485],
  [45.446887, -122.76936],
  [45.446885, -122.769645],
  [45.44687, -122.771586],
  [45.446867, -122.771806],
  [45.446866, -122.77195],
  [45.446865, -122.772376],
  [45.446861, -122.773145],
  [45.446857, -122.773732],
  [45.446854, -122.774333],
  [45.446847, -122.775038],
  [45.44684, -122.775848],
  [45.446846, -122.775892],
  [45.446873, -122.776004],
  [45.446815, -122.776107],
  [45.44645, -122.776269],
  [45.446292, -122.776257],
  [45.446044, -122.776374],
  [45.445997, -122.776396],
  [45.445887, -122.776442],
  [45.445447, -122.776606],
  [45.444804, -122.776845],
  [45.444702, -122.776883],
  [45.444646, -122.77701],
  [45.444376, -122.777111],
  [45.444265, -122.777078],
  [45.444126, -122.777116],
  [45.444023, -122.777156],
  [45.443926, -122.777198],
  [45.443363, -122.777431],
  [45.443169, -122.777526],
  [45.442997, -122.777607],
  [45.442904, -122.777658],
  [45.442716, -122.777791],
  [45.442558, -122.777937],
  [45.442316, -122.778197],
  [45.442162, -122.77836],
  [45.442042, -122.778485],
  [45.441937, -122.778594],
  [45.441911, -122.77862],
  [45.44171, -122.778848],
  [45.441471, -122.779122],
  [45.441431, -122.779168],
  [45.441374, -122.779234],
  [45.441344, -122.779268],
  [45.441312, -122.779303],
  [45.441247, -122.779372],
  [45.441104, -122.779495],
  [45.440997, -122.779575],
  [45.440901, -122.77964],
  [45.440852, -122.779667],
  [45.440798, -122.779698],
  [45.440652, -122.779764],
  [45.440588, -122.779785],
  [45.440527, -122.779806],
  [45.440473, -122.77982],
  [45.440426, -122.779831],
  [45.440257, -122.779865],
  [45.440152, -122.779879],
  [45.440061, -122.779878],
  [45.439981, -122.779874],
  [45.439876, -122.779861],
  [45.439767, -122.779843],
  [45.439735, -122.779835],
  [45.439644, -122.779812],
  [45.439448, -122.779736],
  [45.439418, -122.779724],
  [45.439401, -122.779717],
  [45.43929, -122.779662],
  [45.439013, -122.779525],
  [45.438855, -122.77945],
  [45.438793, -122.779422],
  [45.438608, -122.779335],
  [45.438551, -122.779308],
  [45.43827, -122.779179],
  [45.438214, -122.779148],
  [45.438143, -122.779097],
  [45.438075, -122.77904],
  [45.437956, -122.778929],
  [45.437928, -122.77889],
  [45.43784, -122.778773],
  [45.437792, -122.778692],
  [45.437738, -122.778594],
  [45.437685, -122.778471],
  [45.437647, -122.77837],
  [45.437614, -122.778258],
  [45.437586, -122.778151],
  [45.437526, -122.777906],
  [45.437417, -122.777444],
  [45.437262, -122.77678],
  [45.437252, -122.77674],
  [45.437186, -122.776471],
  [45.437167, -122.776376],
  [45.437132, -122.776192],
  [45.437106, -122.775999],
  [45.437067, -122.775707],
  [45.437062, -122.77567],
  [45.436917, -122.774624],
  [45.436899, -122.774507],
  [45.436867, -122.774369],
  [45.436631, -122.773492],
  [45.436617, -122.773441],
  [45.436532, -122.773131],
  [45.436486, -122.772992],
  [45.436433, -122.772831],
  [45.436355, -122.772636],
  [45.436204, -122.772307],
  [45.435817, -122.77148],
  [45.43563, -122.771079],
  [45.435533, -122.770885],
  [45.435485, -122.770794],
  [45.435135, -122.770168],
  [45.435069, -122.770049],
  [45.434876, -122.769707],
  [45.43478, -122.769536],
  [45.434706, -122.769413],
  [45.434638, -122.769303],
  [45.434599, -122.769247],
  [45.434579, -122.769218],
  [45.434399, -122.768957],
  [45.434263, -122.76876],
  [45.4342, -122.768667],
  [45.434185, -122.768647],
  [45.434084, -122.7685],
  [45.43404, -122.768436],
  [45.433937, -122.768286],
  [45.433896, -122.768232],
  [45.433864, -122.768189],
  [45.43371, -122.767972],
  [45.43367, -122.76792],
  [45.433616, -122.767848],
  [45.433476, -122.767651],
  [45.433428, -122.767585],
  [45.433408, -122.767556],
  [45.433292, -122.767383],
  [45.433221, -122.767291],
  [45.433114, -122.767167],
  [45.433161, -122.76702],
  [45.433393, -122.766383],
  [45.433567, -122.765902],
  [45.433758, -122.765378],
  [45.433753, -122.765263],
  [45.433741, -122.76517],
  [45.433719, -122.765091],
  [45.433678, -122.76503],
  [45.433569, -122.76496],
  [45.433277, -122.764925],
  [45.433213, -122.76484],
  [45.433164, -122.764831],
  [45.433004, -122.764801],
  [45.432953, -122.764792],
  [45.432886, -122.764779],
  [45.432687, -122.764755],
  [45.432682, -122.764755],
  [45.43257, -122.764746],
  [45.432395, -122.764732],
  [45.432244, -122.76472],
  [45.431961, -122.764698],
  [45.431632, -122.764689],
  [45.431477, -122.764685],
  [45.431103, -122.764675],
  [45.431068, -122.764674],
  [45.430775, -122.764667],
  [45.430698, -122.764665],
  [45.430528, -122.764662],
  [45.430465, -122.76466],
  [45.430239, -122.764655],
  [45.430199, -122.764654],
  [45.430129, -122.764653],
  [45.430095, -122.764652],
  [45.429819, -122.764647],
  [45.429741, -122.764641],
  [45.429597, -122.764638],
  [45.429523, -122.764652],
  [45.429445, -122.76468],
  [45.429429, -122.764693],
  [45.429351, -122.764757],
  [45.429295, -122.764816],
  [45.429277, -122.764838],
  [45.429119, -122.76504],
  [45.429078, -122.765092],
  [45.429026, -122.765159],
  [45.428865, -122.765367],
  [45.428618, -122.765679],
  [45.428403, -122.765953],
  [45.42834, -122.766034],
  [45.428288, -122.766088],
  [45.428355, -122.766175],
  [45.428613, -122.76652],
  [45.428818, -122.766794],
  [45.428853, -122.766841],
  [45.428931, -122.766951],
  [45.4294, -122.767618],
  [45.429614, -122.76792],
  [45.429679, -122.768011],
  [45.429816, -122.768204],
  [45.429979, -122.768435],
  [45.430037, -122.768519],
  [45.430108, -122.768619],
  [45.430137, -122.768661],
  [45.430189, -122.768732],
  [45.43021, -122.768764],
  [45.43025, -122.768821],
  [45.430433, -122.769078],
  [45.43067, -122.769411],
  [45.430568, -122.769506],
  [45.430457, -122.769462],
  [45.430336, -122.769344],
  [45.430326, -122.769331],
  [45.430317, -122.769321]
];

const stopNames = {
  "163": "SW Barbur &amp; Alice",
  "165": "SW Barbur &amp; Barbur Ct",
  "187": "SW Barbur &amp; Primrose",
  "212": "Barbur Transit Center",
  "467": "1400 Block SW Bertha",
  "955": "SW Capitol &amp; Sunset",
  "1122": "SW Commercial &amp; Hall",
  "2233": "SW Greenburg &amp; Center",
  "3438": "SW Locust &amp; Hall",
  "3441": "SW Locust &amp; 82nd",
  "5027": "SW Sam Jackson Pk &amp; Campus Dr",
  "5028": "SW Sam Jackson Pk &amp; OHSU",
  "5316": "SW Spring Garden &amp; 14th",
  "5318": "SW Spring Garden &amp; 17th",
  "5319": "SW 19th &amp; Spring Garden",
  "5693": "7100 Block SW Taylors Ferry",
  "5696": "SW Taylors Ferry &amp; 78th Pl",
  "5697": "SW Taylors Ferry &amp; Capitol Hwy",
  "5708": "SW Taylors Ferry &amp; 10th",
  "5709": "SW Taylors Ferry &amp; 11th",
  "5726": "SW Taylors Ferry &amp; 46th",
  "5728": "SW Taylors Ferry &amp; 48th",
  "5730": "SW Taylors Ferry &amp; 49th",
  "5732": "SW Taylors Ferry &amp; 52nd",
  "5734": "SW Taylors Ferry &amp; 53rd",
  "5736": "SW Taylors Ferry &amp; 55th",
  "5738": "SW Taylors Ferry &amp; 57th",
  "5740": "SW Taylors Ferry &amp; 60th",
  "5743": "SW Taylors Ferry &amp; 62nd",
  "5747": "SW Taylors Ferry &amp; 69th",
  "5749": "SW Taylors Ferry &amp; 7th",
  "5754": "SW Taylors Ferry &amp; 80th",
  "5782": "SW Terwilliger &amp; Bancroft",
  "5783": "SW Terwilliger &amp; Bancroft Terrace",
  "5789": "SW Terwilliger &amp; Capitol Hwy",
  "5808": "SW Terwilliger &amp; 6th",
  "5812": "SW Terwilliger &amp; Westwood",
  "5816": "SW Terwilliger &amp; Carson",
  "7904": "SW 80th &amp; Birch",
  "7906": "SW 80th &amp; Cedarcrest",
  "7910": "SW 80th &amp; Elmwood",
  "7912": "SW 80th &amp; Landau",
  "7914": "SW 80th &amp; Locust",
  "8211": "Tigard Transit Center ",
  "8387": "SW Taylors Ferry &amp; 76th Pl",
  "8450": "SW Terwilliger &amp; Cheltenham",
  "10844": "SW Barbur &amp; Spring Garden",
  "11010": "SW Terwilliger &amp; Campus",
  "11211": "SW Bertha &amp; Barbur",
  "12387": "SW Taylors Ferry &amp; Picasso Pl",
  "12404": "SW Greenburg &amp; Washington Square Rd",
  "13578": "6500 Block SW Taylors Ferry",
  "13930": "SW Hall &amp; Hunziker/Scoffins",
  "14404": "SW Bertha &amp; Capitol Hill Rd",
  "14412": "12000 Block SW Hall"
};

const stops = [
  { stop_id: "5028", name: "SW Sam Jackson Pk &amp; OHSU", lat: 45.499332, lon: -122.685535, times: ["9:02 PM", "10:02 PM", "11:02 PM", "12:05 AM", "5:57 AM", "6:26 AM", "6:55 AM", "7:25 AM"] },
  { stop_id: "5027", name: "SW Sam Jackson Pk &amp; Campus Dr", lat: 45.500295, lon: -122.684265, times: ["9:02 PM", "10:02 PM", "11:02 PM", "12:05 AM", "5:57 AM", "6:26 AM", "6:55 AM", "7:25 AM"] },
  { stop_id: "11010", name: "SW Terwilliger &amp; Campus", lat: 45.499288, lon: -122.682745, times: ["9:05 PM", "10:05 PM", "11:05 PM", "12:08 AM", "6:00 AM", "6:29 AM", "6:59 AM", "7:29 AM"] },
  { stop_id: "5782", name: "SW Terwilliger &amp; Bancroft", lat: 45.492615, lon: -122.68147, times: ["9:07 PM", "10:07 PM", "11:07 PM", "12:10 AM", "6:02 AM", "6:31 AM", "7:01 AM", "7:31 AM"] },
  { stop_id: "5783", name: "SW Terwilliger &amp; Bancroft Terrace", lat: 45.491927, lon: -122.685087, times: ["9:08 PM", "10:08 PM", "11:08 PM", "12:11 AM", "6:03 AM", "6:32 AM", "7:01 AM", "7:31 AM"] },
  { stop_id: "5812", name: "SW Terwilliger &amp; Westwood", lat: 45.482977, lon: -122.683574, times: ["8:11 PM", "9:10 PM", "10:10 PM", "11:10 PM", "12:13 AM", "6:05 AM", "6:34 AM", "7:04 AM"] },
  { stop_id: "8450", name: "SW Terwilliger &amp; Cheltenham", lat: 45.481213, lon: -122.683255, times: ["8:12 PM", "9:11 PM", "10:11 PM", "11:11 PM", "12:14 AM", "6:06 AM", "6:35 AM", "7:05 AM"] },
  { stop_id: "5789", name: "SW Terwilliger &amp; Capitol Hwy", lat: 45.480392, lon: -122.687065, times: ["8:12 PM", "9:11 PM", "10:11 PM", "11:11 PM", "12:14 AM", "6:06 AM", "6:35 AM", "7:05 AM"] },
  { stop_id: "955", name: "SW Capitol &amp; Sunset", lat: 45.478896, lon: -122.693219, times: ["8:14 PM", "9:13 PM", "10:13 PM", "11:13 PM", "12:16 AM", "6:08 AM", "6:37 AM", "7:07 AM"] },
  { stop_id: "14404", name: "SW Bertha &amp; Capitol Hill Rd", lat: 45.474713, lon: -122.695955, times: ["8:15 PM", "9:14 PM", "10:14 PM", "11:14 PM", "12:17 AM", "6:09 AM", "6:38 AM", "7:08 AM"] },
  { stop_id: "467", name: "1400 Block SW Bertha", lat: 45.470914, lon: -122.693601, times: ["8:16 PM", "9:15 PM", "10:15 PM", "11:15 PM", "12:18 AM", "6:10 AM", "6:39 AM", "7:09 AM"] },
  { stop_id: "11211", name: "SW Bertha &amp; Barbur", lat: 45.471017, lon: -122.689111, times: ["8:17 PM", "9:16 PM", "10:16 PM", "11:16 PM", "12:19 AM", "6:11 AM", "6:40 AM", "7:10 AM"] },
  { stop_id: "5808", name: "SW Terwilliger &amp; 6th", lat: 45.467279, lon: -122.684654, times: ["8:19 PM", "9:17 PM", "10:17 PM", "11:17 PM", "12:20 AM", "6:13 AM", "6:42 AM", "7:12 AM"] },
  { stop_id: "5816", name: "SW Terwilliger &amp; Carson", lat: 45.464059, lon: -122.683843, times: ["8:20 PM", "9:18 PM", "10:18 PM", "11:18 PM", "12:21 AM", "6:14 AM", "6:43 AM", "7:13 AM"] },
  { stop_id: "5749", name: "SW Taylors Ferry &amp; 7th", lat: 45.463069, lon: -122.685361, times: ["8:21 PM", "9:19 PM", "10:19 PM", "11:19 PM", "12:22 AM", "6:15 AM", "6:44 AM", "7:14 AM"] },
  { stop_id: "5708", name: "SW Taylors Ferry &amp; 10th", lat: 45.463514, lon: -122.688418, times: ["8:21 PM", "9:19 PM", "10:19 PM", "11:19 PM", "12:22 AM", "6:15 AM", "6:44 AM", "7:14 AM"] },
  { stop_id: "5709", name: "SW Taylors Ferry &amp; 11th", lat: 45.463099, lon: -122.689804, times: ["8:21 PM", "9:19 PM", "10:19 PM", "11:19 PM", "12:22 AM", "6:15 AM", "6:44 AM", "7:14 AM"] },
  { stop_id: "5316", name: "SW Spring Garden &amp; 14th", lat: 45.463545, lon: -122.692857, times: ["8:22 PM", "9:20 PM", "10:20 PM", "11:20 PM", "12:23 AM", "6:16 AM", "6:45 AM", "7:15 AM"] },
  { stop_id: "5318", name: "SW Spring Garden &amp; 17th", lat: 45.463549, lon: -122.695531, times: ["8:23 PM", "9:21 PM", "10:20 PM", "11:20 PM", "12:23 AM", "6:17 AM", "6:46 AM", "7:16 AM"] },
  { stop_id: "5319", name: "SW 19th &amp; Spring Garden", lat: 45.464017, lon: -122.697246, times: ["8:23 PM", "9:21 PM", "10:21 PM", "11:21 PM", "12:24 AM", "6:17 AM", "6:46 AM", "7:16 AM"] },
  { stop_id: "10844", name: "SW Barbur &amp; Spring Garden", lat: 45.463752, lon: -122.701299, times: ["8:25 PM", "9:23 PM", "10:22 PM", "11:22 PM", "12:25 AM", "6:19 AM", "6:48 AM", "7:18 AM"] },
  { stop_id: "165", name: "SW Barbur &amp; Barbur Ct", lat: 45.462404, lon: -122.703653, times: ["8:25 PM", "9:23 PM", "10:23 PM", "11:23 PM", "12:26 AM", "6:19 AM", "6:48 AM", "7:18 AM"] },
  { stop_id: "187", name: "SW Barbur &amp; Primrose", lat: 45.45963, lon: -122.708465, times: ["8:27 PM", "9:25 PM", "10:24 PM", "11:24 PM", "12:27 AM", "6:21 AM", "6:50 AM", "7:20 AM"] },
  { stop_id: "163", name: "SW Barbur &amp; Alice", lat: 45.458449, lon: -122.710493, times: ["8:27 PM", "9:25 PM", "10:24 PM", "11:24 PM", "12:27 AM", "6:21 AM", "6:50 AM", "7:20 AM"] },
  { stop_id: "212", name: "Barbur Transit Center", lat: 45.454552, lon: -122.71739, times: ["8:30 PM", "9:28 PM", "10:27 PM", "11:27 PM", "12:30 AM", "6:24 AM", "6:53 AM", "7:23 AM"] },
  { stop_id: "5697", name: "SW Taylors Ferry &amp; Capitol Hwy", lat: 45.454705, lon: -122.720215, times: ["8:30 PM", "9:28 PM", "10:27 PM", "11:27 PM", "12:30 AM", "6:24 AM", "6:53 AM", "7:23 AM"] },
  { stop_id: "5726", name: "SW Taylors Ferry &amp; 46th", lat: 45.45477, lon: -122.724655, times: ["8:31 PM", "9:29 PM", "10:28 PM", "11:28 PM", "12:31 AM", "6:25 AM", "6:54 AM", "7:24 AM"] },
  { stop_id: "5728", name: "SW Taylors Ferry &amp; 48th", lat: 45.454773, lon: -122.725786, times: ["8:31 PM", "9:29 PM", "10:28 PM", "11:28 PM", "12:31 AM", "6:25 AM", "6:54 AM", "7:24 AM"] },
  { stop_id: "5730", name: "SW Taylors Ferry &amp; 49th", lat: 45.45479, lon: -122.727186, times: ["8:31 PM", "9:29 PM", "10:28 PM", "11:28 PM", "12:31 AM", "6:25 AM", "6:54 AM", "7:24 AM"] },
  { stop_id: "5732", name: "SW Taylors Ferry &amp; 52nd", lat: 45.454804, lon: -122.730452, times: ["8:32 PM", "9:30 PM", "10:29 PM", "11:29 PM", "12:32 AM", "6:26 AM", "6:55 AM", "7:25 AM"] },
  { stop_id: "5734", name: "SW Taylors Ferry &amp; 53rd", lat: 45.454813, lon: -122.731489, times: ["8:32 PM", "9:30 PM", "10:29 PM", "11:29 PM", "12:32 AM", "6:26 AM", "6:55 AM", "7:25 AM"] },
  { stop_id: "5736", name: "SW Taylors Ferry &amp; 55th", lat: 45.454888, lon: -122.733288, times: ["8:33 PM", "9:30 PM", "10:29 PM", "11:29 PM", "12:32 AM", "6:27 AM", "6:56 AM", "7:26 AM"] },
  { stop_id: "5738", name: "SW Taylors Ferry &amp; 57th", lat: 45.454863, lon: -122.735701, times: ["8:33 PM", "9:31 PM", "10:30 PM", "11:30 PM", "12:33 AM", "6:27 AM", "6:56 AM", "7:26 AM"] },
  { stop_id: "5740", name: "SW Taylors Ferry &amp; 60th", lat: 45.454898, lon: -122.738045, times: ["8:33 PM", "9:31 PM", "10:30 PM", "11:30 PM", "12:33 AM", "6:27 AM", "6:56 AM", "7:26 AM"] },
  { stop_id: "5743", name: "SW Taylors Ferry &amp; 62nd", lat: 45.454913, lon: -122.741279, times: ["8:34 PM", "9:31 PM", "10:30 PM", "11:30 PM", "12:33 AM", "6:28 AM", "6:57 AM", "7:27 AM"] },
  { stop_id: "13578", name: "6500 Block SW Taylors Ferry", lat: 45.45495, lon: -122.744275, times: ["8:35 PM", "9:32 PM", "10:31 PM", "11:31 PM", "12:34 AM", "6:29 AM", "6:58 AM", "7:28 AM"] },
  { stop_id: "5747", name: "SW Taylors Ferry &amp; 69th", lat: 45.454955, lon: -122.747051, times: ["8:35 PM", "9:32 PM", "10:31 PM", "11:31 PM", "12:34 AM", "6:29 AM", "6:58 AM", "7:28 AM"] },
  { stop_id: "5693", name: "7100 Block SW Taylors Ferry", lat: 45.453862, lon: -122.750288, times: ["8:36 PM", "9:33 PM", "10:32 PM", "11:32 PM", "12:35 AM", "6:30 AM", "6:59 AM", "7:29 AM"] },
  { stop_id: "12387", name: "SW Taylors Ferry &amp; Picasso Pl", lat: 45.454446, lon: -122.752871, times: ["8:36 PM", "9:34 PM", "10:33 PM", "11:33 PM", "12:36 AM", "6:30 AM", "6:59 AM", "7:29 AM"] },
  { stop_id: "8387", name: "SW Taylors Ferry &amp; 76th Pl", lat: 45.454971, lon: -122.754683, times: ["8:37 PM", "9:34 PM", "10:33 PM", "11:33 PM", "12:36 AM", "6:31 AM", "7:00 AM", "7:30 AM"] },
  { stop_id: "5696", name: "SW Taylors Ferry &amp; 78th Pl", lat: 45.455016, lon: -122.756886, times: ["8:37 PM", "9:34 PM", "10:33 PM", "11:33 PM", "12:36 AM", "6:31 AM", "7:00 AM", "7:30 AM"] },
  { stop_id: "5754", name: "SW Taylors Ferry &amp; 80th", lat: 45.455009, lon: -122.758884, times: ["8:38 PM", "9:35 PM", "10:34 PM", "11:34 PM", "12:37 AM", "6:32 AM", "7:01 AM", "7:31 AM"] },
  { stop_id: "7904", name: "SW 80th &amp; Birch", lat: 45.453761, lon: -122.759075, times: ["8:38 PM", "9:35 PM", "10:34 PM", "11:34 PM", "12:37 AM", "6:32 AM", "7:01 AM", "7:31 AM"] },
  { stop_id: "7906", name: "SW 80th &amp; Cedarcrest", lat: 45.452476, lon: -122.759082, times: ["8:10 PM", "8:38 PM", "9:35 PM", "10:34 PM", "11:34 PM", "12:37 AM", "6:32 AM", "7:01 AM"] },
  { stop_id: "7910", name: "SW 80th &amp; Elmwood", lat: 45.450523, lon: -122.75909, times: ["8:11 PM", "8:39 PM", "9:36 PM", "10:34 PM", "11:34 PM", "12:37 AM", "6:33 AM", "7:02 AM"] },
  { stop_id: "7912", name: "SW 80th &amp; Landau", lat: 45.447749, lon: -122.759102, times: ["8:11 PM", "8:39 PM", "9:36 PM", "10:35 PM", "11:35 PM", "12:38 AM", "6:33 AM", "7:02 AM"] },
  { stop_id: "7914", name: "SW 80th &amp; Locust", lat: 45.446737, lon: -122.759085, times: ["8:11 PM", "8:39 PM", "9:36 PM", "10:35 PM", "11:35 PM", "12:38 AM", "6:33 AM", "7:02 AM"] },
  { stop_id: "3441", name: "SW Locust &amp; 82nd", lat: 45.446648, lon: -122.761758, times: ["8:12 PM", "8:40 PM", "9:37 PM", "10:36 PM", "11:36 PM", "12:39 AM", "6:34 AM", "7:03 AM"] },
  { stop_id: "3438", name: "SW Locust &amp; Hall", lat: 45.446675, lon: -122.76482, times: ["8:12 PM", "8:40 PM", "9:37 PM", "10:36 PM", "11:36 PM", "12:39 AM", "6:34 AM", "7:03 AM"] },
  { stop_id: "12404", name: "SW Greenburg &amp; Washington Square Rd", lat: 45.446077, lon: -122.77652, times: ["8:15 PM", "8:43 PM", "9:40 PM", "10:38 PM", "11:38 PM", "12:41 AM", "6:37 AM", "7:06 AM"] },
  { stop_id: "2233", name: "SW Greenburg &amp; Center", lat: 45.434029, lon: -122.76857, times: ["8:19 PM", "8:47 PM", "9:44 PM", "10:42 PM", "11:42 PM", "12:45 AM", "6:41 AM", "7:10 AM"] },
  { stop_id: "14412", name: "12000 Block SW Hall", lat: 45.432686, lon: -122.764875, times: ["8:20 PM", "8:48 PM", "9:45 PM", "10:43 PM", "11:43 PM", "12:46 AM", "6:42 AM", "7:11 AM"] },
  { stop_id: "13930", name: "SW Hall &amp; Hunziker/Scoffins", lat: 45.430238, lon: -122.764749, times: ["8:20 PM", "8:48 PM", "9:45 PM", "10:43 PM", "11:43 PM", "12:46 AM", "6:42 AM", "7:11 AM"] },
  { stop_id: "1122", name: "SW Commercial &amp; Hall", lat: 45.428655, lon: -122.766448, times: ["8:21 PM", "8:49 PM", "9:46 PM", "10:44 PM", "11:44 PM", "12:47 AM", "6:43 AM", "7:12 AM"] },
  { stop_id: "8211", name: "Tigard Transit Center ", lat: 45.43029, lon: -122.76936, times: ["8:22 PM", "8:50 PM", "9:47 PM", "10:45 PM", "11:45 PM", "12:48 AM", "6:44 AM", "7:13 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
</script>


</body>
</html>