<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 43 - To Marquam Hill | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-43-dir1-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 43 - To Marquam Hill</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 43;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.430317, -122.769321],
  [45.430303, -122.769305],
  [45.430275, -122.769267],
  [45.430252, -122.769236],
  [45.430141, -122.769059],
  [45.430096, -122.768939],
  [45.43021, -122.768764],
  [45.430189, -122.768732],
  [45.430137, -122.768661],
  [45.430108, -122.768619],
  [45.430037, -122.768519],
  [45.429979, -122.768435],
  [45.429816, -122.768204],
  [45.429679, -122.768011],
  [45.429614, -122.76792],
  [45.4294, -122.767618],
  [45.428931, -122.766951],
  [45.428853, -122.766841],
  [45.428818, -122.766794],
  [45.428621, -122.76653],
  [45.428355, -122.766175],
  [45.428288, -122.766088],
  [45.42834, -122.766034],
  [45.428403, -122.765953],
  [45.428618, -122.765679],
  [45.428865, -122.765367],
  [45.429026, -122.765159],
  [45.429078, -122.765092],
  [45.429119, -122.76504],
  [45.429277, -122.764838],
  [45.429295, -122.764816],
  [45.429351, -122.764757],
  [45.429429, -122.764693],
  [45.429445, -122.76468],
  [45.429523, -122.764652],
  [45.42957, -122.764643],
  [45.429597, -122.764638],
  [45.429741, -122.764641],
  [45.429819, -122.764647],
  [45.430095, -122.764652],
  [45.430129, -122.764653],
  [45.430199, -122.764654],
  [45.430465, -122.76466],
  [45.430528, -122.764662],
  [45.430698, -122.764665],
  [45.430775, -122.764667],
  [45.431068, -122.764674],
  [45.431103, -122.764675],
  [45.431477, -122.764685],
  [45.431632, -122.764689],
  [45.431961, -122.764698],
  [45.432244, -122.76472],
  [45.432376, -122.76473],
  [45.432395, -122.764732],
  [45.43257, -122.764746],
  [45.432687, -122.764755],
  [45.432886, -122.764779],
  [45.432953, -122.764792],
  [45.433004, -122.764801],
  [45.433075, -122.764814],
  [45.433164, -122.764831],
  [45.433213, -122.76484],
  [45.433291, -122.764809],
  [45.43337, -122.764819],
  [45.433837, -122.764863],
  [45.433937, -122.764874],
  [45.434062, -122.764947],
  [45.433998, -122.765123],
  [45.433926, -122.765321],
  [45.433687, -122.765988],
  [45.433598, -122.766232],
  [45.433485, -122.766545],
  [45.433449, -122.766642],
  [45.433265, -122.767162],
  [45.433221, -122.767291],
  [45.433292, -122.767383],
  [45.433408, -122.767556],
  [45.433428, -122.767585],
  [45.433476, -122.767651],
  [45.433616, -122.767848],
  [45.43367, -122.76792],
  [45.43371, -122.767972],
  [45.433864, -122.768189],
  [45.433896, -122.768232],
  [45.433898, -122.768235],
  [45.433937, -122.768286],
  [45.43404, -122.768436],
  [45.434185, -122.768647],
  [45.4342, -122.768667],
  [45.434263, -122.76876],
  [45.434399, -122.768957],
  [45.434579, -122.769218],
  [45.434599, -122.769247],
  [45.434638, -122.769303],
  [45.434706, -122.769413],
  [45.43478, -122.769536],
  [45.434876, -122.769707],
  [45.435069, -122.770049],
  [45.435135, -122.770168],
  [45.435485, -122.770794],
  [45.435533, -122.770885],
  [45.43563, -122.771079],
  [45.435817, -122.77148],
  [45.436204, -122.772307],
  [45.436355, -122.772636],
  [45.436433, -122.772831],
  [45.436486, -122.772992],
  [45.436532, -122.773131],
  [45.436617, -122.773441],
  [45.436631, -122.773492],
  [45.436867, -122.774369],
  [45.436899, -122.774507],
  [45.436917, -122.774624],
  [45.437062, -122.77567],
  [45.437067, -122.775707],
  [45.437106, -122.775999],
  [45.437132, -122.776192],
  [45.437167, -122.776376],
  [45.437186, -122.776471],
  [45.437252, -122.77674],
  [45.437262, -122.77678],
  [45.437417, -122.777444],
  [45.437526, -122.777906],
  [45.437586, -122.778151],
  [45.437614, -122.778258],
  [45.437647, -122.77837],
  [45.437685, -122.778471],
  [45.437738, -122.778594],
  [45.437792, -122.778692],
  [45.43784, -122.778773],
  [45.437928, -122.77889],
  [45.437956, -122.778929],
  [45.438075, -122.77904],
  [45.438143, -122.779097],
  [45.438214, -122.779148],
  [45.43827, -122.779179],
  [45.438551, -122.779308],
  [45.438608, -122.779335],
  [45.438793, -122.779422],
  [45.438855, -122.77945],
  [45.439013, -122.779525],
  [45.43929, -122.779662],
  [45.439401, -122.779717],
  [45.439448, -122.779736],
  [45.439644, -122.779812],
  [45.439735, -122.779835],
  [45.439767, -122.779843],
  [45.439876, -122.779861],
  [45.439981, -122.779874],
  [45.440061, -122.779878],
  [45.440152, -122.779879],
  [45.440257, -122.779865],
  [45.440426, -122.779831],
  [45.440473, -122.77982],
  [45.440527, -122.779806],
  [45.440588, -122.779785],
  [45.440652, -122.779764],
  [45.440798, -122.779698],
  [45.440852, -122.779667],
  [45.440901, -122.77964],
  [45.440997, -122.779575],
  [45.441104, -122.779495],
  [45.441247, -122.779372],
  [45.441312, -122.779303],
  [45.441344, -122.779268],
  [45.441374, -122.779234],
  [45.441431, -122.779168],
  [45.441471, -122.779122],
  [45.44171, -122.778848],
  [45.441911, -122.77862],
  [45.441937, -122.778594],
  [45.442042, -122.778485],
  [45.442162, -122.77836],
  [45.442316, -122.778197],
  [45.442558, -122.777937],
  [45.442716, -122.777791],
  [45.442904, -122.777658],
  [45.442997, -122.777607],
  [45.443169, -122.777526],
  [45.443363, -122.777431],
  [45.443926, -122.777198],
  [45.444023, -122.777156],
  [45.444126, -122.777116],
  [45.444265, -122.777078],
  [45.44434, -122.77695],
  [45.44437, -122.776932],
  [45.444615, -122.776831],
  [45.444702, -122.776883],
  [45.444804, -122.776845],
  [45.445447, -122.776606],
  [45.445887, -122.776442],
  [45.445997, -122.776396],
  [45.446233, -122.776285],
  [45.446292, -122.776257],
  [45.446413, -122.776131],
  [45.446781, -122.775965],
  [45.446873, -122.776004],
  [45.446846, -122.775892],
  [45.44684, -122.775848],
  [45.446847, -122.775038],
  [45.446854, -122.774333],
  [45.446857, -122.773732],
  [45.446861, -122.773145],
  [45.446865, -122.772376],
  [45.446866, -122.77195],
  [45.446867, -122.771806],
  [45.44687, -122.771586],
  [45.446885, -122.769645],
  [45.446887, -122.76936],
  [45.446894, -122.768485],
  [45.446891, -122.768218],
  [45.446883, -122.768049],
  [45.446869, -122.767952],
  [45.446845, -122.767825],
  [45.446773, -122.767591],
  [45.446717, -122.767414],
  [45.446658, -122.767216],
  [45.446631, -122.767094],
  [45.446607, -122.766942],
  [45.446598, -122.766814],
  [45.446596, -122.766635],
  [45.446594, -122.766367],
  [45.446593, -122.766256],
  [45.446593, -122.766172],
  [45.446594, -122.765993],
  [45.446595, -122.765763],
  [45.446596, -122.76563],
  [45.446601, -122.765479],
  [45.446602, -122.764995],
  [45.446601, -122.764919],
  [45.446601, -122.764902],
  [45.446603, -122.764425],
  [45.446605, -122.763948],
  [45.446606, -122.762175],
  [45.446606, -122.761678],
  [45.446607, -122.761484],
  [45.446604, -122.75914],
  [45.446604, -122.759027],
  [45.447515, -122.759028],
  [45.447734, -122.759028],
  [45.448631, -122.759028],
  [45.449311, -122.759025],
  [45.449368, -122.759025],
  [45.449936, -122.759028],
  [45.450336, -122.759028],
  [45.450425, -122.759028],
  [45.451571, -122.759029],
  [45.452573, -122.759028],
  [45.452697, -122.759028],
  [45.453823, -122.759034],
  [45.453857, -122.759034],
  [45.454762, -122.759031],
  [45.454955, -122.759031],
  [45.454959, -122.75706],
  [45.454954, -122.756372],
  [45.454952, -122.756076],
  [45.454947, -122.755491],
  [45.45493, -122.754915],
  [45.454886, -122.754521],
  [45.454883, -122.754501],
  [45.45487, -122.754426],
  [45.454843, -122.754284],
  [45.454787, -122.754045],
  [45.454732, -122.753862],
  [45.454693, -122.753746],
  [45.454598, -122.753478],
  [45.454443, -122.753069],
  [45.454292, -122.752684],
  [45.454231, -122.752527],
  [45.454088, -122.752156],
  [45.454027, -122.751999],
  [45.45388, -122.751617],
  [45.453812, -122.751423],
  [45.453776, -122.751293],
  [45.453757, -122.751223],
  [45.453731, -122.75105],
  [45.45372, -122.750898],
  [45.45372, -122.750767],
  [45.453742, -122.750569],
  [45.453772, -122.750425],
  [45.453816, -122.75029],
  [45.453873, -122.750159],
  [45.453939, -122.750045],
  [45.453997, -122.749965],
  [45.454072, -122.749884],
  [45.454202, -122.749777],
  [45.454487, -122.749568],
  [45.454601, -122.749466],
  [45.454691, -122.749361],
  [45.454775, -122.749226],
  [45.454834, -122.749092],
  [45.45486, -122.749014],
  [45.454898, -122.748844],
  [45.454906, -122.748739],
  [45.454913, -122.748631],
  [45.454911, -122.747474],
  [45.454912, -122.747141],
  [45.454911, -122.747009],
  [45.454906, -122.74555],
  [45.454904, -122.744943],
  [45.454904, -122.74485],
  [45.454904, -122.744678],
  [45.454895, -122.743604],
  [45.454893, -122.743384],
  [45.454885, -122.742242],
  [45.454867, -122.740861],
  [45.454864, -122.740509],
  [45.454841, -122.738141],
  [45.45484, -122.73804],
  [45.454831, -122.737165],
  [45.45482, -122.735856],
  [45.454819, -122.735739],
  [45.454808, -122.734596],
  [45.454796, -122.733397],
  [45.454791, -122.733079],
  [45.454782, -122.732405],
  [45.454774, -122.731674],
  [45.454773, -122.731552],
  [45.454771, -122.731376],
  [45.454762, -122.730362],
  [45.454764, -122.72999],
  [45.454762, -122.729791],
  [45.454759, -122.729371],
  [45.454757, -122.728865],
  [45.454748, -122.728362],
  [45.454741, -122.727817],
  [45.454742, -122.727292],
  [45.454731, -122.726405],
  [45.454731, -122.726383],
  [45.454732, -122.726243],
  [45.454726, -122.725337],
  [45.454725, -122.72488],
  [45.454723, -122.724344],
  [45.454723, -122.724287],
  [45.454717, -122.723304],
  [45.4547, -122.722301],
  [45.45469, -122.721797],
  [45.454681, -122.721424],
  [45.454677, -122.721179],
  [45.454676, -122.721107],
  [45.454674, -122.720981],
  [45.454669, -122.720806],
  [45.454666, -122.720659],
  [45.454663, -122.720526],
  [45.454657, -122.720424],
  [45.454652, -122.720321],
  [45.454649, -122.720039],
  [45.454648, -122.720024],
  [45.454645, -122.719697],
  [45.454644, -122.71947],
  [45.454641, -122.719363],
  [45.45464, -122.719285],
  [45.454628, -122.719134],
  [45.454621, -122.719071],
  [45.454609, -122.719017],
  [45.454597, -122.718975],
  [45.454587, -122.718947],
  [45.454577, -122.718923],
  [45.454474, -122.718739],
  [45.454404, -122.718658],
  [45.454371, -122.718584],
  [45.454356, -122.718503],
  [45.454355, -122.718425],
  [45.45436, -122.718329],
  [45.454375, -122.718248],
  [45.454434, -122.718051],
  [45.454534, -122.717713],
  [45.454614, -122.717446],
  [45.454644, -122.717382],
  [45.454674, -122.717355],
  [45.454775, -122.717322],
  [45.45486, -122.717305],
  [45.454911, -122.717319],
  [45.455022, -122.717356],
  [45.455281, -122.716691],
  [45.455317, -122.716599],
  [45.455497, -122.716144],
  [45.455587, -122.715918],
  [45.455689, -122.715658],
  [45.455742, -122.715523],
  [45.455827, -122.715312],
  [45.455889, -122.715158],
  [45.45595, -122.715004],
  [45.456168, -122.714522],
  [45.45626, -122.71432],
  [45.456402, -122.714005],
  [45.456667, -122.713457],
  [45.456743, -122.713304],
  [45.456872, -122.713044],
  [45.457049, -122.712699],
  [45.457404, -122.712041],
  [45.457486, -122.711889],
  [45.457639, -122.711625],
  [45.457729, -122.711469],
  [45.458074, -122.71087],
  [45.458297, -122.710485],
  [45.45841, -122.710292],
  [45.458405, -122.710206],
  [45.458477, -122.710082],
  [45.458547, -122.710056],
  [45.458811, -122.709594],
  [45.458973, -122.709313],
  [45.459189, -122.708934],
  [45.459354, -122.708646],
  [45.459389, -122.708585],
  [45.459458, -122.708464],
  [45.459598, -122.708219],
  [45.459681, -122.708075],
  [45.459806, -122.707857],
  [45.459864, -122.707764],
  [45.459921, -122.707671],
  [45.46, -122.707534],
  [45.460067, -122.707417],
  [45.460154, -122.707266],
  [45.460298, -122.707015],
  [45.460456, -122.70674],
  [45.460624, -122.706448],
  [45.460652, -122.706287],
  [45.46068, -122.706242],
  [45.460708, -122.706194],
  [45.460828, -122.706001],
  [45.460906, -122.705965],
  [45.461135, -122.705558],
  [45.461343, -122.705192],
  [45.461656, -122.704659],
  [45.461916, -122.704206],
  [45.462002, -122.704055],
  [45.462089, -122.703903],
  [45.462171, -122.70376],
  [45.46227, -122.703586],
  [45.462364, -122.703424],
  [45.462677, -122.702877],
  [45.46285, -122.702573],
  [45.462914, -122.702461],
  [45.462932, -122.70243],
  [45.463025, -122.70227],
  [45.463124, -122.702102],
  [45.463198, -122.701971],
  [45.463477, -122.701494],
  [45.463607, -122.701264],
  [45.463628, -122.701067],
  [45.463624, -122.70098],
  [45.463613, -122.700886],
  [45.463539, -122.700436],
  [45.463521, -122.700321],
  [45.46351, -122.700197],
  [45.463502, -122.700153],
  [45.463497, -122.700111],
  [45.463492, -122.700055],
  [45.463489, -122.7],
  [45.463487, -122.699622],
  [45.463492, -122.698866],
  [45.46349, -122.69833],
  [45.46349, -122.698293],
  [45.463491, -122.698151],
  [45.463492, -122.697901],
  [45.463492, -122.69785],
  [45.463492, -122.697714],
  [45.463493, -122.697531],
  [45.463494, -122.697323],
  [45.463495, -122.696895],
  [45.463499, -122.696073],
  [45.463503, -122.69536],
  [45.463503, -122.69528],
  [45.463502, -122.69518],
  [45.463515, -122.693115],
  [45.463516, -122.692991],
  [45.463521, -122.691788],
  [45.463518, -122.691566],
  [45.463513, -122.691478],
  [45.463502, -122.691363],
  [45.463471, -122.691257],
  [45.463227, -122.690517],
  [45.463224, -122.690506],
  [45.463106, -122.69014],
  [45.463047, -122.689971],
  [45.463035, -122.689953],
  [45.463024, -122.689939],
  [45.462983, -122.689909],
  [45.463032, -122.689801],
  [45.46318, -122.689379],
  [45.463333, -122.688959],
  [45.463385, -122.688808],
  [45.463394, -122.688778],
  [45.463417, -122.688698],
  [45.463431, -122.688635],
  [45.463441, -122.688556],
  [45.463448, -122.688448],
  [45.463449, -122.688391],
  [45.463446, -122.68834],
  [45.463442, -122.688282],
  [45.463434, -122.688225],
  [45.463421, -122.688155],
  [45.463398, -122.68807],
  [45.46337, -122.687993],
  [45.463342, -122.687928],
  [45.46329, -122.687822],
  [45.463196, -122.68765],
  [45.463151, -122.687573],
  [45.463103, -122.687496],
  [45.463004, -122.687326],
  [45.46293, -122.687182],
  [45.462897, -122.687108],
  [45.462874, -122.687048],
  [45.462856, -122.686989],
  [45.462839, -122.686923],
  [45.462827, -122.686866],
  [45.462813, -122.686771],
  [45.462807, -122.686683],
  [45.462812, -122.68657],
  [45.462826, -122.686435],
  [45.462873, -122.686114],
  [45.462895, -122.685985],
  [45.462934, -122.685726],
  [45.462965, -122.685558],
  [45.462984, -122.685464],
  [45.463017, -122.68531],
  [45.463046, -122.685178],
  [45.463066, -122.685088],
  [45.463091, -122.684926],
  [45.46318, -122.684894],
  [45.463285, -122.684842],
  [45.463303, -122.684831],
  [45.463363, -122.684792],
  [45.463413, -122.684749],
  [45.463503, -122.684661],
  [45.463586, -122.684553],
  [45.463638, -122.684455],
  [45.463677, -122.68438],
  [45.463738, -122.684257],
  [45.463813, -122.684079],
  [45.463856, -122.683988],
  [45.463888, -122.683922],
  [45.463934, -122.683847],
  [45.463992, -122.683777],
  [45.464094, -122.683687],
  [45.464199, -122.683628],
  [45.46433, -122.683576],
  [45.46446, -122.683546],
  [45.46468, -122.683504],
  [45.465426, -122.683478],
  [45.466225, -122.683446],
  [45.466388, -122.683449],
  [45.466507, -122.683474],
  [45.466598, -122.683503],
  [45.466704, -122.683555],
  [45.466803, -122.683619],
  [45.46689, -122.683696],
  [45.466984, -122.683802],
  [45.467056, -122.683902],
  [45.467112, -122.684004],
  [45.467194, -122.684191],
  [45.467259, -122.684371],
  [45.467297, -122.684477],
  [45.467335, -122.684587],
  [45.467423, -122.684791],
  [45.467456, -122.684856],
  [45.467466, -122.684876],
  [45.467488, -122.684903],
  [45.467826, -122.68534],
  [45.468032, -122.685611],
  [45.468234, -122.685864],
  [45.468331, -122.685987],
  [45.468406, -122.686073],
  [45.468497, -122.686161],
  [45.468564, -122.686222],
  [45.468639, -122.686276],
  [45.468698, -122.686318],
  [45.468758, -122.686347],
  [45.468808, -122.686371],
  [45.468868, -122.686394],
  [45.468935, -122.686408],
  [45.468991, -122.686417],
  [45.469075, -122.686423],
  [45.469146, -122.686421],
  [45.469199, -122.686415],
  [45.469276, -122.686397],
  [45.46936, -122.686362],
  [45.469596, -122.68625],
  [45.469896, -122.68611],
  [45.470001, -122.686059],
  [45.470689, -122.685727],
  [45.470811, -122.685677],
  [45.47086, -122.685656],
  [45.470919, -122.68563],
  [45.471016, -122.685609],
  [45.471128, -122.685587],
  [45.471136, -122.686607],
  [45.471135, -122.686816],
  [45.471105, -122.687231],
  [45.4711, -122.687277],
  [45.471052, -122.687645],
  [45.471006, -122.687901],
  [45.470949, -122.688155],
  [45.470876, -122.688393],
  [45.470801, -122.688611],
  [45.470714, -122.688874],
  [45.470606, -122.689132],
  [45.470501, -122.68936],
  [45.47042, -122.689521],
  [45.470411, -122.689536],
  [45.470306, -122.689722],
  [45.470089, -122.690099],
  [45.470031, -122.6902],
  [45.469685, -122.690801],
  [45.469716, -122.690851],
  [45.469725, -122.690881],
  [45.469727, -122.690905],
  [45.46973, -122.691007],
  [45.469729, -122.691104],
  [45.46973, -122.691366],
  [45.469727, -122.691401],
  [45.469719, -122.691447],
  [45.469712, -122.691493],
  [45.469709, -122.691524],
  [45.469709, -122.691782],
  [45.469709, -122.692125],
  [45.469837, -122.692129],
  [45.470298, -122.692143],
  [45.470415, -122.692157],
  [45.470748, -122.692161],
  [45.470747, -122.692266],
  [45.470747, -122.692395],
  [45.47075, -122.692601],
  [45.47075, -122.692669],
  [45.470765, -122.692843],
  [45.470781, -122.692951],
  [45.470787, -122.692992],
  [45.470844, -122.69321],
  [45.470903, -122.69337],
  [45.470967, -122.693513],
  [45.471041, -122.69364],
  [45.471097, -122.693723],
  [45.471171, -122.693819],
  [45.471292, -122.693945],
  [45.471341, -122.693984],
  [45.471395, -122.694027],
  [45.471541, -122.694116],
  [45.472211, -122.694481],
  [45.472319, -122.69454],
  [45.472475, -122.694625],
  [45.472552, -122.694667],
  [45.473662, -122.695276],
  [45.474309, -122.695632],
  [45.474627, -122.695807],
  [45.474705, -122.69585],
  [45.475083, -122.696058],
  [45.475512, -122.696292],
  [45.475623, -122.696352],
  [45.475743, -122.696418],
  [45.475935, -122.696523],
  [45.476041, -122.696586],
  [45.476142, -122.696651],
  [45.476341, -122.696769],
  [45.476434, -122.696822],
  [45.476478, -122.696771],
  [45.476503, -122.696755],
  [45.476521, -122.696746],
  [45.476549, -122.696741],
  [45.47657, -122.696743],
  [45.476599, -122.696752],
  [45.476641, -122.696777],
  [45.476955, -122.697036],
  [45.477009, -122.69708],
  [45.477053, -122.697109],
  [45.47709, -122.697131],
  [45.477148, -122.697156],
  [45.477199, -122.697175],
  [45.477228, -122.697182],
  [45.477277, -122.697191],
  [45.477353, -122.697197],
  [45.477458, -122.697194],
  [45.477727, -122.697159],
  [45.477893, -122.697139],
  [45.477946, -122.697134],
  [45.478048, -122.697137],
  [45.478134, -122.696662],
  [45.478136, -122.696651],
  [45.478178, -122.696413],
  [45.47818, -122.696405],
  [45.478208, -122.696248],
  [45.478253, -122.695961],
  [45.478324, -122.695575],
  [45.478362, -122.69537],
  [45.478385, -122.695254],
  [45.478404, -122.69516],
  [45.478421, -122.695065],
  [45.478443, -122.69494],
  [45.478492, -122.694672],
  [45.478566, -122.694257],
  [45.478577, -122.694201],
  [45.478623, -122.693956],
  [45.478649, -122.693818],
  [45.478681, -122.693655],
  [45.478729, -122.693469],
  [45.478788, -122.693288],
  [45.478879, -122.693029],
  [45.47891, -122.692949],
  [45.479003, -122.692714],
  [45.47909, -122.692449],
  [45.479251, -122.692018],
  [45.479596, -122.691088],
  [45.479672, -122.690884],
  [45.479779, -122.690584],
  [45.47997, -122.690073],
  [45.480052, -122.689845],
  [45.480104, -122.689692],
  [45.480146, -122.689529],
  [45.480164, -122.689457],
  [45.480182, -122.689382],
  [45.480201, -122.689298],
  [45.480217, -122.689204],
  [45.480232, -122.689113],
  [45.480242, -122.689023],
  [45.480248, -122.688944],
  [45.480255, -122.688785],
  [45.480258, -122.688701],
  [45.480256, -122.688639],
  [45.480253, -122.688555],
  [45.480247, -122.688457],
  [45.480203, -122.688022],
  [45.480173, -122.687723],
  [45.48016, -122.687578],
  [45.480151, -122.687436],
  [45.480149, -122.687343],
  [45.480153, -122.68725],
  [45.480162, -122.687153],
  [45.480182, -122.687048],
  [45.480318, -122.686995],
  [45.480393, -122.686973],
  [45.480428, -122.686965],
  [45.48053, -122.686934],
  [45.480572, -122.686906],
  [45.480617, -122.686848],
  [45.480635, -122.686798],
  [45.480651, -122.686724],
  [45.480648, -122.686649],
  [45.480548, -122.68627],
  [45.480532, -122.686193],
  [45.480497, -122.686028],
  [45.480477, -122.685864],
  [45.480472, -122.685653],
  [45.480484, -122.685486],
  [45.480499, -122.685324],
  [45.480501, -122.685233],
  [45.480501, -122.685146],
  [45.480496, -122.685064],
  [45.480486, -122.684948],
  [45.48046, -122.684783],
  [45.480429, -122.684605],
  [45.480407, -122.684468],
  [45.4804, -122.684403],
  [45.480391, -122.68429],
  [45.480389, -122.684225],
  [45.480391, -122.684162],
  [45.480395, -122.684106],
  [45.480404, -122.684041],
  [45.480416, -122.683979],
  [45.480428, -122.683927],
  [45.480441, -122.683876],
  [45.480454, -122.683837],
  [45.480503, -122.683733],
  [45.480535, -122.683676],
  [45.480569, -122.683629],
  [45.480608, -122.683585],
  [45.48068, -122.68351],
  [45.480754, -122.683437],
  [45.480875, -122.683352],
  [45.480956, -122.683303],
  [45.481018, -122.683276],
  [45.481089, -122.683255],
  [45.481189, -122.683219],
  [45.481316, -122.683187],
  [45.481357, -122.683177],
  [45.481563, -122.683141],
  [45.48176, -122.683126],
  [45.481891, -122.683131],
  [45.482035, -122.683137],
  [45.482158, -122.683149],
  [45.482286, -122.683169],
  [45.482364, -122.683179],
  [45.482446, -122.683193],
  [45.482599, -122.683233],
  [45.482676, -122.683264],
  [45.482761, -122.683308],
  [45.482823, -122.683347],
  [45.482881, -122.683395],
  [45.482938, -122.683448],
  [45.482984, -122.683505],
  [45.483024, -122.683566],
  [45.483071, -122.683638],
  [45.483296, -122.683987],
  [45.483498, -122.684309],
  [45.483549, -122.684373],
  [45.48362, -122.684454],
  [45.483681, -122.684508],
  [45.483738, -122.684549],
  [45.483844, -122.684624],
  [45.483877, -122.684643],
  [45.483922, -122.684666],
  [45.483969, -122.684683],
  [45.484027, -122.684694],
  [45.484081, -122.684702],
  [45.484135, -122.684703],
  [45.484196, -122.684697],
  [45.484247, -122.68468],
  [45.484319, -122.684649],
  [45.484371, -122.68461],
  [45.484423, -122.684568],
  [45.484481, -122.684509],
  [45.48452, -122.684462],
  [45.484594, -122.684355],
  [45.484765, -122.684054],
  [45.484851, -122.683926],
  [45.484938, -122.683829],
  [45.485031, -122.683735],
  [45.485135, -122.683647],
  [45.48521, -122.683595],
  [45.485262, -122.683566],
  [45.485323, -122.683541],
  [45.485392, -122.68352],
  [45.485454, -122.683515],
  [45.485516, -122.68352],
  [45.485612, -122.683539],
  [45.485734, -122.683592],
  [45.48582, -122.683651],
  [45.485909, -122.683721],
  [45.485978, -122.683798],
  [45.486043, -122.683899],
  [45.486111, -122.684041],
  [45.486477, -122.685093],
  [45.486567, -122.685317],
  [45.486637, -122.685449],
  [45.486684, -122.685513],
  [45.486743, -122.685585],
  [45.48687, -122.68569],
  [45.48696, -122.685742],
  [45.487016, -122.685766],
  [45.48707, -122.685781],
  [45.487108, -122.685788],
  [45.487165, -122.685783],
  [45.487472, -122.685679],
  [45.487599, -122.685632],
  [45.487821, -122.685551],
  [45.48793, -122.685525],
  [45.488008, -122.685506],
  [45.488204, -122.685485],
  [45.488406, -122.685501],
  [45.488521, -122.685515],
  [45.488656, -122.685545],
  [45.488777, -122.685574],
  [45.488844, -122.685596],
  [45.488896, -122.685626],
  [45.489303, -122.685879],
  [45.489425, -122.685961],
  [45.489483, -122.685985],
  [45.489583, -122.68602],
  [45.489954, -122.686105],
  [45.490085, -122.686148],
  [45.49019, -122.686188],
  [45.490326, -122.686258],
  [45.490561, -122.686413],
  [45.490733, -122.686563],
  [45.490857, -122.686693],
  [45.491134, -122.687025],
  [45.49118, -122.68706],
  [45.491217, -122.687086],
  [45.491263, -122.687114],
  [45.491313, -122.687138],
  [45.491365, -122.687159],
  [45.491412, -122.687174],
  [45.491456, -122.68718],
  [45.491491, -122.687181],
  [45.491533, -122.687175],
  [45.4916, -122.687163],
  [45.491653, -122.687142],
  [45.491688, -122.687123],
  [45.491749, -122.687074],
  [45.491787, -122.687035],
  [45.491829, -122.686983],
  [45.491857, -122.686944],
  [45.491896, -122.686878],
  [45.491952, -122.686765],
  [45.491979, -122.686672],
  [45.491999, -122.686577],
  [45.492012, -122.686489],
  [45.49202, -122.686406],
  [45.492024, -122.68629],
  [45.492015, -122.68612],
  [45.491998, -122.685936],
  [45.491963, -122.685703],
  [45.491887, -122.685251],
  [45.491816, -122.684951],
  [45.491759, -122.684723],
  [45.491722, -122.684607],
  [45.491605, -122.684259],
  [45.491578, -122.684156],
  [45.491539, -122.684016],
  [45.491507, -122.683896],
  [45.491482, -122.683763],
  [45.49146, -122.683611],
  [45.491451, -122.68349],
  [45.491454, -122.683264],
  [45.491467, -122.683123],
  [45.491487, -122.682999],
  [45.49155, -122.682732],
  [45.491574, -122.682626],
  [45.491609, -122.682496],
  [45.491633, -122.682428],
  [45.491691, -122.682275],
  [45.491739, -122.682152],
  [45.491797, -122.682035],
  [45.491859, -122.681934],
  [45.491931, -122.681824],
  [45.491986, -122.681759],
  [45.492069, -122.681676],
  [45.492161, -122.681605],
  [45.492249, -122.681552],
  [45.49235, -122.681505],
  [45.492575, -122.681441],
  [45.492855, -122.681378],
  [45.493176, -122.681332],
  [45.493226, -122.68133],
  [45.493408, -122.681335],
  [45.493456, -122.681336],
  [45.493564, -122.681349],
  [45.493702, -122.681369],
  [45.493919, -122.681468],
  [45.49407, -122.68156],
  [45.49414, -122.681618],
  [45.494191, -122.68167],
  [45.494316, -122.681838],
  [45.494448, -122.682057],
  [45.494561, -122.682227],
  [45.494682, -122.682364],
  [45.49443, -122.683075],
  [45.494418, -122.683136],
  [45.49441, -122.683192],
  [45.494408, -122.683238],
  [45.494417, -122.683295],
  [45.494428, -122.683338],
  [45.494443, -122.683374],
  [45.4945, -122.683454],
  [45.49456, -122.68351],
  [45.494602, -122.683537],
  [45.49463, -122.683552],
  [45.49466, -122.683563],
  [45.494687, -122.683563],
  [45.494805, -122.683541],
  [45.494839, -122.683524],
  [45.494906, -122.683497],
  [45.494998, -122.68345],
  [45.495076, -122.683401],
  [45.495142, -122.683346],
  [45.495189, -122.683284],
  [45.495231, -122.683224],
  [45.495327, -122.683079],
  [45.49541, -122.682969],
  [45.495492, -122.682871],
  [45.495561, -122.682812],
  [45.495619, -122.682769],
  [45.495687, -122.682724],
  [45.495831, -122.682646],
  [45.49601, -122.682547],
  [45.496071, -122.682455],
  [45.496307, -122.682329],
  [45.496387, -122.682283],
  [45.496432, -122.682257],
  [45.496502, -122.682218],
  [45.496548, -122.682186],
  [45.496598, -122.682153],
  [45.496773, -122.682022],
  [45.496969, -122.681869],
  [45.497011, -122.681857],
  [45.497057, -122.681878],
  [45.497079, -122.681869],
  [45.497111, -122.681865],
  [45.497142, -122.681866],
  [45.49718, -122.681871],
  [45.497216, -122.681883],
  [45.497278, -122.681876],
  [45.497355, -122.681923],
  [45.497412, -122.681981],
  [45.497472, -122.682079],
  [45.497491, -122.682121],
  [45.497511, -122.682173],
  [45.497529, -122.682233],
  [45.497543, -122.682298],
  [45.497554, -122.682363],
  [45.497556, -122.682416],
  [45.497553, -122.682476],
  [45.497548, -122.682537],
  [45.497538, -122.682603],
  [45.49752, -122.682668],
  [45.497497, -122.682736],
  [45.497473, -122.682791],
  [45.49745, -122.682834],
  [45.497422, -122.682875],
  [45.497371, -122.682936],
  [45.497316, -122.682994],
  [45.49722, -122.68307],
  [45.497037, -122.683215],
  [45.496585, -122.683572],
  [45.496449, -122.683674],
  [45.496407, -122.683689],
  [45.496333, -122.683663],
  [45.496274, -122.683674],
  [45.496008, -122.683872],
  [45.495956, -122.683921],
  [45.495911, -122.683947],
  [45.495897, -122.683981],
  [45.495884, -122.684022],
  [45.495875, -122.68407],
  [45.495871, -122.68411],
  [45.495871, -122.68416],
  [45.495872, -122.684227],
  [45.495878, -122.684277],
  [45.49589, -122.684331],
  [45.495921, -122.684417],
  [45.49597, -122.684497],
  [45.496022, -122.684554],
  [45.496059, -122.68458],
  [45.496092, -122.684596],
  [45.49613, -122.684605],
  [45.496163, -122.684607],
  [45.496236, -122.684604],
  [45.496303, -122.684583],
  [45.496373, -122.684547],
  [45.496446, -122.684531],
  [45.496476, -122.684531],
  [45.496518, -122.684549],
  [45.49655, -122.684588],
  [45.496573, -122.684634],
  [45.496585, -122.684697],
  [45.496586, -122.684753],
  [45.496581, -122.684816],
  [45.496553, -122.68494],
  [45.496623, -122.684984],
  [45.496655, -122.685017],
  [45.496685, -122.685074],
  [45.496707, -122.685146],
  [45.496873, -122.685966],
  [45.496899, -122.686093],
  [45.496955, -122.686359],
  [45.496992, -122.686535],
  [45.49706, -122.686859],
  [45.497227, -122.687738],
  [45.497263, -122.687942],
  [45.497311, -122.688174],
  [45.497371, -122.68847],
  [45.497461, -122.688931],
  [45.497488, -122.689036],
  [45.497529, -122.689151],
  [45.497579, -122.689251],
  [45.497611, -122.689311],
  [45.497667, -122.689388],
  [45.497732, -122.689452],
  [45.497809, -122.689503],
  [45.49786, -122.689531],
  [45.497926, -122.689559],
  [45.498003, -122.689573],
  [45.498074, -122.689576],
  [45.498174, -122.689566],
  [45.49824, -122.68955],
  [45.498289, -122.689534],
  [45.498352, -122.689501],
  [45.498402, -122.689468],
  [45.49844, -122.689434],
  [45.498482, -122.68939],
  [45.498517, -122.689347],
  [45.498548, -122.689301],
  [45.498575, -122.689256],
  [45.498827, -122.688741],
  [45.498972, -122.688434],
  [45.499036, -122.6883],
  [45.499092, -122.688175],
  [45.499103, -122.688154],
  [45.499118, -122.688133],
  [45.499155, -122.688098],
  [45.499212, -122.688072],
  [45.499195, -122.687973],
  [45.499147, -122.687694],
  [45.499136, -122.687615],
  [45.499129, -122.687525],
  [45.499126, -122.687455],
  [45.499134, -122.687296],
  [45.499118, -122.687218],
  [45.499123, -122.68718],
  [45.499164, -122.686855],
  [45.499171, -122.686801],
  [45.499195, -122.686608],
  [45.499238, -122.686527],
  [45.499288, -122.686159],
  [45.499309, -122.685979],
  [45.49932, -122.685901],
  [45.499333, -122.685828],
  [45.499344, -122.685769],
  [45.499357, -122.685713],
  [45.499376, -122.685645],
  [45.499398, -122.685589]
];

const stopNames = {
  "159": "SW Barbur &amp; 26th Ave",
  "162": "SW Barbur &amp; Alice",
  "199": "SW Barbur &amp; Bertha",
  "208": "SW Barbur &amp; 30th",
  "925": "SW Capitol &amp; Bertha Ct",
  "929": "SW Capitol &amp; Sunset",
  "1123": "SW Commercial &amp; Hall",
  "2232": "SW Greenburg &amp; Center",
  "3439": "SW Locust &amp; Hall",
  "3440": "SW Locust &amp; 80th",
  "3442": "SW Locust &amp; 82nd",
  "5028": "SW Sam Jackson Pk &amp; OHSU",
  "5032": "SW Sam Jackson Pk &amp; US Veterans",
  "5314": "SW Spring Garden &amp; 11th",
  "5315": "SW Spring Garden &amp; 14th",
  "5317": "SW Spring Garden &amp; 17th",
  "5694": "7100 Block SW Taylors Ferry",
  "5695": "SW Taylors Ferry &amp; 78th Pl",
  "5707": "SW Taylors Ferry &amp; 10th",
  "5727": "SW Taylors Ferry &amp; 46th",
  "5729": "SW Taylors Ferry &amp; 48th",
  "5733": "SW Taylors Ferry &amp; 52nd",
  "5735": "SW Taylors Ferry &amp; 53rd",
  "5737": "SW Taylors Ferry &amp; 55th",
  "5739": "SW Taylors Ferry &amp; 57th",
  "5741": "SW Taylors Ferry &amp; 60th",
  "5742": "SW Taylors Ferry &amp; 62nd",
  "5745": "SW Taylors Ferry &amp; 65th",
  "5746": "SW Taylors Ferry &amp; 66th",
  "5748": "SW Taylors Ferry &amp; 69th",
  "5752": "SW Taylors Ferry &amp; 74th",
  "5790": "SW Terwilliger &amp; Carson",
  "5795": "SW Terwilliger &amp; Hamilton",
  "5796": "SW Terwilliger &amp; Hamilton Terrace",
  "5803": "SW Terwilliger &amp; Ralston Dr",
  "5809": "SW Terwilliger &amp; Troy",
  "5811": "SW Terwilliger &amp; Westwood",
  "5975": "Portland VA Medical Center",
  "7905": "SW 80th &amp; Birch",
  "7907": "SW 80th &amp; Cedarcrest",
  "7911": "SW 80th &amp; Elmwood",
  "7913": "SW 80th &amp; Landau",
  "7915": "SW 80th &amp; Taylors Ferry",
  "8211": "Tigard Transit Center ",
  "8213": "Barbur Transit Center ",
  "8388": "SW Taylors Ferry &amp; 75th",
  "8455": "SW US Veterans Hosp Rd &amp; Bldg 16",
  "9033": "SW Bertha &amp; Chestnut",
  "9320": "SW Taylors Ferry &amp; Capitol Hwy",
  "9488": "3500 Blk SW US Veterans Hosp Rd (CSB)",
  "10612": "3500 Blk SW US Veterans Hosp Rd (Bldg 28)",
  "12403": "SW Greenburg &amp; Washington Square Rd",
  "12730": "SW Bertha &amp; Vermont",
  "13932": "SW Hall &amp; Scoffins/Hunziker",
  "14366": "SW Spring Garden &amp; 20th",
  "14406": "SW Terwilliger &amp; Capitol Hwy",
  "14632": "SW Hall &amp; Garden Pl"
};

const stops = [
  { stop_id: "8211", name: "Tigard Transit Center ", lat: 45.43029, lon: -122.76936, times: ["12:00 AM", "4:44 AM", "5:25 AM", "6:05 AM", "6:35 AM", "7:03 AM", "7:33 AM", "8:03 AM"] },
  { stop_id: "1123", name: "SW Commercial &amp; Hall", lat: 45.428566, lon: -122.766605, times: ["12:00 AM", "4:44 AM", "5:25 AM", "6:05 AM", "6:35 AM", "7:03 AM", "7:33 AM", "8:03 AM"] },
  { stop_id: "13932", name: "SW Hall &amp; Scoffins/Hunziker", lat: 45.429561, lon: -122.764518, times: ["12:00 AM", "4:44 AM", "5:25 AM", "6:05 AM", "6:35 AM", "7:03 AM", "7:33 AM", "8:03 AM"] },
  { stop_id: "14632", name: "SW Hall &amp; Garden Pl", lat: 45.432388, lon: -122.76461, times: ["12:01 AM", "4:45 AM", "5:26 AM", "6:06 AM", "6:36 AM", "7:04 AM", "7:34 AM", "8:04 AM"] },
  { stop_id: "2232", name: "SW Greenburg &amp; Center", lat: 45.433958, lon: -122.768136, times: ["12:01 AM", "4:45 AM", "5:26 AM", "6:06 AM", "6:36 AM", "7:05 AM", "7:35 AM", "8:05 AM"] },
  { stop_id: "12403", name: "SW Greenburg &amp; Washington Square Rd", lat: 45.446196, lon: -122.776126, times: ["12:04 AM", "4:48 AM", "5:29 AM", "6:09 AM", "6:39 AM", "7:08 AM", "7:38 AM", "8:08 AM"] },
  { stop_id: "3439", name: "SW Locust &amp; Hall", lat: 45.446524, lon: -122.764902, times: ["12:06 AM", "4:50 AM", "5:31 AM", "6:11 AM", "6:41 AM", "7:09 AM", "7:39 AM", "8:09 AM"] },
  { stop_id: "3442", name: "SW Locust &amp; 82nd", lat: 45.44655, lon: -122.761678, times: ["12:06 AM", "4:50 AM", "5:31 AM", "6:11 AM", "6:41 AM", "7:10 AM", "7:40 AM", "8:10 AM"] },
  { stop_id: "3440", name: "SW Locust &amp; 80th", lat: 45.446558, lon: -122.759139, times: ["12:06 AM", "4:50 AM", "5:31 AM", "6:11 AM", "6:41 AM", "7:10 AM", "7:40 AM", "8:10 AM"] },
  { stop_id: "7913", name: "SW 80th &amp; Landau", lat: 45.447511, lon: -122.758924, times: ["12:06 AM", "4:50 AM", "5:31 AM", "6:11 AM", "6:41 AM", "7:10 AM", "7:40 AM", "8:10 AM"] },
  { stop_id: "7911", name: "SW 80th &amp; Elmwood", lat: 45.450332, lon: -122.758938, times: ["12:07 AM", "4:51 AM", "5:32 AM", "6:12 AM", "6:42 AM", "7:11 AM", "7:41 AM", "8:11 AM"] },
  { stop_id: "7907", name: "SW 80th &amp; Cedarcrest", lat: 45.452569, lon: -122.75892, times: ["12:07 AM", "4:51 AM", "5:32 AM", "6:12 AM", "6:42 AM", "7:11 AM", "7:41 AM", "8:11 AM"] },
  { stop_id: "7905", name: "SW 80th &amp; Birch", lat: 45.453858, lon: -122.7589, times: ["12:07 AM", "4:51 AM", "5:32 AM", "6:12 AM", "6:42 AM", "7:11 AM", "7:41 AM", "8:11 AM"] },
  { stop_id: "7915", name: "SW 80th &amp; Taylors Ferry", lat: 45.454767, lon: -122.758918, times: ["12:08 AM", "4:52 AM", "5:33 AM", "6:13 AM", "6:43 AM", "7:12 AM", "7:42 AM", "8:12 AM"] },
  { stop_id: "5695", name: "SW Taylors Ferry &amp; 78th Pl", lat: 45.454912, lon: -122.756373, times: ["12:08 AM", "4:52 AM", "5:33 AM", "6:13 AM", "6:43 AM", "7:12 AM", "7:42 AM", "8:12 AM"] },
  { stop_id: "8388", name: "SW Taylors Ferry &amp; 75th", lat: 45.454799, lon: -122.754537, times: ["12:08 AM", "4:52 AM", "5:33 AM", "6:13 AM", "6:43 AM", "7:12 AM", "7:42 AM", "8:12 AM"] },
  { stop_id: "5752", name: "SW Taylors Ferry &amp; 74th", lat: 45.454193, lon: -122.752557, times: ["12:09 AM", "4:53 AM", "5:34 AM", "6:14 AM", "6:44 AM", "7:13 AM", "7:43 AM", "8:13 AM"] },
  { stop_id: "5694", name: "7100 Block SW Taylors Ferry", lat: 45.453947, lon: -122.749887, times: ["12:09 AM", "4:53 AM", "5:34 AM", "6:14 AM", "6:44 AM", "7:13 AM", "7:43 AM", "8:13 AM"] },
  { stop_id: "5748", name: "SW Taylors Ferry &amp; 69th", lat: 45.454857, lon: -122.74701, times: ["12:10 AM", "4:54 AM", "5:35 AM", "6:15 AM", "6:45 AM", "7:14 AM", "7:44 AM", "8:14 AM"] },
  { stop_id: "5746", name: "SW Taylors Ferry &amp; 66th", lat: 45.454842, lon: -122.74485, times: ["11:10 PM", "12:10 AM", "4:54 AM", "5:35 AM", "6:15 AM", "6:45 AM", "7:14 AM", "7:44 AM"] },
  { stop_id: "5745", name: "SW Taylors Ferry &amp; 65th", lat: 45.454832, lon: -122.743386, times: ["11:10 PM", "12:10 AM", "4:55 AM", "5:36 AM", "6:16 AM", "6:46 AM", "7:15 AM", "7:45 AM"] },
  { stop_id: "5742", name: "SW Taylors Ferry &amp; 62nd", lat: 45.454818, lon: -122.740502, times: ["11:11 PM", "12:11 AM", "4:55 AM", "5:36 AM", "6:16 AM", "6:46 AM", "7:15 AM", "7:45 AM"] },
  { stop_id: "5741", name: "SW Taylors Ferry &amp; 60th", lat: 45.454789, lon: -122.738142, times: ["11:11 PM", "12:11 AM", "4:56 AM", "5:37 AM", "6:17 AM", "6:47 AM", "7:16 AM", "7:46 AM"] },
  { stop_id: "5739", name: "SW Taylors Ferry &amp; 57th", lat: 45.454768, lon: -122.735857, times: ["11:11 PM", "12:11 AM", "4:56 AM", "5:37 AM", "6:17 AM", "6:47 AM", "7:16 AM", "7:46 AM"] },
  { stop_id: "5737", name: "SW Taylors Ferry &amp; 55th", lat: 45.454737, lon: -122.733081, times: ["11:12 PM", "12:12 AM", "4:56 AM", "5:37 AM", "6:17 AM", "6:47 AM", "7:16 AM", "7:46 AM"] },
  { stop_id: "5735", name: "SW Taylors Ferry &amp; 53rd", lat: 45.454677, lon: -122.731554, times: ["11:12 PM", "12:12 AM", "4:57 AM", "5:38 AM", "6:18 AM", "6:48 AM", "7:17 AM", "7:47 AM"] },
  { stop_id: "5733", name: "SW Taylors Ferry &amp; 52nd", lat: 45.454704, lon: -122.729793, times: ["11:12 PM", "12:12 AM", "4:57 AM", "5:38 AM", "6:18 AM", "6:48 AM", "7:17 AM", "7:47 AM"] },
  { stop_id: "5729", name: "SW Taylors Ferry &amp; 48th", lat: 45.454669, lon: -122.726406, times: ["11:13 PM", "12:13 AM", "4:58 AM", "5:39 AM", "6:19 AM", "6:49 AM", "7:18 AM", "7:48 AM"] },
  { stop_id: "5727", name: "SW Taylors Ferry &amp; 46th", lat: 45.454676, lon: -122.724342, times: ["11:13 PM", "12:13 AM", "4:58 AM", "5:39 AM", "6:19 AM", "6:49 AM", "7:18 AM", "7:48 AM"] },
  { stop_id: "9320", name: "SW Taylors Ferry &amp; Capitol Hwy", lat: 45.454574, lon: -122.720041, times: ["11:15 PM", "12:15 AM", "5:00 AM", "5:41 AM", "6:21 AM", "6:51 AM", "7:20 AM", "7:50 AM"] },
  { stop_id: "8213", name: "Barbur Transit Center ", lat: 45.454468, lon: -122.717673, times: ["11:16 PM", "12:16 AM", "5:01 AM", "5:42 AM", "6:22 AM", "6:52 AM", "7:21 AM", "7:51 AM"] },
  { stop_id: "162", name: "SW Barbur &amp; Alice", lat: 45.458724, lon: -122.709491, times: ["11:17 PM", "12:17 AM", "5:02 AM", "5:43 AM", "6:23 AM", "6:53 AM", "7:22 AM", "7:52 AM"] },
  { stop_id: "208", name: "SW Barbur &amp; 30th", lat: 45.459913, lon: -122.707433, times: ["11:17 PM", "12:17 AM", "5:02 AM", "5:43 AM", "6:23 AM", "6:53 AM", "7:23 AM", "7:53 AM"] },
  { stop_id: "159", name: "SW Barbur &amp; 26th Ave", lat: 45.462586, lon: -122.702772, times: ["11:18 PM", "12:18 AM", "5:03 AM", "5:44 AM", "6:24 AM", "6:54 AM", "7:24 AM", "7:54 AM"] },
  { stop_id: "14366", name: "SW Spring Garden &amp; 20th", lat: 45.463424, lon: -122.6979, times: ["11:19 PM", "12:19 AM", "5:04 AM", "5:45 AM", "6:25 AM", "6:55 AM", "7:25 AM", "7:55 AM"] },
  { stop_id: "5317", name: "SW Spring Garden &amp; 17th", lat: 45.463436, lon: -122.695359, times: ["11:20 PM", "12:20 AM", "5:05 AM", "5:46 AM", "6:26 AM", "6:56 AM", "7:25 AM", "7:55 AM"] },
  { stop_id: "5315", name: "SW Spring Garden &amp; 14th", lat: 45.463469, lon: -122.693114, times: ["11:20 PM", "12:20 AM", "5:05 AM", "5:46 AM", "6:26 AM", "6:56 AM", "7:26 AM", "7:56 AM"] },
  { stop_id: "5314", name: "SW Spring Garden &amp; 11th", lat: 45.463187, lon: -122.69053, times: ["11:20 PM", "12:20 AM", "5:05 AM", "5:46 AM", "6:26 AM", "6:56 AM", "7:26 AM", "7:56 AM"] },
  { stop_id: "5707", name: "SW Taylors Ferry &amp; 10th", lat: 45.463316, lon: -122.688761, times: ["11:21 PM", "12:21 AM", "5:06 AM", "5:47 AM", "6:27 AM", "6:57 AM", "7:26 AM", "7:56 AM"] },
  { stop_id: "5790", name: "SW Terwilliger &amp; Carson", lat: 45.464056, lon: -122.683569, times: ["11:22 PM", "12:22 AM", "5:07 AM", "5:48 AM", "6:28 AM", "6:58 AM", "7:28 AM", "7:58 AM"] },
  { stop_id: "5809", name: "SW Terwilliger &amp; Troy", lat: 45.467537, lon: -122.684771, times: ["11:22 PM", "12:22 AM", "5:08 AM", "5:49 AM", "6:29 AM", "6:59 AM", "7:29 AM", "7:59 AM"] },
  { stop_id: "199", name: "SW Barbur &amp; Bertha", lat: 45.470468, lon: -122.689602, times: ["11:24 PM", "12:24 AM", "5:09 AM", "5:50 AM", "6:30 AM", "7:00 AM", "7:30 AM", "8:00 AM"] },
  { stop_id: "9033", name: "SW Bertha &amp; Chestnut", lat: 45.472242, lon: -122.694348, times: ["11:25 PM", "12:25 AM", "5:11 AM", "5:52 AM", "6:32 AM", "7:02 AM", "7:32 AM", "8:02 AM"] },
  { stop_id: "12730", name: "SW Bertha &amp; Vermont", lat: 45.475772, lon: -122.696293, times: ["11:26 PM", "12:26 AM", "5:12 AM", "5:53 AM", "6:33 AM", "7:03 AM", "7:33 AM", "8:03 AM"] },
  { stop_id: "925", name: "SW Capitol &amp; Bertha Ct", lat: 45.478076, lon: -122.696368, times: ["11:27 PM", "12:27 AM", "5:13 AM", "5:54 AM", "6:34 AM", "7:04 AM", "7:34 AM", "8:04 AM"] },
  { stop_id: "929", name: "SW Capitol &amp; Sunset", lat: 45.478788, lon: -122.692856, times: ["11:28 PM", "12:28 AM", "5:14 AM", "5:55 AM", "6:35 AM", "7:05 AM", "7:35 AM", "8:05 AM"] },
  { stop_id: "14406", name: "SW Terwilliger &amp; Capitol Hwy", lat: 45.480463, lon: -122.68622, times: ["11:29 PM", "12:29 AM", "5:15 AM", "5:56 AM", "6:36 AM", "7:06 AM", "7:36 AM", "8:06 AM"] },
  { stop_id: "5803", name: "SW Terwilliger &amp; Ralston Dr", lat: 45.481296, lon: -122.683035, times: ["11:29 PM", "12:29 AM", "5:15 AM", "5:56 AM", "6:37 AM", "7:07 AM", "7:37 AM", "8:07 AM"] },
  { stop_id: "5811", name: "SW Terwilliger &amp; Westwood", lat: 45.483036, lon: -122.683429, times: ["11:30 PM", "12:30 AM", "5:16 AM", "5:57 AM", "6:37 AM", "7:07 AM", "7:37 AM", "8:07 AM"] },
  { stop_id: "5795", name: "SW Terwilliger &amp; Hamilton", lat: 45.491466, lon: -122.683913, times: ["11:33 PM", "12:33 AM", "5:19 AM", "6:00 AM", "6:41 AM", "7:11 AM", "7:41 AM", "8:11 AM"] },
  { stop_id: "5796", name: "SW Terwilliger &amp; Hamilton Terrace", lat: 45.49341, lon: -122.681244, times: ["11:34 PM", "12:34 AM", "5:20 AM", "6:01 AM", "6:42 AM", "7:12 AM", "7:42 AM", "8:12 AM"] },
  { stop_id: "8455", name: "SW US Veterans Hosp Rd &amp; Bldg 16", lat: 45.496418, lon: -122.68222, times: ["11:35 PM", "12:35 AM", "5:21 AM", "6:02 AM", "6:43 AM", "7:13 AM", "7:43 AM", "8:13 AM"] },
  { stop_id: "5975", name: "Portland VA Medical Center", lat: 45.497058, lon: -122.683271, times: ["11:36 PM", "12:36 AM", "5:22 AM", "6:03 AM", "6:44 AM", "7:14 AM", "7:44 AM", "8:14 AM"] },
  { stop_id: "10612", name: "3500 Blk SW US Veterans Hosp Rd (Bldg 28)", lat: 45.497026, lon: -122.686521, times: ["11:37 PM", "12:37 AM", "5:23 AM", "6:04 AM", "6:45 AM", "7:15 AM", "7:45 AM", "8:15 AM"] },
  { stop_id: "9488", name: "3500 Blk SW US Veterans Hosp Rd (CSB)", lat: 45.497355, lon: -122.688156, times: ["11:38 PM", "12:38 AM", "5:24 AM", "6:05 AM", "6:46 AM", "7:16 AM", "7:46 AM", "8:16 AM"] },
  { stop_id: "5032", name: "SW Sam Jackson Pk &amp; US Veterans", lat: 45.499042, lon: -122.687161, times: ["11:39 PM", "12:39 AM", "5:25 AM", "6:06 AM", "6:47 AM", "7:17 AM", "7:47 AM", "8:17 AM"] },
  { stop_id: "5028", name: "SW Sam Jackson Pk &amp; OHSU", lat: 45.499332, lon: -122.685535, times: ["11:40 PM", "12:40 AM", "5:26 AM", "6:07 AM", "6:48 AM", "7:18 AM", "7:48 AM", "8:18 AM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          📢 We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>