<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Route 76 - To Beaverton Transit Center | MetroFeed Portland</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', sans-serif;
    background-color: #0d0d0d;
    color: #cccccc;
    overflow-y: auto;
  }

  .back-button-fixed {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 45px;
    height: 45px;
    background-color: #4dd0e1;
    border: 2px solid #000;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1001;
    box-shadow: 0 0 10px #4dd0e1;
    cursor: pointer;
    transition: background 0.2s;
    outline: none;
  }
  .back-button-fixed:active, .back-button-fixed:focus {
    background-color: #1976d2;
  }
  .back-button-fixed svg {
    width: 24px;
    height: 24px;
    fill: #000;
    display: block;
  }
  .back-button-fixed:active svg,
  .back-button-fixed:focus svg {
    fill: #fff;
  }

  header {
    background-color: #0d0d0d;
    border-top: 4px solid #4dd0e1;
    border-bottom: 3px solid #4dd0e1;
    padding: 1rem;
    text-align: center;
  }

  header img {
    max-height: 60px;
  }

  h1#route-title {
    text-align: center;
    margin: 1rem 0;
    font-size: 2rem;
    color: #f0f0f0;
  }

  .content-box {
    border-radius: 12px;
    padding: 0;
    margin: 0;
    background-color: #1e1e1e;
  }

  #map {
    width: 100%;
    height: 85vh;
    border: none;
    margin: 0 auto;
    display: block;
    border-radius: 8px;
  }

  .button-bar {
    display: flex;
    justify-content: center;
    margin: 1rem 0;
  }

  .button-bar a, .back-button {
    background: #4dd0e1;
    color: #0d0d0d;
    padding: 0.6rem 1.2rem;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
    border: none;
    cursor: pointer;
    box-shadow: 0 0 10px #4dd0e1;
  }

  .back-button:hover {
    background-color: #35c0d6;
  }

  .site-footer {
    text-align: center;
    margin-top: 3rem;
    margin-bottom: 120px;
    font-size: 0.85rem;
    color: #aaa;
  }

  .site-footer a {
    color: #00BFFF;
    text-decoration: none;
  }

  .site-footer a:hover {
    text-decoration: underline;
  }

.favorite-save-box {
  position: absolute;
  top: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 1010;
}

.favorite-star {
  background: #4dd0e1;
  color: #FFD700;
  font-size: 2.5rem;
  border: 2px solid #222;
  border-radius: 10px;
  width: 56px;
  height: 56px;
  cursor: pointer;
  box-shadow: 0 0 8px #4dd0e1;
  transition: background 0.18s, color 0.18s;
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  margin-bottom: 8px;
}
.favorite-star:active,
.favorite-star:focus {
  background: #1976d2;
  color: #ffea00;
}

.favorite-label {
  color: #4dd0e1;
  font-size: 1.03rem;
  font-weight: bold;
  background: #181818;
  border-radius: 6px;
  padding: 2px 10px;
  text-align: center;
  letter-spacing: 0.01em;
  margin-top: 0;
  box-shadow: 0 1px 6px #2224;
}
.fav-dropdown {
  display: none;
  position: absolute;
  top: 65px;
  right: 0;
  z-index: 99999;
  background: #222;
  border: 2px solid #4dd0e1;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  box-shadow: 0 2px 12px #2224;
}
.fav-dropdown button {
  font-size: 1.1rem;
  padding: 6px 16px;
  background: #4dd0e1;
  color: #222;
  border: none;
  border-radius: 7px;
  cursor: pointer;
  font-weight: bold;
}
.fav-dropdown button:hover, .fav-dropdown button:focus {
  background: #fff;
  color: #0071ce;
  outline: none;
}
</style>
</head>
<body>
  
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

<!-- Favorite Route Button (Top Right) with Dropdown -->
<div class="favorite-save-box">
  <button class="favorite-star" id="fav-star" aria-label="Save route to favorites" onclick="showFavDropdown(event)">☆</button>
  <div class="favorite-label">Save to Favorites</div>
  <div class="fav-dropdown" id="fav-dropdown">
    <button id="fav-dropdown-btn">Add to Favorites</button>
  </div>
</div>

  <!-- Beta Disclaimers -->
  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <!-- Back button -->
  <button class="back-button-fixed" onclick="history.back()" aria-label="Go back">
    <svg viewBox="0 0 24 24">
      <path d="M15.5 19c-.28 0-.53-.11-.71-.29l-6.5-6.5a1.003 1.003 0 010-1.42l6.5-6.5a1.003 1.003 0 011.42 1.42L10.41 12l6.3 6.29a1.003 1.003 0 01-1.21 1.54z"/>
    </svg>
  </button>

  <h1 id="route-title">Route 76 - To Beaverton Transit Center</h1>
  <span id="route-type" style="display:none;"></span>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 76;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.377908, -122.742469],
  [45.378177, -122.742547],
  [45.378056, -122.743378],
  [45.378136, -122.743447],
  [45.378202, -122.743491],
  [45.378249, -122.743543],
  [45.37832, -122.743605],
  [45.378377, -122.743635],
  [45.378442, -122.743653],
  [45.378514, -122.743661],
  [45.378911, -122.743652],
  [45.379326, -122.743641],
  [45.379403, -122.743633],
  [45.379467, -122.743622],
  [45.379546, -122.743594],
  [45.379713, -122.743503],
  [45.379889, -122.743406],
  [45.380118, -122.743278],
  [45.380185, -122.743274],
  [45.380226, -122.743277],
  [45.380281, -122.743285],
  [45.380322, -122.7433],
  [45.38037, -122.743331],
  [45.380417, -122.743371],
  [45.380418, -122.743371],
  [45.380456, -122.743416],
  [45.380499, -122.743472],
  [45.380528, -122.743537],
  [45.380545, -122.743589],
  [45.380561, -122.743663],
  [45.380566, -122.743748],
  [45.380568, -122.74395],
  [45.380176, -122.74395],
  [45.379355, -122.743954],
  [45.379254, -122.743955],
  [45.378751, -122.743959],
  [45.3781, -122.743964],
  [45.378009, -122.743962],
  [45.377792, -122.743946],
  [45.377579, -122.743934],
  [45.377427, -122.743927],
  [45.377121, -122.743928],
  [45.376949, -122.743928],
  [45.376813, -122.743928],
  [45.376718, -122.743926],
  [45.376392, -122.74393],
  [45.375873, -122.743936],
  [45.375758, -122.743937],
  [45.375509, -122.74394],
  [45.375506, -122.74411],
  [45.375504, -122.744352],
  [45.375502, -122.744728],
  [45.375496, -122.74508],
  [45.375492, -122.745832],
  [45.375488, -122.746268],
  [45.375479, -122.747203],
  [45.375475, -122.747634],
  [45.375464, -122.748955],
  [45.375452, -122.750431],
  [45.375451, -122.750569],
  [45.375444, -122.751553],
  [45.375442, -122.751791],
  [45.375437, -122.752901],
  [45.375429, -122.75477],
  [45.375422, -122.756016],
  [45.375418, -122.756656],
  [45.375407, -122.758244],
  [45.375407, -122.758247],
  [45.375395, -122.759777],
  [45.375393, -122.760077],
  [45.375389, -122.760403],
  [45.375385, -122.76055],
  [45.375465, -122.760476],
  [45.375734, -122.760475],
  [45.375802, -122.760478],
  [45.375856, -122.760483],
  [45.375914, -122.760496],
  [45.37597, -122.760511],
  [45.376039, -122.760532],
  [45.376109, -122.760563],
  [45.376116, -122.760566],
  [45.376151, -122.760584],
  [45.376233, -122.760635],
  [45.376307, -122.760675],
  [45.37638, -122.760706],
  [45.376441, -122.760725],
  [45.376506, -122.76074],
  [45.376563, -122.760747],
  [45.37664, -122.760759],
  [45.376719, -122.760763],
  [45.376774, -122.760759],
  [45.376853, -122.760745],
  [45.376927, -122.760727],
  [45.376986, -122.760707],
  [45.377038, -122.760695],
  [45.377132, -122.760647],
  [45.377232, -122.760583],
  [45.377335, -122.760499],
  [45.377428, -122.760406],
  [45.377515, -122.760304],
  [45.377588, -122.760198],
  [45.377835, -122.759853],
  [45.377992, -122.759655],
  [45.378079, -122.759561],
  [45.378167, -122.759475],
  [45.378259, -122.759398],
  [45.37836, -122.759323],
  [45.378428, -122.759283],
  [45.378515, -122.75931],
  [45.378597, -122.759264],
  [45.37868, -122.75922],
  [45.378753, -122.759184],
  [45.378842, -122.759149],
  [45.378918, -122.759121],
  [45.378919, -122.759588],
  [45.378927, -122.759768],
  [45.37893, -122.759811],
  [45.378939, -122.759912],
  [45.378947, -122.759987],
  [45.378968, -122.760106],
  [45.378992, -122.760206],
  [45.379007, -122.760259],
  [45.379034, -122.760345],
  [45.379098, -122.76053],
  [45.379157, -122.760652],
  [45.37918, -122.760701],
  [45.379222, -122.76078],
  [45.379327, -122.76098],
  [45.379398, -122.761151],
  [45.379427, -122.761232],
  [45.379452, -122.761308],
  [45.379484, -122.761429],
  [45.379511, -122.761545],
  [45.37954, -122.761716],
  [45.37955, -122.761864],
  [45.379553, -122.761971],
  [45.379546, -122.762544],
  [45.379544, -122.762847],
  [45.379535, -122.763647],
  [45.379534, -122.763721],
  [45.37953, -122.764178],
  [45.379529, -122.764285],
  [45.379521, -122.764392],
  [45.379621, -122.764375],
  [45.380047, -122.764321],
  [45.380217, -122.7643],
  [45.380498, -122.764266],
  [45.380592, -122.764255],
  [45.380685, -122.764245],
  [45.381049, -122.764207],
  [45.381161, -122.764201],
  [45.381312, -122.764243],
  [45.381399, -122.764242],
  [45.381757, -122.764227],
  [45.382083, -122.76424],
  [45.382653, -122.764248],
  [45.382949, -122.764249],
  [45.383306, -122.764251],
  [45.383438, -122.764252],
  [45.384235, -122.764249],
  [45.38423, -122.764084],
  [45.384246, -122.763846],
  [45.384271, -122.763507],
  [45.3843, -122.763176],
  [45.384345, -122.762991],
  [45.384442, -122.761945],
  [45.384452, -122.761826],
  [45.384484, -122.761495],
  [45.38451, -122.761273],
  [45.384533, -122.76105],
  [45.384544, -122.760927],
  [45.384586, -122.760496],
  [45.384588, -122.760474],
  [45.384617, -122.760085],
  [45.384587, -122.759946],
  [45.384603, -122.759792],
  [45.384614, -122.759688],
  [45.384618, -122.759647],
  [45.384636, -122.759499],
  [45.384641, -122.759457],
  [45.384644, -122.759431],
  [45.384664, -122.759284],
  [45.384692, -122.759126],
  [45.384752, -122.759018],
  [45.384783, -122.758907],
  [45.384873, -122.75863],
  [45.384929, -122.758495],
  [45.384957, -122.758434],
  [45.38499, -122.758364],
  [45.385088, -122.758202],
  [45.385117, -122.758164],
  [45.385218, -122.758032],
  [45.385339, -122.757908],
  [45.385466, -122.757802],
  [45.385499, -122.757779],
  [45.385545, -122.757747],
  [45.385642, -122.757689],
  [45.385803, -122.757607],
  [45.386114, -122.757474],
  [45.386478, -122.75733],
  [45.38685, -122.7572],
  [45.38707, -122.757116],
  [45.387172, -122.757078],
  [45.387485, -122.756961],
  [45.387637, -122.756902],
  [45.387828, -122.756826],
  [45.388298, -122.756639],
  [45.388438, -122.756581],
  [45.388619, -122.75651],
  [45.388665, -122.756491],
  [45.388872, -122.756408],
  [45.38894, -122.756389],
  [45.389047, -122.75637],
  [45.389045, -122.756218],
  [45.389048, -122.756053],
  [45.389058, -122.755975],
  [45.389087, -122.755855],
  [45.389201, -122.755505],
  [45.389322, -122.755107],
  [45.389386, -122.754898],
  [45.389594, -122.754296],
  [45.38969, -122.754003],
  [45.38974, -122.753851],
  [45.389763, -122.753785],
  [45.3898, -122.75369],
  [45.389896, -122.753485],
  [45.389926, -122.75342],
  [45.389995, -122.753307],
  [45.390103, -122.753144],
  [45.390149, -122.753075],
  [45.390181, -122.753029],
  [45.390415, -122.752692],
  [45.39122, -122.75153],
  [45.391247, -122.751491],
  [45.391462, -122.751181],
  [45.391973, -122.750444],
  [45.392048, -122.75034],
  [45.392113, -122.750231],
  [45.392463, -122.7496],
  [45.392513, -122.749525],
  [45.392559, -122.749456],
  [45.392621, -122.749374],
  [45.392685, -122.7493],
  [45.392772, -122.749215],
  [45.392835, -122.749161],
  [45.392887, -122.749125],
  [45.392927, -122.749101],
  [45.393016, -122.749056],
  [45.393067, -122.749036],
  [45.393117, -122.749019],
  [45.393213, -122.748994],
  [45.393312, -122.748971],
  [45.393383, -122.748961],
  [45.393473, -122.748958],
  [45.393947, -122.748969],
  [45.394581, -122.748981],
  [45.394666, -122.74899],
  [45.394675, -122.748992],
  [45.394805, -122.749022],
  [45.394906, -122.749067],
  [45.395052, -122.749156],
  [45.39516, -122.749241],
  [45.395273, -122.749352],
  [45.395673, -122.749764],
  [45.395851, -122.74993],
  [45.395959, -122.75001],
  [45.39601, -122.750041],
  [45.396106, -122.750065],
  [45.396197, -122.750083],
  [45.396298, -122.750089],
  [45.396402, -122.750074],
  [45.39651, -122.750053],
  [45.396607, -122.750023],
  [45.396658, -122.749999],
  [45.39679, -122.749917],
  [45.396889, -122.749847],
  [45.396946, -122.749793],
  [45.397313, -122.749388],
  [45.397408, -122.74931],
  [45.397517, -122.749237],
  [45.397572, -122.74921],
  [45.397655, -122.749175],
  [45.397699, -122.749158],
  [45.397701, -122.749158],
  [45.397756, -122.749141],
  [45.397807, -122.74913],
  [45.39787, -122.749033],
  [45.397949, -122.749028],
  [45.398034, -122.749032],
  [45.39811, -122.74904],
  [45.398349, -122.749069],
  [45.398421, -122.749104],
  [45.398494, -122.749108],
  [45.398583, -122.74911],
  [45.398865, -122.749101],
  [45.398957, -122.749102],
  [45.398973, -122.749255],
  [45.398999, -122.749434],
  [45.399037, -122.749636],
  [45.399063, -122.749753],
  [45.399092, -122.749859],
  [45.399121, -122.749954],
  [45.399157, -122.750052],
  [45.399224, -122.750249],
  [45.39928, -122.750408],
  [45.399374, -122.750675],
  [45.399381, -122.750696],
  [45.399454, -122.750881],
  [45.399512, -122.751009],
  [45.399545, -122.751057],
  [45.399589, -122.751118],
  [45.399643, -122.751168],
  [45.399694, -122.751211],
  [45.39976, -122.751244],
  [45.399851, -122.751276],
  [45.39991, -122.751283],
  [45.400131, -122.751285],
  [45.400381, -122.751288],
  [45.400512, -122.751285],
  [45.400786, -122.751278],
  [45.400845, -122.751277],
  [45.400927, -122.751239],
  [45.400997, -122.751242],
  [45.401132, -122.751273],
  [45.401199, -122.751308],
  [45.401251, -122.751349],
  [45.401283, -122.751379],
  [45.401312, -122.751407],
  [45.401367, -122.751471],
  [45.401664, -122.75183],
  [45.401835, -122.752035],
  [45.401866, -122.752072],
  [45.401959, -122.752168],
  [45.401979, -122.752245],
  [45.402144, -122.752409],
  [45.402216, -122.752482],
  [45.402302, -122.752587],
  [45.402328, -122.752642],
  [45.402465, -122.752962],
  [45.402526, -122.753102],
  [45.402613, -122.753307],
  [45.402664, -122.753426],
  [45.402761, -122.75365],
  [45.402895, -122.753965],
  [45.402935, -122.754068],
  [45.403047, -122.754337],
  [45.403205, -122.754718],
  [45.40341, -122.755194],
  [45.403523, -122.755458],
  [45.403592, -122.755617],
  [45.403608, -122.755655],
  [45.404118, -122.756843],
  [45.404175, -122.75701],
  [45.404182, -122.757036],
  [45.404215, -122.75717],
  [45.40425, -122.757318],
  [45.404271, -122.757455],
  [45.404283, -122.757601],
  [45.404294, -122.757726],
  [45.404294, -122.757825],
  [45.404296, -122.758125],
  [45.404299, -122.758677],
  [45.404299, -122.758833],
  [45.404308, -122.760432],
  [45.404305, -122.761044],
  [45.404298, -122.762517],
  [45.404297, -122.762715],
  [45.404295, -122.762987],
  [45.404296, -122.763042],
  [45.404295, -122.763061],
  [45.404272, -122.76349],
  [45.40427, -122.764382],
  [45.404274, -122.764581],
  [45.404388, -122.764585],
  [45.405016, -122.764565],
  [45.405451, -122.764551],
  [45.405671, -122.764545],
  [45.406109, -122.764534],
  [45.406331, -122.764534],
  [45.407243, -122.764514],
  [45.40807, -122.764501],
  [45.408217, -122.764498],
  [45.408934, -122.764486],
  [45.409065, -122.764487],
  [45.41022, -122.764462],
  [45.410313, -122.764464],
  [45.410408, -122.764466],
  [45.410602, -122.764463],
  [45.411234, -122.764452],
  [45.412089, -122.764438],
  [45.412927, -122.764425],
  [45.413056, -122.764423],
  [45.413402, -122.764416],
  [45.41413, -122.764402],
  [45.414261, -122.7644],
  [45.414374, -122.764397],
  [45.414657, -122.764382],
  [45.41488, -122.764399],
  [45.415007, -122.764441],
  [45.4151, -122.764473],
  [45.415452, -122.764583],
  [45.415613, -122.764633],
  [45.415727, -122.764668],
  [45.416184, -122.76481],
  [45.416416, -122.764883],
  [45.417029, -122.765075],
  [45.41733, -122.765168],
  [45.417489, -122.765222],
  [45.417744, -122.765299],
  [45.418018, -122.765381],
  [45.418119, -122.765411],
  [45.418193, -122.76543],
  [45.418637, -122.765538],
  [45.418667, -122.765545],
  [45.418742, -122.765563],
  [45.418754, -122.765565],
  [45.419048, -122.765593],
  [45.419386, -122.765621],
  [45.419605, -122.76564],
  [45.419844, -122.765657],
  [45.420467, -122.765683],
  [45.421011, -122.765703],
  [45.421462, -122.765718],
  [45.421591, -122.765724],
  [45.421704, -122.765727],
  [45.421928, -122.765731],
  [45.422146, -122.765735],
  [45.42225, -122.765737],
  [45.422569, -122.765742],
  [45.423214, -122.765752],
  [45.423417, -122.765749],
  [45.423542, -122.765746],
  [45.423592, -122.765745],
  [45.423894, -122.765739],
  [45.424172, -122.765744],
  [45.425273, -122.765755],
  [45.425393, -122.765756],
  [45.425702, -122.765761],
  [45.425736, -122.765761],
  [45.425847, -122.765766],
  [45.425937, -122.765781],
  [45.426025, -122.765818],
  [45.426096, -122.765872],
  [45.426117, -122.765887],
  [45.426157, -122.765928],
  [45.426219, -122.765991],
  [45.426256, -122.766031],
  [45.426335, -122.766118],
  [45.426403, -122.766168],
  [45.42645, -122.766198],
  [45.426499, -122.766214],
  [45.426553, -122.766222],
  [45.426811, -122.766218],
  [45.427016, -122.766215],
  [45.427329, -122.76621],
  [45.42745, -122.766209],
  [45.427743, -122.76622],
  [45.427866, -122.766227],
  [45.427963, -122.766224],
  [45.428046, -122.766212],
  [45.428091, -122.766196],
  [45.428133, -122.76618],
  [45.428204, -122.766149],
  [45.428288, -122.766088],
  [45.428355, -122.766175],
  [45.428613, -122.76652],
  [45.428818, -122.766794],
  [45.428853, -122.766841],
  [45.428931, -122.766951],
  [45.4294, -122.767618],
  [45.429614, -122.76792],
  [45.429679, -122.768011],
  [45.429816, -122.768204],
  [45.429979, -122.768435],
  [45.430037, -122.768519],
  [45.430108, -122.768619],
  [45.430137, -122.768661],
  [45.430189, -122.768732],
  [45.43021, -122.768764],
  [45.43025, -122.768821],
  [45.430433, -122.769078],
  [45.43067, -122.769411],
  [45.430568, -122.769506],
  [45.430514, -122.769539],
  [45.430435, -122.769577],
  [45.430379, -122.769585],
  [45.430322, -122.769575],
  [45.430256, -122.769529],
  [45.430223, -122.769482],
  [45.430215, -122.769472],
  [45.430173, -122.769413],
  [45.430089, -122.769295],
  [45.430051, -122.769209],
  [45.430041, -122.769153],
  [45.430033, -122.769094],
  [45.430041, -122.769036],
  [45.430096, -122.768939],
  [45.43021, -122.768764],
  [45.43025, -122.768821],
  [45.430433, -122.769078],
  [45.43067, -122.769411],
  [45.430758, -122.769537],
  [45.430876, -122.769707],
  [45.431162, -122.770118],
  [45.431214, -122.770187],
  [45.431329, -122.770003],
  [45.4315, -122.769731],
  [45.431566, -122.769624],
  [45.431608, -122.769557],
  [45.431705, -122.769403],
  [45.43181, -122.769235],
  [45.431832, -122.769199],
  [45.431857, -122.769157],
  [45.431939, -122.769025],
  [45.432048, -122.768849],
  [45.432211, -122.768583],
  [45.432247, -122.768525],
  [45.432297, -122.768449],
  [45.432326, -122.76834],
  [45.43242, -122.768167],
  [45.432482, -122.76802],
  [45.432527, -122.767877],
  [45.432556, -122.76775],
  [45.432581, -122.767597],
  [45.432605, -122.767391],
  [45.43261, -122.767343],
  [45.432631, -122.767257],
  [45.432668, -122.767177],
  [45.432699, -122.767132],
  [45.432769, -122.767071],
  [45.432852, -122.767033],
  [45.432919, -122.767014],
  [45.432976, -122.767015],
  [45.433012, -122.767024],
  [45.433054, -122.767042],
  [45.433114, -122.767167],
  [45.433221, -122.767291],
  [45.433292, -122.767383],
  [45.433408, -122.767556],
  [45.433428, -122.767585],
  [45.433476, -122.767651],
  [45.433616, -122.767848],
  [45.43367, -122.76792],
  [45.43371, -122.767972],
  [45.433864, -122.768189],
  [45.433896, -122.768232],
  [45.433898, -122.768235],
  [45.433937, -122.768286],
  [45.43404, -122.768436],
  [45.434185, -122.768647],
  [45.4342, -122.768667],
  [45.434263, -122.76876],
  [45.434399, -122.768957],
  [45.434579, -122.769218],
  [45.434599, -122.769247],
  [45.434638, -122.769303],
  [45.434706, -122.769413],
  [45.43478, -122.769536],
  [45.434866, -122.76969],
  [45.434876, -122.769707],
  [45.435069, -122.770049],
  [45.435135, -122.770168],
  [45.435485, -122.770794],
  [45.435533, -122.770885],
  [45.43563, -122.771079],
  [45.435817, -122.77148],
  [45.436204, -122.772307],
  [45.436293, -122.772501],
  [45.436355, -122.772636],
  [45.436433, -122.772831],
  [45.436486, -122.772992],
  [45.436532, -122.773131],
  [45.436617, -122.773441],
  [45.436631, -122.773492],
  [45.436867, -122.774369],
  [45.436872, -122.774391],
  [45.436899, -122.774507],
  [45.436917, -122.774624],
  [45.437062, -122.77567],
  [45.437067, -122.775707],
  [45.437106, -122.775999],
  [45.437132, -122.776192],
  [45.437167, -122.776376],
  [45.437186, -122.776471],
  [45.437252, -122.77674],
  [45.437262, -122.77678],
  [45.437417, -122.777444],
  [45.437526, -122.777906],
  [45.437549, -122.778001],
  [45.437586, -122.778151],
  [45.437614, -122.778258],
  [45.437647, -122.77837],
  [45.437685, -122.778471],
  [45.437738, -122.778594],
  [45.437792, -122.778692],
  [45.43784, -122.778773],
  [45.437928, -122.77889],
  [45.437956, -122.778929],
  [45.438075, -122.77904],
  [45.438143, -122.779097],
  [45.438214, -122.779148],
  [45.43827, -122.779179],
  [45.438551, -122.779308],
  [45.438608, -122.779335],
  [45.438793, -122.779422],
  [45.438855, -122.77945],
  [45.438932, -122.779487],
  [45.439013, -122.779525],
  [45.43929, -122.779662],
  [45.439401, -122.779717],
  [45.439448, -122.779736],
  [45.439644, -122.779812],
  [45.439735, -122.779835],
  [45.439767, -122.779843],
  [45.439876, -122.779861],
  [45.439981, -122.779874],
  [45.440061, -122.779878],
  [45.440152, -122.779879],
  [45.440257, -122.779865],
  [45.440426, -122.779831],
  [45.440473, -122.77982],
  [45.440527, -122.779806],
  [45.440588, -122.779785],
  [45.440652, -122.779764],
  [45.440798, -122.779698],
  [45.440852, -122.779667],
  [45.440901, -122.77964],
  [45.440997, -122.779575],
  [45.441104, -122.779495],
  [45.441247, -122.779372],
  [45.441312, -122.779303],
  [45.441344, -122.779268],
  [45.441374, -122.779234],
  [45.441431, -122.779168],
  [45.441471, -122.779122],
  [45.441564, -122.779015],
  [45.44171, -122.778848],
  [45.441911, -122.77862],
  [45.441937, -122.778594],
  [45.442042, -122.778485],
  [45.442162, -122.77836],
  [45.442316, -122.778197],
  [45.442558, -122.777937],
  [45.442716, -122.777791],
  [45.442904, -122.777658],
  [45.442997, -122.777607],
  [45.443169, -122.777526],
  [45.443363, -122.777431],
  [45.443926, -122.777198],
  [45.444023, -122.777156],
  [45.444126, -122.777116],
  [45.444265, -122.777078],
  [45.44434, -122.77695],
  [45.44437, -122.776932],
  [45.444615, -122.776831],
  [45.444702, -122.776883],
  [45.444804, -122.776845],
  [45.445447, -122.776606],
  [45.445887, -122.776442],
  [45.445997, -122.776396],
  [45.446233, -122.776285],
  [45.446292, -122.776257],
  [45.446413, -122.776131],
  [45.446781, -122.775965],
  [45.446873, -122.776004],
  [45.446945, -122.775973],
  [45.446992, -122.775956],
  [45.447234, -122.775868],
  [45.447531, -122.77576],
  [45.447729, -122.775691],
  [45.448007, -122.775592],
  [45.448507, -122.775412],
  [45.449026, -122.775225],
  [45.449129, -122.775187],
  [45.449175, -122.775172],
  [45.449895, -122.774916],
  [45.450091, -122.774846],
  [45.450279, -122.774778],
  [45.450452, -122.774716],
  [45.450962, -122.774536],
  [45.451095, -122.774489],
  [45.451148, -122.774469],
  [45.451283, -122.774421],
  [45.451395, -122.77439],
  [45.451467, -122.774374],
  [45.451463, -122.7746],
  [45.451463, -122.774681],
  [45.451464, -122.775296],
  [45.451464, -122.775487],
  [45.451466, -122.77578],
  [45.451467, -122.775996],
  [45.451468, -122.776254],
  [45.451434, -122.776411],
  [45.451597, -122.776415],
  [45.451661, -122.776416],
  [45.451799, -122.776411],
  [45.45194, -122.776413],
  [45.452081, -122.776412],
  [45.452234, -122.776409],
  [45.452498, -122.776406],
  [45.452671, -122.77641],
  [45.452683, -122.776409],
  [45.452873, -122.776415],
  [45.452868, -122.776963],
  [45.452863, -122.777437],
  [45.452861, -122.777635],
  [45.452859, -122.77784],
  [45.452857, -122.778035],
  [45.452854, -122.778231],
  [45.452852, -122.778443],
  [45.452853, -122.778642],
  [45.452855, -122.778731],
  [45.452257, -122.778725],
  [45.452181, -122.77871],
  [45.452141, -122.778712],
  [45.452113, -122.778733],
  [45.452095, -122.778792],
  [45.452095, -122.77884],
  [45.452111, -122.778897],
  [45.452128, -122.77893],
  [45.452164, -122.778957],
  [45.45221, -122.778961],
  [45.452256, -122.77894],
  [45.452331, -122.778897],
  [45.452398, -122.778897],
  [45.452537, -122.778895],
  [45.452696, -122.778895],
  [45.45279, -122.778894],
  [45.452859, -122.778892],
  [45.452865, -122.77906],
  [45.452876, -122.779268],
  [45.452887, -122.779468],
  [45.45289, -122.779519],
  [45.452904, -122.77968],
  [45.452926, -122.779837],
  [45.452929, -122.779929],
  [45.452932, -122.780172],
  [45.452942, -122.780237],
  [45.452954, -122.780286],
  [45.452978, -122.780338],
  [45.453018, -122.780406],
  [45.453082, -122.780488],
  [45.453158, -122.780569],
  [45.453221, -122.780645],
  [45.453313, -122.780552],
  [45.453367, -122.780528],
  [45.453914, -122.780433],
  [45.45406, -122.78042],
  [45.454175, -122.780419],
  [45.45443, -122.780422],
  [45.454728, -122.780422],
  [45.45493, -122.780422],
  [45.454989, -122.780379],
  [45.455066, -122.780381],
  [45.455161, -122.780382],
  [45.455241, -122.780433],
  [45.455523, -122.780429],
  [45.455581, -122.780421],
  [45.455612, -122.780412],
  [45.455641, -122.780393],
  [45.455694, -122.780351],
  [45.455794, -122.780258],
  [45.45587, -122.78038],
  [45.455935, -122.780485],
  [45.455991, -122.780587],
  [45.456046, -122.780693],
  [45.456105, -122.780817],
  [45.456245, -122.781128],
  [45.456343, -122.781347],
  [45.456608, -122.781934],
  [45.456742, -122.782231],
  [45.456765, -122.782283],
  [45.456833, -122.782436],
  [45.456912, -122.782612],
  [45.457102, -122.783029],
  [45.457129, -122.783087],
  [45.457156, -122.783147],
  [45.457229, -122.783306],
  [45.457272, -122.783397],
  [45.457373, -122.783618],
  [45.457526, -122.783958],
  [45.457612, -122.784122],
  [45.458084, -122.785163],
  [45.458302, -122.785649],
  [45.458394, -122.785873],
  [45.458421, -122.785941],
  [45.458493, -122.786124],
  [45.458599, -122.786393],
  [45.458661, -122.786549],
  [45.458714, -122.786715],
  [45.458737, -122.786803],
  [45.458791, -122.787011],
  [45.458898, -122.787443],
  [45.458949, -122.787648],
  [45.459003, -122.787876],
  [45.459139, -122.788444],
  [45.459203, -122.788748],
  [45.459263, -122.789032],
  [45.459373, -122.789491],
  [45.459417, -122.789664],
  [45.459547, -122.790122],
  [45.459885, -122.791315],
  [45.460019, -122.791775],
  [45.460228, -122.792491],
  [45.460394, -122.793104],
  [45.460505, -122.793479],
  [45.46054, -122.793598],
  [45.460557, -122.793657],
  [45.460656, -122.79399],
  [45.460782, -122.794433],
  [45.460895, -122.794825],
  [45.46098, -122.795117],
  [45.461121, -122.795596],
  [45.461236, -122.795989],
  [45.461454, -122.796728],
  [45.46149, -122.796854],
  [45.461522, -122.79698],
  [45.461579, -122.79717],
  [45.461635, -122.797359],
  [45.461763, -122.797788],
  [45.462035, -122.798713],
  [45.462104, -122.798951],
  [45.462121, -122.799003],
  [45.462149, -122.799092],
  [45.462178, -122.799181],
  [45.462267, -122.799406],
  [45.462364, -122.799628],
  [45.462402, -122.799703],
  [45.462684, -122.800273],
  [45.462691, -122.800288],
  [45.462972, -122.800853],
  [45.463054, -122.801018],
  [45.463292, -122.801493],
  [45.463344, -122.801597],
  [45.46349, -122.80189],
  [45.464128, -122.803168],
  [45.464135, -122.803179],
  [45.464216, -122.803315],
  [45.464316, -122.803432],
  [45.464424, -122.80354],
  [45.46448, -122.803587],
  [45.464539, -122.803622],
  [45.464596, -122.803658],
  [45.464655, -122.803682],
  [45.464752, -122.803714],
  [45.46485, -122.803728],
  [45.465, -122.803735],
  [45.465065, -122.803738],
  [45.465813, -122.803759],
  [45.466401, -122.803773],
  [45.466809, -122.803784],
  [45.466903, -122.803791],
  [45.467094, -122.803807],
  [45.467205, -122.803818],
  [45.467541, -122.803852],
  [45.467741, -122.803864],
  [45.468397, -122.803934],
  [45.469129, -122.804],
  [45.469235, -122.804014],
  [45.469314, -122.804032],
  [45.469654, -122.804121],
  [45.46988, -122.80418],
  [45.470016, -122.80422],
  [45.470155, -122.804261],
  [45.470251, -122.804293],
  [45.470332, -122.804327],
  [45.470427, -122.804368],
  [45.470707, -122.804508],
  [45.470935, -122.804626],
  [45.471282, -122.804797],
  [45.471441, -122.804878],
  [45.471624, -122.804972],
  [45.471997, -122.805157],
  [45.472148, -122.805231],
  [45.472231, -122.805253],
  [45.472469, -122.805302],
  [45.472645, -122.805328],
  [45.47286, -122.805362],
  [45.472966, -122.805378],
  [45.473542, -122.805455],
  [45.473735, -122.805467],
  [45.474431, -122.80548],
  [45.474451, -122.80548],
  [45.4745, -122.805482],
  [45.474714, -122.805486],
  [45.474789, -122.805487],
  [45.474798, -122.805487],
  [45.475013, -122.805489],
  [45.475258, -122.805491],
  [45.475392, -122.805492],
  [45.475524, -122.805493],
  [45.475648, -122.805494],
  [45.475789, -122.805495],
  [45.475798, -122.805496],
  [45.476052, -122.805501],
  [45.476083, -122.805498],
  [45.476294, -122.8055],
  [45.47647, -122.805501],
  [45.476578, -122.805511],
  [45.476705, -122.805526],
  [45.476857, -122.805545],
  [45.476866, -122.805546],
  [45.477094, -122.805574],
  [45.477188, -122.805585],
  [45.477612, -122.805648],
  [45.477707, -122.805662],
  [45.477772, -122.805672],
  [45.47796, -122.805697],
  [45.478535, -122.805775],
  [45.478773, -122.805794],
  [45.478799, -122.805796],
  [45.478884, -122.805758],
  [45.478991, -122.805742],
  [45.479163, -122.805713],
  [45.479196, -122.805704],
  [45.479334, -122.805667],
  [45.479651, -122.805599],
  [45.479789, -122.805572],
  [45.480189, -122.805494],
  [45.480692, -122.805384],
  [45.481058, -122.805305],
  [45.481426, -122.805226],
  [45.481759, -122.805154],
  [45.482071, -122.805089],
  [45.482602, -122.804971],
  [45.482729, -122.804943],
  [45.483166, -122.804859],
  [45.483274, -122.804834],
  [45.48331, -122.804825],
  [45.483387, -122.804809],
  [45.483491, -122.80478],
  [45.483921, -122.804685],
  [45.484641, -122.804526],
  [45.484729, -122.804508],
  [45.484794, -122.804491],
  [45.484844, -122.804479],
  [45.485103, -122.804424],
  [45.48535, -122.804371],
  [45.485417, -122.804356],
  [45.485503, -122.804335],
  [45.485565, -122.804322],
  [45.485646, -122.804303],
  [45.485691, -122.804293],
  [45.485804, -122.804267],
  [45.486041, -122.804213],
  [45.486204, -122.804173],
  [45.486421, -122.804129],
  [45.486519, -122.804109],
  [45.486599, -122.804094],
  [45.486827, -122.804042],
  [45.486926, -122.80402],
  [45.487069, -122.803984],
  [45.487229, -122.803946],
  [45.48743, -122.803901],
  [45.487523, -122.803879],
  [45.487589, -122.803877],
  [45.487663, -122.803899],
  [45.487759, -122.803938],
  [45.487775, -122.803945],
  [45.487821, -122.803966],
  [45.487957, -122.804026],
  [45.488041, -122.804059],
  [45.488101, -122.804082],
  [45.488255, -122.804034],
  [45.488305, -122.804017],
  [45.488337, -122.803993],
  [45.488374, -122.803959],
  [45.488479, -122.803841],
  [45.488515, -122.803578],
  [45.488568, -122.803192],
  [45.488666, -122.802557],
  [45.488711, -122.802264],
  [45.488715, -122.802241],
  [45.488749, -122.80202],
  [45.488778, -122.801835],
  [45.488818, -122.801573],
  [45.488846, -122.801415],
  [45.488861, -122.801331],
  [45.488873, -122.801261],
  [45.48902, -122.801293],
  [45.489283, -122.801356],
  [45.489338, -122.80137],
  [45.489697, -122.801464],
  [45.489764, -122.801547],
  [45.489938, -122.801628],
  [45.49005, -122.801694],
  [45.490093, -122.801723],
  [45.49014, -122.801757],
  [45.490192, -122.801799],
  [45.490257, -122.801851],
  [45.49034, -122.801631],
  [45.490357, -122.801601],
  [45.490373, -122.801571],
  [45.490406, -122.801536],
  [45.490457, -122.801506],
  [45.490564, -122.801393],
  [45.49074, -122.801229],
  [45.491005, -122.800981],
  [45.491068, -122.800924],
  [45.491124, -122.800829],
  [45.491342, -122.800632],
  [45.491388, -122.80061],
  [45.491436, -122.800603],
  [45.491494, -122.800617],
  [45.491548, -122.800646],
  [45.491599, -122.800689],
  [45.491649, -122.800746],
  [45.491658, -122.800811],
  [45.491653, -122.800869],
  [45.491631, -122.800932],
  [45.491483, -122.801072],
  [45.491366, -122.801182],
  [45.491344, -122.801203]
];

const stopNames = {
  "496": "18400 Block SW Boones Ferry Rd",
  "513": "SW Lower Boones Ferry &amp; Childs Rd",
  "537": "18000 Block SW Lower Boones Ferry",
  "570": "SW Lower Boones Ferry &amp; Boones Ferry",
  "1122": "SW Commercial &amp; Hall",
  "2230": "SW Greenburg &amp; Cascade",
  "2232": "SW Greenburg &amp; Center",
  "2234": "SW Greenburg &amp; North Dakota",
  "2238": "SW Greenburg &amp; 90th",
  "2239": "SW Greenburg &amp; 92nd",
  "2242": "SW Greenburg &amp; 95th",
  "2245": "SW Greenburg &amp; 98th",
  "2260": "5500 Block SW Hall",
  "2262": "7800 Block SW Hall",
  "2267": "SW Hall &amp; Allen",
  "2271": "SW Hall &amp; Broadway",
  "2275": "SW Hall &amp; Creekside",
  "2277": "SW Hall &amp; Cresmoor",
  "2278": "SW Hall &amp; Denney",
  "2284": "SW Hall &amp; Greenway",
  "2285": "SW Hall &amp; Hart",
  "2291": "SW Hall &amp; Ridgecrest",
  "2295": "SW Hall &amp; Scholls Ferry",
  "2297": "SW Hall &amp; Sussex",
  "2300": "SW Hall &amp; 13th",
  "2302": "SW Hall &amp; 2nd",
  "2305": "SW Hall &amp; 5th",
  "3867": "Meridian Park Hospital Rd &amp; SW 65th",
  "3868": "Meridian Park Hospital Main Stop",
  "6175": "SW Eliander &amp; One Embassy Centre",
  "7879": "Tualatin Park &amp; Ride ",
  "8209": "Tigard Transit Center",
  "8279": "SW 65th &amp; Borland",
  "8281": "SW Sagert &amp; 68th",
  "8282": "SW Sagert &amp; 72nd",
  "8283": "7800 Block SW Sagert",
  "8285": "SW Martinazzi &amp; Mohawk",
  "8835": "SW Greenburg &amp; Lehman",
  "8944": "19500 Block SW 65th",
  "9071": "SW Hall &amp; Avon",
  "9077": "7200 Block SW Durham",
  "9078": "SW Durham &amp; Upper Boones Ferry",
  "9079": "SW Durham &amp; 76th",
  "9080": "8200 Block SW Durham",
  "9082": "SW Hall &amp; Ashford",
  "9083": "SW Hall &amp; Murdock",
  "9084": "SW Hall &amp; Bonita",
  "9085": "SW Hall &amp; McDonald",
  "9086": "SW Hall &amp; Omara",
  "9225": "SW Durham &amp; 79th",
  "9226": "SW Hall &amp; Ross",
  "9296": "10th St &amp; 8th Court",
  "9650": "Washington Square Transit Center ",
  "9654": "Beaverton Transit Center",
  "9985": "Beaverton Transit Center",
  "10447": "Oregon City Transit Center ",
  "11763": "Willamette Falls Dr &amp; West A",
  "11764": "Willamette Falls Dr &amp; 6th St",
  "11944": "16800 Block SW 72nd",
  "12403": "SW Greenburg &amp; Washington Square Rd",
  "12962": "7200 Block SW Durham",
  "13082": "SW Warm Springs &amp; Martinazzi",
  "13083": "SW Warm Springs &amp; Boones Ferry",
  "13084": "SW Boones Ferry Rd &amp; Seneca",
  "13085": "SW Boones Ferry Rd &amp; Martinazzi",
  "13196": "SW Hall &amp; Burnham",
  "13481": "8300 Block SW Hall",
  "13589": "SW Summit Dr &amp; Palmblad",
  "14409": "SW Main between Commercial and Scoffins",
  "14530": "SW Stafford &amp; Borland",
  "14531": "SW Borland &amp; 35th",
  "14532": "SW Borland &amp; 56th",
  "14533": "SW Borland &amp; 61st Terrace (Meridian Park Hosp.)",
  "14534": "SW 65th &amp; Sagert"
};

const stops = [
  { stop_id: "10447", name: "Oregon City Transit Center ", lat: 45.360143, lon: -122.604285, times: ["8:19 AM", "9:19 AM", "10:19 AM", "11:19 AM", "12:19 PM", "1:19 PM", "2:19 PM", "3:19 PM"] },
  { stop_id: "11763", name: "Willamette Falls Dr &amp; West A", lat: 45.360551, lon: -122.612662, times: ["8:23 AM", "9:23 AM", "10:23 AM", "11:23 AM", "12:23 PM", "1:23 PM", "2:23 PM", "3:23 PM"] },
  { stop_id: "11764", name: "Willamette Falls Dr &amp; 6th St", lat: 45.347393, lon: -122.644516, times: ["8:27 AM", "9:27 AM", "10:27 AM", "11:27 AM", "12:27 PM", "1:27 PM", "2:27 PM", "3:27 PM"] },
  { stop_id: "9296", name: "10th St &amp; 8th Court", lat: 45.345752, lon: -122.651729, times: ["8:29 AM", "9:29 AM", "10:29 AM", "11:29 AM", "12:29 PM", "1:29 PM", "2:29 PM", "3:29 PM"] },
  { stop_id: "14530", name: "SW Stafford &amp; Borland", lat: 45.374224, lon: -122.702648, times: ["8:34 AM", "9:34 AM", "10:34 AM", "11:34 AM", "12:34 PM", "1:34 PM", "2:35 PM", "3:36 PM"] },
  { stop_id: "14531", name: "SW Borland &amp; 35th", lat: 45.375363, lon: -122.712795, times: ["8:35 AM", "9:35 AM", "10:35 AM", "11:35 AM", "12:35 PM", "1:35 PM", "2:36 PM", "3:37 PM"] },
  { stop_id: "14532", name: "SW Borland &amp; 56th", lat: 45.376702, lon: -122.734036, times: ["8:36 AM", "9:36 AM", "10:36 AM", "11:36 AM", "12:37 PM", "1:37 PM", "2:38 PM", "3:39 PM"] },
  { stop_id: "14533", name: "SW Borland &amp; 61st Terrace (Meridian Park Hosp.)", lat: 45.37679, lon: -122.74044, times: ["8:37 AM", "9:37 AM", "10:37 AM", "11:37 AM", "12:38 PM", "1:38 PM", "2:39 PM", "3:40 PM"] },
  { stop_id: "14534", name: "SW 65th &amp; Sagert", lat: 45.37576, lon: -122.74409, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:07 AM"] },
  { stop_id: "8281", name: "SW Sagert &amp; 68th", lat: 45.375521, lon: -122.747637, times: ["8:23 AM", "8:38 AM", "8:53 AM", "9:08 AM", "9:23 AM", "9:38 AM", "9:53 AM", "10:08 AM"] },
  { stop_id: "8282", name: "SW Sagert &amp; 72nd", lat: 45.37548, lon: -122.751554, times: ["8:23 AM", "8:39 AM", "8:53 AM", "9:08 AM", "9:23 AM", "9:39 AM", "9:53 AM", "10:08 AM"] },
  { stop_id: "8283", name: "7800 Block SW Sagert", lat: 45.375454, lon: -122.758244, times: ["8:10 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:10 AM", "9:25 AM", "9:40 AM", "9:55 AM"] },
  { stop_id: "8285", name: "SW Martinazzi &amp; Mohawk", lat: 45.376144, lon: -122.760435, times: ["8:10 AM", "8:25 AM", "8:41 AM", "8:55 AM", "9:10 AM", "9:25 AM", "9:41 AM", "9:55 AM"] },
  { stop_id: "13082", name: "SW Warm Springs &amp; Martinazzi", lat: 45.378996, lon: -122.759798, times: ["8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM", "9:12 AM", "9:27 AM", "9:42 AM", "9:57 AM"] },
  { stop_id: "13083", name: "SW Warm Springs &amp; Boones Ferry", lat: 45.379605, lon: -122.764179, times: ["8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM", "9:12 AM", "9:27 AM", "9:42 AM", "9:57 AM"] },
  { stop_id: "13084", name: "SW Boones Ferry Rd &amp; Seneca", lat: 45.383302, lon: -122.764129, times: ["8:14 AM", "8:29 AM", "8:44 AM", "8:59 AM", "9:14 AM", "9:29 AM", "9:44 AM", "9:59 AM"] },
  { stop_id: "13085", name: "SW Boones Ferry Rd &amp; Martinazzi", lat: 45.384573, lon: -122.759412, times: ["8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM", "9:15 AM", "9:30 AM", "9:45 AM", "10:00 AM"] },
  { stop_id: "496", name: "18400 Block SW Boones Ferry Rd", lat: 45.387039, lon: -122.756954, times: ["8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM", "9:16 AM", "9:31 AM", "9:46 AM", "10:01 AM"] },
  { stop_id: "570", name: "SW Lower Boones Ferry &amp; Boones Ferry", lat: 45.389237, lon: -122.755057, times: ["8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM", "9:16 AM", "9:31 AM", "9:46 AM", "10:01 AM"] },
  { stop_id: "513", name: "SW Lower Boones Ferry &amp; Childs Rd", lat: 45.390038, lon: -122.753063, times: ["8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM", "9:17 AM", "9:32 AM", "9:47 AM", "10:02 AM"] },
  { stop_id: "537", name: "18000 Block SW Lower Boones Ferry", lat: 45.391399, lon: -122.751098, times: ["8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM", "9:17 AM", "9:32 AM", "9:47 AM", "10:02 AM"] },
  { stop_id: "7879", name: "Tualatin Park &amp; Ride ", lat: 45.394692, lon: -122.748821, times: ["8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM", "9:19 AM", "9:34 AM", "9:49 AM", "10:04 AM"] },
  { stop_id: "11944", name: "16800 Block SW 72nd", lat: 45.397666, lon: -122.749002, times: ["8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM", "9:19 AM", "9:34 AM", "9:49 AM", "10:04 AM"] },
  { stop_id: "9077", name: "7200 Block SW Durham", lat: 45.399435, lon: -122.75063, times: ["8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:35 AM", "9:50 AM", "10:05 AM"] },
  { stop_id: "12962", name: "7200 Block SW Durham", lat: 45.400505, lon: -122.751147, times: ["8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:35 AM", "9:50 AM", "10:05 AM"] },
  { stop_id: "9078", name: "SW Durham &amp; Upper Boones Ferry", lat: 45.402535, lon: -122.752897, times: ["8:21 AM", "8:36 AM", "8:51 AM", "9:06 AM", "9:21 AM", "9:36 AM", "9:51 AM", "10:06 AM"] },
  { stop_id: "9079", name: "SW Durham &amp; 76th", lat: 45.403584, lon: -122.755406, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:07 AM"] },
  { stop_id: "9225", name: "SW Durham &amp; 79th", lat: 45.404374, lon: -122.757833, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:07 AM"] },
  { stop_id: "9080", name: "8200 Block SW Durham", lat: 45.404377, lon: -122.762714, times: ["8:23 AM", "8:38 AM", "8:53 AM", "9:08 AM", "9:23 AM", "9:38 AM", "9:53 AM", "10:08 AM"] },
  { stop_id: "9071", name: "SW Hall &amp; Avon", lat: 45.405665, lon: -122.764417, times: ["8:24 AM", "8:39 AM", "8:54 AM", "9:09 AM", "9:24 AM", "9:39 AM", "9:54 AM", "10:09 AM"] },
  { stop_id: "9082", name: "SW Hall &amp; Ashford", lat: 45.40807, lon: -122.764392, times: ["8:24 AM", "8:39 AM", "8:54 AM", "9:09 AM", "9:24 AM", "9:39 AM", "9:54 AM", "10:09 AM"] },
  { stop_id: "9226", name: "SW Hall &amp; Ross", lat: 45.410597, lon: -122.764327, times: ["8:10 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:10 AM", "9:25 AM", "9:40 AM", "9:55 AM"] },
  { stop_id: "9083", name: "SW Hall &amp; Murdock", lat: 45.412923, lon: -122.764265, times: ["8:10 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:10 AM", "9:25 AM", "9:40 AM", "9:55 AM"] },
  { stop_id: "9084", name: "SW Hall &amp; Bonita", lat: 45.415469, lon: -122.764442, times: ["8:11 AM", "8:26 AM", "8:41 AM", "8:56 AM", "9:11 AM", "9:26 AM", "9:41 AM", "9:56 AM"] },
  { stop_id: "9085", name: "SW Hall &amp; McDonald", lat: 45.418656, lon: -122.76539, times: ["8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM", "9:12 AM", "9:27 AM", "9:42 AM", "9:57 AM"] },
  { stop_id: "9086", name: "SW Hall &amp; Omara", lat: 45.422142, lon: -122.765547, times: ["8:13 AM", "8:28 AM", "8:43 AM", "8:58 AM", "9:13 AM", "9:28 AM", "9:43 AM", "9:58 AM"] },
  { stop_id: "13196", name: "SW Hall &amp; Burnham", lat: 45.4263, lon: -122.76594, times: ["8:14 AM", "8:29 AM", "8:44 AM", "8:59 AM", "9:14 AM", "9:29 AM", "9:44 AM", "9:59 AM"] },
  { stop_id: "1122", name: "SW Commercial &amp; Hall", lat: 45.428655, lon: -122.766448, times: ["8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM", "9:15 AM", "9:30 AM", "9:45 AM", "10:00 AM"] },
  { stop_id: "8209", name: "Tigard Transit Center", lat: 45.430182, lon: -122.769513, times: ["8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM", "9:16 AM", "9:31 AM", "9:46 AM", "10:01 AM"] },
  { stop_id: "14409", name: "SW Main between Commercial and Scoffins", lat: 45.431827, lon: -122.769177, times: ["8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM", "9:17 AM", "9:32 AM", "9:47 AM", "10:02 AM"] },
  { stop_id: "2232", name: "SW Greenburg &amp; Center", lat: 45.433958, lon: -122.768136, times: ["8:18 AM", "8:33 AM", "8:48 AM", "9:03 AM", "9:18 AM", "9:33 AM", "9:48 AM", "10:03 AM"] },
  { stop_id: "2238", name: "SW Greenburg &amp; 90th", lat: 45.43494, lon: -122.769603, times: ["8:18 AM", "8:33 AM", "8:48 AM", "9:03 AM", "9:18 AM", "9:33 AM", "9:48 AM", "10:03 AM"] },
  { stop_id: "2239", name: "SW Greenburg &amp; 92nd", lat: 45.436373, lon: -122.772422, times: ["8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM", "9:19 AM", "9:34 AM", "9:49 AM", "10:04 AM"] },
  { stop_id: "2242", name: "SW Greenburg &amp; 95th", lat: 45.436959, lon: -122.77435, times: ["8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM", "9:19 AM", "9:34 AM", "9:49 AM", "10:04 AM"] },
  { stop_id: "2245", name: "SW Greenburg &amp; 98th", lat: 45.437637, lon: -122.777956, times: ["8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:35 AM", "9:50 AM", "10:05 AM"] },
  { stop_id: "2234", name: "SW Greenburg &amp; North Dakota", lat: 45.438964, lon: -122.779331, times: ["8:21 AM", "8:36 AM", "8:51 AM", "9:06 AM", "9:21 AM", "9:36 AM", "9:51 AM", "10:06 AM"] },
  { stop_id: "2230", name: "SW Greenburg &amp; Cascade", lat: 45.441509, lon: -122.778914, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:07 AM"] },
  { stop_id: "12403", name: "SW Greenburg &amp; Washington Square Rd", lat: 45.446196, lon: -122.776126, times: ["8:24 AM", "8:39 AM", "8:54 AM", "9:09 AM", "9:24 AM", "9:39 AM", "9:54 AM", "10:09 AM"] },
  { stop_id: "8835", name: "SW Greenburg &amp; Lehman", lat: 45.449003, lon: -122.775117, times: ["8:10 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:10 AM", "9:25 AM", "9:40 AM", "9:55 AM"] },
  { stop_id: "13589", name: "SW Summit Dr &amp; Palmblad", lat: 45.451507, lon: -122.775995, times: ["8:11 AM", "8:26 AM", "8:41 AM", "8:56 AM", "9:11 AM", "9:26 AM", "9:41 AM", "9:56 AM"] },
  { stop_id: "9650", name: "Washington Square Transit Center ", lat: 45.4527, lon: -122.77881, times: ["8:13 AM", "8:28 AM", "8:43 AM", "8:58 AM", "9:13 AM", "9:28 AM", "9:43 AM", "9:58 AM"] },
  { stop_id: "6175", name: "SW Eliander &amp; One Embassy Centre", lat: 45.454727, lon: -122.780345, times: ["8:13 AM", "8:28 AM", "8:43 AM", "8:58 AM", "9:13 AM", "9:28 AM", "9:43 AM", "9:58 AM"] },
  { stop_id: "2295", name: "SW Hall &amp; Scholls Ferry", lat: 45.456837, lon: -122.78214, times: ["8:14 AM", "8:29 AM", "8:44 AM", "8:59 AM", "9:14 AM", "9:29 AM", "9:44 AM", "9:59 AM"] },
  { stop_id: "13481", name: "8300 Block SW Hall", lat: 45.459121, lon: -122.787817, times: ["8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM", "9:15 AM", "9:30 AM", "9:45 AM", "10:00 AM"] },
  { stop_id: "2275", name: "SW Hall &amp; Creekside", lat: 45.46066, lon: -122.793525, times: ["8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM", "9:17 AM", "9:32 AM", "9:47 AM", "10:02 AM"] },
  { stop_id: "2284", name: "SW Hall &amp; Greenway", lat: 45.461662, lon: -122.797117, times: ["8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM", "9:17 AM", "9:32 AM", "9:47 AM", "10:02 AM"] },
  { stop_id: "2291", name: "SW Hall &amp; Ridgecrest", lat: 45.462211, lon: -122.798956, times: ["8:18 AM", "8:33 AM", "8:48 AM", "9:03 AM", "9:18 AM", "9:33 AM", "9:48 AM", "10:03 AM"] },
  { stop_id: "2262", name: "7800 Block SW Hall", lat: 45.463353, lon: -122.801429, times: ["8:18 AM", "8:33 AM", "8:48 AM", "9:03 AM", "9:18 AM", "9:33 AM", "9:48 AM", "10:03 AM"] },
  { stop_id: "2277", name: "SW Hall &amp; Cresmoor", lat: 45.464207, lon: -122.803089, times: ["8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM", "9:19 AM", "9:34 AM", "9:49 AM", "10:04 AM"] },
  { stop_id: "2285", name: "SW Hall &amp; Hart", lat: 45.46721, lon: -122.803638, times: ["8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:35 AM", "9:50 AM", "10:05 AM"] },
  { stop_id: "2278", name: "SW Hall &amp; Denney", lat: 45.469679, lon: -122.803928, times: ["8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:35 AM", "9:50 AM", "10:05 AM"] },
  { stop_id: "2297", name: "SW Hall &amp; Sussex", lat: 45.471481, lon: -122.8047, times: ["8:20 AM", "8:36 AM", "8:51 AM", "9:06 AM", "9:21 AM", "9:36 AM", "9:51 AM", "10:06 AM"] },
  { stop_id: "2267", name: "SW Hall &amp; Allen", lat: 45.476289, lon: -122.805344, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:07 AM"] },
  { stop_id: "2300", name: "SW Hall &amp; 13th", lat: 45.477617, lon: -122.805526, times: ["8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:37 AM", "9:52 AM", "10:08 AM"] },
  { stop_id: "2260", name: "5500 Block SW Hall", lat: 45.479772, lon: -122.805446, times: ["8:22 AM", "8:38 AM", "8:53 AM", "9:08 AM", "9:23 AM", "9:38 AM", "9:53 AM", "10:08 AM"] },
  { stop_id: "2305", name: "SW Hall &amp; 5th", lat: 45.483251, lon: -122.804676, times: ["8:23 AM", "8:39 AM", "8:54 AM", "9:09 AM", "9:24 AM", "9:39 AM", "9:54 AM", "10:09 AM"] },
  { stop_id: "2302", name: "SW Hall &amp; 2nd", lat: 45.485683, lon: -122.804213, times: ["8:24 AM", "8:39 AM", "8:54 AM", "9:09 AM", "9:25 AM", "9:40 AM", "9:55 AM", "10:10 AM"] },
  { stop_id: "2271", name: "SW Hall &amp; Broadway", lat: 45.48784, lon: -122.803879, times: ["8:25 AM", "8:41 AM", "8:56 AM", "9:11 AM", "9:26 AM", "9:41 AM", "9:56 AM", "10:12 AM"] },
  { stop_id: "9985", name: "Beaverton Transit Center", lat: 45.491385, lon: -122.801308, times: ["8:29 AM", "8:45 AM", "9:00 AM", "9:31 AM", "9:46 AM", "10:01 AM", "10:17 AM", "10:32 AM"] },
  { stop_id: "3868", name: "Meridian Park Hospital Main Stop", lat: 45.377924, lon: -122.742362, times: ["8:20 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:50 AM", "10:05 AM", "10:20 AM", "10:50 AM"] },
  { stop_id: "3867", name: "Meridian Park Hospital Rd &amp; SW 65th", lat: 45.380442, lon: -122.743305, times: ["8:20 AM", "8:50 AM", "9:05 AM", "9:20 AM", "9:50 AM", "10:05 AM", "10:20 AM", "10:50 AM"] },
  { stop_id: "8944", name: "19500 Block SW 65th", lat: 45.379354, lon: -122.744039, times: ["8:21 AM", "8:51 AM", "9:06 AM", "9:21 AM", "9:51 AM", "10:06 AM", "10:21 AM", "10:51 AM"] },
  { stop_id: "8279", name: "SW 65th &amp; Borland", lat: 45.376948, lon: -122.744017, times: ["8:22 AM", "8:52 AM", "9:07 AM", "9:22 AM", "9:52 AM", "10:07 AM", "10:22 AM", "10:52 AM"] },
  { stop_id: "9654", name: "Beaverton Transit Center", lat: 45.491269, lon: -122.800864, times: ["9:15 AM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<script>
// ---- Favorite Star Dropdown: Auto-detect route info, menu UI ----

function getRouteInfoFromPage() {
  let routeNumber = "";
  let routeType = "";
  let routeLink = "";

  let titleEl = document.getElementById('route-title');
  if (titleEl) {
    let match = titleEl.textContent.match(/Route\s+(\d+)[^\d]?/i);
    if (match) routeNumber = match[1];
  }
  let typeEl = document.getElementById('route-type');
  if (typeEl) {
    routeType = typeEl.textContent.trim().toLowerCase();
  }
  routeLink = window.location.pathname + window.location.search;

  if (!routeNumber) {
    let titleMatch = document.title.match(/Route\s+(\d+)/i);
    if (titleMatch) routeNumber = titleMatch[1];
  }
  if (!routeType) {
    routeType = document.body.className.includes('rail') ? 'rail' : 
                document.body.className.includes('max') ? 'max' :
                document.body.className.includes('streetcar') ? 'streetcar' :
                'bus';
  }
  if (!routeLink) routeLink = window.location.href;
  if (!routeNumber) return null;
  return {
    number: routeNumber,
    link: routeLink,
    type: routeType
  };
}

function updateStarIcon() {
  const thisRoute = getRouteInfoFromPage();
  if (!thisRoute) return;
  let favorites = JSON.parse(localStorage.getItem('metrofeed_favorites') || '[]');
  const isFavorite = favorites.find(r => r.number === thisRoute.number && r.type === thisRoute.type);
  const btn = document.getElementById('fav-star');
  if (btn) btn.textContent = isFavorite ? "★" : "☆";

  // Update dropdown button label
  const ddBtn = document.getElementById('fav-dropdown-btn');
  if (ddBtn) ddBtn.textContent = isFavorite ? "Remove from Favorites" : "Add to Favorites";
}

// Show/hide dropdown on star click
function showFavDropdown(e) {
  e.stopPropagation();
  const dd = document.getElementById('fav-dropdown');
  dd.style.display = dd.style.display === "block" ? "none" : "block";
  updateStarIcon();

  // When dropdown opens, add outside click listener
  if (dd.style.display === "block") {
    setTimeout(() => {
      document.addEventListener('click', closeFavDropdown);
    }, 10);
  }
}
// Actually add/remove on dropdown click
document.addEventListener("DOMContentLoaded", function() {
  updateStarIcon();
  const ddBtn = document.getElementById('fav-dropdown-btn');
  if (ddBtn) {
    ddBtn.onclick = function(e) {
      e.stopPropagation();
      const thisRoute = getRouteInfoFromPage();
      if (!thisRoute) return;
      let favorites = JSON.parse(localStorage.getItem('metrofeed_favorites') || '[]');
      const exists = favorites.find(r => r.number === thisRoute.number && r.type === thisRoute.type);
      if (exists) {
        favorites = favorites.filter(r => !(r.number === thisRoute.number && r.type === thisRoute.type));
      } else {
        favorites.unshift(thisRoute);
        if (favorites.length > 4) favorites = favorites.slice(0, 4);
      }
      localStorage.setItem('metrofeed_favorites', JSON.stringify(favorites));
      updateStarIcon();
      document.getElementById('fav-dropdown').style.display = "none";
    };
  }
});

// Close dropdown if clicked anywhere else
function closeFavDropdown(e) {
  const dropdown = document.getElementById('fav-dropdown');
  if (!dropdown.contains(e.target)) {
    dropdown.style.display = "none";
    document.removeEventListener('click', closeFavDropdown);
  }
}

</script>
</body>
</html>