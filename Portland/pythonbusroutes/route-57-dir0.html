<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 57 - To Forest Grove | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
  width: 100%;
  max-width: 728px;

  max-height: 120px; /* üëà Caps desktop height */
  display: block;
  margin: 0 auto;
}
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

@media (max-width: 600px) {
  .ad-banner {
    padding-top: 1rem;
    padding-bottom: 0rem;
  }
}


  </style>
</head>

<body>
 
  <!-- üü¶ Auto-Injected Banner Ad (route-specific) -->
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-57-dir0-ad.html" style="border:none; width:100%; max-width 728px; height:90px;"></iframe>
  </div>

 <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 57 - To Forest Grove</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 57;
    const direction = parseInt(0);

    // Initialize map
    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    // Injected shape & stop data
    const shapeOutbound = [
  [45.491216, -122.800746],
  [45.491124, -122.800829],
  [45.491068, -122.800924],
  [45.491005, -122.800981],
  [45.49074, -122.801229],
  [45.490716, -122.801251],
  [45.490564, -122.801393],
  [45.490457, -122.801506],
  [45.490406, -122.801536],
  [45.490373, -122.801571],
  [45.49034, -122.801631],
  [45.490257, -122.801851],
  [45.490192, -122.801799],
  [45.49014, -122.801757],
  [45.490093, -122.801723],
  [45.49005, -122.801694],
  [45.489938, -122.801628],
  [45.489764, -122.801547],
  [45.489682, -122.801589],
  [45.489277, -122.801518],
  [45.489, -122.801453],
  [45.488846, -122.801415],
  [45.488818, -122.801573],
  [45.488778, -122.801835],
  [45.488749, -122.80202],
  [45.488715, -122.802241],
  [45.488711, -122.802264],
  [45.488666, -122.802557],
  [45.488568, -122.803192],
  [45.488515, -122.803578],
  [45.488479, -122.803841],
  [45.488469, -122.803931],
  [45.488451, -122.804096],
  [45.488439, -122.804215],
  [45.488429, -122.804309],
  [45.488413, -122.804609],
  [45.488399, -122.804873],
  [45.488386, -122.805126],
  [45.488384, -122.805149],
  [45.488381, -122.805347],
  [45.48837, -122.805902],
  [45.488367, -122.80608],
  [45.488365, -122.806171],
  [45.48836, -122.806296],
  [45.488357, -122.806383],
  [45.488353, -122.806429],
  [45.488347, -122.80672],
  [45.488339, -122.807105],
  [45.488333, -122.807425],
  [45.488324, -122.807839],
  [45.488321, -122.807996],
  [45.488319, -122.808099],
  [45.488314, -122.808304],
  [45.488311, -122.808482],
  [45.488307, -122.808654],
  [45.488306, -122.808716],
  [45.488295, -122.809105],
  [45.488293, -122.809186],
  [45.488288, -122.809381],
  [45.488283, -122.809583],
  [45.488281, -122.809648],
  [45.488279, -122.809729],
  [45.488277, -122.809811],
  [45.488272, -122.809966],
  [45.488267, -122.810165],
  [45.488265, -122.810236],
  [45.488256, -122.810569],
  [45.488256, -122.810593],
  [45.488253, -122.810701],
  [45.488251, -122.810833],
  [45.488245, -122.811255],
  [45.488232, -122.812145],
  [45.48823, -122.812555],
  [45.488231, -122.81289],
  [45.48823, -122.813008],
  [45.488235, -122.813217],
  [45.488258, -122.813557],
  [45.488273, -122.813787],
  [45.488295, -122.813981],
  [45.488313, -122.814146],
  [45.488337, -122.814373],
  [45.488373, -122.814714],
  [45.488387, -122.814838],
  [45.4884, -122.814968],
  [45.488448, -122.815411],
  [45.488449, -122.815422],
  [45.4885, -122.8159],
  [45.488583, -122.816666],
  [45.488693, -122.817671],
  [45.488915, -122.819756],
  [45.489004, -122.820565],
  [45.489038, -122.820902],
  [45.489119, -122.821687],
  [45.489192, -122.822409],
  [45.489281, -122.823255],
  [45.489434, -122.824716],
  [45.48949, -122.825243],
  [45.489534, -122.825648],
  [45.489562, -122.825908],
  [45.489585, -122.826137],
  [45.489604, -122.826325],
  [45.489639, -122.826625],
  [45.489669, -122.826917],
  [45.48971, -122.827285],
  [45.489721, -122.827385],
  [45.489791, -122.828169],
  [45.489822, -122.828451],
  [45.490059, -122.830765],
  [45.490144, -122.831548],
  [45.490195, -122.831905],
  [45.490244, -122.832209],
  [45.490288, -122.832469],
  [45.490298, -122.832527],
  [45.490353, -122.832826],
  [45.490394, -122.833025],
  [45.490477, -122.833397],
  [45.49057, -122.833753],
  [45.490858, -122.834745],
  [45.490966, -122.835113],
  [45.491064, -122.835476],
  [45.491224, -122.836054],
  [45.491266, -122.836218],
  [45.491338, -122.83651],
  [45.491416, -122.836853],
  [45.491533, -122.837498],
  [45.491597, -122.837873],
  [45.491639, -122.838166],
  [45.491701, -122.838744],
  [45.491721, -122.839037],
  [45.491747, -122.839503],
  [45.491759, -122.839971],
  [45.491757, -122.840386],
  [45.491745, -122.840965],
  [45.491713, -122.841576],
  [45.491707, -122.841685],
  [45.491682, -122.84194],
  [45.491665, -122.842167],
  [45.491602, -122.843053],
  [45.491597, -122.843166],
  [45.491578, -122.843499],
  [45.491567, -122.843816],
  [45.491561, -122.844252],
  [45.491562, -122.844578],
  [45.491587, -122.845233],
  [45.491631, -122.845764],
  [45.491716, -122.846613],
  [45.491725, -122.846698],
  [45.491858, -122.847965],
  [45.491995, -122.849255],
  [45.492127, -122.850522],
  [45.492205, -122.851252],
  [45.492271, -122.851881],
  [45.492327, -122.852435],
  [45.492355, -122.852707],
  [45.492376, -122.85291],
  [45.492376, -122.852927],
  [45.49241, -122.853258],
  [45.492444, -122.853589],
  [45.492538, -122.854505],
  [45.492552, -122.854651],
  [45.492593, -122.855046],
  [45.492624, -122.855333],
  [45.492735, -122.8564],
  [45.492757, -122.856614],
  [45.492871, -122.857723],
  [45.492918, -122.858181],
  [45.492977, -122.858757],
  [45.493102, -122.859952],
  [45.493146, -122.860409],
  [45.493157, -122.860514],
  [45.49317, -122.860625],
  [45.493201, -122.860933],
  [45.493239, -122.8613],
  [45.493277, -122.861675],
  [45.493312, -122.86202],
  [45.493339, -122.862275],
  [45.493349, -122.862379],
  [45.493356, -122.862448],
  [45.493412, -122.86305],
  [45.493437, -122.863321],
  [45.493474, -122.863734],
  [45.493507, -122.864106],
  [45.49353, -122.864265],
  [45.493555, -122.864453],
  [45.493581, -122.864632],
  [45.493597, -122.864722],
  [45.493618, -122.86484],
  [45.493663, -122.865029],
  [45.493712, -122.865203],
  [45.493766, -122.865406],
  [45.493826, -122.865641],
  [45.493863, -122.865758],
  [45.493899, -122.865876],
  [45.493952, -122.866087],
  [45.493994, -122.866297],
  [45.494037, -122.86657],
  [45.494062, -122.866802],
  [45.494079, -122.867022],
  [45.494089, -122.867116],
  [45.494096, -122.867268],
  [45.494095, -122.867368],
  [45.494085, -122.867679],
  [45.494085, -122.867692],
  [45.494044, -122.868111],
  [45.494023, -122.868506],
  [45.494016, -122.868914],
  [45.494023, -122.869076],
  [45.494039, -122.869242],
  [45.494068, -122.869586],
  [45.494105, -122.869957],
  [45.494125, -122.870112],
  [45.494181, -122.870558],
  [45.494205, -122.870763],
  [45.494244, -122.871098],
  [45.49427, -122.871307],
  [45.494296, -122.871521],
  [45.494335, -122.871884],
  [45.494374, -122.872232],
  [45.494403, -122.872512],
  [45.494443, -122.872925],
  [45.494451, -122.873006],
  [45.494464, -122.873138],
  [45.494498, -122.873463],
  [45.494561, -122.874067],
  [45.494649, -122.874904],
  [45.494684, -122.875241],
  [45.494748, -122.875861],
  [45.494763, -122.875997],
  [45.494823, -122.876576],
  [45.494953, -122.877819],
  [45.495035, -122.878608],
  [45.495088, -122.879117],
  [45.495112, -122.879373],
  [45.495211, -122.880284],
  [45.495243, -122.880606],
  [45.495287, -122.881028],
  [45.495302, -122.881186],
  [45.495317, -122.881319],
  [45.495367, -122.881802],
  [45.495447, -122.882577],
  [45.495608, -122.884153],
  [45.495624, -122.884312],
  [45.495735, -122.885385],
  [45.495798, -122.885979],
  [45.495872, -122.886673],
  [45.495884, -122.886801],
  [45.4959, -122.886993],
  [45.495974, -122.887662],
  [45.495978, -122.8877],
  [45.496084, -122.888663],
  [45.496136, -122.889186],
  [45.496219, -122.890017],
  [45.496296, -122.89079],
  [45.496337, -122.891182],
  [45.49638, -122.891567],
  [45.496391, -122.891692],
  [45.496412, -122.891824],
  [45.496464, -122.892084],
  [45.496478, -122.892152],
  [45.496562, -122.892544],
  [45.496588, -122.892657],
  [45.496611, -122.892753],
  [45.496669, -122.893006],
  [45.496702, -122.893169],
  [45.496717, -122.893247],
  [45.496758, -122.893481],
  [45.496792, -122.893744],
  [45.496804, -122.893849],
  [45.496879, -122.894591],
  [45.496911, -122.894911],
  [45.496917, -122.894954],
  [45.496952, -122.895298],
  [45.496986, -122.895594],
  [45.496999, -122.895743],
  [45.497049, -122.896226],
  [45.497086, -122.896602],
  [45.497109, -122.896837],
  [45.497115, -122.89688],
  [45.497251, -122.898247],
  [45.49726, -122.898333],
  [45.497306, -122.898764],
  [45.497309, -122.898799],
  [45.497337, -122.899095],
  [45.497339, -122.899134],
  [45.497347, -122.899258],
  [45.497351, -122.899492],
  [45.497355, -122.899691],
  [45.497349, -122.899974],
  [45.497344, -122.90025],
  [45.497344, -122.900433],
  [45.497345, -122.900585],
  [45.49735, -122.900779],
  [45.497383, -122.901203],
  [45.497404, -122.901414],
  [45.497482, -122.902193],
  [45.497496, -122.902365],
  [45.497608, -122.903353],
  [45.497651, -122.903786],
  [45.497753, -122.904792],
  [45.497917, -122.906412],
  [45.498009, -122.907307],
  [45.498273, -122.909842],
  [45.498339, -122.910469],
  [45.49841, -122.911132],
  [45.498515, -122.912127],
  [45.498525, -122.912238],
  [45.498586, -122.912405],
  [45.498633, -122.912863],
  [45.49865, -122.913023],
  [45.49872, -122.913706],
  [45.49876, -122.914067],
  [45.498855, -122.915058],
  [45.498994, -122.916364],
  [45.499044, -122.916841],
  [45.499014, -122.91698],
  [45.499034, -122.917187],
  [45.499054, -122.917399],
  [45.499073, -122.917597],
  [45.499098, -122.917838],
  [45.499188, -122.918706],
  [45.499242, -122.919231],
  [45.499368, -122.920442],
  [45.499552, -122.922219],
  [45.499596, -122.922645],
  [45.499619, -122.922863],
  [45.499791, -122.924521],
  [45.500286, -122.929249],
  [45.500307, -122.929449],
  [45.500314, -122.929514],
  [45.500384, -122.93018],
  [45.500459, -122.930889],
  [45.500486, -122.93114],
  [45.500528, -122.931596],
  [45.500547, -122.931789],
  [45.500584, -122.932167],
  [45.500649, -122.932824],
  [45.500726, -122.933594],
  [45.500848, -122.934783],
  [45.500945, -122.935717],
  [45.500982, -122.936078],
  [45.501048, -122.936719],
  [45.501166, -122.937837],
  [45.501206, -122.937911],
  [45.501234, -122.937966],
  [45.501277, -122.938416],
  [45.501269, -122.938438],
  [45.501235, -122.938527],
  [45.501262, -122.93883],
  [45.501346, -122.939627],
  [45.501591, -122.941985],
  [45.501781, -122.943864],
  [45.50189, -122.944914],
  [45.501973, -122.945723],
  [45.502139, -122.947259],
  [45.502223, -122.948079],
  [45.502301, -122.948807],
  [45.502371, -122.949329],
  [45.502411, -122.949576],
  [45.502459, -122.949846],
  [45.502487, -122.95],
  [45.502567, -122.950374],
  [45.502664, -122.950751],
  [45.502766, -122.951127],
  [45.502879, -122.951512],
  [45.503033, -122.951973],
  [45.503137, -122.952259],
  [45.503214, -122.952456],
  [45.50328, -122.952622],
  [45.503375, -122.952851],
  [45.504346, -122.95519],
  [45.504391, -122.955305],
  [45.504431, -122.955409],
  [45.504474, -122.95551],
  [45.504754, -122.956188],
  [45.505495, -122.957984],
  [45.505868, -122.958917],
  [45.506588, -122.960716],
  [45.506754, -122.961107],
  [45.506842, -122.961321],
  [45.507041, -122.961802],
  [45.507231, -122.962262],
  [45.507645, -122.963263],
  [45.508145, -122.964472],
  [45.508351, -122.964967],
  [45.508409, -122.965108],
  [45.508491, -122.965306],
  [45.50864, -122.965666],
  [45.509775, -122.968402],
  [45.509935, -122.968789],
  [45.509937, -122.968793],
  [45.510009, -122.968957],
  [45.510073, -122.969126],
  [45.510315, -122.969711],
  [45.511218, -122.971891],
  [45.51127, -122.972016],
  [45.511371, -122.972251],
  [45.511478, -122.972464],
  [45.511593, -122.972673],
  [45.511713, -122.972862],
  [45.511763, -122.972934],
  [45.511882, -122.973092],
  [45.51198, -122.97322],
  [45.512022, -122.973267],
  [45.512166, -122.973407],
  [45.512295, -122.973517],
  [45.51236, -122.973574],
  [45.512375, -122.973584],
  [45.512436, -122.97363],
  [45.512545, -122.973702],
  [45.51266, -122.973768],
  [45.512763, -122.973817],
  [45.51287, -122.973867],
  [45.513067, -122.973936],
  [45.51318, -122.973966],
  [45.513297, -122.973989],
  [45.513406, -122.974004],
  [45.513537, -122.974014],
  [45.513831, -122.974021],
  [45.51424, -122.974014],
  [45.514254, -122.974014],
  [45.51446, -122.974007],
  [45.514792, -122.973998],
  [45.514831, -122.973997],
  [45.514913, -122.973999],
  [45.514982, -122.974001],
  [45.515364, -122.973993],
  [45.515922, -122.973982],
  [45.516072, -122.973978],
  [45.516179, -122.973976],
  [45.516263, -122.973974],
  [45.516415, -122.973971],
  [45.516556, -122.973967],
  [45.516659, -122.973965],
  [45.516716, -122.973964],
  [45.516827, -122.973961],
  [45.517281, -122.973953],
  [45.517351, -122.973951],
  [45.517369, -122.973951],
  [45.517455, -122.973947],
  [45.517536, -122.973943],
  [45.517621, -122.973941],
  [45.517906, -122.973932],
  [45.518189, -122.973923],
  [45.518329, -122.973919],
  [45.518655, -122.973908],
  [45.518725, -122.973907],
  [45.519358, -122.973897],
  [45.519874, -122.973907],
  [45.519969, -122.973902],
  [45.519979, -122.974057],
  [45.519982, -122.974335],
  [45.51999, -122.974899],
  [45.519996, -122.975391],
  [45.519998, -122.975569],
  [45.520004, -122.976222],
  [45.520014, -122.977284],
  [45.520025, -122.978651],
  [45.520027, -122.978905],
  [45.520027, -122.979017],
  [45.520028, -122.979106],
  [45.520032, -122.979542],
  [45.52004, -122.980293],
  [45.520045, -122.980807],
  [45.52005, -122.981384],
  [45.520052, -122.981612],
  [45.520053, -122.981753],
  [45.520054, -122.981864],
  [45.520059, -122.982407],
  [45.52006, -122.982501],
  [45.520061, -122.982604],
  [45.520071, -122.98364],
  [45.520073, -122.983835],
  [45.520078, -122.984307],
  [45.520079, -122.984404],
  [45.520086, -122.985144],
  [45.520088, -122.985416],
  [45.520089, -122.985542],
  [45.520094, -122.986111],
  [45.520096, -122.986213],
  [45.520098, -122.986319],
  [45.5201, -122.986487],
  [45.520105, -122.987184],
  [45.520108, -122.987618],
  [45.52011, -122.987847],
  [45.52011, -122.987902],
  [45.520113, -122.988016],
  [45.520301, -122.988012],
  [45.520647, -122.988006],
  [45.52092, -122.988],
  [45.520948, -122.988],
  [45.521293, -122.987993],
  [45.52134, -122.98799],
  [45.521329, -122.987017],
  [45.521319, -122.986187],
  [45.521346, -122.986165],
  [45.521391, -122.986134],
  [45.521441, -122.986074],
  [45.521464, -122.98603],
  [45.521509, -122.985939],
  [45.521567, -122.985805],
  [45.521562, -122.985281],
  [45.521558, -122.984779],
  [45.52151, -122.984647],
  [45.5215, -122.98462],
  [45.521436, -122.984523],
  [45.521429, -122.984514],
  [45.521372, -122.984445],
  [45.52133, -122.984404],
  [45.5213, -122.984381],
  [45.521283, -122.98258],
  [45.520721, -122.982592],
  [45.520141, -122.982605],
  [45.520061, -122.982604],
  [45.520071, -122.98364],
  [45.520073, -122.983835],
  [45.520078, -122.984307],
  [45.520079, -122.984404],
  [45.520086, -122.985144],
  [45.520088, -122.985416],
  [45.520089, -122.985542],
  [45.520094, -122.986111],
  [45.520096, -122.986213],
  [45.520098, -122.986319],
  [45.5201, -122.986487],
  [45.520105, -122.987184],
  [45.520108, -122.987618],
  [45.52011, -122.987847],
  [45.52011, -122.987902],
  [45.520113, -122.988016],
  [45.520116, -122.988121],
  [45.520124, -122.988916],
  [45.520125, -122.98901],
  [45.520131, -122.989539],
  [45.520133, -122.98968],
  [45.520132, -122.989822],
  [45.520134, -122.989942],
  [45.520138, -122.990418],
  [45.520139, -122.990583],
  [45.520139, -122.990602],
  [45.520143, -122.991061],
  [45.520143, -122.991146],
  [45.520145, -122.991301],
  [45.52016, -122.995011],
  [45.520163, -122.995678],
  [45.52016, -122.995773],
  [45.520154, -122.995896],
  [45.520151, -122.996504],
  [45.52014, -122.996739],
  [45.520127, -122.996959],
  [45.520107, -122.997194],
  [45.52008, -122.997458],
  [45.520059, -122.997632],
  [45.520029, -122.997883],
  [45.520024, -122.997925],
  [45.520018, -122.997981],
  [45.519999, -122.99819],
  [45.519984, -122.998357],
  [45.519976, -122.998514],
  [45.519973, -122.998563],
  [45.519968, -122.998812],
  [45.519965, -122.999137],
  [45.519965, -122.999297],
  [45.519967, -123.00019],
  [45.519967, -123.000576],
  [45.519968, -123.00075],
  [45.519968, -123.001109],
  [45.519969, -123.001273],
  [45.519969, -123.001469],
  [45.519969, -123.001597],
  [45.519972, -123.002696],
  [45.519972, -123.002834],
  [45.519973, -123.003196],
  [45.519977, -123.004535],
  [45.51998, -123.005593],
  [45.519984, -123.006941],
  [45.519985, -123.007392],
  [45.519985, -123.007415],
  [45.519937, -123.007584],
  [45.519935, -123.007803],
  [45.519938, -123.008126],
  [45.519952, -123.008632],
  [45.519995, -123.009976],
  [45.52, -123.010257],
  [45.52, -123.01038],
  [45.520005, -123.010773],
  [45.520009, -123.011458],
  [45.520014, -123.013212],
  [45.520022, -123.015434],
  [45.52002, -123.015717],
  [45.520008, -123.016278],
  [45.519997, -123.016563],
  [45.519989, -123.016678],
  [45.519977, -123.017131],
  [45.519972, -123.017305],
  [45.519964, -123.017616],
  [45.519959, -123.017941],
  [45.519959, -123.018033],
  [45.519967, -123.020649],
  [45.519968, -123.021038],
  [45.519972, -123.022336],
  [45.519971, -123.023239],
  [45.519974, -123.024195],
  [45.519974, -123.024618],
  [45.519972, -123.024797],
  [45.519973, -123.024875],
  [45.519976, -123.02565],
  [45.519982, -123.027526],
  [45.519989, -123.029563],
  [45.520045, -123.029724],
  [45.520045, -123.03037],
  [45.520046, -123.032381],
  [45.519993, -123.032543],
  [45.519992, -123.033187],
  [45.519994, -123.034091],
  [45.519998, -123.035885],
  [45.520059, -123.036145],
  [45.52006, -123.036816],
  [45.520062, -123.038961],
  [45.520062, -123.039634],
  [45.520016, -123.039805],
  [45.520013, -123.039982],
  [45.520013, -123.040746],
  [45.520013, -123.041129],
  [45.520074, -123.041291],
  [45.520072, -123.04166],
  [45.520076, -123.042078],
  [45.520026, -123.04224],
  [45.520034, -123.042464],
  [45.520054, -123.042947],
  [45.520071, -123.043349],
  [45.520083, -123.043531],
  [45.520143, -123.043724],
  [45.520185, -123.044495],
  [45.520207, -123.044899],
  [45.520226, -123.045254],
  [45.520258, -123.045836],
  [45.520272, -123.046422],
  [45.520279, -123.046606],
  [45.520288, -123.046848],
  [45.520301, -123.047003],
  [45.520324, -123.0472],
  [45.520353, -123.047427],
  [45.520399, -123.047706],
  [45.520403, -123.047723],
  [45.520439, -123.047876],
  [45.520511, -123.048142],
  [45.520525, -123.04818],
  [45.520578, -123.048366],
  [45.52064, -123.048607],
  [45.520696, -123.048875],
  [45.520727, -123.049054],
  [45.520772, -123.049358],
  [45.52083, -123.049836],
  [45.520858, -123.050126],
  [45.520861, -123.050166],
  [45.520884, -123.050487],
  [45.520898, -123.050786],
  [45.520899, -123.050825],
  [45.520903, -123.051013],
  [45.52091, -123.051352],
  [45.52091, -123.051781],
  [45.520909, -123.052162],
  [45.52091, -123.052328],
  [45.520912, -123.053551],
  [45.520912, -123.053611],
  [45.520912, -123.053712],
  [45.520913, -123.05421],
  [45.520913, -123.054492],
  [45.520914, -123.054612],
  [45.520919, -123.055819],
  [45.520921, -123.056837],
  [45.520921, -123.057025],
  [45.520924, -123.058262],
  [45.520929, -123.058903],
  [45.52093, -123.059168],
  [45.520933, -123.05951],
  [45.520934, -123.060733],
  [45.520936, -123.061526],
  [45.520937, -123.061882],
  [45.520937, -123.062068],
  [45.520938, -123.062708],
  [45.520937, -123.063547],
  [45.520937, -123.063678],
  [45.520937, -123.064702],
  [45.520942, -123.065859],
  [45.520945, -123.066727],
  [45.520948, -123.066864],
  [45.520948, -123.067234],
  [45.520949, -123.068277],
  [45.52095, -123.068682],
  [45.520951, -123.069438],
  [45.520953, -123.070119],
  [45.520953, -123.070402],
  [45.520951, -123.070748],
  [45.520945, -123.071076],
  [45.520936, -123.071397],
  [45.520926, -123.07156],
  [45.520917, -123.071717],
  [45.520892, -123.07201],
  [45.520861, -123.072305],
  [45.520795, -123.072774],
  [45.520779, -123.072873],
  [45.520752, -123.073034],
  [45.520713, -123.073214],
  [45.520658, -123.073493],
  [45.520557, -123.074003],
  [45.520477, -123.074366],
  [45.520428, -123.074657],
  [45.52038, -123.074903],
  [45.52034, -123.075166],
  [45.520309, -123.075424],
  [45.520281, -123.075682],
  [45.520268, -123.075718],
  [45.520253, -123.075743],
  [45.520237, -123.075762],
  [45.520227, -123.07578],
  [45.520217, -123.075817],
  [45.520218, -123.075975],
  [45.520215, -123.076517],
  [45.520217, -123.077132],
  [45.520216, -123.07768],
  [45.520215, -123.078515],
  [45.520217, -123.078799],
  [45.52022, -123.079496],
  [45.520221, -123.079717],
  [45.520221, -123.080652],
  [45.520225, -123.081799],
  [45.520228, -123.082717],
  [45.520228, -123.083709],
  [45.520233, -123.084245],
  [45.52023, -123.084405],
  [45.520218, -123.084978],
  [45.520217, -123.08519],
  [45.520215, -123.085379],
  [45.520171, -123.086298],
  [45.520146, -123.086922],
  [45.520132, -123.087227],
  [45.520125, -123.087516],
  [45.520119, -123.088039],
  [45.520121, -123.088441],
  [45.520122, -123.088819],
  [45.520125, -123.0894],
  [45.520128, -123.089897],
  [45.520128, -123.090029],
  [45.520129, -123.09027],
  [45.520131, -123.09071],
  [45.520132, -123.09078],
  [45.520133, -123.091087],
  [45.520133, -123.091207],
  [45.52018, -123.091434],
  [45.520187, -123.09273],
  [45.520187, -123.092949],
  [45.520187, -123.09304],
  [45.520188, -123.093309],
  [45.52019, -123.093798],
  [45.520191, -123.094006],
  [45.520193, -123.094688],
  [45.520194, -123.094823],
  [45.520187, -123.094992],
  [45.520189, -123.095142],
  [45.520198, -123.095881],
  [45.520201, -123.096138],
  [45.5202, -123.096281],
  [45.520199, -123.096408],
  [45.520193, -123.096553],
  [45.520161, -123.09687],
  [45.52014, -123.097039],
  [45.520109, -123.097209],
  [45.520081, -123.09734],
  [45.520057, -123.097455],
  [45.519934, -123.09796],
  [45.519817, -123.09844],
  [45.519766, -123.098655],
  [45.519755, -123.098702],
  [45.519701, -123.098974],
  [45.51968, -123.099091],
  [45.519672, -123.099137],
  [45.519647, -123.099276],
  [45.519636, -123.099405],
  [45.519626, -123.0996],
  [45.519624, -123.099941],
  [45.519625, -123.100987],
  [45.519627, -123.101107],
  [45.519628, -123.101222],
  [45.519634, -123.102784],
  [45.519634, -123.102827],
  [45.519632, -123.102942],
  [45.519633, -123.103058],
  [45.519636, -123.103909],
  [45.519638, -123.104771],
  [45.51964, -123.105205],
  [45.51964, -123.105315],
  [45.519642, -123.105939],
  [45.519643, -123.106071],
  [45.519644, -123.106384],
  [45.519644, -123.106441],
  [45.519645, -123.106612],
  [45.519646, -123.107122],
  [45.51965, -123.10844],
  [45.519647, -123.108571],
  [45.519658, -123.110266],
  [45.519659, -123.1109],
  [45.519659, -123.111101],
  [45.51966, -123.111221],
  [45.519661, -123.111618],
  [45.519662, -123.11198],
  [45.519662, -123.112096],
  [45.519664, -123.112204],
  [45.519666, -123.112826],
  [45.519666, -123.112877],
  [45.51967, -123.113848],
  [45.51967, -123.113934],
  [45.519669, -123.114068],
  [45.51967, -123.114235],
  [45.519673, -123.114789],
  [45.519677, -123.115593],
  [45.519677, -123.115719],
  [45.519576, -123.115719],
  [45.519388, -123.115725],
  [45.518709, -123.11573],
  [45.518668, -123.115624],
  [45.518617, -123.115627],
  [45.51859, -123.115542],
  [45.518615, -123.115489],
  [45.518596, -123.115429],
  [45.518567, -123.115396],
  [45.518559, -123.115389]
];

const stopNames = {
  "28": "2200 Block Baseline",
  "30": "N Adair &amp; 10th",
  "31": "N Adair &amp; 12th",
  "32": "N Adair &amp; 14th",
  "33": "N Adair &amp; 17th",
  "34": "N Adair &amp; 20th",
  "35": "N Adair &amp; 4th",
  "146": "19th &amp; B St",
  "257": "SE Tualatin Valley Hwy &amp; 44th",
  "259": "SW Baseline &amp; Adams",
  "264": "SW Baseline St &amp; 17th",
  "268": "1000 Block SW Baseline St",
  "280": "SE Baseline St &amp; 2nd",
  "284": "Baseline St &amp; N 26th",
  "286": "Baseline St &amp; N 29th",
  "287": "Baseline St &amp; N 31st",
  "290": "SW Baseline &amp; 331st",
  "292": "SW Baseline &amp; NW 334th",
  "296": "Baseline &amp; NW 338th",
  "298": "Baseline St &amp; Valley View",
  "307": "SE Baseline St &amp; 5th",
  "308": "SE Baseline St &amp; 7th",
  "310": "SE Baseline St &amp; 9th",
  "2672": "Hillsboro Transit Center",
  "4264": "Pacific Ave &amp; A St",
  "4275": "Pacific Ave &amp; Cedar St",
  "4278": "Pacific Ave &amp; College Way/Council St",
  "4279": "Pacific Ave &amp; Mountain View Ln",
  "4280": "Pacific Ave &amp; Elm St",
  "4289": "3800 Block Pacific Ave",
  "4291": "Pacific Ave &amp; Hawthorne",
  "4295": "Pacific Ave &amp; Maple",
  "4299": "Pacific Ave &amp; Oak St",
  "4307": "Pacific Ave &amp; Quince St",
  "4309": "2900 Block Pacific Ave",
  "4322": "N Adair &amp; Yew",
  "5586": "SW Tualatin Valley Hwy &amp; 214th",
  "5588": "SE Tualatin Valley Hwy &amp; Sunset Esplnd",
  "5592": "SW Tualatin Valley Hwy &amp; Aloha Villa",
  "5594": "18882-19040 SW Tualatin Valley Hwy",
  "5595": "SW Tualatin Valley Hwy &amp; 141st",
  "5599": "SW Tualatin Valley Hwy &amp; Murray",
  "5601": "SW Tualatin Valley Hwy &amp; Market Centre",
  "5612": "SE Tualatin Valley Hwy &amp; 24th",
  "5615": "SE Tualatin Valley Hwy &amp; 11th",
  "5616": "SE Tualatin Valley Hwy &amp; 13th",
  "5619": "SW Tualatin Valley Hwy &amp; Millikan Way",
  "5621": "SW Tualatin Valley Hwy &amp; 170th",
  "5622": "SW Tualatin Valley Hwy &amp; 174th",
  "5625": "SW Tualatin Valley Hwy &amp; 178th",
  "5629": "SW Tualatin Valley Hwy &amp; 185th",
  "5633": "SW Tualatin Valley Hwy &amp; 192nd",
  "5635": "SW Tualatin Valley Hwy &amp; 198th",
  "5638": "SW Tualatin Valley Hwy &amp; 209th",
  "5639": "SE Tualatin Valley Hwy &amp; Cypress",
  "5644": "SE Tualatin Valley Hwy &amp; 75th",
  "5650": "SE Tualatin Valley Hwy &amp; 67th",
  "5653": "SE Tualatin Valley Hwy &amp; Century",
  "5654": "SE Tualatin Valley Hwy &amp; Imlay",
  "6495": "SE 10th &amp; Maple",
  "6499": "SE 10th &amp; Walnut",
  "8169": "Beaverton Transit Center",
  "8272": "SW Canyon &amp; Hall",
  "8273": "12900 Block SW Canyon",
  "8950": "SW Canyon &amp; Watson",
  "9654": "Beaverton Transit Center",
  "9850": "SW Baseline &amp; Dennis",
  "10129": "SW Baseline &amp; Main",
  "10190": "SE Tualatin Valley Hwy &amp; 30th",
  "10641": "SW Tualatin Valley Hwy &amp; Hocken",
  "11003": "SW Tualatin Valley Hwy &amp; 153rd",
  "12851": "SE Tualatin Valley Hwy &amp; Brookwood"
};

const stops = [
  { stop_id: "9654", name: "Beaverton Transit Center", lat: 45.491269, lon: -122.800864, times: ["4:37 AM", "5:03 AM", "5:23 AM", "5:43 AM", "6:02 AM", "6:17 AM", "6:30 AM", "6:43 AM"] },
  { stop_id: "8169", name: "Beaverton Transit Center", lat: 45.490746, lon: -122.801309, times: ["4:39 AM", "5:05 AM", "5:25 AM", "5:45 AM", "6:04 AM", "6:19 AM", "6:32 AM", "6:45 AM"] },
  { stop_id: "8272", name: "SW Canyon &amp; Hall", lat: 45.488555, lon: -122.803951, times: ["4:39 AM", "5:05 AM", "5:25 AM", "5:45 AM", "6:04 AM", "6:19 AM", "6:32 AM", "6:45 AM"] },
  { stop_id: "8950", name: "SW Canyon &amp; Watson", lat: 45.488447, lon: -122.806085, times: ["4:40 AM", "5:06 AM", "5:26 AM", "5:46 AM", "6:05 AM", "6:20 AM", "6:33 AM", "6:46 AM"] },
  { stop_id: "8273", name: "12900 Block SW Canyon", lat: 45.488384, lon: -122.809654, times: ["4:40 AM", "5:06 AM", "5:26 AM", "5:46 AM", "6:05 AM", "6:20 AM", "6:33 AM", "6:46 AM"] },
  { stop_id: "10641", name: "SW Tualatin Valley Hwy &amp; Hocken", lat: 45.488552, lon: -122.815398, times: ["4:41 AM", "5:07 AM", "5:27 AM", "5:47 AM", "6:06 AM", "6:21 AM", "6:34 AM", "6:47 AM"] },
  { stop_id: "5595", name: "SW Tualatin Valley Hwy &amp; 141st", lat: 45.489173, lon: -122.820875, times: ["4:41 AM", "5:07 AM", "5:27 AM", "5:47 AM", "6:06 AM", "6:21 AM", "6:35 AM", "6:48 AM"] },
  { stop_id: "5599", name: "SW Tualatin Valley Hwy &amp; Murray", lat: 45.489869, lon: -122.827246, times: ["4:42 AM", "5:08 AM", "5:28 AM", "5:48 AM", "6:07 AM", "6:22 AM", "6:36 AM", "6:49 AM"] },
  { stop_id: "11003", name: "SW Tualatin Valley Hwy &amp; 153rd", lat: 45.490427, lon: -122.832423, times: ["4:43 AM", "5:09 AM", "5:29 AM", "5:49 AM", "6:08 AM", "6:23 AM", "6:36 AM", "6:50 AM"] },
  { stop_id: "5619", name: "SW Tualatin Valley Hwy &amp; Millikan Way", lat: 45.491862, lon: -122.841591, times: ["4:44 AM", "5:10 AM", "5:30 AM", "5:50 AM", "6:09 AM", "6:24 AM", "6:38 AM", "6:51 AM"] },
  { stop_id: "5621", name: "SW Tualatin Valley Hwy &amp; 170th", lat: 45.492468, lon: -122.852406, times: ["4:46 AM", "5:12 AM", "5:32 AM", "5:52 AM", "6:11 AM", "6:26 AM", "6:39 AM", "6:53 AM"] },
  { stop_id: "5622", name: "SW Tualatin Valley Hwy &amp; 174th", lat: 45.49285, lon: -122.856391, times: ["4:46 AM", "5:12 AM", "5:32 AM", "5:52 AM", "6:11 AM", "6:26 AM", "6:40 AM", "6:54 AM"] },
  { stop_id: "5625", name: "SW Tualatin Valley Hwy &amp; 178th", lat: 45.493312, lon: -122.86091, times: ["4:47 AM", "5:13 AM", "5:33 AM", "5:53 AM", "6:12 AM", "6:27 AM", "6:41 AM", "6:54 AM"] },
  { stop_id: "5592", name: "SW Tualatin Valley Hwy &amp; Aloha Villa", lat: 45.493502, lon: -122.863035, times: ["4:47 AM", "5:13 AM", "5:33 AM", "5:53 AM", "6:12 AM", "6:27 AM", "6:41 AM", "6:55 AM"] },
  { stop_id: "5629", name: "SW Tualatin Valley Hwy &amp; 185th", lat: 45.49421, lon: -122.867687, times: ["4:48 AM", "5:14 AM", "5:34 AM", "5:54 AM", "6:13 AM", "6:28 AM", "6:41 AM", "6:55 AM"] },
  { stop_id: "5594", name: "18882-19040 SW Tualatin Valley Hwy", lat: 45.494565, lon: -122.872901, times: ["4:48 AM", "5:14 AM", "5:34 AM", "5:54 AM", "6:13 AM", "6:28 AM", "6:42 AM", "6:56 AM"] },
  { stop_id: "5633", name: "SW Tualatin Valley Hwy &amp; 192nd", lat: 45.494851, lon: -122.87584, times: ["4:49 AM", "5:15 AM", "5:35 AM", "5:55 AM", "6:14 AM", "6:29 AM", "6:43 AM", "6:57 AM"] },
  { stop_id: "5635", name: "SW Tualatin Valley Hwy &amp; 198th", lat: 45.495519, lon: -122.88177, times: ["4:50 AM", "5:16 AM", "5:36 AM", "5:56 AM", "6:15 AM", "6:30 AM", "6:44 AM", "6:58 AM"] },
  { stop_id: "5601", name: "SW Tualatin Valley Hwy &amp; Market Centre", lat: 45.496102, lon: -122.887631, times: ["4:50 AM", "5:16 AM", "5:36 AM", "5:56 AM", "6:15 AM", "6:30 AM", "6:44 AM", "6:58 AM"] },
  { stop_id: "5638", name: "SW Tualatin Valley Hwy &amp; 209th", lat: 45.496516, lon: -122.89215, times: ["4:51 AM", "5:17 AM", "5:37 AM", "5:57 AM", "6:16 AM", "6:31 AM", "6:45 AM", "6:59 AM"] },
  { stop_id: "5586", name: "SW Tualatin Valley Hwy &amp; 214th", lat: 45.497215, lon: -122.896577, times: ["4:51 AM", "5:18 AM", "5:38 AM", "5:58 AM", "6:17 AM", "6:32 AM", "6:46 AM", "7:00 AM"] },
  { stop_id: "5644", name: "SE Tualatin Valley Hwy &amp; 75th", lat: 45.497773, lon: -122.903761, times: ["11:52 PM", "4:52 AM", "5:19 AM", "5:39 AM", "5:59 AM", "6:18 AM", "6:33 AM", "6:47 AM"] },
  { stop_id: "5650", name: "SE Tualatin Valley Hwy &amp; 67th", lat: 45.498711, lon: -122.912845, times: ["11:53 PM", "4:53 AM", "5:20 AM", "5:40 AM", "6:00 AM", "6:19 AM", "6:34 AM", "6:48 AM"] },
  { stop_id: "5653", name: "SE Tualatin Valley Hwy &amp; Century", lat: 45.499343, lon: -122.918672, times: ["11:54 PM", "4:54 AM", "5:21 AM", "5:41 AM", "6:01 AM", "6:20 AM", "6:35 AM", "6:49 AM"] },
  { stop_id: "5654", name: "SE Tualatin Valley Hwy &amp; Imlay", lat: 45.499755, lon: -122.922612, times: ["11:54 PM", "4:54 AM", "5:21 AM", "5:41 AM", "6:01 AM", "6:20 AM", "6:36 AM", "6:50 AM"] },
  { stop_id: "12851", name: "SE Tualatin Valley Hwy &amp; Brookwood", lat: 45.500655, lon: -122.931766, times: ["11:56 PM", "4:56 AM", "5:23 AM", "5:43 AM", "6:03 AM", "6:22 AM", "6:38 AM", "6:52 AM"] },
  { stop_id: "257", name: "SE Tualatin Valley Hwy &amp; 44th", lat: 45.501386, lon: -122.938527, times: ["11:56 PM", "4:56 AM", "5:23 AM", "5:43 AM", "6:03 AM", "6:22 AM", "6:38 AM", "6:52 AM"] },
  { stop_id: "10190", name: "SE Tualatin Valley Hwy &amp; 30th", lat: 45.503477, lon: -122.952766, times: ["11:58 PM", "4:58 AM", "5:25 AM", "5:45 AM", "6:05 AM", "6:24 AM", "6:40 AM", "6:54 AM"] },
  { stop_id: "5612", name: "SE Tualatin Valley Hwy &amp; 24th", lat: 45.504889, lon: -122.956075, times: ["11:59 PM", "4:59 AM", "5:26 AM", "5:46 AM", "6:06 AM", "6:25 AM", "6:41 AM", "6:55 AM"] },
  { stop_id: "5588", name: "SE Tualatin Valley Hwy &amp; Sunset Esplnd", lat: 45.505981, lon: -122.958827, times: ["11:59 PM", "4:59 AM", "5:26 AM", "5:46 AM", "6:06 AM", "6:25 AM", "6:41 AM", "6:55 AM"] },
  { stop_id: "5639", name: "SE Tualatin Valley Hwy &amp; Cypress", lat: 45.507167, lon: -122.961697, times: ["11:59 PM", "4:59 AM", "5:26 AM", "5:46 AM", "6:06 AM", "6:25 AM", "6:41 AM", "6:55 AM"] },
  { stop_id: "5616", name: "SE Tualatin Valley Hwy &amp; 13th", lat: 45.510026, lon: -122.96871, times: ["12:00 AM", "5:00 AM", "5:27 AM", "5:47 AM", "6:07 AM", "6:26 AM", "6:42 AM", "6:56 AM"] },
  { stop_id: "5615", name: "SE Tualatin Valley Hwy &amp; 11th", lat: 45.512447, lon: -122.97339, times: ["12:01 AM", "5:01 AM", "5:28 AM", "5:48 AM", "6:08 AM", "6:27 AM", "6:43 AM", "6:57 AM"] },
  { stop_id: "6495", name: "SE 10th &amp; Maple", lat: 45.51479, lon: -122.973831, times: ["12:01 AM", "5:01 AM", "5:28 AM", "5:48 AM", "6:08 AM", "6:27 AM", "6:43 AM", "6:57 AM"] },
  { stop_id: "6499", name: "SE 10th &amp; Walnut", lat: 45.517349, lon: -122.97376, times: ["12:02 AM", "5:02 AM", "5:29 AM", "5:49 AM", "6:09 AM", "6:28 AM", "6:44 AM", "6:58 AM"] },
  { stop_id: "310", name: "SE Baseline St &amp; 9th", lat: 45.520061, lon: -122.97539, times: ["12:04 AM", "5:03 AM", "5:31 AM", "5:51 AM", "6:11 AM", "6:30 AM", "6:46 AM", "7:00 AM"] },
  { stop_id: "308", name: "SE Baseline St &amp; 7th", lat: 45.520081, lon: -122.97865, times: ["12:04 AM", "5:04 AM", "5:31 AM", "5:51 AM", "6:11 AM", "6:30 AM", "6:46 AM", "7:00 AM"] },
  { stop_id: "307", name: "SE Baseline St &amp; 5th", lat: 45.520114, lon: -122.982407, times: ["12:06 AM", "5:05 AM", "5:33 AM", "5:53 AM", "6:13 AM", "6:32 AM", "6:48 AM", "7:02 AM"] },
  { stop_id: "280", name: "SE Baseline St &amp; 2nd", lat: 45.520168, lon: -122.987847, times: ["12:07 AM", "12:10 AM", "5:06 AM", "5:08 AM", "5:34 AM", "5:37 AM", "5:54 AM", "5:57 AM"] },
  { stop_id: "2672", name: "Hillsboro Transit Center", lat: 45.521461, lon: -122.984683, times: ["12:09 AM", "5:08 AM", "5:36 AM", "5:56 AM", "6:16 AM", "6:35 AM", "6:51 AM", "7:05 AM"] },
  { stop_id: "259", name: "SW Baseline &amp; Adams", lat: 45.520209, lon: -122.991145, times: ["12:10 AM", "5:09 AM", "5:37 AM", "5:57 AM", "6:17 AM", "6:36 AM", "6:52 AM", "7:06 AM"] },
  { stop_id: "9850", name: "SW Baseline &amp; Dennis", lat: 45.520206, lon: -122.99501, times: ["12:10 AM", "5:09 AM", "5:37 AM", "5:57 AM", "6:17 AM", "6:36 AM", "6:52 AM", "7:06 AM"] },
  { stop_id: "268", name: "1000 Block SW Baseline St", lat: 45.520039, lon: -123.000588, times: ["12:11 AM", "5:10 AM", "5:38 AM", "5:58 AM", "6:18 AM", "6:37 AM", "6:53 AM", "7:07 AM"] },
  { stop_id: "10129", name: "SW Baseline &amp; Main", lat: 45.520034, lon: -123.003193, times: ["12:11 AM", "5:10 AM", "5:38 AM", "5:58 AM", "6:18 AM", "6:37 AM", "6:53 AM", "7:07 AM"] },
  { stop_id: "264", name: "SW Baseline St &amp; 17th", lat: 45.520046, lon: -123.007375, times: ["12:12 AM", "5:10 AM", "5:39 AM", "5:59 AM", "6:19 AM", "6:38 AM", "6:54 AM", "7:08 AM"] },
  { stop_id: "290", name: "SW Baseline &amp; 331st", lat: 45.520109, lon: -123.017137, times: ["12:13 AM", "5:11 AM", "5:40 AM", "6:00 AM", "6:20 AM", "6:39 AM", "6:55 AM", "7:09 AM"] },
  { stop_id: "292", name: "SW Baseline &amp; NW 334th", lat: 45.5201, lon: -123.021033, times: ["12:13 AM", "5:12 AM", "5:40 AM", "6:00 AM", "6:20 AM", "6:39 AM", "6:55 AM", "7:09 AM"] },
  { stop_id: "296", name: "Baseline &amp; NW 338th", lat: 45.520104, lon: -123.024875, times: ["12:14 AM", "5:12 AM", "5:41 AM", "6:01 AM", "6:21 AM", "6:40 AM", "6:56 AM", "7:10 AM"] },
  { stop_id: "298", name: "Baseline St &amp; Valley View", lat: 45.520149, lon: -123.030371, times: ["12:14 AM", "5:13 AM", "5:41 AM", "6:01 AM", "6:21 AM", "6:40 AM", "6:56 AM", "7:10 AM"] },
  { stop_id: "287", name: "Baseline St &amp; N 31st", lat: 45.520154, lon: -123.03409, times: ["12:15 AM", "5:13 AM", "5:42 AM", "6:02 AM", "6:22 AM", "6:41 AM", "6:57 AM", "7:11 AM"] },
  { stop_id: "286", name: "Baseline St &amp; N 29th", lat: 45.520161, lon: -123.036816, times: ["12:15 AM", "5:13 AM", "5:42 AM", "6:02 AM", "6:22 AM", "6:41 AM", "6:57 AM", "7:11 AM"] },
  { stop_id: "284", name: "Baseline St &amp; N 26th", lat: 45.520167, lon: -123.040746, times: ["12:16 AM", "5:14 AM", "5:43 AM", "6:03 AM", "6:23 AM", "6:42 AM", "6:58 AM", "7:12 AM"] },
  { stop_id: "28", name: "2200 Block Baseline", lat: 45.520284, lon: -123.044484, times: ["12:16 AM", "5:14 AM", "5:43 AM", "6:03 AM", "6:23 AM", "6:42 AM", "6:58 AM", "7:12 AM"] },
  { stop_id: "34", name: "N Adair &amp; 20th", lat: 45.52046, lon: -123.047696, times: ["12:17 AM", "5:15 AM", "5:44 AM", "6:04 AM", "6:24 AM", "6:43 AM", "6:59 AM", "7:13 AM"] },
  { stop_id: "33", name: "N Adair &amp; 17th", lat: 45.520981, lon: -123.051781, times: ["12:17 AM", "5:15 AM", "5:44 AM", "6:04 AM", "6:24 AM", "6:43 AM", "6:59 AM", "7:13 AM"] },
  { stop_id: "32", name: "N Adair &amp; 14th", lat: 45.520985, lon: -123.054208, times: ["12:18 AM", "5:16 AM", "5:45 AM", "6:05 AM", "6:25 AM", "6:44 AM", "7:00 AM", "7:14 AM"] },
  { stop_id: "31", name: "N Adair &amp; 12th", lat: 45.52097, lon: -123.056836, times: ["11:51 PM", "12:18 AM", "5:16 AM", "5:45 AM", "6:05 AM", "6:25 AM", "6:44 AM", "7:00 AM"] },
  { stop_id: "30", name: "N Adair &amp; 10th", lat: 45.520994, lon: -123.059167, times: ["11:51 PM", "12:18 AM", "5:16 AM", "5:45 AM", "6:05 AM", "6:25 AM", "6:45 AM", "7:01 AM"] },
  { stop_id: "35", name: "N Adair &amp; 4th", lat: 45.521026, lon: -123.067234, times: ["11:53 PM", "12:20 AM", "5:18 AM", "5:47 AM", "6:07 AM", "6:27 AM", "6:46 AM", "7:02 AM"] },
  { stop_id: "4322", name: "N Adair &amp; Yew", lat: 45.520828, lon: -123.072889, times: ["11:54 PM", "12:21 AM", "5:18 AM", "5:48 AM", "6:08 AM", "6:28 AM", "6:47 AM", "7:03 AM"] },
  { stop_id: "4279", name: "Pacific Ave &amp; Mountain View Ln", lat: 45.520361, lon: -123.07573, times: ["11:54 PM", "12:21 AM", "5:19 AM", "5:48 AM", "6:08 AM", "6:28 AM", "6:48 AM", "7:04 AM"] },
  { stop_id: "4289", name: "3800 Block Pacific Ave", lat: 45.520345, lon: -123.079494, times: ["11:55 PM", "12:22 AM", "5:20 AM", "5:49 AM", "6:09 AM", "6:29 AM", "6:48 AM", "7:04 AM"] },
  { stop_id: "4307", name: "Pacific Ave &amp; Quince St", lat: 45.520382, lon: -123.085193, times: ["11:56 PM", "12:23 AM", "5:20 AM", "5:50 AM", "6:10 AM", "6:30 AM", "6:49 AM", "7:05 AM"] },
  { stop_id: "4299", name: "Pacific Ave &amp; Oak St", lat: 45.520252, lon: -123.088439, times: ["11:57 PM", "12:24 AM", "5:21 AM", "5:51 AM", "6:11 AM", "6:31 AM", "6:50 AM", "7:06 AM"] },
  { stop_id: "4295", name: "Pacific Ave &amp; Maple", lat: 45.520236, lon: -123.09078, times: ["11:57 PM", "12:24 AM", "5:21 AM", "5:51 AM", "6:11 AM", "6:31 AM", "6:51 AM", "7:07 AM"] },
  { stop_id: "4309", name: "2900 Block Pacific Ave", lat: 45.520251, lon: -123.09514, times: ["11:58 PM", "12:25 AM", "5:22 AM", "5:52 AM", "6:12 AM", "6:32 AM", "6:51 AM", "7:07 AM"] },
  { stop_id: "4291", name: "Pacific Ave &amp; Hawthorne", lat: 45.519733, lon: -123.099106, times: ["11:58 PM", "12:25 AM", "5:23 AM", "5:52 AM", "6:12 AM", "6:32 AM", "6:52 AM", "7:08 AM"] },
  { stop_id: "4280", name: "Pacific Ave &amp; Elm St", lat: 45.519675, lon: -123.102784, times: ["11:59 PM", "12:26 AM", "5:23 AM", "5:53 AM", "6:13 AM", "6:33 AM", "6:53 AM", "7:09 AM"] },
  { stop_id: "4275", name: "Pacific Ave &amp; Cedar St", lat: 45.519707, lon: -123.106441, times: ["12:00 AM", "12:27 AM", "5:24 AM", "5:54 AM", "6:14 AM", "6:34 AM", "6:53 AM", "7:09 AM"] },
  { stop_id: "4278", name: "Pacific Ave &amp; College Way/Council St", lat: 45.519721, lon: -123.1109, times: ["12:00 AM", "12:27 AM", "5:24 AM", "5:54 AM", "6:14 AM", "6:34 AM", "6:54 AM", "7:10 AM"] },
  { stop_id: "4264", name: "Pacific Ave &amp; A St", lat: 45.519735, lon: -123.114234, times: ["12:01 AM", "12:28 AM", "5:25 AM", "5:55 AM", "6:15 AM", "6:35 AM", "6:55 AM", "7:11 AM"] },
  { stop_id: "146", name: "19th &amp; B St", lat: 45.518534, lon: -123.115448, times: ["12:02 AM", "12:29 AM", "5:26 AM", "5:56 AM", "6:16 AM", "6:36 AM", "6:56 AM", "7:12 AM"] },
]

    // Draw route polyline
    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    // 1. Get current time in PT
    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const datePT = nowPT.toDateString();

    // 2. Add stops with highlighted next time
    stops.forEach(stop => {
      const stamps = stop.times.map(t => new Date(`${datePT} ${t}`));
      const nextIdx = stamps.findIndex(ts => ts > nowPT);
      const timesHtml = stamps.slice(0, 8).map((ts, i) => {
        const lbl = ts.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        return i === nextIdx ? `<strong>${lbl}</strong>` : lbl;
      }).join('<br>');

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${timesHtml || 'No scheduled times'}`)
      .addTo(map);
    });

    // Bus markers fetch
    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
	   html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>