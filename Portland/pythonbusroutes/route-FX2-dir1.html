<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route FX2 - To Portland City Center | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-FX2-dir1-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route FX2 - To Portland City Center</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = FX2;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.502351, -122.417994],
  [45.502346, -122.417994],
  [45.50234, -122.417994],
  [45.50233, -122.417997],
  [45.502197, -122.418115],
  [45.502012, -122.418114],
  [45.501954, -122.418072],
  [45.501924, -122.418007],
  [45.501918, -122.417954],
  [45.501923, -122.417903],
  [45.501948, -122.41782],
  [45.502009, -122.417778],
  [45.502892, -122.417805],
  [45.503055, -122.41781],
  [45.503052, -122.418016],
  [45.503045, -122.418492],
  [45.503038, -122.418962],
  [45.503034, -122.419209],
  [45.503023, -122.419908],
  [45.503017, -122.421107],
  [45.50299, -122.423046],
  [45.502981, -122.42367],
  [45.502973, -122.424301],
  [45.50297, -122.424479],
  [45.502948, -122.426062],
  [45.502938, -122.426245],
  [45.503025, -122.426247],
  [45.503342, -122.426243],
  [45.503427, -122.426234],
  [45.503552, -122.426211],
  [45.503561, -122.42621],
  [45.503657, -122.426178],
  [45.503735, -122.426151],
  [45.503823, -122.426113],
  [45.503916, -122.426079],
  [45.503978, -122.426058],
  [45.504059, -122.426041],
  [45.504114, -122.426033],
  [45.504166, -122.426025],
  [45.504315, -122.426024],
  [45.504768, -122.426021],
  [45.504831, -122.426021],
  [45.504922, -122.426021],
  [45.50496, -122.426187],
  [45.504941, -122.426962],
  [45.504928, -122.427537],
  [45.504913, -122.428042],
  [45.504903, -122.42819],
  [45.504885, -122.428341],
  [45.504862, -122.428501],
  [45.504831, -122.428685],
  [45.504728, -122.42925],
  [45.504666, -122.429595],
  [45.504635, -122.429756],
  [45.504561, -122.43017],
  [45.504539, -122.430332],
  [45.504534, -122.430364],
  [45.50452, -122.430536],
  [45.504509, -122.430713],
  [45.504507, -122.430859],
  [45.504513, -122.430993],
  [45.504513, -122.431138],
  [45.504514, -122.432219],
  [45.504514, -122.432359],
  [45.504517, -122.432908],
  [45.504517, -122.432951],
  [45.504517, -122.433016],
  [45.504513, -122.433595],
  [45.504512, -122.433902],
  [45.504513, -122.433998],
  [45.504517, -122.434682],
  [45.504522, -122.435396],
  [45.504523, -122.435508],
  [45.504526, -122.435663],
  [45.504528, -122.435828],
  [45.504532, -122.436959],
  [45.504532, -122.438172],
  [45.504538, -122.439357],
  [45.504537, -122.439434],
  [45.504539, -122.440917],
  [45.50454, -122.441099],
  [45.504541, -122.441289],
  [45.504542, -122.441848],
  [45.504543, -122.442368],
  [45.504542, -122.442531],
  [45.50455, -122.443669],
  [45.504562, -122.444865],
  [45.504514, -122.444984],
  [45.504514, -122.445075],
  [45.504504, -122.446241],
  [45.504492, -122.447426],
  [45.504484, -122.448321],
  [45.504478, -122.449019],
  [45.504476, -122.449172],
  [45.504469, -122.449886],
  [45.504462, -122.450648],
  [45.504458, -122.451053],
  [45.504456, -122.451265],
  [45.504449, -122.452056],
  [45.504446, -122.452367],
  [45.504438, -122.453515],
  [45.504481, -122.453676],
  [45.504481, -122.453991],
  [45.504482, -122.454915],
  [45.504434, -122.455025],
  [45.504442, -122.456223],
  [45.504452, -122.45748],
  [45.504453, -122.458092],
  [45.504495, -122.458171],
  [45.504495, -122.458333],
  [45.504496, -122.458489],
  [45.504496, -122.458522],
  [45.504452, -122.458616],
  [45.504451, -122.458731],
  [45.504448, -122.459756],
  [45.504447, -122.460037],
  [45.504448, -122.46078],
  [45.504451, -122.461288],
  [45.504457, -122.462295],
  [45.504458, -122.462438],
  [45.504459, -122.462731],
  [45.504466, -122.463412],
  [45.504477, -122.464647],
  [45.50448, -122.464932],
  [45.504486, -122.465619],
  [45.504489, -122.465894],
  [45.504491, -122.466141],
  [45.504493, -122.466292],
  [45.504495, -122.46657],
  [45.504499, -122.466994],
  [45.504502, -122.467265],
  [45.504506, -122.467753],
  [45.504506, -122.467889],
  [45.504506, -122.468023],
  [45.504514, -122.46895],
  [45.504523, -122.469933],
  [45.504527, -122.470525],
  [45.504529, -122.470699],
  [45.504535, -122.47136],
  [45.504539, -122.471943],
  [45.504543, -122.472407],
  [45.504553, -122.473705],
  [45.504554, -122.473808],
  [45.504568, -122.475107],
  [45.504571, -122.475429],
  [45.50457, -122.475624],
  [45.50457, -122.475788],
  [45.504572, -122.476502],
  [45.504573, -122.476951],
  [45.504574, -122.477085],
  [45.504574, -122.47748],
  [45.504575, -122.477707],
  [45.504576, -122.477952],
  [45.504576, -122.478102],
  [45.504578, -122.478479],
  [45.504578, -122.478841],
  [45.504579, -122.479074],
  [45.50458, -122.47942],
  [45.50458, -122.479642],
  [45.50458, -122.480134],
  [45.504581, -122.48032],
  [45.504583, -122.48085],
  [45.504586, -122.481365],
  [45.504586, -122.482076],
  [45.504588, -122.482746],
  [45.504589, -122.483222],
  [45.504589, -122.483473],
  [45.50459, -122.484045],
  [45.50459, -122.484381],
  [45.504591, -122.484568],
  [45.504592, -122.484689],
  [45.504593, -122.4848],
  [45.504593, -122.485383],
  [45.504593, -122.485531],
  [45.504593, -122.485908],
  [45.504593, -122.486492],
  [45.50459, -122.487348],
  [45.504587, -122.487942],
  [45.504586, -122.488655],
  [45.504585, -122.489059],
  [45.504583, -122.489639],
  [45.504582, -122.490104],
  [45.504581, -122.49034],
  [45.504581, -122.490739],
  [45.50458, -122.491104],
  [45.504579, -122.491567],
  [45.504578, -122.491889],
  [45.504575, -122.492543],
  [45.504575, -122.492601],
  [45.504573, -122.493223],
  [45.504571, -122.493692],
  [45.504571, -122.493765],
  [45.504568, -122.494982],
  [45.504565, -122.496143],
  [45.504564, -122.496491],
  [45.504559, -122.496664],
  [45.504555, -122.496837],
  [45.504538, -122.497437],
  [45.504523, -122.498062],
  [45.504504, -122.498583],
  [45.504485, -122.499203],
  [45.504456, -122.500255],
  [45.504451, -122.500446],
  [45.50443, -122.501129],
  [45.504414, -122.501724],
  [45.504404, -122.502069],
  [45.504403, -122.502118],
  [45.504377, -122.503018],
  [45.504353, -122.503847],
  [45.50433, -122.5047],
  [45.504318, -122.505108],
  [45.504305, -122.50556],
  [45.504294, -122.505961],
  [45.504265, -122.507039],
  [45.504259, -122.507497],
  [45.504245, -122.508448],
  [45.504244, -122.508563],
  [45.504237, -122.509041],
  [45.504228, -122.509685],
  [45.504222, -122.510112],
  [45.504221, -122.510178],
  [45.504214, -122.510624],
  [45.504209, -122.510995],
  [45.504195, -122.51177],
  [45.504188, -122.512222],
  [45.504183, -122.512674],
  [45.504175, -122.513216],
  [45.504165, -122.513821],
  [45.504163, -122.513909],
  [45.504162, -122.513999],
  [45.504153, -122.514543],
  [45.504153, -122.514586],
  [45.504149, -122.514824],
  [45.504145, -122.515153],
  [45.504143, -122.515278],
  [45.504138, -122.515627],
  [45.504136, -122.51573],
  [45.504133, -122.516022],
  [45.504123, -122.516992],
  [45.504123, -122.517015],
  [45.504118, -122.517287],
  [45.504115, -122.517507],
  [45.504112, -122.51775],
  [45.504106, -122.518473],
  [45.504105, -122.51869],
  [45.504103, -122.518934],
  [45.504101, -122.519259],
  [45.504097, -122.519581],
  [45.504095, -122.519835],
  [45.504094, -122.520022],
  [45.504087, -122.520967],
  [45.504086, -122.521389],
  [45.504084, -122.521756],
  [45.504079, -122.522235],
  [45.504078, -122.522498],
  [45.504075, -122.522797],
  [45.504074, -122.522982],
  [45.504071, -122.523325],
  [45.50407, -122.523425],
  [45.504069, -122.523594],
  [45.504069, -122.523688],
  [45.50407, -122.523784],
  [45.504067, -122.524099],
  [45.504062, -122.524751],
  [45.50406, -122.524919],
  [45.504059, -122.525129],
  [45.504057, -122.52543],
  [45.504056, -122.525521],
  [45.504051, -122.526171],
  [45.504048, -122.526777],
  [45.504047, -122.527052],
  [45.504045, -122.527443],
  [45.504046, -122.527711],
  [45.504049, -122.528486],
  [45.504052, -122.529236],
  [45.504054, -122.529723],
  [45.504055, -122.529979],
  [45.504058, -122.53069],
  [45.504059, -122.530849],
  [45.504061, -122.531229],
  [45.504066, -122.532104],
  [45.504068, -122.532397],
  [45.504069, -122.532663],
  [45.504073, -122.533277],
  [45.504073, -122.533402],
  [45.504075, -122.533815],
  [45.504077, -122.534202],
  [45.50408, -122.534762],
  [45.50408, -122.535346],
  [45.50408, -122.535617],
  [45.504081, -122.53577],
  [45.504083, -122.536045],
  [45.504089, -122.537033],
  [45.504092, -122.537496],
  [45.504094, -122.537674],
  [45.504096, -122.537852],
  [45.504099, -122.538388],
  [45.504102, -122.538955],
  [45.504104, -122.539144],
  [45.504111, -122.539627],
  [45.504113, -122.539787],
  [45.504114, -122.539912],
  [45.504123, -122.540581],
  [45.504126, -122.540811],
  [45.504127, -122.540909],
  [45.50413, -122.541208],
  [45.504136, -122.541891],
  [45.504139, -122.542203],
  [45.504145, -122.542815],
  [45.504147, -122.543099],
  [45.504153, -122.543818],
  [45.504155, -122.544039],
  [45.504156, -122.544192],
  [45.504162, -122.5448],
  [45.504168, -122.545305],
  [45.50417, -122.545458],
  [45.504172, -122.545637],
  [45.504182, -122.546679],
  [45.504191, -122.547279],
  [45.504194, -122.547422],
  [45.504195, -122.547906],
  [45.504194, -122.548018],
  [45.504194, -122.548137],
  [45.504199, -122.548574],
  [45.504201, -122.548806],
  [45.504206, -122.549331],
  [45.504208, -122.549735],
  [45.50421, -122.550222],
  [45.504216, -122.550772],
  [45.504223, -122.551344],
  [45.504229, -122.552242],
  [45.50423, -122.552474],
  [45.504237, -122.553412],
  [45.504242, -122.553828],
  [45.504246, -122.554259],
  [45.50425, -122.554645],
  [45.504256, -122.555469],
  [45.504265, -122.556401],
  [45.504268, -122.556646],
  [45.504273, -122.557042],
  [45.504278, -122.557534],
  [45.504285, -122.557874],
  [45.504289, -122.558095],
  [45.504306, -122.558954],
  [45.504309, -122.559119],
  [45.504318, -122.559584],
  [45.504327, -122.560024],
  [45.504332, -122.560289],
  [45.504343, -122.560915],
  [45.504346, -122.561108],
  [45.50435, -122.561337],
  [45.504369, -122.562485],
  [45.504375, -122.562798],
  [45.50438, -122.563131],
  [45.504379, -122.563286],
  [45.504378, -122.563411],
  [45.50439, -122.563947],
  [45.504402, -122.564475],
  [45.50441, -122.564797],
  [45.504443, -122.565973],
  [45.504448, -122.566233],
  [45.504454, -122.566688],
  [45.504456, -122.566783],
  [45.504503, -122.566917],
  [45.504505, -122.567203],
  [45.504509, -122.567454],
  [45.50451, -122.567516],
  [45.504465, -122.567646],
  [45.504465, -122.56793],
  [45.504468, -122.568093],
  [45.504477, -122.568643],
  [45.504479, -122.568797],
  [45.504484, -122.569015],
  [45.504487, -122.569178],
  [45.504491, -122.56938],
  [45.504493, -122.569429],
  [45.504496, -122.569614],
  [45.504501, -122.569832],
  [45.504503, -122.569922],
  [45.504508, -122.57019],
  [45.504515, -122.570511],
  [45.504519, -122.570783],
  [45.504524, -122.571056],
  [45.504536, -122.571768],
  [45.50454, -122.572284],
  [45.504561, -122.573358],
  [45.504562, -122.573409],
  [45.504565, -122.573593],
  [45.504568, -122.573779],
  [45.504583, -122.574166],
  [45.504584, -122.574252],
  [45.504591, -122.574559],
  [45.504595, -122.574755],
  [45.504593, -122.574879],
  [45.504592, -122.574982],
  [45.504595, -122.575262],
  [45.504597, -122.575387],
  [45.504598, -122.575457],
  [45.504602, -122.575674],
  [45.504611, -122.576186],
  [45.504626, -122.576589],
  [45.50464, -122.576813],
  [45.504663, -122.577151],
  [45.504697, -122.577558],
  [45.50471, -122.577687],
  [45.504731, -122.57791],
  [45.504746, -122.578041],
  [45.504757, -122.578131],
  [45.504769, -122.578227],
  [45.504809, -122.57855],
  [45.504832, -122.578687],
  [45.504857, -122.578843],
  [45.504906, -122.579126],
  [45.504917, -122.579187],
  [45.504956, -122.579419],
  [45.504966, -122.579471],
  [45.505024, -122.579799],
  [45.505201, -122.58085],
  [45.505293, -122.581394],
  [45.505323, -122.581579],
  [45.505348, -122.581769],
  [45.505361, -122.581899],
  [45.505379, -122.582174],
  [45.505388, -122.582371],
  [45.505392, -122.582523],
  [45.505395, -122.58269],
  [45.505396, -122.582871],
  [45.505395, -122.583695],
  [45.505393, -122.584439],
  [45.505391, -122.585272],
  [45.50539, -122.585661],
  [45.50539, -122.585771],
  [45.50539, -122.586165],
  [45.505389, -122.586341],
  [45.505388, -122.586581],
  [45.505387, -122.586781],
  [45.505386, -122.587163],
  [45.505385, -122.587683],
  [45.505384, -122.588017],
  [45.505383, -122.588338],
  [45.505383, -122.588473],
  [45.505382, -122.588872],
  [45.505381, -122.589448],
  [45.505381, -122.589799],
  [45.505381, -122.589895],
  [45.505379, -122.590783],
  [45.505378, -122.591291],
  [45.505378, -122.591594],
  [45.505377, -122.592096],
  [45.505376, -122.592668],
  [45.505375, -122.59291],
  [45.505373, -122.593714],
  [45.505373, -122.594449],
  [45.505373, -122.594592],
  [45.505372, -122.594844],
  [45.50537, -122.595111],
  [45.505372, -122.595569],
  [45.505371, -122.596389],
  [45.50537, -122.596815],
  [45.505369, -122.597515],
  [45.505366, -122.598847],
  [45.505365, -122.599415],
  [45.505365, -122.599893],
  [45.505362, -122.600263],
  [45.505361, -122.600465],
  [45.50536, -122.601159],
  [45.50536, -122.601618],
  [45.505359, -122.601713],
  [45.505358, -122.601802],
  [45.505357, -122.60194],
  [45.505356, -122.602253],
  [45.505355, -122.602457],
  [45.505355, -122.602547],
  [45.505354, -122.602752],
  [45.505351, -122.603072],
  [45.505347, -122.603775],
  [45.505341, -122.604903],
  [45.505339, -122.605388],
  [45.505338, -122.605486],
  [45.505338, -122.605567],
  [45.505337, -122.605843],
  [45.505336, -122.606038],
  [45.505329, -122.607046],
  [45.505322, -122.608056],
  [45.505317, -122.608898],
  [45.505317, -122.609002],
  [45.505319, -122.609107],
  [45.505314, -122.610011],
  [45.505312, -122.610345],
  [45.505311, -122.610488],
  [45.50531, -122.610595],
  [45.505309, -122.61083],
  [45.505307, -122.611118],
  [45.505304, -122.612029],
  [45.505299, -122.61292],
  [45.505299, -122.61302],
  [45.505298, -122.613226],
  [45.505297, -122.613448],
  [45.505294, -122.614015],
  [45.505293, -122.6142],
  [45.505286, -122.615182],
  [45.505281, -122.616151],
  [45.505275, -122.617124],
  [45.505272, -122.618047],
  [45.505271, -122.61819],
  [45.505263, -122.618352],
  [45.505259, -122.61839],
  [45.505249, -122.61849],
  [45.505227, -122.618637],
  [45.505205, -122.618726],
  [45.50519, -122.618766],
  [45.505171, -122.618813],
  [45.505125, -122.618891],
  [45.504911, -122.619212],
  [45.504888, -122.619255],
  [45.50487, -122.619288],
  [45.504839, -122.619366],
  [45.504819, -122.619441],
  [45.504803, -122.619537],
  [45.504791, -122.619643],
  [45.504787, -122.619824],
  [45.504787, -122.620374],
  [45.504785, -122.621472],
  [45.504784, -122.621778],
  [45.504784, -122.622077],
  [45.504784, -122.622522],
  [45.504783, -122.622641],
  [45.504782, -122.622759],
  [45.504783, -122.623042],
  [45.504783, -122.623118],
  [45.504783, -122.62315],
  [45.504784, -122.623361],
  [45.504786, -122.623943],
  [45.504786, -122.624281],
  [45.504786, -122.62461],
  [45.504786, -122.625233],
  [45.504787, -122.625718],
  [45.504787, -122.625751],
  [45.504788, -122.626246],
  [45.504789, -122.627276],
  [45.504792, -122.627605],
  [45.504792, -122.628587],
  [45.504793, -122.629573],
  [45.504793, -122.629954],
  [45.504793, -122.630064],
  [45.504793, -122.630244],
  [45.504794, -122.630535],
  [45.504795, -122.630634],
  [45.504796, -122.631183],
  [45.504795, -122.631479],
  [45.504795, -122.631551],
  [45.504796, -122.631802],
  [45.504796, -122.63202],
  [45.504797, -122.63251],
  [45.504797, -122.632613],
  [45.504797, -122.633576],
  [45.504799, -122.633672],
  [45.504799, -122.634289],
  [45.5048, -122.634521],
  [45.5048, -122.634645],
  [45.504801, -122.635605],
  [45.504801, -122.635859],
  [45.504802, -122.636042],
  [45.504803, -122.636664],
  [45.504804, -122.636755],
  [45.504803, -122.637002],
  [45.504803, -122.637344],
  [45.504802, -122.637559],
  [45.504802, -122.637634],
  [45.504803, -122.63844],
  [45.504803, -122.638647],
  [45.504804, -122.638912],
  [45.504805, -122.639201],
  [45.504806, -122.639617],
  [45.504806, -122.63991],
  [45.504808, -122.640408],
  [45.504809, -122.641246],
  [45.50481, -122.641449],
  [45.504813, -122.642261],
  [45.504813, -122.642331],
  [45.504814, -122.642575],
  [45.504817, -122.643397],
  [45.504818, -122.643575],
  [45.50482, -122.644397],
  [45.50482, -122.644603],
  [45.504821, -122.644695],
  [45.504822, -122.645075],
  [45.504823, -122.645251],
  [45.504824, -122.645623],
  [45.504826, -122.645862],
  [45.504827, -122.646007],
  [45.504828, -122.646068],
  [45.50483, -122.646895],
  [45.504831, -122.647646],
  [45.504835, -122.648557],
  [45.504836, -122.648661],
  [45.504837, -122.648748],
  [45.504839, -122.649436],
  [45.50484, -122.649674],
  [45.504843, -122.650685],
  [45.504845, -122.651701],
  [45.504847, -122.651799],
  [45.504849, -122.651923],
  [45.504851, -122.652717],
  [45.504854, -122.653729],
  [45.504854, -122.653831],
  [45.504856, -122.653989],
  [45.50486, -122.654752],
  [45.50486, -122.654841],
  [45.504864, -122.655163],
  [45.504873, -122.655768],
  [45.50487, -122.655878],
  [45.504873, -122.65596],
  [45.50488, -122.656038],
  [45.50489, -122.656095],
  [45.504904, -122.656151],
  [45.504923, -122.6562],
  [45.504956, -122.656274],
  [45.505038, -122.656419],
  [45.50529, -122.656875],
  [45.505357, -122.656907],
  [45.505471, -122.657113],
  [45.505471, -122.657183],
  [45.505541, -122.657324],
  [45.505603, -122.657441],
  [45.505509, -122.65746],
  [45.505465, -122.65748],
  [45.505434, -122.657499],
  [45.505403, -122.657526],
  [45.505298, -122.657625],
  [45.505262, -122.657653],
  [45.505154, -122.65775],
  [45.5051, -122.657781],
  [45.505032, -122.657822],
  [45.505, -122.657824],
  [45.50487, -122.657781],
  [45.504872, -122.658726],
  [45.505641, -122.658715],
  [45.505756, -122.658721],
  [45.505797, -122.658727],
  [45.505843, -122.65874],
  [45.505883, -122.658764],
  [45.505904, -122.65878],
  [45.505924, -122.6588],
  [45.505972, -122.658869],
  [45.506034, -122.658988],
  [45.506102, -122.659132],
  [45.50619, -122.659327],
  [45.506244, -122.659466],
  [45.506302, -122.659623],
  [45.506355, -122.659793],
  [45.5064, -122.659952],
  [45.506436, -122.660088],
  [45.506468, -122.660229],
  [45.506494, -122.660361],
  [45.506519, -122.66052],
  [45.506536, -122.660656],
  [45.506538, -122.660778],
  [45.50655, -122.660903],
  [45.506557, -122.661016],
  [45.506555, -122.66114],
  [45.506555, -122.661603],
  [45.50655, -122.661827],
  [45.506549, -122.661931],
  [45.506548, -122.662057],
  [45.506549, -122.662144],
  [45.506559, -122.663156],
  [45.506561, -122.663417],
  [45.506567, -122.663783],
  [45.506576, -122.663822],
  [45.506592, -122.66391],
  [45.506595, -122.663941],
  [45.506597, -122.664129],
  [45.506591, -122.664255],
  [45.506585, -122.664311],
  [45.506571, -122.664392],
  [45.506545, -122.664507],
  [45.506525, -122.66457],
  [45.506492, -122.664646],
  [45.506469, -122.664696],
  [45.506451, -122.664733],
  [45.506413, -122.664794],
  [45.506354, -122.664885],
  [45.506219, -122.665094],
  [45.506047, -122.665358],
  [45.5058, -122.665734],
  [45.505517, -122.666168],
  [45.505244, -122.66659],
  [45.504925, -122.667076],
  [45.50463, -122.667526],
  [45.504033, -122.668444],
  [45.503675, -122.668996],
  [45.503477, -122.669294],
  [45.503427, -122.669371],
  [45.503389, -122.669432],
  [45.50337, -122.669467],
  [45.503345, -122.669515],
  [45.503307, -122.669596],
  [45.503269, -122.669684],
  [45.50323, -122.669781],
  [45.503194, -122.669876],
  [45.503165, -122.669956],
  [45.503146, -122.670005],
  [45.503114, -122.670102],
  [45.503094, -122.670157],
  [45.503045, -122.670287],
  [45.502991, -122.670428],
  [45.502956, -122.670539],
  [45.502891, -122.670754],
  [45.502587, -122.671772],
  [45.502534, -122.671949],
  [45.502512, -122.67203],
  [45.502524, -122.672091],
  [45.502525, -122.67215],
  [45.50253, -122.6723],
  [45.502532, -122.672329],
  [45.502533, -122.672351],
  [45.502537, -122.672403],
  [45.502543, -122.67245],
  [45.50255, -122.672499],
  [45.502557, -122.672534],
  [45.502567, -122.672572],
  [45.502584, -122.672617],
  [45.502605, -122.67266],
  [45.502652, -122.672737],
  [45.50268, -122.672776],
  [45.502704, -122.672804],
  [45.502727, -122.67282],
  [45.502745, -122.672832],
  [45.502763, -122.672843],
  [45.502811, -122.672868],
  [45.503309, -122.67312],
  [45.503599, -122.673254],
  [45.50396, -122.673428],
  [45.504122, -122.673513],
  [45.504248, -122.673578],
  [45.504322, -122.673621],
  [45.504408, -122.673671],
  [45.504654, -122.673821],
  [45.504736, -122.673873],
  [45.504826, -122.673928],
  [45.505003, -122.674038],
  [45.505106, -122.674108],
  [45.505168, -122.674154],
  [45.505243, -122.67422],
  [45.505279, -122.67425],
  [45.505314, -122.674281],
  [45.505353, -122.67432],
  [45.505595, -122.674577],
  [45.505626, -122.674613],
  [45.505699, -122.67469],
  [45.505789, -122.674772],
  [45.505829, -122.674806],
  [45.505913, -122.674872],
  [45.505984, -122.674921],
  [45.506017, -122.674941],
  [45.506055, -122.674963],
  [45.506115, -122.674995],
  [45.506208, -122.675041],
  [45.506258, -122.675066],
  [45.50666, -122.675249],
  [45.506689, -122.675263],
  [45.506744, -122.675287],
  [45.506839, -122.675322],
  [45.506875, -122.675335],
  [45.506978, -122.675367],
  [45.507023, -122.675379],
  [45.507286, -122.675456],
  [45.507365, -122.675482],
  [45.507396, -122.675494],
  [45.507468, -122.675529],
  [45.507509, -122.675551],
  [45.507541, -122.675572],
  [45.507579, -122.675601],
  [45.507615, -122.675631],
  [45.507649, -122.675662],
  [45.507674, -122.675689],
  [45.507709, -122.675727],
  [45.507749, -122.675778],
  [45.507779, -122.675821],
  [45.507802, -122.675858],
  [45.507832, -122.67591],
  [45.507854, -122.675952],
  [45.507871, -122.675987],
  [45.507916, -122.676091],
  [45.50796, -122.676237],
  [45.507971, -122.676285],
  [45.507981, -122.676335],
  [45.507991, -122.676399],
  [45.507997, -122.676444],
  [45.508003, -122.676507],
  [45.508007, -122.676563],
  [45.508009, -122.676597],
  [45.508012, -122.676665],
  [45.508013, -122.676719],
  [45.508013, -122.676814],
  [45.508015, -122.677379],
  [45.508016, -122.677398],
  [45.508031, -122.677501],
  [45.508048, -122.677615],
  [45.508054, -122.678372],
  [45.508052, -122.678506],
  [45.508046, -122.678589],
  [45.508036, -122.678743],
  [45.508023, -122.678889],
  [45.508008, -122.679112],
  [45.507997, -122.679473],
  [45.507995, -122.679532],
  [45.507993, -122.679704],
  [45.507993, -122.679784],
  [45.507994, -122.679949],
  [45.507993, -122.680282],
  [45.50799, -122.680433],
  [45.508006, -122.680972],
  [45.508009, -122.681107],
  [45.508016, -122.681251],
  [45.508028, -122.681387],
  [45.508045, -122.681545],
  [45.508074, -122.681721],
  [45.508087, -122.68178],
  [45.508101, -122.681855],
  [45.508114, -122.681926],
  [45.50817, -122.681926],
  [45.508305, -122.681922],
  [45.508533, -122.681895],
  [45.508625, -122.681881],
  [45.50873, -122.681846],
  [45.508839, -122.681806],
  [45.508985, -122.681734],
  [45.509022, -122.681714],
  [45.509141, -122.68165],
  [45.509202, -122.681615],
  [45.509511, -122.681447],
  [45.5098, -122.681296],
  [45.509868, -122.681258],
  [45.509956, -122.68159],
  [45.510029, -122.681865],
  [45.510094, -122.682109],
  [45.510133, -122.682253],
  [45.510142, -122.682289],
  [45.510394, -122.683237],
  [45.510415, -122.683313],
  [45.510743, -122.683134],
  [45.510813, -122.683097],
  [45.511078, -122.682953],
  [45.511684, -122.682625],
  [45.511759, -122.682585],
  [45.512378, -122.682249],
  [45.512415, -122.682229],
  [45.51293, -122.68195],
  [45.512963, -122.681932],
  [45.513078, -122.68187],
  [45.513111, -122.681852],
  [45.513413, -122.681689],
  [45.513748, -122.681507],
  [45.514291, -122.681213],
  [45.514298, -122.681209],
  [45.514415, -122.681146],
  [45.515072, -122.68079],
  [45.515744, -122.680426],
  [45.515808, -122.680391],
  [45.516359, -122.680124],
  [45.516423, -122.680091],
  [45.516492, -122.680049],
  [45.517036, -122.679756],
  [45.517087, -122.67973],
  [45.517171, -122.679685],
  [45.517636, -122.679431],
  [45.517691, -122.679401],
  [45.51775, -122.679367],
  [45.517829, -122.679321],
  [45.518361, -122.679025],
  [45.518406, -122.679004],
  [45.518432, -122.678987],
  [45.518466, -122.67897],
  [45.519024, -122.67868],
  [45.51907, -122.678655],
  [45.519096, -122.678641],
  [45.519151, -122.678611],
  [45.519656, -122.678345],
  [45.519751, -122.678297],
  [45.519811, -122.678266],
  [45.520361, -122.677963],
  [45.520421, -122.677932],
  [45.520477, -122.677904],
  [45.520962, -122.677635],
  [45.521016, -122.677604],
  [45.521084, -122.677569],
  [45.521685, -122.677242],
  [45.521751, -122.677205],
  [45.521828, -122.677162],
  [45.522399, -122.676848],
  [45.522446, -122.676775],
  [45.522939, -122.676511],
  [45.523003, -122.676486],
  [45.523068, -122.676468],
  [45.523122, -122.676459],
  [45.52319, -122.676451],
  [45.523722, -122.676473],
  [45.523777, -122.676474],
  [45.523839, -122.676474],
  [45.524491, -122.676497],
  [45.525135, -122.676527],
  [45.525203, -122.676534],
  [45.525274, -122.676541],
  [45.525723, -122.676556],
  [45.525858, -122.67656],
  [45.525911, -122.676558],
  [45.525976, -122.676556],
  [45.526561, -122.676573],
  [45.526631, -122.676576],
  [45.526699, -122.676579],
  [45.527339, -122.676601],
  [45.527398, -122.676603],
  [45.527886, -122.676648],
  [45.527992, -122.676641],
  [45.528053, -122.676628],
  [45.528043, -122.676541],
  [45.528044, -122.676462],
  [45.528053, -122.676352],
  [45.528069, -122.675736],
  [45.528066, -122.675676],
  [45.528047, -122.675584],
  [45.527963, -122.675576],
  [45.527693, -122.675564]
];

const stopNames = {
  "1316": "NW Division &amp; Civic Dr",
  "1332": "NW Division &amp; Eastman Parkway",
  "1334": "NW Division &amp; Eastwood Ave",
  "1360": "SE Division &amp; 101st Ave",
  "1381": "SE Division &amp; 122nd Ave",
  "1387": "SE Division &amp; 130th Ave",
  "1390": "SE Division &amp; 135th Ave",
  "1396": "SE Division &amp; 142nd Ave",
  "1416": "SE Division &amp; 162nd Ave",
  "1423": "SE Division &amp; 174th Ave",
  "1442": "SE Division &amp; 26th Ave",
  "1448": "SE Division &amp; 30th Ave",
  "1452": "SE Division &amp; 34th Ave",
  "1459": "SE Division &amp; Cesar Chavez Blvd",
  "1482": "SE Division &amp; 67th Ave",
  "1499": "SE Division &amp; 82nd Ave",
  "1501": "SE Division &amp; 85th Ave",
  "3007": "NW Irving &amp; 5th",
  "3398": "SW Lincoln &amp; 1st",
  "7797": "SW 6th &amp; Harvey Milk",
  "7800": "SW 6th &amp; Taylor",
  "9263": "SE Division &amp; 148th Ave",
  "9300": "NW 6th &amp; Flanders",
  "9302": "NW 5th &amp; Hoyt",
  "9425": "NW Division &amp; Angeline Ave",
  "10613": "SE Division &amp; 43rd Ave",
  "11486": "SW 6th &amp; Columbia",
  "13298": "SE Division &amp; SE Division St MAX Station",
  "13733": "South Waterfront/S Moody",
  "13773": "OMSI/SE Water",
  "13780": "SW Hall &amp; 5th",
  "14232": "Cleveland Ave Park &amp; Ride",
  "14233": "Gresham Central Transit Center",
  "14235": "18000 Block SE Division",
  "14236": "SE Division &amp; 168th Ave",
  "14237": "SE Division &amp; 157th Ave",
  "14238": "SE Division &amp; 116th Ave",
  "14239": "11100 Block SE Division",
  "14240": "SE Division &amp; 75th Ave",
  "14241": "SE Division &amp; 59th Ave",
  "14242": "SE Division &amp; 51st Ave",
  "14243": "SE Division &amp; 20th Ave",
  "14244": "SE Division &amp; 11th Ave"
};

const stops = [
  { stop_id: "14232", name: "Cleveland Ave Park &amp; Ride", lat: 45.503106, lon: -122.418964, times: ["9:18 AM", "9:29 AM", "9:40 AM", "9:52 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:41 AM"] },
  { stop_id: "14233", name: "Gresham Central Transit Center", lat: 45.503543, lon: -122.426109, times: ["9:21 AM", "9:32 AM", "9:43 AM", "9:55 AM", "10:07 AM", "10:19 AM", "10:31 AM", "10:44 AM"] },
  { stop_id: "1332", name: "NW Division &amp; Eastman Parkway", lat: 45.504578, lon: -122.434694, times: ["9:10 AM", "9:22 AM", "9:33 AM", "9:44 AM", "9:56 AM", "10:08 AM", "10:20 AM", "10:32 AM"] },
  { stop_id: "1316", name: "NW Division &amp; Civic Dr", lat: 45.504618, lon: -122.441835, times: ["9:11 AM", "9:23 AM", "9:34 AM", "9:45 AM", "9:57 AM", "10:09 AM", "10:21 AM", "10:33 AM"] },
  { stop_id: "9425", name: "NW Division &amp; Angeline Ave", lat: 45.504573, lon: -122.449019, times: ["9:12 AM", "9:24 AM", "9:35 AM", "9:46 AM", "9:58 AM", "10:10 AM", "10:22 AM", "10:34 AM"] },
  { stop_id: "1334", name: "NW Division &amp; Eastwood Ave", lat: 45.504572, lon: -122.462292, times: ["9:14 AM", "9:26 AM", "9:37 AM", "9:48 AM", "10:00 AM", "10:12 AM", "10:24 AM", "10:36 AM"] },
  { stop_id: "14235", name: "18000 Block SE Division", lat: 45.504692, lon: -122.477085, times: ["9:17 AM", "9:29 AM", "9:40 AM", "9:51 AM", "10:03 AM", "10:15 AM", "10:27 AM", "10:39 AM"] },
  { stop_id: "1423", name: "SE Division &amp; 174th Ave", lat: 45.504699, lon: -122.484379, times: ["9:18 AM", "9:30 AM", "9:41 AM", "9:52 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "14236", name: "SE Division &amp; 168th Ave", lat: 45.504701, lon: -122.490105, times: ["9:19 AM", "9:31 AM", "9:42 AM", "9:53 AM", "10:05 AM", "10:17 AM", "10:29 AM", "10:41 AM"] },
  { stop_id: "1416", name: "SE Division &amp; 162nd Ave", lat: 45.504694, lon: -122.496144, times: ["9:20 AM", "9:32 AM", "9:43 AM", "9:54 AM", "10:06 AM", "10:18 AM", "10:30 AM", "10:42 AM"] },
  { stop_id: "14237", name: "SE Division &amp; 157th Ave", lat: 45.504523, lon: -122.502125, times: ["9:21 AM", "9:33 AM", "9:44 AM", "9:55 AM", "10:07 AM", "10:19 AM", "10:31 AM", "10:43 AM"] },
  { stop_id: "9263", name: "SE Division &amp; 148th Ave", lat: 45.504343, lon: -122.51018, times: ["9:10 AM", "9:22 AM", "9:34 AM", "9:45 AM", "9:56 AM", "10:08 AM", "10:20 AM", "10:32 AM"] },
  { stop_id: "1396", name: "SE Division &amp; 142nd Ave", lat: 45.504233, lon: -122.516993, times: ["9:11 AM", "9:23 AM", "9:35 AM", "9:46 AM", "9:57 AM", "10:09 AM", "10:21 AM", "10:33 AM"] },
  { stop_id: "1390", name: "SE Division &amp; 135th Ave", lat: 45.504167, lon: -122.525128, times: ["9:13 AM", "9:25 AM", "9:37 AM", "9:48 AM", "9:59 AM", "10:11 AM", "10:23 AM", "10:35 AM"] },
  { stop_id: "1387", name: "SE Division &amp; 130th Ave", lat: 45.50417, lon: -122.529723, times: ["9:14 AM", "9:26 AM", "9:38 AM", "9:49 AM", "10:00 AM", "10:12 AM", "10:24 AM", "10:36 AM"] },
  { stop_id: "1381", name: "SE Division &amp; 122nd Ave", lat: 45.504219, lon: -122.538383, times: ["9:16 AM", "9:28 AM", "9:40 AM", "9:51 AM", "10:02 AM", "10:14 AM", "10:26 AM", "10:38 AM"] },
  { stop_id: "14238", name: "SE Division &amp; 116th Ave", lat: 45.504276, lon: -122.54419, times: ["9:17 AM", "9:29 AM", "9:41 AM", "9:52 AM", "10:03 AM", "10:15 AM", "10:27 AM", "10:39 AM"] },
  { stop_id: "14239", name: "11100 Block SE Division", lat: 45.50432, lon: -122.548804, times: ["9:18 AM", "9:30 AM", "9:42 AM", "9:53 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "1360", name: "SE Division &amp; 101st Ave", lat: 45.504423, lon: -122.560019, times: ["9:20 AM", "9:32 AM", "9:44 AM", "9:55 AM", "10:07 AM", "10:19 AM", "10:31 AM", "10:43 AM"] },
  { stop_id: "13298", name: "SE Division &amp; SE Division St MAX Station", lat: 45.504577, lon: -122.567451, times: ["9:22 AM", "9:34 AM", "9:46 AM", "9:57 AM", "10:09 AM", "10:21 AM", "10:33 AM", "10:45 AM"] },
  { stop_id: "1501", name: "SE Division &amp; 85th Ave", lat: 45.504706, lon: -122.575383, times: ["9:11 AM", "9:24 AM", "9:36 AM", "9:48 AM", "9:59 AM", "10:11 AM", "10:23 AM", "10:35 AM"] },
  { stop_id: "1499", name: "SE Division &amp; 82nd Ave", lat: 45.505058, lon: -122.579137, times: ["9:12 AM", "9:25 AM", "9:37 AM", "9:49 AM", "10:00 AM", "10:12 AM", "10:24 AM", "10:36 AM"] },
  { stop_id: "14240", name: "SE Division &amp; 75th Ave", lat: 45.505466, lon: -122.586166, times: ["9:13 AM", "9:26 AM", "9:38 AM", "9:50 AM", "10:01 AM", "10:13 AM", "10:25 AM", "10:37 AM"] },
  { stop_id: "1482", name: "SE Division &amp; 67th Ave", lat: 45.505446, lon: -122.594449, times: ["9:15 AM", "9:27 AM", "9:39 AM", "9:51 AM", "10:02 AM", "10:14 AM", "10:26 AM", "10:38 AM"] },
  { stop_id: "14241", name: "SE Division &amp; 59th Ave", lat: 45.50541, lon: -122.602547, times: ["9:16 AM", "9:29 AM", "9:41 AM", "9:53 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "14242", name: "SE Division &amp; 51st Ave", lat: 45.505374, lon: -122.610346, times: ["9:18 AM", "9:30 AM", "9:42 AM", "9:54 AM", "10:05 AM", "10:17 AM", "10:29 AM", "10:41 AM"] },
  { stop_id: "10613", name: "SE Division &amp; 43rd Ave", lat: 45.505324, lon: -122.618403, times: ["9:20 AM", "9:32 AM", "9:44 AM", "9:56 AM", "10:07 AM", "10:19 AM", "10:31 AM", "10:43 AM"] },
  { stop_id: "1459", name: "SE Division &amp; Cesar Chavez Blvd", lat: 45.504846, lon: -122.62304, times: ["9:21 AM", "9:33 AM", "9:45 AM", "9:57 AM", "10:08 AM", "10:20 AM", "10:32 AM", "10:44 AM"] },
  { stop_id: "1452", name: "SE Division &amp; 34th Ave", lat: 45.504824, lon: -122.630064, times: ["9:10 AM", "9:22 AM", "9:34 AM", "9:46 AM", "9:58 AM", "10:09 AM", "10:21 AM", "10:33 AM"] },
  { stop_id: "1448", name: "SE Division &amp; 30th Ave", lat: 45.504842, lon: -122.634513, times: ["9:11 AM", "9:23 AM", "9:35 AM", "9:47 AM", "9:59 AM", "10:10 AM", "10:22 AM", "10:34 AM"] },
  { stop_id: "1442", name: "SE Division &amp; 26th Ave", lat: 45.504859, lon: -122.639912, times: ["9:12 AM", "9:24 AM", "9:36 AM", "9:48 AM", "10:00 AM", "10:12 AM", "10:24 AM", "10:36 AM"] },
  { stop_id: "14243", name: "SE Division &amp; 20th Ave", lat: 45.504888, lon: -122.645979, times: ["9:14 AM", "9:26 AM", "9:38 AM", "9:50 AM", "10:02 AM", "10:13 AM", "10:25 AM", "10:37 AM"] },
  { stop_id: "14244", name: "SE Division &amp; 11th Ave", lat: 45.504921, lon: -122.655159, times: ["9:16 AM", "9:28 AM", "9:40 AM", "9:52 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "13773", name: "OMSI/SE Water", lat: 45.506602, lon: -122.663155, times: ["9:19 AM", "9:31 AM", "9:43 AM", "9:55 AM", "10:07 AM", "10:19 AM", "10:31 AM", "10:43 AM"] },
  { stop_id: "13733", name: "South Waterfront/S Moody", lat: 45.502618, lon: -122.671791, times: ["9:10 AM", "9:22 AM", "9:34 AM", "9:46 AM", "9:58 AM", "10:10 AM", "10:22 AM", "10:34 AM"] },
  { stop_id: "3398", name: "SW Lincoln &amp; 1st", lat: 45.508043, lon: -122.679711, times: ["9:14 AM", "9:26 AM", "9:38 AM", "9:50 AM", "10:02 AM", "10:14 AM", "10:26 AM", "10:38 AM"] },
  { stop_id: "13780", name: "SW Hall &amp; 5th", lat: 45.510133, lon: -122.682088, times: ["9:16 AM", "9:28 AM", "9:40 AM", "9:52 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "11486", name: "SW 6th &amp; Columbia", lat: 45.514267, lon: -122.681095, times: ["9:18 AM", "9:30 AM", "9:42 AM", "9:54 AM", "10:06 AM", "10:18 AM", "10:30 AM", "10:42 AM"] },
  { stop_id: "7800", name: "SW 6th &amp; Taylor", lat: 45.517604, lon: -122.679316, times: ["9:20 AM", "9:32 AM", "9:44 AM", "9:56 AM", "10:08 AM", "10:20 AM", "10:32 AM", "10:44 AM"] },
  { stop_id: "7797", name: "SW 6th &amp; Harvey Milk", lat: 45.520931, lon: -122.677521, times: ["9:10 AM", "9:22 AM", "9:34 AM", "9:46 AM", "9:58 AM", "10:10 AM", "10:22 AM", "10:34 AM"] },
  { stop_id: "9300", name: "NW 6th &amp; Flanders", lat: 45.525725, lon: -122.676441, times: ["9:13 AM", "9:25 AM", "9:37 AM", "9:49 AM", "10:01 AM", "10:13 AM", "10:25 AM", "10:37 AM"] },
  { stop_id: "9302", name: "NW 5th &amp; Hoyt", lat: 45.527692, lon: -122.67563, times: ["9:16 AM", "9:28 AM", "9:40 AM", "9:52 AM", "10:04 AM", "10:16 AM", "10:28 AM", "10:40 AM"] },
  { stop_id: "3007", name: "NW Irving &amp; 5th", lat: 45.528015, lon: -122.675854, times: ["11:52 AM", "5:03 PM", "7:45 AM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>