<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 87 - To Gateway Transit Center | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-87-dir1-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 87 - To Gateway Transit Center</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 87;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.489702, -122.473393],
  [45.489663, -122.473206],
  [45.489646, -122.47311],
  [45.489588, -122.473137],
  [45.489493, -122.473179],
  [45.489437, -122.473182],
  [45.488982, -122.473447],
  [45.488992, -122.474353],
  [45.488966, -122.474536],
  [45.488938, -122.474692],
  [45.488884, -122.47496],
  [45.488832, -122.475207],
  [45.488802, -122.475345],
  [45.48875, -122.475536],
  [45.48886, -122.475535],
  [45.489145, -122.475536],
  [45.489277, -122.475536],
  [45.489647, -122.475537],
  [45.490309, -122.475543],
  [45.490393, -122.475476],
  [45.490487, -122.475476],
  [45.490755, -122.475478],
  [45.491003, -122.47548],
  [45.491405, -122.475483],
  [45.491546, -122.47555],
  [45.491675, -122.475551],
  [45.491769, -122.475551],
  [45.492332, -122.475555],
  [45.492878, -122.475558],
  [45.493005, -122.475559],
  [45.493682, -122.475561],
  [45.494457, -122.475565],
  [45.494748, -122.475566],
  [45.494914, -122.475567],
  [45.495158, -122.475569],
  [45.495521, -122.475571],
  [45.495625, -122.475572],
  [45.496715, -122.475576],
  [45.496757, -122.475547],
  [45.496804, -122.475514],
  [45.497249, -122.475514],
  [45.497335, -122.475582],
  [45.497385, -122.475583],
  [45.497648, -122.475584],
  [45.49812, -122.475588],
  [45.499279, -122.475595],
  [45.500283, -122.475601],
  [45.500597, -122.475602],
  [45.500886, -122.475603],
  [45.50114, -122.475604],
  [45.501506, -122.475607],
  [45.502185, -122.475608],
  [45.502662, -122.475613],
  [45.502734, -122.475614],
  [45.5034, -122.475618],
  [45.503826, -122.47562],
  [45.50457, -122.475624],
  [45.504688, -122.475625],
  [45.505313, -122.475633],
  [45.506076, -122.475643],
  [45.506915, -122.475654],
  [45.507382, -122.47566],
  [45.507873, -122.475666],
  [45.508163, -122.475669],
  [45.508201, -122.47567],
  [45.509127, -122.475682],
  [45.50959, -122.475689],
  [45.510393, -122.4757],
  [45.510489, -122.475701],
  [45.51158, -122.475711],
  [45.511947, -122.475717],
  [45.512308, -122.475722],
  [45.512553, -122.475725],
  [45.512628, -122.475726],
  [45.513035, -122.475731],
  [45.513661, -122.475742],
  [45.514352, -122.47575],
  [45.514504, -122.475751],
  [45.51462, -122.475756],
  [45.514834, -122.475755],
  [45.514953, -122.47576],
  [45.515012, -122.475762],
  [45.515122, -122.475778],
  [45.515224, -122.4758],
  [45.515332, -122.475836],
  [45.515437, -122.47588],
  [45.51552, -122.475927],
  [45.51559, -122.475964],
  [45.515696, -122.47604],
  [45.515763, -122.476092],
  [45.515845, -122.476167],
  [45.515969, -122.476281],
  [45.516073, -122.476375],
  [45.516194, -122.476465],
  [45.516282, -122.476527],
  [45.516398, -122.476588],
  [45.516503, -122.47663],
  [45.516619, -122.476667],
  [45.516803, -122.476708],
  [45.51789, -122.476946],
  [45.518472, -122.477072],
  [45.518689, -122.47712],
  [45.518788, -122.477138],
  [45.518932, -122.477156],
  [45.519007, -122.47716],
  [45.519162, -122.477161],
  [45.519305, -122.477161],
  [45.519371, -122.47716],
  [45.519783, -122.477155],
  [45.519859, -122.477154],
  [45.520549, -122.477143],
  [45.521217, -122.477135],
  [45.5215, -122.477131],
  [45.521842, -122.477127],
  [45.52191, -122.477127],
  [45.521997, -122.477126],
  [45.522017, -122.477126],
  [45.522036, -122.477126],
  [45.5221, -122.477125],
  [45.522164, -122.477125],
  [45.522391, -122.477121],
  [45.522442, -122.47712],
  [45.522663, -122.477118],
  [45.523749, -122.477102],
  [45.524371, -122.477095],
  [45.524474, -122.477094],
  [45.525005, -122.477087],
  [45.525616, -122.477078],
  [45.525754, -122.477075],
  [45.526292, -122.477066],
  [45.526411, -122.477067],
  [45.526515, -122.477068],
  [45.526816, -122.477064],
  [45.526826, -122.477064],
  [45.526947, -122.477062],
  [45.527001, -122.477062],
  [45.527049, -122.477061],
  [45.527515, -122.477055],
  [45.527649, -122.477053],
  [45.527721, -122.477053],
  [45.528105, -122.477048],
  [45.528182, -122.477047],
  [45.528847, -122.477039],
  [45.529556, -122.47703],
  [45.529673, -122.477035],
  [45.529759, -122.477043],
  [45.529913, -122.477059],
  [45.530014, -122.477073],
  [45.530117, -122.477094],
  [45.530428, -122.477174],
  [45.53054, -122.4772],
  [45.530615, -122.477216],
  [45.530746, -122.47724],
  [45.53087, -122.477257],
  [45.530982, -122.477266],
  [45.531094, -122.47727],
  [45.531251, -122.47727],
  [45.53172, -122.477267],
  [45.531733, -122.477267],
  [45.532579, -122.47727],
  [45.532894, -122.477271],
  [45.533671, -122.477278],
  [45.53406, -122.477275],
  [45.534109, -122.477275],
  [45.534373, -122.477273],
  [45.534555, -122.477272],
  [45.534587, -122.477271],
  [45.534699, -122.477272],
  [45.535082, -122.477272],
  [45.535483, -122.477271],
  [45.535778, -122.47727],
  [45.536664, -122.477265],
  [45.536928, -122.477263],
  [45.537, -122.477263],
  [45.537108, -122.477265],
  [45.5373, -122.477197],
  [45.538455, -122.477191],
  [45.538898, -122.477194],
  [45.539489, -122.477193],
  [45.539764, -122.477192],
  [45.539787, -122.477192],
  [45.540027, -122.477204],
  [45.540175, -122.477185],
  [45.54032, -122.477193],
  [45.540418, -122.477288],
  [45.540713, -122.477305],
  [45.540851, -122.477308],
  [45.541175, -122.47731],
  [45.541797, -122.477317],
  [45.542403, -122.477316],
  [45.542599, -122.477317],
  [45.542826, -122.477318],
  [45.543166, -122.477312],
  [45.543734, -122.477308],
  [45.544033, -122.477308],
  [45.544249, -122.477306],
  [45.544345, -122.477305],
  [45.544747, -122.477296],
  [45.5451, -122.477282],
  [45.545435, -122.477261],
  [45.545708, -122.47723],
  [45.545819, -122.477217],
  [45.545961, -122.477195],
  [45.546147, -122.477092],
  [45.546495, -122.47706],
  [45.546793, -122.477039],
  [45.546854, -122.477037],
  [45.546955, -122.477035],
  [45.54718, -122.477025],
  [45.547341, -122.477095],
  [45.547657, -122.477092],
  [45.549461, -122.477089],
  [45.549579, -122.477035],
  [45.549888, -122.477029],
  [45.550037, -122.477024],
  [45.550297, -122.477022],
  [45.550621, -122.477023],
  [45.550747, -122.477028],
  [45.550879, -122.477043],
  [45.550998, -122.477067],
  [45.551085, -122.477088],
  [45.551223, -122.47713],
  [45.551379, -122.477193],
  [45.551495, -122.47725],
  [45.551583, -122.477299],
  [45.55168, -122.477357],
  [45.551759, -122.477409],
  [45.551851, -122.477477],
  [45.551926, -122.477535],
  [45.552035, -122.477633],
  [45.552121, -122.477714],
  [45.552238, -122.477839],
  [45.552352, -122.477973],
  [45.552441, -122.478091],
  [45.55256, -122.478267],
  [45.552652, -122.478417],
  [45.552726, -122.478557],
  [45.552809, -122.478721],
  [45.552914, -122.47897],
  [45.553003, -122.479215],
  [45.55308, -122.479471],
  [45.553146, -122.479754],
  [45.553183, -122.479964],
  [45.553201, -122.48009],
  [45.553219, -122.480244],
  [45.553231, -122.480378],
  [45.553246, -122.480619],
  [45.553254, -122.480828],
  [45.553253, -122.480982],
  [45.553252, -122.481158],
  [45.553253, -122.481495],
  [45.553253, -122.482498],
  [45.553253, -122.482879],
  [45.553254, -122.483816],
  [45.553245, -122.484496],
  [45.553241, -122.484814],
  [45.553242, -122.485087],
  [45.553243, -122.485407],
  [45.553256, -122.486053],
  [45.553256, -122.487503],
  [45.553263, -122.487653],
  [45.553274, -122.487816],
  [45.553295, -122.488007],
  [45.553318, -122.488155],
  [45.553356, -122.48835],
  [45.553379, -122.488444],
  [45.553404, -122.488544],
  [45.553405, -122.488734],
  [45.553473, -122.488925],
  [45.55352, -122.489047],
  [45.553587, -122.489197],
  [45.553668, -122.489355],
  [45.55377, -122.48953],
  [45.553935, -122.48977],
  [45.55401, -122.489864],
  [45.55403, -122.48989],
  [45.554139, -122.490012],
  [45.554233, -122.490032],
  [45.554452, -122.49028],
  [45.554614, -122.490474],
  [45.55493, -122.490844],
  [45.555044, -122.490973],
  [45.555176, -122.491132],
  [45.555315, -122.491317],
  [45.555422, -122.491463],
  [45.5555, -122.491587],
  [45.555579, -122.491722],
  [45.55568, -122.491914],
  [45.555768, -122.492105],
  [45.555814, -122.492336],
  [45.555865, -122.492483],
  [45.555929, -122.492666],
  [45.555985, -122.49285],
  [45.556058, -122.492926],
  [45.556114, -122.493142],
  [45.556213, -122.493598],
  [45.556291, -122.493958],
  [45.556427, -122.494589],
  [45.556509, -122.494966],
  [45.556499, -122.49515],
  [45.55653, -122.495294],
  [45.556758, -122.496348],
  [45.556825, -122.496427],
  [45.55692, -122.496866],
  [45.557072, -122.497572],
  [45.557061, -122.497754],
  [45.557188, -122.49834],
  [45.557309, -122.498904],
  [45.557537, -122.499948],
  [45.557551, -122.500012],
  [45.557601, -122.500232],
  [45.557706, -122.500501],
  [45.557889, -122.501335],
  [45.558138, -122.502395],
  [45.558319, -122.503167],
  [45.558576, -122.504261],
  [45.55863, -122.504496],
  [45.558621, -122.504676],
  [45.558806, -122.505465],
  [45.558983, -122.506219],
  [45.559054, -122.506305],
  [45.559258, -122.507172],
  [45.55924, -122.50732],
  [45.559327, -122.507698],
  [45.559357, -122.507829],
  [45.559424, -122.507891],
  [45.559476, -122.508105],
  [45.559511, -122.508269],
  [45.559542, -122.508453],
  [45.559565, -122.508619],
  [45.559582, -122.508781],
  [45.559594, -122.509],
  [45.559596, -122.50923],
  [45.559595, -122.509449],
  [45.559594, -122.50988],
  [45.559594, -122.510093],
  [45.559594, -122.510299],
  [45.559595, -122.510501],
  [45.559594, -122.512371],
  [45.559542, -122.5125],
  [45.559545, -122.512911],
  [45.559549, -122.513199],
  [45.559604, -122.513288],
  [45.559618, -122.513462],
  [45.559639, -122.513633],
  [45.55967, -122.513818],
  [45.559708, -122.513997],
  [45.559747, -122.514151],
  [45.559784, -122.514276],
  [45.559827, -122.514407],
  [45.559873, -122.514527],
  [45.559914, -122.514634],
  [45.560013, -122.514846],
  [45.560142, -122.515101],
  [45.560507, -122.515822],
  [45.560581, -122.51597],
  [45.560624, -122.516055],
  [45.561041, -122.516878],
  [45.561576, -122.51794],
  [45.561649, -122.518103],
  [45.561715, -122.518271],
  [45.561767, -122.518421],
  [45.561804, -122.51854],
  [45.561837, -122.518661],
  [45.561864, -122.518767],
  [45.561914, -122.519018],
  [45.561941, -122.519203],
  [45.561961, -122.519382],
  [45.561969, -122.519484],
  [45.561978, -122.519665],
  [45.56198, -122.520794],
  [45.56198, -122.520888],
  [45.56198, -122.521144],
  [45.56198, -122.521888],
  [45.561981, -122.522078],
  [45.561985, -122.522257],
  [45.562003, -122.522603],
  [45.561962, -122.522745],
  [45.561966, -122.522788],
  [45.561985, -122.523026],
  [45.562013, -122.52327],
  [45.562048, -122.523549],
  [45.562093, -122.523853],
  [45.562113, -122.523985],
  [45.562219, -122.524667],
  [45.562293, -122.525129],
  [45.56238, -122.525671],
  [45.562464, -122.526141],
  [45.562558, -122.526608],
  [45.562763, -122.527627],
  [45.562781, -122.527714],
  [45.562851, -122.528086],
  [45.562867, -122.528112],
  [45.562949, -122.528244],
  [45.563012, -122.528457],
  [45.563087, -122.528656],
  [45.563159, -122.528825],
  [45.563228, -122.528967],
  [45.563309, -122.529117],
  [45.563409, -122.529271],
  [45.563498, -122.529394],
  [45.563576, -122.529493],
  [45.563754, -122.52968],
  [45.563795, -122.529804],
  [45.563957, -122.52995],
  [45.564026, -122.530018],
  [45.564099, -122.530096],
  [45.564189, -122.530109],
  [45.564287, -122.530234],
  [45.564412, -122.530414],
  [45.564502, -122.530562],
  [45.564542, -122.530637],
  [45.564557, -122.530786],
  [45.564616, -122.530915],
  [45.564662, -122.531028],
  [45.564725, -122.531198],
  [45.564779, -122.531353],
  [45.564906, -122.531717],
  [45.564969, -122.531899],
  [45.565029, -122.532068],
  [45.565198, -122.532544],
  [45.565305, -122.532648],
  [45.565384, -122.532874],
  [45.565411, -122.532948],
  [45.565563, -122.533365],
  [45.565605, -122.533485],
  [45.565658, -122.533636],
  [45.565725, -122.533818],
  [45.565785, -122.533974],
  [45.565852, -122.534125],
  [45.565905, -122.534234],
  [45.56598, -122.534376],
  [45.566064, -122.534505],
  [45.566215, -122.534723],
  [45.566306, -122.534835],
  [45.566315, -122.534958],
  [45.566426, -122.535091],
  [45.566555, -122.535256],
  [45.566647, -122.53538],
  [45.566741, -122.535518],
  [45.566837, -122.535678],
  [45.566922, -122.535841],
  [45.567004, -122.536025],
  [45.567107, -122.536111],
  [45.567211, -122.536359],
  [45.567255, -122.536506],
  [45.567308, -122.536692],
  [45.567354, -122.536892],
  [45.567378, -122.537035],
  [45.567403, -122.537199],
  [45.567425, -122.53746],
  [45.567436, -122.537661],
  [45.567437, -122.53787],
  [45.56743, -122.53809],
  [45.567419, -122.538248],
  [45.567407, -122.538364],
  [45.567383, -122.53855],
  [45.567328, -122.538866],
  [45.567187, -122.539641],
  [45.567105, -122.540088],
  [45.567063, -122.540341],
  [45.566993, -122.540463],
  [45.566968, -122.540655],
  [45.56695, -122.540849],
  [45.566948, -122.540892],
  [45.566941, -122.541043],
  [45.566939, -122.541241],
  [45.566942, -122.541412],
  [45.566951, -122.541626],
  [45.566961, -122.541724],
  [45.566969, -122.541801],
  [45.567, -122.542023],
  [45.567035, -122.542213],
  [45.567079, -122.542396],
  [45.567117, -122.542532],
  [45.567181, -122.542743],
  [45.567202, -122.542814],
  [45.567281, -122.543013],
  [45.567353, -122.543177],
  [45.567458, -122.543399],
  [45.567599, -122.543647],
  [45.567844, -122.544088],
  [45.567962, -122.544306],
  [45.567831, -122.544412],
  [45.567774, -122.544484],
  [45.567735, -122.544551],
  [45.567707, -122.544612],
  [45.567685, -122.544681],
  [45.567668, -122.544766],
  [45.567664, -122.544844],
  [45.567667, -122.544924],
  [45.567682, -122.545013],
  [45.567705, -122.545083],
  [45.567735, -122.545154],
  [45.56777, -122.545204],
  [45.567821, -122.54526],
  [45.567925, -122.545366],
  [45.567982, -122.54544],
  [45.568021, -122.545504],
  [45.568057, -122.545575],
  [45.568086, -122.545648],
  [45.568117, -122.545737],
  [45.568139, -122.545823],
  [45.568157, -122.545915],
  [45.568166, -122.546003],
  [45.568168, -122.546062],
  [45.568171, -122.546161],
  [45.568174, -122.546452],
  [45.568178, -122.546737],
  [45.568181, -122.547169],
  [45.568182, -122.547438],
  [45.568186, -122.548042],
  [45.568187, -122.548246],
  [45.568186, -122.548388],
  [45.568186, -122.549097],
  [45.568187, -122.549908],
  [45.568187, -122.551189],
  [45.568187, -122.551678],
  [45.568186, -122.551696],
  [45.568182, -122.551802],
  [45.568171, -122.551887],
  [45.568151, -122.551966],
  [45.568137, -122.552009],
  [45.568112, -122.552076],
  [45.568062, -122.552177],
  [45.567995, -122.552292],
  [45.567542, -122.553005],
  [45.567491, -122.553089],
  [45.567356, -122.553313],
  [45.567184, -122.553592],
  [45.567099, -122.553718],
  [45.566979, -122.55389],
  [45.566918, -122.553973],
  [45.566793, -122.554131],
  [45.566593, -122.554378],
  [45.566485, -122.554507],
  [45.566426, -122.554566],
  [45.566361, -122.554621],
  [45.566303, -122.554663],
  [45.566243, -122.55469],
  [45.56617, -122.554709],
  [45.566089, -122.554717],
  [45.565969, -122.554721],
  [45.56531, -122.554716],
  [45.565297, -122.554716],
  [45.564516, -122.554721],
  [45.564275, -122.554722],
  [45.564224, -122.554722],
  [45.563929, -122.554724],
  [45.563005, -122.554728],
  [45.56238, -122.55473],
  [45.562226, -122.55473],
  [45.562082, -122.55473],
  [45.561706, -122.554731],
  [45.561573, -122.55473],
  [45.560229, -122.554723],
  [45.560208, -122.554723],
  [45.55991, -122.554727],
  [45.559705, -122.554733],
  [45.558983, -122.554738],
  [45.558875, -122.55473],
  [45.558747, -122.554728],
  [45.558535, -122.554728],
  [45.558184, -122.554728],
  [45.557196, -122.554725],
  [45.556699, -122.554724],
  [45.55635, -122.554724],
  [45.555387, -122.554733],
  [45.555387, -122.555207],
  [45.555388, -122.555408],
  [45.55539, -122.556082],
  [45.555389, -122.556304],
  [45.55539, -122.557004],
  [45.555391, -122.557623],
  [45.555389, -122.557775],
  [45.555388, -122.557924],
  [45.555386, -122.558487],
  [45.555386, -122.558508],
  [45.555385, -122.55864],
  [45.555385, -122.55882],
  [45.555385, -122.558906],
  [45.555386, -122.559188],
  [45.555386, -122.559292],
  [45.555384, -122.55973],
  [45.555383, -122.560143],
  [45.555384, -122.560814],
  [45.555382, -122.561416],
  [45.55538, -122.561851],
  [45.555379, -122.562336],
  [45.555379, -122.562836],
  [45.55538, -122.56373],
  [45.55538, -122.563874],
  [45.555384, -122.564886],
  [45.555385, -122.565371],
  [45.555387, -122.565698],
  [45.555388, -122.566062],
  [45.555388, -122.56628],
  [45.555391, -122.567505],
  [45.555391, -122.567652],
  [45.555391, -122.567766],
  [45.555394, -122.56823],
  [45.555651, -122.568231],
  [45.55613, -122.568232],
  [45.556543, -122.568234],
  [45.556583, -122.568241],
  [45.556663, -122.568269],
  [45.556821, -122.567883],
  [45.556924, -122.567621],
  [45.55696, -122.567528],
  [45.557131, -122.567108],
  [45.557598, -122.565933],
  [45.557792, -122.565434],
  [45.557894, -122.565169],
  [45.558138, -122.564539],
  [45.558332, -122.564046],
  [45.558367, -122.563954],
  [45.558582, -122.564109],
  [45.558747, -122.564229],
  [45.558862, -122.564329],
  [45.558888, -122.564384],
  [45.558895, -122.564443],
  [45.558884, -122.56449],
  [45.558847, -122.56455],
  [45.558797, -122.564613],
  [45.558637, -122.564812],
  [45.55842, -122.565084],
  [45.558312, -122.565188],
  [45.558262, -122.565211],
  [45.558233, -122.565225],
  [45.558158, -122.565241],
  [45.55807, -122.565245],
  [45.558039, -122.565242],
  [45.557994, -122.56523],
  [45.557894, -122.565169],
  [45.557792, -122.565434],
  [45.557598, -122.565933],
  [45.557131, -122.567108],
  [45.55696, -122.567528],
  [45.556924, -122.567621],
  [45.556821, -122.567883],
  [45.556663, -122.568269],
  [45.556583, -122.568241],
  [45.556543, -122.568234],
  [45.55613, -122.568232],
  [45.555651, -122.568231],
  [45.555394, -122.56823],
  [45.555391, -122.567748],
  [45.555391, -122.567652],
  [45.555391, -122.567505],
  [45.555388, -122.56628],
  [45.555388, -122.566062],
  [45.555387, -122.565698],
  [45.555385, -122.565371],
  [45.555384, -122.564886],
  [45.55538, -122.563874],
  [45.555379, -122.562836],
  [45.555379, -122.562802],
  [45.555379, -122.562336],
  [45.55538, -122.561851],
  [45.555383, -122.560939],
  [45.555384, -122.560814],
  [45.555383, -122.560143],
  [45.555384, -122.55973],
  [45.555386, -122.559292],
  [45.555386, -122.559188],
  [45.555385, -122.558906],
  [45.555385, -122.55882],
  [45.555385, -122.55864],
  [45.555386, -122.558508],
  [45.555388, -122.557964],
  [45.555388, -122.557924],
  [45.555389, -122.557775],
  [45.555318, -122.557775],
  [45.554893, -122.557778],
  [45.554798, -122.557779],
  [45.554496, -122.557782],
  [45.554074, -122.557784],
  [45.553581, -122.557788],
  [45.552786, -122.557793],
  [45.552073, -122.557798],
  [45.551992, -122.557799],
  [45.551778, -122.5578],
  [45.551199, -122.557806],
  [45.550803, -122.55781],
  [45.550476, -122.557812],
  [45.550399, -122.557812],
  [45.549956, -122.557816],
  [45.549602, -122.557818],
  [45.549318, -122.557816],
  [45.549064, -122.557809],
  [45.548668, -122.557783],
  [45.548523, -122.557777],
  [45.548491, -122.557776],
  [45.548252, -122.557775],
  [45.54818, -122.557775],
  [45.548106, -122.557775],
  [45.547966, -122.55778],
  [45.54767, -122.557785],
  [45.545945, -122.557816],
  [45.544909, -122.557834],
  [45.544145, -122.55784],
  [45.543576, -122.55785],
  [45.543308, -122.557854],
  [45.542857, -122.557862],
  [45.542676, -122.557868],
  [45.542398, -122.557889],
  [45.542206, -122.557905],
  [45.541996, -122.557923],
  [45.54189, -122.557931],
  [45.541679, -122.557941],
  [45.541384, -122.557948],
  [45.541081, -122.557952],
  [45.540701, -122.557958],
  [45.540254, -122.557964],
  [45.539929, -122.55797],
  [45.539663, -122.557974],
  [45.539476, -122.557977],
  [45.538933, -122.557985],
  [45.538566, -122.557989],
  [45.538325, -122.557993],
  [45.538068, -122.557997],
  [45.537838, -122.558001],
  [45.537808, -122.558001],
  [45.537695, -122.558002],
  [45.537615, -122.558003],
  [45.536848, -122.558015],
  [45.536606, -122.558019],
  [45.536297, -122.558023],
  [45.53546, -122.558036],
  [45.535261, -122.558039],
  [45.534403, -122.558056],
  [45.534206, -122.558058],
  [45.534131, -122.55806],
  [45.533903, -122.558063],
  [45.533629, -122.558066],
  [45.533538, -122.558063],
  [45.533186, -122.558066],
  [45.533121, -122.558067],
  [45.53309, -122.558067],
  [45.533005, -122.558068],
  [45.532947, -122.558069],
  [45.532791, -122.558072],
  [45.532051, -122.558083],
  [45.531766, -122.558086],
  [45.531407, -122.558089],
  [45.531357, -122.55809],
  [45.531275, -122.558091],
  [45.530888, -122.558096],
  [45.530683, -122.558098],
  [45.530643, -122.558099],
  [45.529991, -122.55811],
  [45.529903, -122.558111],
  [45.529679, -122.558113],
  [45.529486, -122.558114],
  [45.529487, -122.558267],
  [45.529484, -122.559244],
  [45.529483, -122.560035],
  [45.529482, -122.560464],
  [45.529481, -122.561113],
  [45.529488, -122.561828],
  [45.529477, -122.561942],
  [45.52947, -122.562054],
  [45.529468, -122.562594],
  [45.529467, -122.562813],
  [45.529466, -122.563],
  [45.529533, -122.563066],
  [45.529537, -122.563312],
  [45.529537, -122.563337],
  [45.529538, -122.563394],
  [45.529547, -122.563465],
  [45.529549, -122.563479],
  [45.529567, -122.563548],
  [45.529588, -122.563598],
  [45.529653, -122.563654],
  [45.529748, -122.56368],
  [45.529938, -122.563661],
  [45.530105, -122.56369],
  [45.530556, -122.563858]
];

const stopNames = {
  "2669": "SW Highland &amp; 11th St",
  "4288": "10000 Block NE Pacific St",
  "4522": "W Powell &amp; SW Duniway",
  "4724": "NE Prescott &amp; 102nd",
  "4730": "NE Prescott &amp; 102nd",
  "4732": "NE Prescott &amp; 105th",
  "4766": "NE Prescott &amp; 92nd",
  "4767": "NE Prescott &amp; 92nd",
  "4769": "NE Prescott &amp; 97th",
  "4770": "NE Prescott &amp; 99th",
  "6505": "NE 102nd &amp; Alton",
  "6507": "NE 102nd &amp; Bell",
  "6509": "NE 102nd &amp; Brazee",
  "6513": "NE 102nd &amp; Clackamas",
  "6515": "NE 102nd &amp; Fremont",
  "6520": "NE 102nd &amp; Morris St",
  "6523": "1200 Block NE 102nd",
  "6525": "NE 102nd &amp; Pacific",
  "6913": "SE 181st &amp; Yamhill",
  "6914": "NE 181st &amp; E Burnside",
  "6916": "800 Block NE 181st",
  "6918": "NE 181st &amp; Everett Ct",
  "6919": "NE 181st &amp; Glisan",
  "6921": "SE 181st &amp; Oak",
  "6922": "NE 181st &amp; Wasco",
  "6924": "1900 Block SE 182nd",
  "6926": "SE 182nd &amp; SW 3rd",
  "6928": "SE 182nd &amp; SW 5th Dr",
  "6930": "SE 182nd &amp; Brooklyn Ct",
  "6931": "SE 182nd &amp; Haig",
  "6934": "SE 182nd &amp; Clinton",
  "6936": "SE 182nd &amp; Division",
  "6939": "SE 182nd &amp; Market",
  "6940": "SE 182nd &amp; Mill",
  "6942": "SE 182nd &amp; W Powell",
  "8194": "Gateway TC (drop off only stop)",
  "8321": "NE Pacific St &amp; The Oregon Clinic",
  "8581": "NE 181st &amp; Halsey",
  "8582": "NE 181st &amp; San Rafael",
  "9119": "NE 105th &amp; Sandy",
  "9266": "NE 181st &amp; Wilkes Rd",
  "10723": "NE 181st &amp; Sandy",
  "10724": "16300 Block NE Airport Way",
  "10725": "15300 Block NE Airport Way",
  "10726": "NE Airport Way &amp; 148th",
  "10727": "NE Airport Way &amp; 138th",
  "10728": "12900 Block NE Airport Way",
  "10729": "NE Airport Way &amp; 122nd",
  "10731": "11000 Block NE Holman",
  "10732": "NE 105th &amp; Simpson",
  "10733": "NE 105th &amp; Marx",
  "10734": "NE 105th &amp; Killingsworth",
  "10840": "NE 102nd &amp; Shaver",
  "10850": "Parkrose/ Sumner Transit Center ",
  "10995": "NE Airport Way &amp; 158th",
  "11015": "NE Airport Way &amp; Riverside",
  "13200": "NE Airport Way &amp; Mason Ct",
  "13913": "9800 Block NE Prescott",
  "13914": "NE Prescott &amp; 96th"
};

const stops = [
  { stop_id: "4522", name: "W Powell &amp; SW Duniway", lat: 45.489637, lon: -122.473421, times: ["11:45 PM", "5:09 AM", "5:37 AM", "6:07 AM", "6:22 AM", "6:37 AM", "6:52 AM", "7:07 AM"] },
  { stop_id: "2669", name: "SW Highland &amp; 11th St", lat: 45.489144, lon: -122.475366, times: ["11:45 PM", "5:09 AM", "5:37 AM", "6:07 AM", "6:22 AM", "6:37 AM", "6:52 AM", "7:07 AM"] },
  { stop_id: "6942", name: "SE 182nd &amp; W Powell", lat: 45.490756, lon: -122.475397, times: ["11:46 PM", "5:10 AM", "5:38 AM", "6:08 AM", "6:23 AM", "6:38 AM", "6:53 AM", "7:08 AM"] },
  { stop_id: "6928", name: "SE 182nd &amp; SW 5th Dr", lat: 45.492877, lon: -122.475385, times: ["11:46 PM", "5:10 AM", "5:38 AM", "6:08 AM", "6:23 AM", "6:38 AM", "6:53 AM", "7:08 AM"] },
  { stop_id: "6926", name: "SE 182nd &amp; SW 3rd", lat: 45.494915, lon: -122.475422, times: ["11:47 PM", "5:11 AM", "5:39 AM", "6:09 AM", "6:24 AM", "6:39 AM", "6:54 AM", "7:09 AM"] },
  { stop_id: "6931", name: "SE 182nd &amp; Haig", lat: 45.497382, lon: -122.475416, times: ["11:47 PM", "5:11 AM", "5:40 AM", "6:10 AM", "6:25 AM", "6:40 AM", "6:55 AM", "7:10 AM"] },
  { stop_id: "6930", name: "SE 182nd &amp; Brooklyn Ct", lat: 45.500883, lon: -122.475442, times: ["11:48 PM", "5:12 AM", "5:41 AM", "6:11 AM", "6:26 AM", "6:41 AM", "6:56 AM", "7:11 AM"] },
  { stop_id: "6934", name: "SE 182nd &amp; Clinton", lat: 45.502663, lon: -122.475465, times: ["11:49 PM", "5:13 AM", "5:41 AM", "6:11 AM", "6:26 AM", "6:41 AM", "6:56 AM", "7:11 AM"] },
  { stop_id: "6936", name: "SE 182nd &amp; Division", lat: 45.505313, lon: -122.475447, times: ["11:50 PM", "5:14 AM", "5:42 AM", "6:12 AM", "6:27 AM", "6:42 AM", "6:57 AM", "7:12 AM"] },
  { stop_id: "6924", name: "1900 Block SE 182nd", lat: 45.508162, lon: -122.475482, times: ["11:50 PM", "5:14 AM", "5:43 AM", "6:13 AM", "6:28 AM", "6:43 AM", "6:58 AM", "7:13 AM"] },
  { stop_id: "6940", name: "SE 182nd &amp; Mill", lat: 45.510404, lon: -122.47553, times: ["11:51 PM", "5:15 AM", "5:43 AM", "6:13 AM", "6:28 AM", "6:43 AM", "6:58 AM", "7:14 AM"] },
  { stop_id: "6939", name: "SE 182nd &amp; Market", lat: 45.512627, lon: -122.475541, times: ["11:52 PM", "5:16 AM", "5:44 AM", "6:14 AM", "6:29 AM", "6:44 AM", "6:59 AM", "7:14 AM"] },
  { stop_id: "6913", name: "SE 181st &amp; Yamhill", lat: 45.515905, lon: -122.476026, times: ["11:52 PM", "5:16 AM", "5:45 AM", "6:15 AM", "6:30 AM", "6:45 AM", "7:00 AM", "7:15 AM"] },
  { stop_id: "6921", name: "SE 181st &amp; Oak", lat: 45.519778, lon: -122.476987, times: ["11:54 PM", "5:18 AM", "5:46 AM", "6:16 AM", "6:31 AM", "6:46 AM", "7:01 AM", "7:17 AM"] },
  { stop_id: "6914", name: "NE 181st &amp; E Burnside", lat: 45.522441, lon: -122.47696, times: ["11:54 PM", "5:18 AM", "5:47 AM", "6:17 AM", "6:32 AM", "6:47 AM", "7:02 AM", "7:17 AM"] },
  { stop_id: "6918", name: "NE 181st &amp; Everett Ct", lat: 45.52437, lon: -122.476933, times: ["11:55 PM", "5:19 AM", "5:47 AM", "6:17 AM", "6:32 AM", "6:47 AM", "7:02 AM", "7:18 AM"] },
  { stop_id: "6919", name: "NE 181st &amp; Glisan", lat: 45.526823, lon: -122.476894, times: ["11:55 PM", "5:19 AM", "5:48 AM", "6:18 AM", "6:33 AM", "6:48 AM", "7:03 AM", "7:19 AM"] },
  { stop_id: "6916", name: "800 Block NE 181st", lat: 45.528845, lon: -122.476883, times: ["11:56 PM", "5:20 AM", "5:49 AM", "6:19 AM", "6:34 AM", "6:49 AM", "7:04 AM", "7:19 AM"] },
  { stop_id: "6922", name: "NE 181st &amp; Wasco", lat: 45.531719, lon: -122.477105, times: ["11:57 PM", "5:21 AM", "5:50 AM", "6:20 AM", "6:35 AM", "6:50 AM", "7:05 AM", "7:20 AM"] },
  { stop_id: "8581", name: "NE 181st &amp; Halsey", lat: 45.534555, lon: -122.477073, times: ["11:58 PM", "5:22 AM", "5:50 AM", "6:20 AM", "6:35 AM", "6:50 AM", "7:05 AM", "7:21 AM"] },
  { stop_id: "8582", name: "NE 181st &amp; San Rafael", lat: 45.536927, lon: -122.477109, times: ["11:58 PM", "5:22 AM", "5:51 AM", "6:21 AM", "6:36 AM", "6:51 AM", "7:06 AM", "7:22 AM"] },
  { stop_id: "9266", name: "NE 181st &amp; Wilkes Rd", lat: 45.539764, lon: -122.477087, times: ["11:59 PM", "5:23 AM", "5:52 AM", "6:22 AM", "6:37 AM", "6:52 AM", "7:07 AM", "7:23 AM"] },
  { stop_id: "10723", name: "NE 181st &amp; Sandy", lat: 45.545689, lon: -122.477069, times: ["12:01 AM", "5:25 AM", "5:54 AM", "6:24 AM", "6:39 AM", "6:54 AM", "7:09 AM", "7:25 AM"] },
  { stop_id: "11015", name: "NE Airport Way &amp; Riverside", lat: 45.553316, lon: -122.480826, times: ["12:02 AM", "5:26 AM", "5:55 AM", "6:25 AM", "6:40 AM", "6:55 AM", "7:10 AM", "7:26 AM"] },
  { stop_id: "13200", name: "NE Airport Way &amp; Mason Ct", lat: 45.554086, lon: -122.489742, times: ["12:03 AM", "5:27 AM", "5:56 AM", "6:26 AM", "6:41 AM", "6:56 AM", "7:11 AM", "7:27 AM"] },
  { stop_id: "10724", name: "16300 Block NE Airport Way", lat: 45.556495, lon: -122.494559, times: ["12:04 AM", "5:28 AM", "5:57 AM", "6:27 AM", "6:42 AM", "6:57 AM", "7:12 AM", "7:28 AM"] },
  { stop_id: "10995", name: "NE Airport Way &amp; 158th", lat: 45.557639, lon: -122.499903, times: ["12:04 AM", "5:29 AM", "5:58 AM", "6:27 AM", "6:42 AM", "6:57 AM", "7:12 AM", "7:29 AM"] },
  { stop_id: "10725", name: "15300 Block NE Airport Way", lat: 45.558644, lon: -122.504229, times: ["12:05 AM", "5:29 AM", "5:58 AM", "6:28 AM", "6:43 AM", "6:58 AM", "7:13 AM", "7:29 AM"] },
  { stop_id: "10726", name: "NE Airport Way &amp; 148th", lat: 45.559656, lon: -122.509881, times: ["12:06 AM", "5:30 AM", "5:59 AM", "6:29 AM", "6:44 AM", "6:59 AM", "7:14 AM", "7:30 AM"] },
  { stop_id: "10727", name: "NE Airport Way &amp; 138th", lat: 45.562038, lon: -122.520794, times: ["12:07 AM", "5:32 AM", "6:01 AM", "6:30 AM", "6:45 AM", "7:00 AM", "7:15 AM", "7:32 AM"] },
  { stop_id: "10728", name: "12900 Block NE Airport Way", lat: 45.562959, lon: -122.527996, times: ["12:08 AM", "5:33 AM", "6:02 AM", "6:31 AM", "6:46 AM", "7:01 AM", "7:16 AM", "7:33 AM"] },
  { stop_id: "10729", name: "NE Airport Way &amp; 122nd", lat: 45.565478, lon: -122.532915, times: ["12:09 AM", "5:34 AM", "6:03 AM", "6:32 AM", "6:47 AM", "7:02 AM", "7:17 AM", "7:34 AM"] },
  { stop_id: "10731", name: "11000 Block NE Holman", lat: 45.568243, lon: -122.548041, times: ["12:10 AM", "5:35 AM", "6:05 AM", "6:34 AM", "6:49 AM", "7:04 AM", "7:19 AM", "7:36 AM"] },
  { stop_id: "10732", name: "NE 105th &amp; Simpson", lat: 45.565294, lon: -122.554826, times: ["11:42 PM", "12:11 AM", "5:36 AM", "6:06 AM", "6:35 AM", "6:50 AM", "7:05 AM", "7:20 AM"] },
  { stop_id: "10733", name: "NE 105th &amp; Marx", lat: 45.561706, lon: -122.554821, times: ["11:43 PM", "12:12 AM", "5:37 AM", "6:07 AM", "6:36 AM", "6:51 AM", "7:06 AM", "7:21 AM"] },
  { stop_id: "10734", name: "NE 105th &amp; Killingsworth", lat: 45.560206, lon: -122.554808, times: ["11:43 PM", "12:12 AM", "5:37 AM", "6:07 AM", "6:36 AM", "6:51 AM", "7:06 AM", "7:21 AM"] },
  { stop_id: "9119", name: "NE 105th &amp; Sandy", lat: 45.558541, lon: -122.554839, times: ["11:43 PM", "12:13 AM", "5:38 AM", "6:07 AM", "6:36 AM", "6:51 AM", "7:07 AM", "7:22 AM"] },
  { stop_id: "4732", name: "NE Prescott &amp; 105th", lat: 45.555462, lon: -122.555218, times: ["11:44 PM", "12:13 AM", "5:38 AM", "6:08 AM", "6:37 AM", "6:52 AM", "7:07 AM", "7:22 AM"] },
  { stop_id: "4730", name: "NE Prescott &amp; 102nd", lat: 45.55547, lon: -122.55849, times: ["11:44 PM", "12:13 AM", "5:38 AM", "6:08 AM", "6:37 AM", "6:52 AM", "7:08 AM", "7:23 AM"] },
  { stop_id: "13913", name: "9800 Block NE Prescott", lat: 45.555468, lon: -122.561417, times: ["11:45 PM", "12:14 AM", "5:39 AM", "6:09 AM", "6:38 AM", "6:53 AM", "7:08 AM", "7:23 AM"] },
  { stop_id: "13914", name: "NE Prescott &amp; 96th", lat: 45.555432, lon: -122.56373, times: ["11:45 PM", "12:14 AM", "5:39 AM", "6:09 AM", "6:38 AM", "6:53 AM", "7:09 AM", "7:24 AM"] },
  { stop_id: "4767", name: "NE Prescott &amp; 92nd", lat: 45.555453, lon: -122.567765, times: ["11:45 PM", "12:14 AM", "5:39 AM", "6:09 AM", "6:38 AM", "6:53 AM", "7:09 AM", "7:24 AM"] },
  { stop_id: "10850", name: "Parkrose/ Sumner Transit Center ", lat: 45.558282, lon: -122.565304, times: ["11:47 PM", "12:16 AM", "5:41 AM", "6:11 AM", "6:40 AM", "6:55 AM", "7:11 AM", "7:26 AM"] },
  { stop_id: "4766", name: "NE Prescott &amp; 92nd", lat: 45.555318, lon: -122.567749, times: ["11:48 PM", "12:17 AM", "5:42 AM", "6:12 AM", "6:41 AM", "6:56 AM", "7:12 AM", "7:27 AM"] },
  { stop_id: "4769", name: "NE Prescott &amp; 97th", lat: 45.555333, lon: -122.562811, times: ["11:48 PM", "12:17 AM", "5:42 AM", "6:12 AM", "6:42 AM", "6:57 AM", "7:13 AM", "7:28 AM"] },
  { stop_id: "4770", name: "NE Prescott &amp; 99th", lat: 45.55531, lon: -122.560937, times: ["11:49 PM", "12:18 AM", "5:43 AM", "6:13 AM", "6:42 AM", "6:57 AM", "7:13 AM", "7:28 AM"] },
  { stop_id: "4724", name: "NE Prescott &amp; 102nd", lat: 45.55532, lon: -122.557964, times: ["11:49 PM", "12:18 AM", "5:43 AM", "6:13 AM", "6:42 AM", "6:57 AM", "7:13 AM", "7:28 AM"] },
  { stop_id: "10840", name: "NE 102nd &amp; Shaver", lat: 45.552073, lon: -122.557968, times: ["11:50 PM", "12:19 AM", "5:44 AM", "6:14 AM", "6:43 AM", "6:58 AM", "7:14 AM", "7:29 AM"] },
  { stop_id: "6505", name: "NE 102nd &amp; Alton", lat: 45.550476, lon: -122.557945, times: ["11:50 PM", "12:19 AM", "5:44 AM", "6:14 AM", "6:44 AM", "6:59 AM", "7:15 AM", "7:30 AM"] },
  { stop_id: "6515", name: "NE 102nd &amp; Fremont", lat: 45.548252, lon: -122.557903, times: ["11:51 PM", "12:20 AM", "5:45 AM", "6:15 AM", "6:44 AM", "6:59 AM", "7:15 AM", "7:30 AM"] },
  { stop_id: "6520", name: "NE 102nd &amp; Morris St", lat: 45.543309, lon: -122.557986, times: ["11:52 PM", "12:21 AM", "5:46 AM", "6:16 AM", "6:46 AM", "7:01 AM", "7:17 AM", "7:32 AM"] },
  { stop_id: "6509", name: "NE 102nd &amp; Brazee", lat: 45.53993, lon: -122.558078, times: ["11:53 PM", "12:22 AM", "5:47 AM", "6:17 AM", "6:47 AM", "7:02 AM", "7:18 AM", "7:33 AM"] },
  { stop_id: "6507", name: "NE 102nd &amp; Bell", lat: 45.536608, lon: -122.558133, times: ["11:54 PM", "12:23 AM", "5:48 AM", "6:18 AM", "6:47 AM", "7:02 AM", "7:18 AM", "7:33 AM"] },
  { stop_id: "6513", name: "NE 102nd &amp; Clackamas", lat: 45.533122, lon: -122.558203, times: ["11:54 PM", "12:23 AM", "5:48 AM", "6:18 AM", "6:48 AM", "7:03 AM", "7:19 AM", "7:34 AM"] },
  { stop_id: "6523", name: "1200 Block NE 102nd", lat: 45.531407, lon: -122.558228, times: ["11:55 PM", "12:24 AM", "5:49 AM", "6:19 AM", "6:49 AM", "7:04 AM", "7:20 AM", "7:35 AM"] },
  { stop_id: "6525", name: "NE 102nd &amp; Pacific", lat: 45.52968, lon: -122.558243, times: ["11:55 PM", "12:24 AM", "5:49 AM", "6:19 AM", "6:49 AM", "7:04 AM", "7:20 AM", "7:35 AM"] },
  { stop_id: "4288", name: "10000 Block NE Pacific St", lat: 45.529563, lon: -122.560465, times: ["11:56 PM", "12:25 AM", "5:50 AM", "6:20 AM", "6:50 AM", "7:05 AM", "7:21 AM", "7:36 AM"] },
  { stop_id: "8321", name: "NE Pacific St &amp; The Oregon Clinic", lat: 45.529559, lon: -122.562812, times: ["11:56 PM", "12:25 AM", "5:50 AM", "6:20 AM", "6:50 AM", "7:05 AM", "7:21 AM", "7:36 AM"] },
  { stop_id: "8194", name: "Gateway TC (drop off only stop)", lat: 45.530568, lon: -122.563773, times: ["11:57 PM", "12:26 AM", "5:51 AM", "6:21 AM", "6:51 AM", "7:06 AM", "7:22 AM", "7:37 AM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          📢 We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>