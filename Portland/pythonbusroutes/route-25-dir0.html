<!DOCTYPE html>
<html lang="en">
<head>
  

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 25 - To Mt Hood Community College | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }
    #map {
  width: 100%;
  height: 85vh;
  border: none;
  margin: 0 auto;
  display: block;
  border-radius: 8px;
}
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }
body {
  overflow-y: auto;
}
  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 25 - To Mt Hood Community College</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  
  if (document.referrer === "" && performance.navigation.type === 0) {
    // No referrer + user opened directly = likely a bookmark
    window.location.href = "/index.html";
  }

  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 25;
  const direction = parseInt(0);

  const map = L.map('map', {
  center: [45.6, -122.7],
  zoom: 12,
  minZoom: 12,
  maxZoom: 18,
  maxBounds: [
    [45.3, -123.1],  // Southwest corner
    [45.9, -122.3]   // Northeast corner
  ],
  maxBoundsViscosity: 1.0
});
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.530556, -122.563858],
  [45.530678, -122.563903],
  [45.531008, -122.564005],
  [45.531055, -122.564003],
  [45.531106, -122.563969],
  [45.531154, -122.563897],
  [45.531162, -122.563873],
  [45.531172, -122.563846],
  [45.531186, -122.563794],
  [45.531199, -122.563739],
  [45.531234, -122.563555],
  [45.531163, -122.563535],
  [45.531062, -122.563504],
  [45.530303, -122.563198],
  [45.530197, -122.563158],
  [45.529906, -122.563116],
  [45.529894, -122.563118],
  [45.529758, -122.563141],
  [45.529692, -122.563131],
  [45.529684, -122.56313],
  [45.529636, -122.56312],
  [45.529533, -122.563066],
  [45.529466, -122.563],
  [45.529468, -122.562594],
  [45.52947, -122.562054],
  [45.529477, -122.561942],
  [45.529488, -122.561828],
  [45.529481, -122.561113],
  [45.529482, -122.560866],
  [45.529483, -122.560035],
  [45.529484, -122.559244],
  [45.529487, -122.558267],
  [45.529486, -122.558114],
  [45.528994, -122.558123],
  [45.528094, -122.558136],
  [45.528054, -122.558137],
  [45.527861, -122.558139],
  [45.52739, -122.558145],
  [45.527171, -122.558148],
  [45.526914, -122.558151],
  [45.526279, -122.55816],
  [45.526278, -122.557633],
  [45.526278, -122.557603],
  [45.526278, -122.557223],
  [45.526276, -122.556254],
  [45.526275, -122.55563],
  [45.526274, -122.555095],
  [45.526274, -122.554989],
  [45.526273, -122.554514],
  [45.526272, -122.553908],
  [45.526274, -122.552398],
  [45.526276, -122.551506],
  [45.526276, -122.551427],
  [45.526278, -122.549453],
  [45.526279, -122.548479],
  [45.52628, -122.547404],
  [45.526281, -122.547063],
  [45.526281, -122.546814],
  [45.526281, -122.546697],
  [45.526283, -122.545386],
  [45.526283, -122.54496],
  [45.526283, -122.544691],
  [45.526285, -122.543279],
  [45.526285, -122.543166],
  [45.526286, -122.542395],
  [45.526286, -122.542312],
  [45.526286, -122.542197],
  [45.526286, -122.541658],
  [45.526287, -122.540944],
  [45.526288, -122.540163],
  [45.526289, -122.539675],
  [45.526289, -122.539581],
  [45.526289, -122.539228],
  [45.526289, -122.539106],
  [45.526289, -122.539002],
  [45.52629, -122.538555],
  [45.52629, -122.538516],
  [45.52629, -122.538354],
  [45.52629, -122.538267],
  [45.526291, -122.53793],
  [45.526292, -122.53776],
  [45.526293, -122.53759],
  [45.526298, -122.537029],
  [45.5263, -122.536778],
  [45.526309, -122.535821],
  [45.526311, -122.535617],
  [45.526321, -122.534541],
  [45.526327, -122.533867],
  [45.52633, -122.533594],
  [45.526334, -122.533254],
  [45.52634, -122.532524],
  [45.526348, -122.531678],
  [45.526352, -122.531276],
  [45.526353, -122.531199],
  [45.52636, -122.53046],
  [45.526364, -122.52998],
  [45.526365, -122.529794],
  [45.52637, -122.52911],
  [45.526372, -122.528863],
  [45.526373, -122.528714],
  [45.526381, -122.528002],
  [45.526382, -122.527855],
  [45.526401, -122.526054],
  [45.526407, -122.52501],
  [45.526409, -122.524883],
  [45.526411, -122.524712],
  [45.526424, -122.523561],
  [45.526424, -122.52349],
  [45.526428, -122.523057],
  [45.526436, -122.522266],
  [45.526448, -122.520908],
  [45.526454, -122.520173],
  [45.52646, -122.519557],
  [45.526466, -122.518739],
  [45.52647, -122.518316],
  [45.526472, -122.518036],
  [45.526478, -122.517361],
  [45.526479, -122.517204],
  [45.526478, -122.515756],
  [45.526477, -122.515428],
  [45.526471, -122.513181],
  [45.526465, -122.511367],
  [45.526463, -122.510753],
  [45.526463, -122.510609],
  [45.526463, -122.510463],
  [45.526461, -122.510102],
  [45.52646, -122.509869],
  [45.526458, -122.509232],
  [45.526457, -122.509014],
  [45.526455, -122.508037],
  [45.526452, -122.507538],
  [45.52645, -122.507269],
  [45.526449, -122.506664],
  [45.526449, -122.506549],
  [45.526447, -122.505837],
  [45.526444, -122.504988],
  [45.526442, -122.504411],
  [45.526442, -122.504293],
  [45.526441, -122.504093],
  [45.526436, -122.502822],
  [45.526433, -122.501498],
  [45.526427, -122.500148],
  [45.526423, -122.498965],
  [45.526417, -122.497163],
  [45.526415, -122.496944],
  [45.526416, -122.496592],
  [45.526415, -122.49642],
  [45.526415, -122.495917],
  [45.526414, -122.495592],
  [45.526414, -122.493485],
  [45.526414, -122.4933],
  [45.526414, -122.49075],
  [45.526414, -122.490678],
  [45.526414, -122.490547],
  [45.526414, -122.488673],
  [45.526413, -122.487925],
  [45.526413, -122.487024],
  [45.526413, -122.486258],
  [45.526414, -122.486128],
  [45.526415, -122.486002],
  [45.526414, -122.485675],
  [45.526413, -122.485239],
  [45.526412, -122.484537],
  [45.526412, -122.482373],
  [45.526411, -122.481971],
  [45.52641, -122.480002],
  [45.52641, -122.479524],
  [45.52641, -122.478837],
  [45.52641, -122.478574],
  [45.52641, -122.478113],
  [45.52641, -122.477992],
  [45.52641, -122.477607],
  [45.52641, -122.477238],
  [45.526411, -122.477067],
  [45.526413, -122.476902],
  [45.526412, -122.476393],
  [45.526412, -122.476356],
  [45.526411, -122.476165],
  [45.52641, -122.475772],
  [45.526408, -122.474859],
  [45.526406, -122.474071],
  [45.526404, -122.473502],
  [45.526404, -122.473222],
  [45.526402, -122.472447],
  [45.526402, -122.472047],
  [45.526401, -122.47171],
  [45.5264, -122.471508],
  [45.526398, -122.470861],
  [45.526394, -122.46998],
  [45.526387, -122.468257],
  [45.526386, -122.467374],
  [45.526385, -122.466369],
  [45.526382, -122.46544],
  [45.526375, -122.463247],
  [45.526374, -122.46293],
  [45.52637, -122.461101],
  [45.526366, -122.459883],
  [45.526363, -122.45927],
  [45.526362, -122.458737],
  [45.526358, -122.457283],
  [45.526359, -122.456885],
  [45.526366, -122.456697],
  [45.526381, -122.45649],
  [45.526393, -122.456335],
  [45.526419, -122.456135],
  [45.526453, -122.455925],
  [45.52649, -122.455728],
  [45.52654, -122.455524],
  [45.526566, -122.455424],
  [45.526609, -122.455263],
  [45.52664, -122.455149],
  [45.526671, -122.455037],
  [45.526767, -122.454676],
  [45.527018, -122.453729],
  [45.527244, -122.452891],
  [45.527455, -122.4521],
  [45.52759, -122.451578],
  [45.527645, -122.451362],
  [45.527692, -122.451179],
  [45.527723, -122.451016],
  [45.52775, -122.450867],
  [45.527779, -122.450684],
  [45.527795, -122.45056],
  [45.527808, -122.450421],
  [45.52782, -122.450285],
  [45.527826, -122.45009],
  [45.527829, -122.449919],
  [45.527831, -122.449681],
  [45.527834, -122.448488],
  [45.527837, -122.446654],
  [45.527835, -122.446019],
  [45.527835, -122.445571],
  [45.527833, -122.444916],
  [45.527832, -122.444451],
  [45.527831, -122.442809],
  [45.527831, -122.442695],
  [45.527832, -122.44251],
  [45.527834, -122.441132],
  [45.527834, -122.440863],
  [45.527834, -122.440331],
  [45.527834, -122.437314],
  [45.527836, -122.436481],
  [45.527783, -122.435951],
  [45.527781, -122.435138],
  [45.527784, -122.434875],
  [45.527781, -122.433821],
  [45.527781, -122.433713],
  [45.527779, -122.433515],
  [45.527776, -122.433074],
  [45.527758, -122.430655],
  [45.527746, -122.428638],
  [45.527744, -122.428399],
  [45.527717, -122.424884],
  [45.52771, -122.424387],
  [45.527698, -122.423901],
  [45.527741, -122.423682],
  [45.527736, -122.423493],
  [45.527724, -122.423114],
  [45.527724, -122.423113],
  [45.527716, -122.42279],
  [45.527706, -122.421572],
  [45.527694, -122.419684],
  [45.527689, -122.418867],
  [45.527681, -122.417759],
  [45.527672, -122.416476],
  [45.527665, -122.41537],
  [45.527657, -122.414435],
  [45.527658, -122.414246],
  [45.527681, -122.414007],
  [45.5277, -122.413744],
  [45.527717, -122.413347],
  [45.527718, -122.413249],
  [45.52772, -122.413115],
  [45.527721, -122.412972],
  [45.527721, -122.412595],
  [45.527721, -122.412422],
  [45.527726, -122.412264],
  [45.527739, -122.412094],
  [45.527758, -122.411942],
  [45.527782, -122.411808],
  [45.527805, -122.411697],
  [45.527827, -122.411611],
  [45.527857, -122.411511],
  [45.527898, -122.411393],
  [45.527949, -122.411267],
  [45.528005, -122.411144],
  [45.528069, -122.411024],
  [45.528176, -122.410847],
  [45.528412, -122.410468],
  [45.528854, -122.409754],
  [45.529371, -122.40892],
  [45.529424, -122.408835],
  [45.529532, -122.408662],
  [45.529582, -122.408577],
  [45.529592, -122.408561],
  [45.52965, -122.408446],
  [45.529705, -122.408322],
  [45.529752, -122.4082],
  [45.529797, -122.408054],
  [45.529827, -122.407949],
  [45.529851, -122.407841],
  [45.529874, -122.407719],
  [45.529893, -122.407587],
  [45.52991, -122.407435],
  [45.529917, -122.407286],
  [45.529918, -122.405976],
  [45.529919, -122.404817],
  [45.529919, -122.404301],
  [45.529919, -122.403404],
  [45.529919, -122.401889],
  [45.529917, -122.400878],
  [45.529916, -122.400455],
  [45.529916, -122.400426],
  [45.529916, -122.399473],
  [45.529917, -122.399305],
  [45.529996, -122.399307],
  [45.530244, -122.399306],
  [45.531129, -122.399302],
  [45.532053, -122.3993],
  [45.533418, -122.3993],
  [45.533566, -122.3993],
  [45.533567, -122.399145],
  [45.533565, -122.398931],
  [45.533566, -122.398207],
  [45.533566, -122.396646],
  [45.533565, -122.395489],
  [45.53357, -122.39435],
  [45.533567, -122.393327],
  [45.533567, -122.392983],
  [45.533569, -122.391967],
  [45.533569, -122.391686],
  [45.533568, -122.391273],
  [45.533568, -122.390208],
  [45.53357, -122.388939],
  [45.53357, -122.388591],
  [45.533577, -122.388499],
  [45.533595, -122.388421],
  [45.533608, -122.388386],
  [45.533618, -122.388358],
  [45.533681, -122.388251],
  [45.533644, -122.388184],
  [45.533604, -122.388111],
  [45.533566, -122.388023],
  [45.53353, -122.387903],
  [45.533476, -122.387864],
  [45.533444, -122.387802],
  [45.533406, -122.387746],
  [45.533366, -122.387702],
  [45.533327, -122.387665],
  [45.533287, -122.387581],
  [45.533226, -122.387553],
  [45.533159, -122.387531],
  [45.533107, -122.387524],
  [45.532993, -122.38752],
  [45.53227, -122.387518],
  [45.531584, -122.387516],
  [45.531045, -122.387519],
  [45.530821, -122.38752],
  [45.529249, -122.387519],
  [45.52885, -122.387519],
  [45.527929, -122.387518],
  [45.527844, -122.387518],
  [45.527259, -122.387518],
  [45.526513, -122.387519],
  [45.526382, -122.387516],
  [45.52633, -122.387512],
  [45.526239, -122.387506],
  [45.526052, -122.38748],
  [45.526001, -122.387473],
  [45.525065, -122.38731],
  [45.524108, -122.387151],
  [45.523742, -122.387089],
  [45.523147, -122.38699],
  [45.522868, -122.386943],
  [45.522567, -122.386899],
  [45.522452, -122.386884],
  [45.522355, -122.386882],
  [45.522247, -122.386883],
  [45.522113, -122.386894],
  [45.521879, -122.386931],
  [45.521748, -122.38695],
  [45.521621, -122.386965],
  [45.521482, -122.386968],
  [45.521266, -122.386967],
  [45.521112, -122.386966],
  [45.521057, -122.386964],
  [45.520204, -122.386943],
  [45.519881, -122.386929],
  [45.519188, -122.386916],
  [45.519133, -122.386915],
  [45.519006, -122.386919],
  [45.519004, -122.387083],
  [45.519011, -122.388195],
  [45.519027, -122.388865],
  [45.519038, -122.389279],
  [45.519032, -122.389807],
  [45.519034, -122.390981],
  [45.519026, -122.391398],
  [45.519024, -122.391761],
  [45.519023, -122.391841],
  [45.519023, -122.391955],
  [45.519022, -122.392317],
  [45.519022, -122.392332],
  [45.519019, -122.392482],
  [45.519015, -122.392689],
  [45.519002, -122.392958],
  [45.518955, -122.393821],
  [45.518934, -122.39416],
  [45.518916, -122.394532],
  [45.518905, -122.394865],
  [45.518902, -122.395174],
  [45.518906, -122.395443],
  [45.518916, -122.39569],
  [45.518946, -122.396383],
  [45.518962, -122.396736],
  [45.518981, -122.397081],
  [45.518991, -122.397237],
  [45.519023, -122.397742],
  [45.519031, -122.397936],
  [45.519042, -122.398262],
  [45.519043, -122.398382],
  [45.519092, -122.398528],
  [45.518997, -122.398527],
  [45.518936, -122.398527],
  [45.518487, -122.39852],
  [45.518357, -122.398518],
  [45.517794, -122.398509],
  [45.517439, -122.398502],
  [45.517117, -122.398491],
  [45.517048, -122.398423],
  [45.516586, -122.398418],
  [45.516399, -122.398421],
  [45.516302, -122.398426],
  [45.516307, -122.398175],
  [45.516352, -122.397783],
  [45.516375, -122.397594],
  [45.515937, -122.397485],
  [45.515636, -122.397452],
  [45.515502, -122.397483],
  [45.51537, -122.397538]
];

const stopNames = {
  "2005": "12900 Block NE Glisan (Menlo Park ES)",
  "2015": "NE Glisan &amp; 102nd",
  "2018": "NE Glisan &amp; 105th",
  "2020": "NE Glisan &amp; 108th",
  "2024": "NE Glisan &amp; 113th",
  "2028": "NE Glisan &amp; 117th",
  "2032": "NE Glisan &amp; 120th",
  "2036": "NE Glisan &amp; 126th",
  "2042": "NE Glisan &amp; 136th",
  "2048": "NE Glisan &amp; 141st",
  "2053": "NE Glisan &amp; 148th",
  "2058": "NE Glisan &amp; 155th",
  "2065": "NE Glisan &amp; 162nd",
  "2067": "NE Glisan &amp; 165th",
  "2069": "NE Glisan &amp; 167th Pl",
  "2074": "NE Glisan &amp; 172nd",
  "2076": "NE Glisan &amp; 176th",
  "2080": "NE Glisan &amp; 181st",
  "3873": "Mt Hood Community College Main Stop",
  "4287": "10000 Block NE Pacific St",
  "5409": "SE Stark &amp; SW Corbeth Lane",
  "5865": "3000 Block S Troutdale",
  "5868": "S Troutdale &amp; SE Beavercreek",
  "5870": "S Troutdale Rd &amp; SW Chapman",
  "5872": "S Troutdale &amp; SE Stark",
  "5875": "S Troutdale &amp; SE 19th",
  "5877": "S Troutdale &amp; SW 21st",
  "8194": "Gateway TC (drop off only stop)",
  "9092": "SW 257th &amp; 16th Way",
  "9094": "SW 257th &amp; Cherry Park",
  "9727": "NE Glisan &amp; 23400 Block",
  "9797": "SW Cherry Park &amp; NE 242nd",
  "10864": "Gateway Transit Center ",
  "13031": "NE Kane &amp; SE Stark",
  "14514": "NE Glisan &amp; 185th Pl",
  "14515": "NE Glisan &amp; 194th",
  "14516": "NE Glisan &amp; 202nd",
  "14517": "NE Glisan &amp; Fairview Pkwy",
  "14518": "NE Glisan &amp; 223rd",
  "14519": "SW Cherry Park &amp; Cerise Way",
  "14520": "SW Cherry Park &amp; Imagination Way",
  "14521": "SW Cherry Park &amp; Hensley",
  "14522": "SW Cherry Park &amp; Troutdale Rd",
  "14575": "NE Glisan &amp; Wood Village Blvd"
};

const stops = [
  { stop_id: "8194", name: "Gateway TC (drop off only stop)", lat: 45.530568, lon: -122.563773, times: ["11:33 AM", "12:05 PM", "12:35 PM"] },
  { stop_id: "10864", name: "Gateway Transit Center ", lat: 45.5299, lon: -122.563177, times: ["11:35 AM", "12:07 PM", "12:37 PM"] },
  { stop_id: "4287", name: "10000 Block NE Pacific St", lat: 45.529407, lon: -122.560866, times: ["11:35 AM", "12:07 PM", "12:37 PM"] },
  { stop_id: "2015", name: "NE Glisan &amp; 102nd", lat: 45.526171, lon: -122.557633, times: ["11:36 AM", "12:08 PM", "12:38 PM"] },
  { stop_id: "2018", name: "NE Glisan &amp; 105th", lat: 45.526173, lon: -122.555097, times: ["11:36 AM", "12:08 PM", "12:38 PM"] },
  { stop_id: "2020", name: "NE Glisan &amp; 108th", lat: 45.526174, lon: -122.551427, times: ["11:37 AM", "12:09 PM", "12:39 PM"] },
  { stop_id: "2024", name: "NE Glisan &amp; 113th", lat: 45.526198, lon: -122.54681, times: ["11:37 AM", "12:09 PM", "12:39 PM"] },
  { stop_id: "2028", name: "NE Glisan &amp; 117th", lat: 45.526175, lon: -122.542395, times: ["11:38 AM", "12:10 PM", "12:40 PM"] },
  { stop_id: "2032", name: "NE Glisan &amp; 120th", lat: 45.526186, lon: -122.539583, times: ["11:38 AM", "12:10 PM", "12:40 PM"] },
  { stop_id: "2036", name: "NE Glisan &amp; 126th", lat: 45.52623, lon: -122.53359, times: ["11:39 AM", "12:11 PM", "12:41 PM"] },
  { stop_id: "2005", name: "12900 Block NE Glisan (Menlo Park ES)", lat: 45.526259, lon: -122.530459, times: ["11:40 AM", "12:12 PM", "12:42 PM"] },
  { stop_id: "2042", name: "NE Glisan &amp; 136th", lat: 45.526311, lon: -122.523558, times: ["11:41 AM", "12:13 PM", "12:43 PM"] },
  { stop_id: "2048", name: "NE Glisan &amp; 141st", lat: 45.526373, lon: -122.518035, times: ["11:10 AM", "11:41 AM", "12:13 PM"] },
  { stop_id: "2053", name: "NE Glisan &amp; 148th", lat: 45.526364, lon: -122.510101, times: ["11:12 AM", "11:43 AM", "12:15 PM"] },
  { stop_id: "2058", name: "NE Glisan &amp; 155th", lat: 45.526353, lon: -122.504409, times: ["11:12 AM", "11:43 AM", "12:15 PM"] },
  { stop_id: "2065", name: "NE Glisan &amp; 162nd", lat: 45.526318, lon: -122.495916, times: ["11:14 AM", "11:45 AM", "12:17 PM"] },
  { stop_id: "2067", name: "NE Glisan &amp; 165th", lat: 45.52632, lon: -122.493485, times: ["11:14 AM", "11:45 AM", "12:17 PM"] },
  { stop_id: "2069", name: "NE Glisan &amp; 167th Pl", lat: 45.526323, lon: -122.490678, times: ["11:14 AM", "11:45 AM", "12:17 PM"] },
  { stop_id: "2074", name: "NE Glisan &amp; 172nd", lat: 45.526314, lon: -122.485674, times: ["11:15 AM", "11:46 AM", "12:18 PM"] },
  { stop_id: "2076", name: "NE Glisan &amp; 176th", lat: 45.526305, lon: -122.48197, times: ["11:16 AM", "11:47 AM", "12:19 PM"] },
  { stop_id: "2080", name: "NE Glisan &amp; 181st", lat: 45.526316, lon: -122.476389, times: ["11:17 AM", "11:48 AM", "12:20 PM"] },
  { stop_id: "14514", name: "NE Glisan &amp; 185th Pl", lat: 45.526308, lon: -122.472444, times: ["11:17 AM", "11:48 AM", "12:20 PM"] },
  { stop_id: "14515", name: "NE Glisan &amp; 194th", lat: 45.526272, lon: -122.462929, times: ["11:19 AM", "11:50 AM", "12:22 PM"] },
  { stop_id: "14516", name: "NE Glisan &amp; 202nd", lat: 45.526467, lon: -122.455379, times: ["11:20 AM", "11:51 AM", "12:23 PM"] },
  { stop_id: "14517", name: "NE Glisan &amp; Fairview Pkwy", lat: 45.527723, lon: -122.442802, times: ["11:22 AM", "11:53 AM", "12:25 PM"] },
  { stop_id: "14518", name: "NE Glisan &amp; 223rd", lat: 45.527711, lon: -122.433076, times: ["11:23 AM", "11:54 AM", "12:26 PM"] },
  { stop_id: "14575", name: "NE Glisan &amp; Wood Village Blvd", lat: 45.527686, lon: -122.428637, times: ["11:24 AM", "11:55 AM", "12:27 PM"] },
  { stop_id: "9727", name: "NE Glisan &amp; 23400 Block", lat: 45.527608, lon: -122.423103, times: ["11:25 AM", "11:56 AM", "12:28 PM"] },
  { stop_id: "9797", name: "SW Cherry Park &amp; NE 242nd", lat: 45.527626, lon: -122.412609, times: ["11:27 AM", "11:58 AM", "12:30 PM"] },
  { stop_id: "14519", name: "SW Cherry Park &amp; Cerise Way", lat: 45.529515, lon: -122.408499, times: ["11:27 AM", "11:58 AM", "12:30 PM"] },
  { stop_id: "14520", name: "SW Cherry Park &amp; Imagination Way", lat: 45.529845, lon: -122.404279, times: ["11:28 AM", "11:59 AM", "12:31 PM"] },
  { stop_id: "9092", name: "SW 257th &amp; 16th Way", lat: 45.530246, lon: -122.399135, times: ["11:29 AM", "12:00 PM", "12:32 PM"] },
  { stop_id: "9094", name: "SW 257th &amp; Cherry Park", lat: 45.533423, lon: -122.399145, times: ["11:30 AM", "12:01 PM", "12:33 PM"] },
  { stop_id: "14521", name: "SW Cherry Park &amp; Hensley", lat: 45.533503, lon: -122.393009, times: ["11:31 AM", "12:02 PM", "12:34 PM"] },
  { stop_id: "14522", name: "SW Cherry Park &amp; Troutdale Rd", lat: 45.533544, lon: -122.388355, times: ["11:31 AM", "12:02 PM", "12:34 PM"] },
  { stop_id: "5870", name: "S Troutdale Rd &amp; SW Chapman", lat: 45.531045, lon: -122.38762, times: ["11:32 AM", "12:03 PM", "12:35 PM"] },
  { stop_id: "5875", name: "S Troutdale &amp; SE 19th", lat: 45.527927, lon: -122.387616, times: ["11:33 AM", "12:04 PM", "12:36 PM"] },
  { stop_id: "5877", name: "S Troutdale &amp; SW 21st", lat: 45.526042, lon: -122.387577, times: ["11:33 AM", "12:04 PM", "12:36 PM"] },
  { stop_id: "5868", name: "S Troutdale &amp; SE Beavercreek", lat: 45.523735, lon: -122.38717, times: ["11:34 AM", "12:05 PM", "12:37 PM"] },
  { stop_id: "5865", name: "3000 Block S Troutdale", lat: 45.521056, lon: -122.38706, times: ["11:34 AM", "12:05 PM", "12:37 PM"] },
  { stop_id: "5872", name: "S Troutdale &amp; SE Stark", lat: 45.519186, lon: -122.387024, times: ["11:35 AM", "12:06 PM", "12:38 PM"] },
  { stop_id: "5409", name: "SE Stark &amp; SW Corbeth Lane", lat: 45.51909, lon: -122.392336, times: ["11:36 AM", "12:07 PM", "12:39 PM"] },
  { stop_id: "13031", name: "NE Kane &amp; SE Stark", lat: 45.518484, lon: -122.398609, times: ["11:37 AM", "12:08 PM", "12:40 PM"] },
  { stop_id: "3873", name: "Mt Hood Community College Main Stop", lat: 45.515395, lon: -122.39765, times: ["11:38 AM", "12:09 PM", "12:41 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.slice(0, 3).join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<script>
  if (!localStorage.getItem('cookieConsent')) {
    document.write(`
      <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
        📢 We use cookies to improve functionality and analyze traffic.
        By using MetroFeed, you agree to our 
        <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
        <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
      </div>
    `);
  }
</script>

</body>
</html>