<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route FX2 - To Gresham | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route FX2 - To Gresham</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = FX2;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.527693, -122.675564],
  [45.527639, -122.675562],
  [45.527546, -122.675559],
  [45.527435, -122.675554],
  [45.527361, -122.675551],
  [45.527298, -122.675548],
  [45.52673, -122.675529],
  [45.526702, -122.675528],
  [45.526645, -122.675527],
  [45.526585, -122.675524],
  [45.52599, -122.675512],
  [45.52593, -122.67551],
  [45.525224, -122.675481],
  [45.524707, -122.675459],
  [45.524508, -122.675451],
  [45.524455, -122.675457],
  [45.523856, -122.675435],
  [45.523796, -122.675434],
  [45.523744, -122.675433],
  [45.523208, -122.675414],
  [45.523141, -122.675403],
  [45.523025, -122.675386],
  [45.522962, -122.67538],
  [45.522922, -122.675383],
  [45.52288, -122.675394],
  [45.522703, -122.675478],
  [45.522612, -122.675527],
  [45.52258, -122.675542],
  [45.522549, -122.675556],
  [45.522184, -122.67573],
  [45.522128, -122.67575],
  [45.52206, -122.675774],
  [45.521534, -122.676064],
  [45.521457, -122.67611],
  [45.52137, -122.67616],
  [45.520857, -122.676429],
  [45.52079, -122.676466],
  [45.520245, -122.676761],
  [45.520181, -122.676796],
  [45.520125, -122.676825],
  [45.520048, -122.676865],
  [45.519566, -122.677133],
  [45.519507, -122.677166],
  [45.519457, -122.67719],
  [45.519358, -122.677239],
  [45.518833, -122.677521],
  [45.518798, -122.677543],
  [45.51877, -122.67756],
  [45.51874, -122.677579],
  [45.518179, -122.677878],
  [45.518142, -122.677899],
  [45.518112, -122.677916],
  [45.518045, -122.677953],
  [45.517539, -122.678221],
  [45.517462, -122.678283],
  [45.51692, -122.678577],
  [45.516795, -122.678644],
  [45.51613, -122.679004],
  [45.515462, -122.679366],
  [45.51479, -122.67973],
  [45.514269, -122.680012],
  [45.514133, -122.680086],
  [45.513466, -122.680448],
  [45.513249, -122.680565],
  [45.513019, -122.68069],
  [45.512796, -122.68081],
  [45.512727, -122.680848],
  [45.512371, -122.68104],
  [45.512133, -122.68117],
  [45.512001, -122.681241],
  [45.511705, -122.681401],
  [45.511595, -122.681461],
  [45.511468, -122.68153],
  [45.511448, -122.68154],
  [45.511222, -122.681664],
  [45.510879, -122.681849],
  [45.510797, -122.681893],
  [45.510523, -122.682043],
  [45.510426, -122.682095],
  [45.510251, -122.682189],
  [45.510239, -122.682195],
  [45.510133, -122.682253],
  [45.509636, -122.682522],
  [45.509467, -122.682613],
  [45.50905, -122.682839],
  [45.508858, -122.682943],
  [45.508787, -122.682973],
  [45.508748, -122.682988],
  [45.50871, -122.683002],
  [45.5086, -122.683042],
  [45.508493, -122.683023],
  [45.508434, -122.683022],
  [45.508247, -122.68303],
  [45.50823, -122.683032],
  [45.508214, -122.683033],
  [45.508152, -122.683036],
  [45.508045, -122.683049],
  [45.508029, -122.68296],
  [45.50802, -122.682834],
  [45.50802, -122.682648],
  [45.508019, -122.682456],
  [45.508015, -122.682177],
  [45.508012, -122.682114],
  [45.50801, -122.682073],
  [45.508003, -122.682014],
  [45.507993, -122.681962],
  [45.507971, -122.681877],
  [45.507943, -122.681752],
  [45.507921, -122.681647],
  [45.507904, -122.681558],
  [45.507889, -122.681459],
  [45.50788, -122.68135],
  [45.507877, -122.681267],
  [45.507872, -122.681109],
  [45.50787, -122.680977],
  [45.507848, -122.680573],
  [45.507844, -122.68043],
  [45.507836, -122.680182],
  [45.507836, -122.680132],
  [45.507837, -122.680036],
  [45.507839, -122.679927],
  [45.507846, -122.679801],
  [45.507858, -122.679603],
  [45.50787, -122.679419],
  [45.507876, -122.67922],
  [45.507895, -122.678891],
  [45.507909, -122.678744],
  [45.507919, -122.678593],
  [45.507924, -122.67851],
  [45.507925, -122.678421],
  [45.507927, -122.677624],
  [45.507939, -122.677507],
  [45.507951, -122.677395],
  [45.507953, -122.677367],
  [45.507954, -122.677328],
  [45.507952, -122.676815],
  [45.507951, -122.676727],
  [45.50795, -122.676662],
  [45.507946, -122.676562],
  [45.507942, -122.676511],
  [45.507937, -122.676455],
  [45.507928, -122.676392],
  [45.507919, -122.676341],
  [45.507909, -122.676293],
  [45.507897, -122.676242],
  [45.507887, -122.676206],
  [45.507866, -122.676144],
  [45.507844, -122.676086],
  [45.507821, -122.676034],
  [45.507796, -122.675983],
  [45.507773, -122.675941],
  [45.507742, -122.675889],
  [45.507704, -122.675835],
  [45.507675, -122.675799],
  [45.507639, -122.675758],
  [45.507609, -122.675726],
  [45.507574, -122.675694],
  [45.50754, -122.675667],
  [45.507504, -122.675642],
  [45.507465, -122.675617],
  [45.507421, -122.675595],
  [45.507319, -122.675555],
  [45.507234, -122.675528],
  [45.506949, -122.675443],
  [45.50679, -122.675391],
  [45.50671, -122.675359],
  [45.506628, -122.675324],
  [45.506566, -122.675295],
  [45.506502, -122.675266],
  [45.506462, -122.675247],
  [45.506198, -122.675126],
  [45.506134, -122.675095],
  [45.506058, -122.675056],
  [45.506004, -122.675023],
  [45.505944, -122.674986],
  [45.505905, -122.674959],
  [45.505836, -122.674909],
  [45.505754, -122.67484],
  [45.505704, -122.674794],
  [45.505635, -122.674728],
  [45.505579, -122.674671],
  [45.505478, -122.674564],
  [45.505311, -122.674383],
  [45.505239, -122.674314],
  [45.505188, -122.674268],
  [45.505072, -122.674178],
  [45.50496, -122.674103],
  [45.504649, -122.67391],
  [45.504532, -122.673838],
  [45.504283, -122.673689],
  [45.504145, -122.673614],
  [45.504103, -122.673595],
  [45.503986, -122.673542],
  [45.50368, -122.673395],
  [45.503291, -122.673202],
  [45.502763, -122.672937],
  [45.502728, -122.672914],
  [45.502678, -122.67288],
  [45.502635, -122.672842],
  [45.502596, -122.6728],
  [45.502555, -122.672748],
  [45.502528, -122.672707],
  [45.502501, -122.672661],
  [45.502479, -122.672617],
  [45.502458, -122.672564],
  [45.50244, -122.672506],
  [45.502431, -122.672457],
  [45.502426, -122.672422],
  [45.502424, -122.672374],
  [45.502424, -122.672333],
  [45.502427, -122.672285],
  [45.502434, -122.672238],
  [45.502439, -122.672206],
  [45.50245, -122.672153],
  [45.502464, -122.672104],
  [45.502484, -122.672074],
  [45.502512, -122.67203],
  [45.502534, -122.671949],
  [45.502847, -122.670901],
  [45.502891, -122.670754],
  [45.502956, -122.670539],
  [45.502998, -122.670254],
  [45.50302, -122.670142],
  [45.503035, -122.670075],
  [45.503056, -122.669991],
  [45.503069, -122.669947],
  [45.503097, -122.669873],
  [45.503132, -122.669797],
  [45.503167, -122.669725],
  [45.503202, -122.669666],
  [45.503237, -122.669611],
  [45.503272, -122.669561],
  [45.503402, -122.669357],
  [45.504283, -122.66801],
  [45.50463, -122.667478],
  [45.505025, -122.666877],
  [45.50589, -122.665538],
  [45.506437, -122.664706],
  [45.506458, -122.664666],
  [45.506473, -122.664628],
  [45.506486, -122.664593],
  [45.506496, -122.664557],
  [45.506504, -122.664525],
  [45.506515, -122.66447],
  [45.506527, -122.664398],
  [45.506534, -122.664337],
  [45.506536, -122.664309],
  [45.506538, -122.66426],
  [45.506544, -122.663978],
  [45.50655, -122.663892],
  [45.506567, -122.663783],
  [45.506561, -122.663417],
  [45.50655, -122.66229],
  [45.506549, -122.662144],
  [45.506548, -122.662057],
  [45.506549, -122.661931],
  [45.50655, -122.661827],
  [45.506555, -122.661603],
  [45.506555, -122.66114],
  [45.506557, -122.661016],
  [45.50655, -122.660903],
  [45.506538, -122.660778],
  [45.506497, -122.660682],
  [45.50649, -122.660667],
  [45.506484, -122.660621],
  [45.506472, -122.660527],
  [45.506453, -122.660406],
  [45.506425, -122.660257],
  [45.50639, -122.6601],
  [45.506346, -122.659935],
  [45.506322, -122.659852],
  [45.506285, -122.659737],
  [45.506256, -122.659649],
  [45.506188, -122.659507],
  [45.506144, -122.65943],
  [45.506101, -122.659334],
  [45.505964, -122.659077],
  [45.50589, -122.658929],
  [45.505851, -122.658858],
  [45.505824, -122.658809],
  [45.505799, -122.658776],
  [45.505756, -122.658721],
  [45.505641, -122.658715],
  [45.504872, -122.658726],
  [45.50487, -122.657781],
  [45.504983, -122.657692],
  [45.504998, -122.657686],
  [45.505046, -122.657673],
  [45.505079, -122.657661],
  [45.505109, -122.657641],
  [45.505131, -122.657618],
  [45.505164, -122.657582],
  [45.505199, -122.657543],
  [45.505232, -122.657508],
  [45.505331, -122.657398],
  [45.505343, -122.65733],
  [45.505347, -122.657278],
  [45.505352, -122.657198],
  [45.505353, -122.657152],
  [45.505354, -122.657083],
  [45.505303, -122.65698],
  [45.50529, -122.656875],
  [45.505038, -122.656419],
  [45.504956, -122.656274],
  [45.504923, -122.6562],
  [45.504904, -122.656151],
  [45.50489, -122.656095],
  [45.50488, -122.656038],
  [45.504873, -122.65596],
  [45.50487, -122.655878],
  [45.504873, -122.655768],
  [45.50486, -122.654841],
  [45.50486, -122.654752],
  [45.504856, -122.653989],
  [45.504854, -122.653831],
  [45.504854, -122.653729],
  [45.504853, -122.653361],
  [45.504851, -122.652717],
  [45.504849, -122.651923],
  [45.504847, -122.651799],
  [45.504845, -122.651701],
  [45.504843, -122.650685],
  [45.50484, -122.649674],
  [45.504839, -122.649436],
  [45.504837, -122.648748],
  [45.504836, -122.648661],
  [45.504835, -122.648557],
  [45.504831, -122.647646],
  [45.50483, -122.646895],
  [45.504828, -122.646068],
  [45.504827, -122.645993],
  [45.504826, -122.645862],
  [45.504824, -122.645623],
  [45.504823, -122.645251],
  [45.504822, -122.645075],
  [45.504821, -122.644695],
  [45.50482, -122.644603],
  [45.50482, -122.644397],
  [45.504818, -122.643575],
  [45.504817, -122.643397],
  [45.504814, -122.642575],
  [45.504813, -122.642331],
  [45.504813, -122.642261],
  [45.50481, -122.641449],
  [45.504809, -122.641246],
  [45.504808, -122.640408],
  [45.504806, -122.639617],
  [45.504805, -122.639201],
  [45.504805, -122.639146],
  [45.504804, -122.638912],
  [45.504803, -122.638647],
  [45.504803, -122.63844],
  [45.504802, -122.637634],
  [45.504802, -122.637559],
  [45.504803, -122.637344],
  [45.504803, -122.637002],
  [45.504804, -122.636755],
  [45.504803, -122.636664],
  [45.504802, -122.636042],
  [45.504801, -122.635859],
  [45.504801, -122.635605],
  [45.5048, -122.634645],
  [45.504799, -122.634289],
  [45.504799, -122.634194],
  [45.504799, -122.633672],
  [45.504797, -122.633576],
  [45.504797, -122.632613],
  [45.504797, -122.63251],
  [45.504796, -122.63202],
  [45.504796, -122.631802],
  [45.504795, -122.631551],
  [45.504795, -122.631479],
  [45.504796, -122.631183],
  [45.504795, -122.630634],
  [45.504794, -122.630535],
  [45.504793, -122.630244],
  [45.504793, -122.629954],
  [45.504793, -122.629573],
  [45.504793, -122.629149],
  [45.504792, -122.628587],
  [45.504792, -122.627605],
  [45.504789, -122.627276],
  [45.504788, -122.626246],
  [45.504787, -122.625751],
  [45.504787, -122.625718],
  [45.504786, -122.625233],
  [45.504786, -122.62461],
  [45.504786, -122.624281],
  [45.504786, -122.623943],
  [45.504784, -122.623361],
  [45.504783, -122.62315],
  [45.504783, -122.623118],
  [45.504782, -122.622759],
  [45.504783, -122.622641],
  [45.504784, -122.622522],
  [45.504784, -122.622183],
  [45.504784, -122.622077],
  [45.504784, -122.621778],
  [45.504785, -122.621472],
  [45.504787, -122.620374],
  [45.504787, -122.619824],
  [45.504791, -122.619643],
  [45.504803, -122.619537],
  [45.504819, -122.619441],
  [45.504839, -122.619366],
  [45.50487, -122.619288],
  [45.504888, -122.619255],
  [45.504911, -122.619212],
  [45.505125, -122.618891],
  [45.505171, -122.618813],
  [45.50519, -122.618766],
  [45.505205, -122.618726],
  [45.505227, -122.618637],
  [45.505249, -122.61849],
  [45.505263, -122.618352],
  [45.505271, -122.61819],
  [45.505271, -122.61815],
  [45.505272, -122.618047],
  [45.505275, -122.617124],
  [45.505281, -122.616151],
  [45.505286, -122.615182],
  [45.505293, -122.6142],
  [45.505294, -122.614015],
  [45.505297, -122.613448],
  [45.505298, -122.613226],
  [45.505299, -122.61302],
  [45.505299, -122.61292],
  [45.505304, -122.612029],
  [45.505307, -122.611118],
  [45.505309, -122.61083],
  [45.50531, -122.610595],
  [45.505311, -122.610488],
  [45.505314, -122.610011],
  [45.505315, -122.609659],
  [45.505319, -122.609107],
  [45.505317, -122.609002],
  [45.505317, -122.608898],
  [45.505322, -122.608056],
  [45.505329, -122.607046],
  [45.505336, -122.606038],
  [45.505337, -122.605843],
  [45.505338, -122.605567],
  [45.505338, -122.605486],
  [45.505339, -122.605388],
  [45.505341, -122.604903],
  [45.505347, -122.603775],
  [45.505351, -122.603072],
  [45.505354, -122.602752],
  [45.505355, -122.602457],
  [45.505356, -122.602253],
  [45.505357, -122.602029],
  [45.505357, -122.60194],
  [45.505358, -122.601802],
  [45.505359, -122.601713],
  [45.50536, -122.601618],
  [45.50536, -122.601159],
  [45.505361, -122.600465],
  [45.505362, -122.600263],
  [45.505365, -122.599893],
  [45.505365, -122.599415],
  [45.505366, -122.598847],
  [45.505369, -122.597515],
  [45.50537, -122.596815],
  [45.505371, -122.596389],
  [45.505372, -122.595569],
  [45.50537, -122.595111],
  [45.505372, -122.594844],
  [45.505373, -122.594592],
  [45.505373, -122.593714],
  [45.505375, -122.59302],
  [45.505375, -122.59291],
  [45.505376, -122.592668],
  [45.505377, -122.592096],
  [45.505378, -122.591594],
  [45.505378, -122.591291],
  [45.505379, -122.590783],
  [45.505381, -122.589895],
  [45.505381, -122.589799],
  [45.505381, -122.589448],
  [45.505382, -122.588872],
  [45.505383, -122.588473],
  [45.505383, -122.588338],
  [45.505384, -122.588017],
  [45.505385, -122.587683],
  [45.505386, -122.587163],
  [45.505387, -122.586781],
  [45.505388, -122.586581],
  [45.505389, -122.586341],
  [45.50539, -122.585771],
  [45.50539, -122.585661],
  [45.505391, -122.585272],
  [45.505392, -122.584666],
  [45.505393, -122.584439],
  [45.505395, -122.583695],
  [45.505396, -122.582871],
  [45.505395, -122.58269],
  [45.505392, -122.582523],
  [45.505388, -122.582371],
  [45.505379, -122.582174],
  [45.505361, -122.581899],
  [45.505348, -122.581769],
  [45.505323, -122.581579],
  [45.505293, -122.581394],
  [45.505201, -122.58085],
  [45.505024, -122.579799],
  [45.504966, -122.579471],
  [45.504956, -122.579419],
  [45.504906, -122.579126],
  [45.504857, -122.578843],
  [45.504832, -122.578687],
  [45.504809, -122.57855],
  [45.504769, -122.578227],
  [45.504764, -122.578193],
  [45.504757, -122.578131],
  [45.504746, -122.578041],
  [45.504731, -122.57791],
  [45.50471, -122.577687],
  [45.504697, -122.577558],
  [45.504663, -122.577151],
  [45.50464, -122.576813],
  [45.504626, -122.576589],
  [45.504611, -122.576186],
  [45.504602, -122.575674],
  [45.504598, -122.575457],
  [45.504595, -122.575262],
  [45.504592, -122.574982],
  [45.504593, -122.574879],
  [45.504595, -122.574755],
  [45.504591, -122.574559],
  [45.504584, -122.574252],
  [45.504583, -122.574166],
  [45.504572, -122.573884],
  [45.504568, -122.573779],
  [45.504565, -122.573593],
  [45.504562, -122.573409],
  [45.504561, -122.573358],
  [45.50454, -122.572284],
  [45.504536, -122.571768],
  [45.504524, -122.571056],
  [45.504519, -122.570783],
  [45.504515, -122.570511],
  [45.504508, -122.57019],
  [45.504503, -122.569922],
  [45.504501, -122.569832],
  [45.504496, -122.569614],
  [45.504493, -122.569429],
  [45.504491, -122.56938],
  [45.504487, -122.569178],
  [45.504484, -122.569015],
  [45.504479, -122.568797],
  [45.504477, -122.568643],
  [45.504468, -122.568093],
  [45.504465, -122.56793],
  [45.504465, -122.567646],
  [45.504419, -122.567521],
  [45.504415, -122.567206],
  [45.50441, -122.566918],
  [45.504456, -122.566783],
  [45.504454, -122.566688],
  [45.504448, -122.566233],
  [45.504443, -122.565973],
  [45.50441, -122.564797],
  [45.504402, -122.564475],
  [45.50439, -122.563947],
  [45.504378, -122.563411],
  [45.504379, -122.563286],
  [45.50438, -122.563131],
  [45.504375, -122.562798],
  [45.504369, -122.562485],
  [45.50435, -122.561337],
  [45.504346, -122.561108],
  [45.504343, -122.560915],
  [45.504332, -122.560289],
  [45.504318, -122.559584],
  [45.504311, -122.559198],
  [45.504309, -122.559119],
  [45.504306, -122.558954],
  [45.504289, -122.558095],
  [45.504285, -122.557874],
  [45.504278, -122.557534],
  [45.504273, -122.557042],
  [45.504268, -122.556646],
  [45.504265, -122.556401],
  [45.504256, -122.555469],
  [45.50425, -122.554645],
  [45.504246, -122.554259],
  [45.504242, -122.553828],
  [45.504237, -122.553412],
  [45.50423, -122.552474],
  [45.504229, -122.552242],
  [45.504223, -122.551344],
  [45.504216, -122.550772],
  [45.50421, -122.550222],
  [45.504208, -122.549735],
  [45.504206, -122.549331],
  [45.504199, -122.548574],
  [45.504194, -122.548137],
  [45.504194, -122.548018],
  [45.504195, -122.547906],
  [45.504194, -122.547422],
  [45.504191, -122.547279],
  [45.504186, -122.546962],
  [45.504182, -122.546679],
  [45.504172, -122.545637],
  [45.50417, -122.545458],
  [45.504168, -122.545305],
  [45.504162, -122.5448],
  [45.504155, -122.544039],
  [45.504153, -122.543818],
  [45.504149, -122.543372],
  [45.504147, -122.543099],
  [45.504145, -122.542815],
  [45.504139, -122.542203],
  [45.504136, -122.541891],
  [45.50413, -122.541208],
  [45.504127, -122.540909],
  [45.504126, -122.540811],
  [45.504123, -122.540581],
  [45.504114, -122.539912],
  [45.504113, -122.539787],
  [45.504111, -122.539627],
  [45.504104, -122.539144],
  [45.504102, -122.538955],
  [45.504096, -122.537852],
  [45.504094, -122.537674],
  [45.504092, -122.537496],
  [45.50409, -122.537175],
  [45.504089, -122.537033],
  [45.504083, -122.536045],
  [45.504081, -122.53577],
  [45.50408, -122.535617],
  [45.50408, -122.535346],
  [45.50408, -122.534762],
  [45.504077, -122.534202],
  [45.504075, -122.533815],
  [45.504073, -122.533402],
  [45.504073, -122.533277],
  [45.504069, -122.532663],
  [45.504068, -122.532397],
  [45.504066, -122.532104],
  [45.504061, -122.531229],
  [45.504059, -122.530849],
  [45.504058, -122.53069],
  [45.504055, -122.529979],
  [45.504053, -122.529562],
  [45.504052, -122.529236],
  [45.504049, -122.528486],
  [45.504046, -122.527711],
  [45.504045, -122.527443],
  [45.504047, -122.527052],
  [45.504048, -122.526777],
  [45.504051, -122.526171],
  [45.504056, -122.525521],
  [45.504057, -122.52543],
  [45.50406, -122.524919],
  [45.504062, -122.524751],
  [45.504067, -122.524099],
  [45.50407, -122.523784],
  [45.504069, -122.523688],
  [45.504069, -122.523594],
  [45.50407, -122.523425],
  [45.504071, -122.523325],
  [45.504072, -122.52321],
  [45.504074, -122.522982],
  [45.504075, -122.522797],
  [45.504078, -122.522498],
  [45.504079, -122.522235],
  [45.504084, -122.521756],
  [45.504086, -122.521389],
  [45.504087, -122.520967],
  [45.504094, -122.520022],
  [45.504095, -122.519835],
  [45.504097, -122.519581],
  [45.504101, -122.519259],
  [45.504103, -122.518934],
  [45.504105, -122.51869],
  [45.504106, -122.518473],
  [45.504112, -122.51775],
  [45.504115, -122.517507],
  [45.504118, -122.517287],
  [45.504123, -122.517015],
  [45.504128, -122.516462],
  [45.504133, -122.516022],
  [45.504136, -122.51573],
  [45.504138, -122.515627],
  [45.504143, -122.515278],
  [45.504145, -122.515153],
  [45.504149, -122.514824],
  [45.504153, -122.514586],
  [45.504153, -122.514543],
  [45.504162, -122.513999],
  [45.504163, -122.513909],
  [45.504165, -122.513821],
  [45.504175, -122.513216],
  [45.504183, -122.512674],
  [45.504188, -122.512222],
  [45.504195, -122.51177],
  [45.504208, -122.511039],
  [45.504209, -122.510995],
  [45.504214, -122.510624],
  [45.504222, -122.510112],
  [45.504228, -122.509685],
  [45.504237, -122.509041],
  [45.504244, -122.508563],
  [45.504245, -122.508448],
  [45.504259, -122.507497],
  [45.504265, -122.507039],
  [45.504294, -122.505961],
  [45.504305, -122.50556],
  [45.504318, -122.505108],
  [45.50433, -122.5047],
  [45.504353, -122.503847],
  [45.504377, -122.503018],
  [45.504404, -122.502069],
  [45.504414, -122.501724],
  [45.504424, -122.50136],
  [45.50443, -122.501129],
  [45.504451, -122.500446],
  [45.504456, -122.500255],
  [45.504485, -122.499203],
  [45.504504, -122.498583],
  [45.504523, -122.498062],
  [45.504538, -122.497437],
  [45.504548, -122.49707],
  [45.504555, -122.496837],
  [45.504559, -122.496664],
  [45.504564, -122.496491],
  [45.504568, -122.494982],
  [45.504571, -122.493765],
  [45.504571, -122.493692],
  [45.504573, -122.493223],
  [45.504575, -122.492601],
  [45.504575, -122.492543],
  [45.504578, -122.491889],
  [45.504579, -122.491567],
  [45.50458, -122.491104],
  [45.504581, -122.490739],
  [45.504581, -122.49034],
  [45.504583, -122.489639],
  [45.504585, -122.489185],
  [45.504585, -122.489059],
  [45.504586, -122.488655],
  [45.504587, -122.487942],
  [45.50459, -122.487348],
  [45.504593, -122.486492],
  [45.504593, -122.485908],
  [45.504593, -122.485531],
  [45.504593, -122.485383],
  [45.504593, -122.4848],
  [45.504592, -122.484689],
  [45.504591, -122.484568],
  [45.50459, -122.484194],
  [45.50459, -122.484045],
  [45.504589, -122.483473],
  [45.504589, -122.483222],
  [45.504588, -122.482746],
  [45.504586, -122.482076],
  [45.504586, -122.481365],
  [45.504583, -122.48085],
  [45.504581, -122.48032],
  [45.50458, -122.480134],
  [45.50458, -122.479642],
  [45.50458, -122.47942],
  [45.504579, -122.479074],
  [45.504578, -122.478841],
  [45.504578, -122.478479],
  [45.504576, -122.478102],
  [45.504576, -122.477952],
  [45.504575, -122.477707],
  [45.504574, -122.47748],
  [45.504573, -122.476951],
  [45.504572, -122.476502],
  [45.50457, -122.475788],
  [45.50457, -122.475624],
  [45.504571, -122.475429],
  [45.504568, -122.475107],
  [45.504559, -122.47432],
  [45.504554, -122.473808],
  [45.504553, -122.473705],
  [45.504543, -122.472407],
  [45.504539, -122.471943],
  [45.504535, -122.47136],
  [45.504529, -122.470699],
  [45.504527, -122.470525],
  [45.504523, -122.469933],
  [45.504514, -122.46895],
  [45.504506, -122.468023],
  [45.504506, -122.467889],
  [45.504506, -122.467753],
  [45.504502, -122.467265],
  [45.504499, -122.466994],
  [45.504495, -122.46657],
  [45.504493, -122.466292],
  [45.504491, -122.466141],
  [45.504489, -122.465894],
  [45.504486, -122.465619],
  [45.50448, -122.464932],
  [45.504477, -122.464647],
  [45.504466, -122.463412],
  [45.504461, -122.462905],
  [45.504459, -122.462731],
  [45.504458, -122.462438],
  [45.504451, -122.461288],
  [45.504448, -122.46078],
  [45.504447, -122.460037],
  [45.504448, -122.459756],
  [45.504451, -122.458731],
  [45.504452, -122.458616],
  [45.504407, -122.45851],
  [45.504406, -122.458364],
  [45.504405, -122.458171],
  [45.504453, -122.458092],
  [45.504452, -122.45748],
  [45.504442, -122.456223],
  [45.504434, -122.455025],
  [45.504388, -122.454919],
  [45.504389, -122.454137],
  [45.504392, -122.453668],
  [45.504438, -122.453515],
  [45.504446, -122.452367],
  [45.504449, -122.452056],
  [45.504456, -122.451265],
  [45.504458, -122.451053],
  [45.504462, -122.450648],
  [45.504469, -122.449886],
  [45.504476, -122.449172],
  [45.50448, -122.448789],
  [45.504484, -122.448321],
  [45.504492, -122.447426],
  [45.504504, -122.446241],
  [45.504514, -122.445075],
  [45.504514, -122.444984],
  [45.504469, -122.444883],
  [45.504444, -122.443725],
  [45.504443, -122.44359],
  [45.504435, -122.442532],
  [45.504435, -122.442373],
  [45.504435, -122.441913],
  [45.504435, -122.441544],
  [45.504435, -122.441285],
  [45.504434, -122.441101],
  [45.504433, -122.44094],
  [45.504428, -122.439363],
  [45.504425, -122.4382],
  [45.504424, -122.437301],
  [45.504425, -122.436939],
  [45.504425, -122.436731],
  [45.504423, -122.435874],
  [45.504422, -122.435724],
  [45.504421, -122.435564],
  [45.50442, -122.435444],
  [45.504421, -122.435112],
  [45.504421, -122.434845],
  [45.504413, -122.434048],
  [45.504413, -122.433902],
  [45.504413, -122.433596],
  [45.504411, -122.432948],
  [45.504411, -122.432772],
  [45.50441, -122.432672],
  [45.504408, -122.432221],
  [45.504408, -122.431141],
  [45.504407, -122.430991],
  [45.504407, -122.430858],
  [45.504413, -122.430643],
  [45.50443, -122.430452],
  [45.504456, -122.430244],
  [45.504534, -122.429786],
  [45.504554, -122.429672],
  [45.503494, -122.429669],
  [45.503418, -122.429668],
  [45.503201, -122.428927],
  [45.503056, -122.42843],
  [45.503008, -122.428251],
  [45.50297, -122.428087],
  [45.502948, -122.427975],
  [45.502919, -122.427821],
  [45.502919, -122.427622],
  [45.502922, -122.427323],
  [45.502926, -122.42692],
  [45.50293, -122.426627],
  [45.502933, -122.426334],
  [45.502938, -122.426245],
  [45.502948, -122.426062],
  [45.50297, -122.424479],
  [45.502973, -122.424301],
  [45.502981, -122.42367],
  [45.50299, -122.423046],
  [45.503017, -122.421107],
  [45.503023, -122.419908],
  [45.503034, -122.419209],
  [45.503041, -122.418759],
  [45.503045, -122.418492],
  [45.503052, -122.418016],
  [45.502892, -122.418008],
  [45.502351, -122.417994]
];

const stopNames = {
  "1331": "NW Division &amp; Eastman Pkwy",
  "1333": "NW Division &amp; Eastwood Ave",
  "1359": "SE Division &amp; 101st Ave",
  "1370": "SE Division &amp; 116th Ave",
  "1375": "SE Division &amp; 12th Ave",
  "1379": "SE Division &amp; 122nd Ave",
  "1386": "SE Division &amp; 130th Ave",
  "1389": "SE Division &amp; 136th Ave",
  "1400": "SE Division &amp; 148th Ave",
  "1409": "SE Division &amp; 157th Ave",
  "1415": "SE Division &amp; 162nd Ave",
  "1418": "SE Division &amp; 168th Ave",
  "1422": "SE Division &amp; 174th Ave",
  "1435": "SE Division &amp; 20th Ave",
  "1441": "SE Division &amp; 26th Ave",
  "1447": "SE Division &amp; 30th Ave",
  "1451": "SE Division &amp; 34th Ave",
  "1458": "SE Division &amp; Cesar Chavez Blvd",
  "1477": "SE Division &amp; 60th Ave",
  "1489": "SE Division &amp; 76th Ave",
  "1497": "SE Division &amp; 82nd Ave",
  "3007": "NW Irving &amp; 5th",
  "3397": "300 Block SW Lincoln",
  "7594": "SW 5th &amp; Columbia",
  "7634": "SW 5th &amp; Salmon",
  "7642": "SW 5th &amp; Washington",
  "8199": "Gresham Central Transit Center",
  "8433": "SE Division &amp; 87th Ave",
  "8791": "SE Division &amp; 43rd Ave",
  "9301": "NW 5th &amp; Davis",
  "9302": "NW 5th &amp; Hoyt",
  "9426": "NW Division &amp; Angeline Ave",
  "10491": "SW 5th &amp; Hall",
  "13297": "SE Division &amp; SE Division St MAX Station",
  "13732": "South Waterfront/S Moody",
  "13772": "OMSI/SE Water",
  "13881": "14200 Block SE Division",
  "14225": "SE Division &amp; 51st Ave",
  "14226": "SE Division &amp; 68th Ave",
  "14227": "SE Division &amp; 113th Ave",
  "14228": "18200 Block SE Division",
  "14229": "NW Division &amp; Overlook Ave",
  "14230": "Cleveland Ave Park &amp; Ride"
};

const stops = [
  { stop_id: "9302", name: "NW 5th &amp; Hoyt", lat: 45.527692, lon: -122.67563, times: ["6:12 PM"] },
  { stop_id: "9301", name: "NW 5th &amp; Davis", lat: 45.524705, lon: -122.675552, times: ["6:13 PM"] },
  { stop_id: "7642", name: "SW 5th &amp; Washington", lat: 45.52027, lon: -122.676855, times: ["6:16 PM"] },
  { stop_id: "7634", name: "SW 5th &amp; Salmon", lat: 45.51694, lon: -122.678651, times: ["6:19 PM"] },
  { stop_id: "7594", name: "SW 5th &amp; Columbia", lat: 45.514297, lon: -122.680113, times: ["6:20 PM"] },
  { stop_id: "10491", name: "SW 5th &amp; Hall", lat: 45.510277, lon: -122.682286, times: ["6:21 PM"] },
  { stop_id: "3397", name: "300 Block SW Lincoln", lat: 45.507794, lon: -122.680132, times: ["6:11 PM"] },
  { stop_id: "13732", name: "South Waterfront/S Moody", lat: 45.502797, lon: -122.670872, times: ["6:15 PM"] },
  { stop_id: "13772", name: "OMSI/SE Water", lat: 45.506493, lon: -122.662291, times: ["6:18 PM"] },
  { stop_id: "1375", name: "SE Division &amp; 12th Ave", lat: 45.504799, lon: -122.653358, times: ["6:21 PM"] },
  { stop_id: "1435", name: "SE Division &amp; 20th Ave", lat: 45.50477, lon: -122.645972, times: ["6:10 PM"] },
  { stop_id: "1441", name: "SE Division &amp; 26th Ave", lat: 45.504769, lon: -122.639144, times: ["6:12 PM"] },
  { stop_id: "1447", name: "SE Division &amp; 30th Ave", lat: 45.504758, lon: -122.634191, times: ["6:13 PM"] },
  { stop_id: "1451", name: "SE Division &amp; 34th Ave", lat: 45.504754, lon: -122.629147, times: ["6:15 PM"] },
  { stop_id: "1458", name: "SE Division &amp; Cesar Chavez Blvd", lat: 45.504729, lon: -122.622181, times: ["6:17 PM"] },
  { stop_id: "8791", name: "SE Division &amp; 43rd Ave", lat: 45.505212, lon: -122.618149, times: ["6:17 PM"] },
  { stop_id: "14225", name: "SE Division &amp; 51st Ave", lat: 45.50527, lon: -122.609656, times: ["6:19 PM"] },
  { stop_id: "1477", name: "SE Division &amp; 60th Ave", lat: 45.505301, lon: -122.602027, times: ["6:21 PM"] },
  { stop_id: "14226", name: "SE Division &amp; 68th Ave", lat: 45.505309, lon: -122.593031, times: ["6:11 PM"] },
  { stop_id: "1489", name: "SE Division &amp; 76th Ave", lat: 45.505326, lon: -122.584666, times: ["6:13 PM"] },
  { stop_id: "1497", name: "SE Division &amp; 82nd Ave", lat: 45.50463, lon: -122.578225, times: ["6:15 PM"] },
  { stop_id: "8433", name: "SE Division &amp; 87th Ave", lat: 45.504471, lon: -122.573891, times: ["6:16 PM"] },
  { stop_id: "13297", name: "SE Division &amp; SE Division St MAX Station", lat: 45.504331, lon: -122.566916, times: ["6:17 PM"] },
  { stop_id: "1359", name: "SE Division &amp; 101st Ave", lat: 45.504219, lon: -122.559198, times: ["6:19 PM"] },
  { stop_id: "14227", name: "SE Division &amp; 113th Ave", lat: 45.504071, lon: -122.54694, times: ["6:10 PM"] },
  { stop_id: "1370", name: "SE Division &amp; 116th Ave", lat: 45.504034, lon: -122.543372, times: ["6:11 PM"] },
  { stop_id: "1379", name: "SE Division &amp; 122nd Ave", lat: 45.503993, lon: -122.537176, times: ["6:13 PM"] },
  { stop_id: "1386", name: "SE Division &amp; 130th Ave", lat: 45.50395, lon: -122.529539, times: ["6:14 PM"] },
  { stop_id: "1389", name: "SE Division &amp; 136th Ave", lat: 45.503969, lon: -122.523206, times: ["6:15 PM"] },
  { stop_id: "13881", name: "14200 Block SE Division", lat: 45.504032, lon: -122.516459, times: ["6:17 PM"] },
  { stop_id: "1400", name: "SE Division &amp; 148th Ave", lat: 45.504098, lon: -122.511033, times: ["6:18 PM"] },
  { stop_id: "1409", name: "SE Division &amp; 157th Ave", lat: 45.504333, lon: -122.501354, times: ["6:20 PM"] },
  { stop_id: "1415", name: "SE Division &amp; 162nd Ave", lat: 45.504442, lon: -122.497063, times: ["6:21 PM"] },
  { stop_id: "1418", name: "SE Division &amp; 168th Ave", lat: 45.504489, lon: -122.489182, times: ["6:10 PM"] },
  { stop_id: "1422", name: "SE Division &amp; 174th Ave", lat: 45.504484, lon: -122.484192, times: ["6:11 PM"] },
  { stop_id: "14228", name: "18200 Block SE Division", lat: 45.504458, lon: -122.474322, times: ["6:13 PM"] },
  { stop_id: "1333", name: "NW Division &amp; Eastwood Ave", lat: 45.504358, lon: -122.462905, times: ["6:15 PM"] },
  { stop_id: "9426", name: "NW Division &amp; Angeline Ave", lat: 45.504377, lon: -122.448762, times: ["6:11 PM"] },
  { stop_id: "14229", name: "NW Division &amp; Overlook Ave", lat: 45.50439, lon: -122.441912, times: ["6:12 PM"] },
  { stop_id: "1331", name: "NW Division &amp; Eastman Pkwy", lat: 45.504365, lon: -122.43511, times: ["6:14 PM"] },
  { stop_id: "8199", name: "Gresham Central Transit Center", lat: 45.502862, lon: -122.426918, times: ["6:16 PM"] },
  { stop_id: "14230", name: "Cleveland Ave Park &amp; Ride", lat: 45.503002, lon: -122.418757, times: ["6:13 PM"] },
  { stop_id: "3007", name: "NW Irving &amp; 5th", lat: 45.528015, lon: -122.675854, times: ["11:59 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>