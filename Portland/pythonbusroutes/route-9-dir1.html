<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 9 - To Portland City Center | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    
    }
  </style>
</head>

<body>
  

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 9 - To Portland City Center</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 9;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.502978, -122.42812],
  [45.50297, -122.428087],
  [45.502948, -122.427975],
  [45.502919, -122.427821],
  [45.502919, -122.427622],
  [45.502922, -122.427323],
  [45.50293, -122.426627],
  [45.50293, -122.426592],
  [45.502933, -122.426334],
  [45.502938, -122.426245],
  [45.502837, -122.426243],
  [45.50272, -122.426243],
  [45.502676, -122.426242],
  [45.502616, -122.426237],
  [45.502538, -122.426222],
  [45.502465, -122.426203],
  [45.50242, -122.426178],
  [45.502308, -122.4261],
  [45.502209, -122.426002],
  [45.502157, -122.425962],
  [45.502116, -122.425936],
  [45.502068, -122.42591],
  [45.502005, -122.425884],
  [45.501963, -122.425875],
  [45.501921, -122.425868],
  [45.501882, -122.425866],
  [45.50101, -122.425876],
  [45.50101, -122.42637],
  [45.50101, -122.426881],
  [45.50101, -122.426945],
  [45.50101, -122.427437],
  [45.50101, -122.4278],
  [45.50101, -122.427888],
  [45.50101, -122.427989],
  [45.500939, -122.427991],
  [45.500722, -122.427991],
  [45.50067, -122.427991],
  [45.500323, -122.42799],
  [45.499709, -122.427998],
  [45.499638, -122.428],
  [45.499582, -122.427994],
  [45.499557, -122.427985],
  [45.499479, -122.42795],
  [45.499057, -122.427761],
  [45.498951, -122.42774],
  [45.498866, -122.427734],
  [45.498615, -122.427731],
  [45.498514, -122.42773],
  [45.498403, -122.427729],
  [45.498112, -122.427726],
  [45.497989, -122.427722],
  [45.497985, -122.427848],
  [45.497982, -122.428022],
  [45.497979, -122.428334],
  [45.497983, -122.428588],
  [45.497987, -122.42883],
  [45.49799, -122.428987],
  [45.497991, -122.429035],
  [45.498041, -122.429169],
  [45.498045, -122.429486],
  [45.498049, -122.429668],
  [45.498045, -122.429965],
  [45.498036, -122.430242],
  [45.498018, -122.430527],
  [45.497987, -122.43085],
  [45.497928, -122.430973],
  [45.497873, -122.431342],
  [45.497868, -122.431375],
  [45.497832, -122.431592],
  [45.497767, -122.43191],
  [45.497749, -122.431999],
  [45.497689, -122.432259],
  [45.497623, -122.432518],
  [45.497523, -122.432911],
  [45.49753, -122.433068],
  [45.497486, -122.433242],
  [45.497441, -122.433421],
  [45.497368, -122.433747],
  [45.497347, -122.433866],
  [45.49731, -122.434071],
  [45.497273, -122.434335],
  [45.497259, -122.434453],
  [45.497194, -122.434598],
  [45.497183, -122.434735],
  [45.497163, -122.435054],
  [45.49716, -122.435099],
  [45.49715, -122.43541],
  [45.497147, -122.435638],
  [45.497146, -122.435791],
  [45.497137, -122.436746],
  [45.497136, -122.436939],
  [45.497133, -122.437505],
  [45.497133, -122.437539],
  [45.497132, -122.437725],
  [45.49713, -122.438101],
  [45.497129, -122.438187],
  [45.497126, -122.438331],
  [45.497125, -122.438426],
  [45.497123, -122.438783],
  [45.497121, -122.439289],
  [45.497119, -122.43964],
  [45.497119, -122.43991],
  [45.497114, -122.44015],
  [45.4971, -122.440598],
  [45.497096, -122.440781],
  [45.497092, -122.441352],
  [45.49709, -122.441717],
  [45.497087, -122.442347],
  [45.497084, -122.443112],
  [45.49708, -122.444627],
  [45.497079, -122.444787],
  [45.497079, -122.445803],
  [45.497079, -122.446391],
  [45.497079, -122.446967],
  [45.497076, -122.447124],
  [45.497072, -122.44732],
  [45.497069, -122.447547],
  [45.497064, -122.44802],
  [45.497062, -122.448402],
  [45.497057, -122.449523],
  [45.497107, -122.449631],
  [45.4971, -122.450647],
  [45.497096, -122.451312],
  [45.497096, -122.451353],
  [45.497048, -122.451464],
  [45.497047, -122.45167],
  [45.497042, -122.453338],
  [45.49704, -122.453903],
  [45.497037, -122.454938],
  [45.497037, -122.455059],
  [45.497035, -122.455349],
  [45.497032, -122.455865],
  [45.497078, -122.455975],
  [45.49706, -122.456408],
  [45.497028, -122.456767],
  [45.496991, -122.457008],
  [45.49696, -122.457186],
  [45.496914, -122.457367],
  [45.496874, -122.457497],
  [45.496817, -122.457655],
  [45.496723, -122.457874],
  [45.496674, -122.457978],
  [45.496565, -122.458186],
  [45.496501, -122.458306],
  [45.49627, -122.458699],
  [45.495711, -122.459612],
  [45.495602, -122.459789],
  [45.495494, -122.459966],
  [45.495458, -122.460025],
  [45.495405, -122.460115],
  [45.49536, -122.460189],
  [45.494231, -122.462029],
  [45.49395, -122.462487],
  [45.493905, -122.462563],
  [45.493774, -122.462778],
  [45.493591, -122.463075],
  [45.493234, -122.463646],
  [45.492524, -122.464769],
  [45.492292, -122.46515],
  [45.492039, -122.465589],
  [45.491749, -122.466101],
  [45.491411, -122.466664],
  [45.490831, -122.46763],
  [45.49075, -122.467763],
  [45.490654, -122.467922],
  [45.490505, -122.468191],
  [45.490468, -122.468262],
  [45.490366, -122.468452],
  [45.490212, -122.468801],
  [45.490094, -122.469092],
  [45.489879, -122.469735],
  [45.489805, -122.470063],
  [45.489761, -122.470262],
  [45.489702, -122.470621],
  [45.489668, -122.470885],
  [45.489644, -122.471208],
  [45.489632, -122.471437],
  [45.489628, -122.471636],
  [45.48963, -122.471943],
  [45.489639, -122.472166],
  [45.489651, -122.472345],
  [45.489689, -122.472697],
  [45.489718, -122.472893],
  [45.489744, -122.473024],
  [45.489822, -122.473397],
  [45.489863, -122.473587],
  [45.489881, -122.473666],
  [45.489913, -122.47381],
  [45.489963, -122.474001],
  [45.490103, -122.474496],
  [45.490117, -122.474545],
  [45.490154, -122.474668],
  [45.490393, -122.475476],
  [45.490439, -122.475633],
  [45.490666, -122.476395],
  [45.490757, -122.476776],
  [45.49074, -122.476928],
  [45.490786, -122.477159],
  [45.490811, -122.477287],
  [45.490935, -122.477907],
  [45.490993, -122.478197],
  [45.491066, -122.478308],
  [45.491236, -122.479149],
  [45.491302, -122.479476],
  [45.491363, -122.479781],
  [45.491417, -122.480051],
  [45.491539, -122.48064],
  [45.491522, -122.480806],
  [45.491747, -122.48191],
  [45.491762, -122.481985],
  [45.491831, -122.482334],
  [45.49197, -122.482928],
  [45.492017, -122.483156],
  [45.49211, -122.483619],
  [45.492193, -122.484034],
  [45.492211, -122.484122],
  [45.492285, -122.484489],
  [45.492294, -122.484531],
  [45.49233, -122.484721],
  [45.492361, -122.484886],
  [45.492434, -122.485242],
  [45.492661, -122.486344],
  [45.492709, -122.48658],
  [45.492739, -122.486733],
  [45.492768, -122.486886],
  [45.492815, -122.487123],
  [45.492893, -122.487513],
  [45.492926, -122.487677],
  [45.492968, -122.487883],
  [45.492996, -122.488021],
  [45.493203, -122.489039],
  [45.493406, -122.490024],
  [45.493524, -122.490599],
  [45.493534, -122.490648],
  [45.493684, -122.491372],
  [45.493889, -122.492337],
  [45.494006, -122.4929],
  [45.494046, -122.493088],
  [45.49417, -122.493711],
  [45.494298, -122.494343],
  [45.494382, -122.494746],
  [45.494436, -122.495007],
  [45.4946, -122.49579],
  [45.494706, -122.496292],
  [45.494756, -122.496529],
  [45.494786, -122.49668],
  [45.494811, -122.496802],
  [45.494917, -122.497314],
  [45.495022, -122.497824],
  [45.495098, -122.498191],
  [45.495189, -122.498639],
  [45.495258, -122.498978],
  [45.495565, -122.500492],
  [45.495641, -122.500869],
  [45.495769, -122.501488],
  [45.495838, -122.501832],
  [45.495944, -122.502363],
  [45.496067, -122.502957],
  [45.496138, -122.503271],
  [45.496165, -122.503382],
  [45.496302, -122.503931],
  [45.496408, -122.504346],
  [45.49641, -122.504354],
  [45.496519, -122.504767],
  [45.496698, -122.505428],
  [45.496862, -122.506053],
  [45.497058, -122.506812],
  [45.497158, -122.507185],
  [45.497186, -122.507294],
  [45.497244, -122.507519],
  [45.497391, -122.508088],
  [45.49751, -122.508552],
  [45.497638, -122.509041],
  [45.497679, -122.509196],
  [45.497796, -122.509638],
  [45.497879, -122.509948],
  [45.498017, -122.510468],
  [45.498058, -122.510625],
  [45.498153, -122.510986],
  [45.498279, -122.51146],
  [45.498508, -122.512325],
  [45.498707, -122.513105],
  [45.498878, -122.513749],
  [45.498908, -122.513864],
  [45.499064, -122.514465],
  [45.499137, -122.51475],
  [45.499178, -122.514933],
  [45.499211, -122.515129],
  [45.49922, -122.515249],
  [45.499224, -122.515335],
  [45.499225, -122.515461],
  [45.499219, -122.515591],
  [45.499211, -122.515677],
  [45.499201, -122.515754],
  [45.499188, -122.515848],
  [45.499088, -122.516429],
  [45.498978, -122.517067],
  [45.498891, -122.517556],
  [45.49874, -122.518411],
  [45.498604, -122.519192],
  [45.498581, -122.519322],
  [45.498437, -122.520145],
  [45.498318, -122.520825],
  [45.498261, -122.521144],
  [45.498257, -122.521166],
  [45.498224, -122.521377],
  [45.49809, -122.522171],
  [45.498016, -122.522606],
  [45.497877, -122.523423],
  [45.497854, -122.523544],
  [45.497831, -122.523669],
  [45.49779, -122.523906],
  [45.497691, -122.524481],
  [45.497623, -122.524879],
  [45.497601, -122.525026],
  [45.497579, -122.525216],
  [45.497564, -122.525361],
  [45.497552, -122.525499],
  [45.497541, -122.525708],
  [45.497521, -122.526141],
  [45.497503, -122.526576],
  [45.497485, -122.526999],
  [45.497465, -122.527495],
  [45.497448, -122.527929],
  [45.497429, -122.528425],
  [45.497427, -122.528487],
  [45.497425, -122.528544],
  [45.497406, -122.529004],
  [45.497393, -122.529336],
  [45.497387, -122.529479],
  [45.497368, -122.529984],
  [45.497355, -122.530308],
  [45.497343, -122.530617],
  [45.497329, -122.530948],
  [45.497323, -122.531157],
  [45.497296, -122.531875],
  [45.497283, -122.532168],
  [45.497281, -122.532239],
  [45.497262, -122.53266],
  [45.49725, -122.532939],
  [45.497241, -122.533169],
  [45.497232, -122.533391],
  [45.497203, -122.534167],
  [45.497182, -122.534671],
  [45.497155, -122.535337],
  [45.497128, -122.535945],
  [45.497107, -122.536456],
  [45.49709, -122.53688],
  [45.497068, -122.537481],
  [45.497062, -122.537665],
  [45.497057, -122.537811],
  [45.49705, -122.538069],
  [45.49705, -122.538089],
  [45.497038, -122.538515],
  [45.497032, -122.538752],
  [45.497015, -122.5394],
  [45.497005, -122.539672],
  [45.496992, -122.540107],
  [45.496976, -122.540538],
  [45.496975, -122.540578],
  [45.496966, -122.540897],
  [45.496963, -122.54098],
  [45.496935, -122.541979],
  [45.496932, -122.542203],
  [45.496924, -122.542433],
  [45.496913, -122.542742],
  [45.49691, -122.542839],
  [45.496898, -122.54317],
  [45.496887, -122.543489],
  [45.496869, -122.543843],
  [45.496853, -122.544097],
  [45.4968, -122.544808],
  [45.496749, -122.545435],
  [45.496695, -122.546159],
  [45.496675, -122.546427],
  [45.496658, -122.546665],
  [45.496641, -122.546908],
  [45.496617, -122.547251],
  [45.496606, -122.547383],
  [45.496555, -122.54802],
  [45.496543, -122.548177],
  [45.496515, -122.54853],
  [45.496502, -122.548708],
  [45.496455, -122.549327],
  [45.496388, -122.550189],
  [45.496378, -122.550306],
  [45.496341, -122.550785],
  [45.496311, -122.551164],
  [45.496302, -122.551284],
  [45.496283, -122.551559],
  [45.496275, -122.551653],
  [45.496219, -122.552381],
  [45.496204, -122.552583],
  [45.496182, -122.552884],
  [45.496127, -122.55356],
  [45.496065, -122.554379],
  [45.496009, -122.555121],
  [45.495946, -122.555938],
  [45.495945, -122.555959],
  [45.495936, -122.556053],
  [45.495922, -122.556219],
  [45.495813, -122.557628],
  [45.495787, -122.557963],
  [45.495763, -122.55829],
  [45.495735, -122.55864],
  [45.495724, -122.558813],
  [45.495724, -122.558921],
  [45.495729, -122.559017],
  [45.495739, -122.559114],
  [45.49576, -122.559255],
  [45.49581, -122.559462],
  [45.496133, -122.5606],
  [45.496163, -122.560709],
  [45.496437, -122.561684],
  [45.49681, -122.56301],
  [45.496834, -122.56311],
  [45.496897, -122.563371],
  [45.496923, -122.563477],
  [45.497036, -122.563891],
  [45.497058, -122.563979],
  [45.497127, -122.564251],
  [45.497176, -122.564471],
  [45.497198, -122.564586],
  [45.497314, -122.564739],
  [45.49734, -122.564818],
  [45.497371, -122.564984],
  [45.497391, -122.565124],
  [45.497409, -122.565339],
  [45.497414, -122.565534],
  [45.497417, -122.565743],
  [45.49742, -122.566107],
  [45.497425, -122.566414],
  [45.497426, -122.566989],
  [45.497427, -122.567365],
  [45.497428, -122.567953],
  [45.497429, -122.568365],
  [45.497379, -122.568512],
  [45.497376, -122.568657],
  [45.497375, -122.569108],
  [45.497374, -122.56913],
  [45.497374, -122.569281],
  [45.497422, -122.569462],
  [45.497423, -122.570337],
  [45.497426, -122.570616],
  [45.497429, -122.571828],
  [45.49743, -122.572497],
  [45.497433, -122.573082],
  [45.497434, -122.573401],
  [45.497435, -122.573874],
  [45.497435, -122.57396],
  [45.497436, -122.574056],
  [45.497437, -122.574144],
  [45.497438, -122.574998],
  [45.497438, -122.57583],
  [45.497397, -122.575916],
  [45.4974, -122.576301],
  [45.4974, -122.576491],
  [45.497403, -122.577483],
  [45.497404, -122.577746],
  [45.497404, -122.577789],
  [45.497404, -122.578149],
  [45.497406, -122.578554],
  [45.497406, -122.578725],
  [45.497407, -122.579189],
  [45.497407, -122.579298],
  [45.497408, -122.579451],
  [45.497408, -122.579577],
  [45.497409, -122.579732],
  [45.497409, -122.579796],
  [45.497409, -122.579859],
  [45.49741, -122.579967],
  [45.497408, -122.58006],
  [45.497411, -122.580366],
  [45.497413, -122.580916],
  [45.497462, -122.581035],
  [45.497462, -122.581726],
  [45.497462, -122.581937],
  [45.497462, -122.582183],
  [45.497465, -122.582907],
  [45.497464, -122.58375],
  [45.497464, -122.583886],
  [45.497466, -122.584507],
  [45.497468, -122.584864],
  [45.497469, -122.585718],
  [45.497424, -122.585855],
  [45.497424, -122.58619],
  [45.497424, -122.586323],
  [45.497425, -122.586466],
  [45.497425, -122.58692],
  [45.497471, -122.587109],
  [45.497473, -122.587719],
  [45.497473, -122.587786],
  [45.497474, -122.588014],
  [45.497475, -122.588409],
  [45.497476, -122.588816],
  [45.497476, -122.589054],
  [45.497477, -122.589132],
  [45.497477, -122.589189],
  [45.497477, -122.58929],
  [45.497477, -122.589492],
  [45.497477, -122.589542],
  [45.497477, -122.589764],
  [45.497477, -122.589822],
  [45.497479, -122.589906],
  [45.497481, -122.590001],
  [45.497479, -122.590915],
  [45.497481, -122.591185],
  [45.497484, -122.592245],
  [45.497436, -122.592318],
  [45.497439, -122.592677],
  [45.497439, -122.592721],
  [45.49744, -122.592795],
  [45.497439, -122.592827],
  [45.497441, -122.593323],
  [45.497487, -122.593466],
  [45.497488, -122.593796],
  [45.497491, -122.594412],
  [45.497491, -122.594692],
  [45.497492, -122.595063],
  [45.497492, -122.59532],
  [45.497494, -122.595551],
  [45.497444, -122.595648],
  [45.497452, -122.596273],
  [45.497456, -122.596617],
  [45.497505, -122.596691],
  [45.49751, -122.597166],
  [45.497511, -122.597299],
  [45.497512, -122.597583],
  [45.497513, -122.598358],
  [45.497514, -122.598548],
  [45.497515, -122.599084],
  [45.497516, -122.599287],
  [45.497516, -122.599483],
  [45.497517, -122.599699],
  [45.497517, -122.599781],
  [45.497518, -122.600463],
  [45.497516, -122.60163],
  [45.497519, -122.6019],
  [45.497523, -122.602898],
  [45.497524, -122.603087],
  [45.497525, -122.604082],
  [45.497525, -122.60475],
  [45.497525, -122.605058],
  [45.497527, -122.606072],
  [45.497528, -122.606318],
  [45.497529, -122.607079],
  [45.497532, -122.607774],
  [45.497532, -122.6079],
  [45.497486, -122.608059],
  [45.497488, -122.608558],
  [45.497489, -122.608683],
  [45.49749, -122.609049],
  [45.497538, -122.609156],
  [45.497536, -122.609545],
  [45.497534, -122.610112],
  [45.497538, -122.610875],
  [45.497549, -122.611229],
  [45.497511, -122.611358],
  [45.497518, -122.611471],
  [45.497527, -122.611633],
  [45.497532, -122.611833],
  [45.497533, -122.611909],
  [45.497534, -122.61216],
  [45.497535, -122.612302],
  [45.497535, -122.612349],
  [45.497536, -122.612445],
  [45.497537, -122.612613],
  [45.497538, -122.613593],
  [45.497541, -122.614223],
  [45.497541, -122.614536],
  [45.497541, -122.614973],
  [45.497541, -122.615207],
  [45.497542, -122.61627],
  [45.497541, -122.616361],
  [45.497542, -122.61682],
  [45.497542, -122.617118],
  [45.497547, -122.617911],
  [45.497547, -122.618036],
  [45.497548, -122.618092],
  [45.497549, -122.61853],
  [45.49755, -122.618768],
  [45.497548, -122.618881],
  [45.497545, -122.619023],
  [45.497533, -122.619311],
  [45.497531, -122.619369],
  [45.497529, -122.619431],
  [45.497516, -122.61968],
  [45.497508, -122.61988],
  [45.497506, -122.619926],
  [45.497482, -122.620381],
  [45.497467, -122.620614],
  [45.497457, -122.620779],
  [45.497403, -122.621502],
  [45.497394, -122.621612],
  [45.497384, -122.621743],
  [45.497365, -122.621998],
  [45.497328, -122.622486],
  [45.497318, -122.622603],
  [45.497363, -122.622743],
  [45.497344, -122.623018],
  [45.497335, -122.623132],
  [45.497301, -122.623607],
  [45.49728, -122.623919],
  [45.497263, -122.62414],
  [45.497244, -122.624329],
  [45.497194, -122.624785],
  [45.49714, -122.624892],
  [45.497105, -122.625288],
  [45.497142, -122.625429],
  [45.497095, -122.626089],
  [45.49704, -122.626211],
  [45.49703, -122.626355],
  [45.497011, -122.626625],
  [45.497008, -122.626669],
  [45.49699, -122.626927],
  [45.496934, -122.627727],
  [45.49691, -122.628085],
  [45.496886, -122.628441],
  [45.496874, -122.628619],
  [45.496857, -122.628873],
  [45.496828, -122.629305],
  [45.496813, -122.6295],
  [45.496793, -122.62981],
  [45.496779, -122.630019],
  [45.496771, -122.630144],
  [45.496767, -122.630268],
  [45.496771, -122.63047],
  [45.496778, -122.630803],
  [45.496783, -122.63104],
  [45.49679, -122.631408],
  [45.496791, -122.631504],
  [45.496792, -122.631583],
  [45.496798, -122.631954],
  [45.496799, -122.631975],
  [45.496801, -122.632036],
  [45.496814, -122.632294],
  [45.496831, -122.632446],
  [45.496928, -122.633239],
  [45.496963, -122.633537],
  [45.496992, -122.633781],
  [45.49701, -122.633932],
  [45.497018, -122.634001],
  [45.497068, -122.634402],
  [45.497085, -122.634544],
  [45.497101, -122.634655],
  [45.497122, -122.634801],
  [45.497145, -122.634928],
  [45.497209, -122.635178],
  [45.497258, -122.635356],
  [45.497315, -122.635567],
  [45.497424, -122.635976],
  [45.497448, -122.636066],
  [45.497516, -122.636128],
  [45.497543, -122.636227],
  [45.497583, -122.636388],
  [45.497626, -122.636553],
  [45.497664, -122.636699],
  [45.497707, -122.636854],
  [45.497729, -122.636933],
  [45.497759, -122.637089],
  [45.497787, -122.637307],
  [45.497797, -122.637397],
  [45.49782, -122.63761],
  [45.497841, -122.637869],
  [45.497892, -122.638439],
  [45.497867, -122.638646],
  [45.497898, -122.639014],
  [45.497941, -122.639521],
  [45.497955, -122.639627],
  [45.497967, -122.639724],
  [45.497985, -122.639842],
  [45.498003, -122.639947],
  [45.498024, -122.640055],
  [45.498064, -122.640211],
  [45.498202, -122.640697],
  [45.498301, -122.64103],
  [45.498389, -122.64114],
  [45.498509, -122.64154],
  [45.498498, -122.641698],
  [45.498566, -122.64193],
  [45.498623, -122.642122],
  [45.498721, -122.642455],
  [45.498796, -122.64271],
  [45.499009, -122.643435],
  [45.499088, -122.643706],
  [45.499117, -122.643807],
  [45.499209, -122.644128],
  [45.499225, -122.644183],
  [45.499323, -122.644536],
  [45.499328, -122.644557],
  [45.499355, -122.644646],
  [45.499426, -122.644746],
  [45.499535, -122.645177],
  [45.499577, -122.645383],
  [45.499626, -122.645653],
  [45.499742, -122.646358],
  [45.499788, -122.646692],
  [45.499848, -122.647216],
  [45.499889, -122.647707],
  [45.499929, -122.648246],
  [45.499985, -122.648736],
  [45.50002, -122.649018],
  [45.500075, -122.649358],
  [45.500131, -122.649655],
  [45.500192, -122.649953],
  [45.500291, -122.650419],
  [45.500382, -122.650817],
  [45.500492, -122.65124],
  [45.500544, -122.651444],
  [45.500631, -122.651807],
  [45.500798, -122.652544],
  [45.500794, -122.652719],
  [45.500841, -122.652905],
  [45.500891, -122.653098],
  [45.500939, -122.653282],
  [45.501035, -122.653439],
  [45.501144, -122.653851],
  [45.501192, -122.654071],
  [45.501223, -122.654225],
  [45.501255, -122.654381],
  [45.501318, -122.654715],
  [45.501336, -122.654808],
  [45.501386, -122.655076],
  [45.501456, -122.655442],
  [45.501535, -122.655794],
  [45.501545, -122.655903],
  [45.501567, -122.656245],
  [45.501571, -122.656407],
  [45.501607, -122.656585],
  [45.501652, -122.656701],
  [45.501736, -122.656799],
  [45.501887, -122.656794],
  [45.502011, -122.656794],
  [45.502099, -122.656794],
  [45.504368, -122.656786],
  [45.504433, -122.65679],
  [45.504462, -122.656794],
  [45.504494, -122.656801],
  [45.504523, -122.656813],
  [45.504563, -122.656831],
  [45.504593, -122.656853],
  [45.504627, -122.656875],
  [45.504666, -122.65691],
  [45.504704, -122.656953],
  [45.504733, -122.656997],
  [45.504759, -122.657047],
  [45.504804, -122.657138],
  [45.504817, -122.657178],
  [45.504836, -122.657244],
  [45.504855, -122.657327],
  [45.504866, -122.657409],
  [45.50487, -122.657489],
  [45.504873, -122.657583],
  [45.504872, -122.657631],
  [45.50487, -122.657781],
  [45.504872, -122.658726],
  [45.505582, -122.658716],
  [45.505641, -122.658715],
  [45.505756, -122.658721],
  [45.505797, -122.658727],
  [45.505843, -122.65874],
  [45.505883, -122.658764],
  [45.505904, -122.65878],
  [45.505924, -122.6588],
  [45.505972, -122.658869],
  [45.506034, -122.658988],
  [45.506102, -122.659132],
  [45.50619, -122.659327],
  [45.506244, -122.659466],
  [45.506302, -122.659623],
  [45.506355, -122.659793],
  [45.5064, -122.659952],
  [45.506436, -122.660088],
  [45.506468, -122.660229],
  [45.506494, -122.660361],
  [45.506519, -122.66052],
  [45.506536, -122.660656],
  [45.506538, -122.660778],
  [45.50655, -122.660903],
  [45.506557, -122.661016],
  [45.506555, -122.66114],
  [45.506555, -122.661603],
  [45.50655, -122.661827],
  [45.506549, -122.661931],
  [45.506548, -122.662057],
  [45.506549, -122.662144],
  [45.506559, -122.663156],
  [45.506561, -122.663417],
  [45.506567, -122.663783],
  [45.506576, -122.663822],
  [45.506592, -122.66391],
  [45.506595, -122.663941],
  [45.506597, -122.664129],
  [45.506591, -122.664255],
  [45.506585, -122.664311],
  [45.506571, -122.664392],
  [45.506545, -122.664507],
  [45.506525, -122.66457],
  [45.506492, -122.664646],
  [45.506469, -122.664696],
  [45.506451, -122.664733],
  [45.506413, -122.664794],
  [45.506354, -122.664885],
  [45.506219, -122.665094],
  [45.506047, -122.665358],
  [45.5058, -122.665734],
  [45.505517, -122.666168],
  [45.505244, -122.66659],
  [45.504925, -122.667076],
  [45.50463, -122.667526],
  [45.504033, -122.668444],
  [45.503675, -122.668996],
  [45.503477, -122.669294],
  [45.503427, -122.669371],
  [45.503389, -122.669432],
  [45.50337, -122.669467],
  [45.503345, -122.669515],
  [45.503307, -122.669596],
  [45.503269, -122.669684],
  [45.50323, -122.669781],
  [45.503194, -122.669876],
  [45.503165, -122.669956],
  [45.503146, -122.670005],
  [45.503114, -122.670102],
  [45.503094, -122.670157],
  [45.503045, -122.670287],
  [45.502991, -122.670428],
  [45.502956, -122.670539],
  [45.502891, -122.670754],
  [45.502587, -122.671772],
  [45.502534, -122.671949],
  [45.502512, -122.67203],
  [45.502524, -122.672091],
  [45.502525, -122.67215],
  [45.50253, -122.6723],
  [45.502532, -122.672329],
  [45.502533, -122.672351],
  [45.502537, -122.672403],
  [45.502543, -122.67245],
  [45.50255, -122.672499],
  [45.502557, -122.672534],
  [45.502567, -122.672572],
  [45.502584, -122.672617],
  [45.502605, -122.67266],
  [45.502652, -122.672737],
  [45.50268, -122.672776],
  [45.502704, -122.672804],
  [45.502727, -122.67282],
  [45.502745, -122.672832],
  [45.502763, -122.672843],
  [45.502811, -122.672868],
  [45.503309, -122.67312],
  [45.503599, -122.673254],
  [45.50396, -122.673428],
  [45.504122, -122.673513],
  [45.504248, -122.673578],
  [45.504322, -122.673621],
  [45.504408, -122.673671],
  [45.504654, -122.673821],
  [45.504736, -122.673873],
  [45.504826, -122.673928],
  [45.505003, -122.674038],
  [45.505106, -122.674108],
  [45.505168, -122.674154],
  [45.505243, -122.67422],
  [45.505279, -122.67425],
  [45.505314, -122.674281],
  [45.505353, -122.67432],
  [45.505595, -122.674577],
  [45.505626, -122.674613],
  [45.505699, -122.67469],
  [45.505789, -122.674772],
  [45.505829, -122.674806],
  [45.505913, -122.674872],
  [45.505984, -122.674921],
  [45.506017, -122.674941],
  [45.506055, -122.674963],
  [45.506115, -122.674995],
  [45.506208, -122.675041],
  [45.506258, -122.675066],
  [45.50666, -122.675249],
  [45.506689, -122.675263],
  [45.506744, -122.675287],
  [45.506839, -122.675322],
  [45.506875, -122.675335],
  [45.506978, -122.675367],
  [45.507023, -122.675379],
  [45.507286, -122.675456],
  [45.507365, -122.675482],
  [45.507396, -122.675494],
  [45.507468, -122.675529],
  [45.507509, -122.675551],
  [45.507541, -122.675572],
  [45.507579, -122.675601],
  [45.507615, -122.675631],
  [45.507649, -122.675662],
  [45.507674, -122.675689],
  [45.507709, -122.675727],
  [45.507749, -122.675778],
  [45.507779, -122.675821],
  [45.507802, -122.675858],
  [45.507832, -122.67591],
  [45.507854, -122.675952],
  [45.507871, -122.675987],
  [45.507916, -122.676091],
  [45.50796, -122.676237],
  [45.507971, -122.676285],
  [45.507981, -122.676335],
  [45.507991, -122.676399],
  [45.507997, -122.676444],
  [45.508003, -122.676507],
  [45.508007, -122.676563],
  [45.508009, -122.676597],
  [45.508012, -122.676665],
  [45.508013, -122.676719],
  [45.508013, -122.676814],
  [45.508015, -122.677379],
  [45.508016, -122.677398],
  [45.508031, -122.677501],
  [45.508048, -122.677615],
  [45.508054, -122.678372],
  [45.508052, -122.678506],
  [45.508046, -122.678589],
  [45.508036, -122.678743],
  [45.508023, -122.678889],
  [45.508008, -122.679112],
  [45.507997, -122.679473],
  [45.507995, -122.679532],
  [45.507993, -122.679704],
  [45.507993, -122.679784],
  [45.507994, -122.679949],
  [45.507993, -122.680282],
  [45.50799, -122.680433],
  [45.508006, -122.680972],
  [45.508009, -122.681107],
  [45.508016, -122.681251],
  [45.508028, -122.681387],
  [45.508045, -122.681545],
  [45.508074, -122.681721],
  [45.508087, -122.68178],
  [45.508101, -122.681855],
  [45.508114, -122.681926],
  [45.50817, -122.681926],
  [45.508305, -122.681922],
  [45.508533, -122.681895],
  [45.508625, -122.681881],
  [45.50873, -122.681846],
  [45.508839, -122.681806],
  [45.508985, -122.681734],
  [45.509022, -122.681714],
  [45.509141, -122.68165],
  [45.509202, -122.681615],
  [45.509511, -122.681447],
  [45.5098, -122.681296],
  [45.509868, -122.681258],
  [45.509956, -122.68159],
  [45.510029, -122.681865],
  [45.510094, -122.682109],
  [45.510133, -122.682253],
  [45.510142, -122.682289],
  [45.510394, -122.683237],
  [45.510415, -122.683313],
  [45.510743, -122.683134],
  [45.510813, -122.683097],
  [45.511078, -122.682953],
  [45.511684, -122.682625],
  [45.511759, -122.682585],
  [45.512262, -122.682312],
  [45.512378, -122.682249],
  [45.512415, -122.682229],
  [45.51293, -122.68195],
  [45.512963, -122.681932],
  [45.513078, -122.68187],
  [45.513111, -122.681852],
  [45.513413, -122.681689],
  [45.513631, -122.681571],
  [45.513748, -122.681507],
  [45.514291, -122.681213],
  [45.514415, -122.681146],
  [45.515072, -122.68079],
  [45.515744, -122.680426],
  [45.515808, -122.680391],
  [45.5163, -122.680153],
  [45.516359, -122.680124],
  [45.516423, -122.680091],
  [45.516492, -122.680049],
  [45.517036, -122.679756],
  [45.517087, -122.67973],
  [45.517171, -122.679685],
  [45.517691, -122.679401],
  [45.51775, -122.679367],
  [45.517829, -122.679321],
  [45.518361, -122.679025],
  [45.518406, -122.679004],
  [45.518432, -122.678987],
  [45.518466, -122.67897],
  [45.519024, -122.67868],
  [45.51907, -122.678655],
  [45.519096, -122.678641],
  [45.519151, -122.678611],
  [45.519637, -122.678355],
  [45.519656, -122.678345],
  [45.519751, -122.678297],
  [45.519811, -122.678266],
  [45.520361, -122.677963],
  [45.520421, -122.677932],
  [45.520477, -122.677904],
  [45.521016, -122.677604],
  [45.521084, -122.677569],
  [45.521685, -122.677242],
  [45.521751, -122.677205],
  [45.521828, -122.677162],
  [45.522399, -122.676848],
  [45.522446, -122.676775],
  [45.52291, -122.676527],
  [45.522939, -122.676511],
  [45.523003, -122.676486],
  [45.523068, -122.676468],
  [45.523122, -122.676459],
  [45.52319, -122.676451],
  [45.523722, -122.676473],
  [45.523777, -122.676474],
  [45.523839, -122.676474],
  [45.524491, -122.676497],
  [45.525135, -122.676527],
  [45.525203, -122.676534],
  [45.525274, -122.676541],
  [45.525723, -122.676556],
  [45.525858, -122.67656],
  [45.525911, -122.676558],
  [45.525976, -122.676556],
  [45.526561, -122.676573],
  [45.526631, -122.676576],
  [45.526699, -122.676579],
  [45.527339, -122.676601],
  [45.527398, -122.676603],
  [45.527886, -122.676648],
  [45.527992, -122.676641],
  [45.528053, -122.676628],
  [45.528043, -122.676541],
  [45.528044, -122.676462],
  [45.528053, -122.676352],
  [45.528069, -122.675736],
  [45.528069, -122.675724],
  [45.528066, -122.675676],
  [45.528047, -122.675584],
  [45.528037, -122.675523],
  [45.528016, -122.675467],
  [45.527981, -122.675412],
  [45.527934, -122.675362],
  [45.52788, -122.675324],
  [45.527828, -122.675306],
  [45.527781, -122.675298],
  [45.527756, -122.675301]
];

const stopNames = {
  "3398": "SW Lincoln &amp; 1st",
  "4503": "10800 Block SE Powell",
  "4506": "SE Powell &amp; 151st",
  "4508": "2900 Block W Powell",
  "4516": "W Powell &amp; NW Birdsdale",
  "4523": "W Powell &amp; SW Duniway",
  "4538": "SE Powell &amp; Milwaukie",
  "4543": "SE Powell &amp; I-205 North On-Ramp",
  "4553": "W Powell &amp; NW Towle",
  "4554": "W Powell &amp; The Village (western driveway)",
  "4556": "W Powell &amp; NW Wallula",
  "4558": "W Powell &amp; SW Walters",
  "4561": "10000 Block SE Powell",
  "4563": "SE Powell &amp; 102nd",
  "4565": "SE Powell &amp; 104th",
  "4566": "SE Powell &amp; 112th",
  "4569": "SE Powell &amp; 116th",
  "4570": "SE Powell &amp; 119th",
  "4572": "SE Powell &amp; 122nd",
  "4579": "SE Powell &amp; 130th",
  "4586": "SE Powell &amp; 136th",
  "4587": "SE Powell &amp; 138th",
  "4591": "SE Powell &amp; 140th",
  "4595": "SE Powell &amp; 145th",
  "4597": "SE Powell &amp; 148th",
  "4603": "SE Powell &amp; 157th",
  "4607": "SE Powell &amp; 160th",
  "4609": "SE Powell &amp; 164th",
  "4611": "SE Powell &amp; 166th",
  "4613": "SE Powell &amp; 168th",
  "4614": "SE Powell &amp; 170th",
  "4616": "SE Powell &amp; 174th",
  "4617": "W Powell &amp; SW 181st",
  "4621": "W Powell &amp; Powell Loop",
  "4623": "SE Powell &amp; 21st",
  "4626": "SE Powell &amp; 24th",
  "4631": "SE Powell &amp; 28th",
  "4643": "SE Powell &amp; 33rd",
  "4646": "SE Powell &amp; 34th",
  "4649": "SE Powell &amp; 36th",
  "4653": "SE Powell &amp; Cesar Chavez Blvd",
  "4654": "SE Powell &amp; 40th",
  "4657": "SE Powell &amp; 43rd",
  "4663": "SE Powell &amp; 47th",
  "4664": "SE Powell &amp; 49th",
  "4668": "SE Powell &amp; 52nd",
  "4674": "SE Powell &amp; 58th",
  "4676": "SE Powell &amp; 62nd",
  "4681": "SE Powell &amp; 67th",
  "4683": "SE Powell &amp; 69th",
  "4684": "SE Powell &amp; 71st",
  "4692": "SE Powell &amp; 79th",
  "4695": "SE Powell &amp; 82nd",
  "4698": "SE Powell &amp; 84th",
  "4700": "SE Powell &amp; 87th",
  "4709": "SE Powell &amp; 92nd",
  "7605": "NE 5th &amp; Hood",
  "7747": "SW 6th &amp; Alder",
  "7751": "SW 6th &amp; W Burnside",
  "7756": "SW 6th &amp; Clay",
  "7767": "SW 6th &amp; Main",
  "7773": "SW 6th &amp; Mill",
  "8743": "2700 Block W Powell",
  "9300": "NW 6th &amp; Flanders",
  "10858": "Gresham Central Transit Center ",
  "11786": "SE Powell &amp; 156th",
  "11923": "SE Powell &amp; 75th",
  "11924": "SE Powell &amp; 65th",
  "11925": "SE Powell &amp; 55th",
  "12757": "NE 10th &amp; Hood (Gresham Central TC)",
  "12862": "W Powell &amp; N Main",
  "12863": "W Powell &amp; NW Wilson",
  "12864": "W Powell &amp; NW Willowbrook",
  "12868": "W Powell &amp; NW Eastman Parkway",
  "13033": "NE Hood &amp; 2nd",
  "13733": "South Waterfront/S Moody",
  "13773": "OMSI/SE Water",
  "13780": "SW Hall &amp; 5th",
  "13825": "SE 7th &amp; Tilikum Way",
  "14122": "13200 Block SE Powell",
  "14123": "SE Powell &amp; 125th Pl"
};

const stops = [
  { stop_id: "12757", name: "NE 10th &amp; Hood (Gresham Central TC)", lat: 45.502929, lon: -122.42814, times: ["6:28 AM", "6:43 AM", "6:57 AM", "7:10 AM", "7:24 AM", "7:39 AM", "7:55 AM", "8:10 AM"] },
  { stop_id: "10858", name: "Gresham Central Transit Center ", lat: 45.50287, lon: -122.42659, times: ["6:30 AM", "6:45 AM", "6:59 AM", "7:12 AM", "7:26 AM", "7:41 AM", "7:57 AM", "8:12 AM"] },
  { stop_id: "7605", name: "NE 5th &amp; Hood", lat: 45.501069, lon: -122.4278, times: ["6:30 AM", "6:45 AM", "6:59 AM", "7:12 AM", "7:26 AM", "7:41 AM", "7:57 AM", "8:12 AM"] },
  { stop_id: "13033", name: "NE Hood &amp; 2nd", lat: 45.498613, lon: -122.427832, times: ["6:31 AM", "6:46 AM", "7:00 AM", "7:13 AM", "7:27 AM", "7:42 AM", "7:58 AM", "8:13 AM"] },
  { stop_id: "12862", name: "W Powell &amp; N Main", lat: 45.497985, lon: -122.431377, times: ["6:32 AM", "6:47 AM", "7:01 AM", "7:14 AM", "7:28 AM", "7:43 AM", "7:59 AM", "8:14 AM"] },
  { stop_id: "4558", name: "W Powell &amp; SW Walters", lat: 45.49728, lon: -122.43507, times: ["6:32 AM", "6:47 AM", "7:01 AM", "7:14 AM", "7:28 AM", "7:43 AM", "7:59 AM", "8:14 AM"] },
  { stop_id: "12868", name: "W Powell &amp; NW Eastman Parkway", lat: 45.497219, lon: -122.438784, times: ["6:20 AM", "6:33 AM", "6:48 AM", "7:02 AM", "7:15 AM", "7:29 AM", "7:44 AM", "8:00 AM"] },
  { stop_id: "12863", name: "W Powell &amp; NW Wilson", lat: 45.497187, lon: -122.441719, times: ["6:20 AM", "6:33 AM", "6:48 AM", "7:02 AM", "7:15 AM", "7:29 AM", "7:44 AM", "8:00 AM"] },
  { stop_id: "4556", name: "W Powell &amp; NW Wallula", lat: 45.497172, lon: -122.444628, times: ["6:21 AM", "6:34 AM", "6:49 AM", "7:03 AM", "7:16 AM", "7:30 AM", "7:45 AM", "8:01 AM"] },
  { stop_id: "4553", name: "W Powell &amp; NW Towle", lat: 45.497166, lon: -122.447549, times: ["6:21 AM", "6:34 AM", "6:49 AM", "7:03 AM", "7:16 AM", "7:30 AM", "7:45 AM", "8:01 AM"] },
  { stop_id: "12864", name: "W Powell &amp; NW Willowbrook", lat: 45.497141, lon: -122.451311, times: ["6:22 AM", "6:35 AM", "6:50 AM", "7:04 AM", "7:17 AM", "7:31 AM", "7:46 AM", "8:02 AM"] },
  { stop_id: "4516", name: "W Powell &amp; NW Birdsdale", lat: 45.497136, lon: -122.455349, times: ["6:22 AM", "6:35 AM", "6:50 AM", "7:04 AM", "7:17 AM", "7:31 AM", "7:46 AM", "8:02 AM"] },
  { stop_id: "8743", name: "2700 Block W Powell", lat: 45.495649, lon: -122.45985, times: ["6:23 AM", "6:36 AM", "6:51 AM", "7:05 AM", "7:18 AM", "7:32 AM", "7:47 AM", "8:03 AM"] },
  { stop_id: "4508", name: "2900 Block W Powell", lat: 45.493823, lon: -122.462843, times: ["6:24 AM", "6:37 AM", "6:52 AM", "7:06 AM", "7:19 AM", "7:33 AM", "7:48 AM", "8:04 AM"] },
  { stop_id: "4621", name: "W Powell &amp; Powell Loop", lat: 45.490519, lon: -122.468317, times: ["6:25 AM", "6:38 AM", "6:53 AM", "7:07 AM", "7:20 AM", "7:34 AM", "7:49 AM", "8:05 AM"] },
  { stop_id: "4523", name: "W Powell &amp; SW Duniway", lat: 45.489928, lon: -122.473647, times: ["6:26 AM", "6:39 AM", "6:54 AM", "7:08 AM", "7:21 AM", "7:35 AM", "7:50 AM", "8:06 AM"] },
  { stop_id: "4617", name: "W Powell &amp; SW 181st", lat: 45.49091, lon: -122.477107, times: ["6:27 AM", "6:40 AM", "6:55 AM", "7:09 AM", "7:22 AM", "7:36 AM", "7:51 AM", "8:07 AM"] },
  { stop_id: "4554", name: "W Powell &amp; The Village (western driveway)", lat: 45.491435, lon: -122.47975, times: ["6:27 AM", "6:40 AM", "6:55 AM", "7:09 AM", "7:22 AM", "7:36 AM", "7:51 AM", "8:07 AM"] },
  { stop_id: "4616", name: "SE Powell &amp; 174th", lat: 45.49237, lon: -122.484454, times: ["6:28 AM", "6:41 AM", "6:56 AM", "7:10 AM", "7:23 AM", "7:37 AM", "7:52 AM", "8:08 AM"] },
  { stop_id: "4614", name: "SE Powell &amp; 170th", lat: 45.493003, lon: -122.487645, times: ["6:28 AM", "6:42 AM", "6:57 AM", "7:11 AM", "7:24 AM", "7:38 AM", "7:53 AM", "8:09 AM"] },
  { stop_id: "4613", name: "SE Powell &amp; 168th", lat: 45.493601, lon: -122.490567, times: ["6:29 AM", "6:42 AM", "6:57 AM", "7:11 AM", "7:24 AM", "7:38 AM", "7:53 AM", "8:09 AM"] },
  { stop_id: "4611", name: "SE Powell &amp; 166th", lat: 45.494072, lon: -122.492873, times: ["6:29 AM", "6:43 AM", "6:58 AM", "7:12 AM", "7:25 AM", "7:39 AM", "7:54 AM", "8:10 AM"] },
  { stop_id: "4609", name: "SE Powell &amp; 164th", lat: 45.494463, lon: -122.494714, times: ["6:30 AM", "6:43 AM", "6:58 AM", "7:12 AM", "7:25 AM", "7:39 AM", "7:54 AM", "8:10 AM"] },
  { stop_id: "4607", name: "SE Powell &amp; 160th", lat: 45.495269, lon: -122.498606, times: ["6:30 AM", "6:44 AM", "6:59 AM", "7:13 AM", "7:26 AM", "7:40 AM", "7:55 AM", "8:11 AM"] },
  { stop_id: "4603", name: "SE Powell &amp; 157th", lat: 45.495914, lon: -122.501801, times: ["6:31 AM", "6:44 AM", "6:59 AM", "7:13 AM", "7:27 AM", "7:41 AM", "7:56 AM", "8:12 AM"] },
  { stop_id: "11786", name: "SE Powell &amp; 156th", lat: 45.496487, lon: -122.504306, times: ["6:31 AM", "6:45 AM", "7:00 AM", "7:14 AM", "7:27 AM", "7:41 AM", "7:56 AM", "8:12 AM"] },
  { stop_id: "4506", name: "SE Powell &amp; 151st", lat: 45.497235, lon: -122.507142, times: ["6:32 AM", "6:45 AM", "7:00 AM", "7:14 AM", "7:28 AM", "7:42 AM", "7:57 AM", "8:13 AM"] },
  { stop_id: "4597", name: "SE Powell &amp; 148th", lat: 45.49825, lon: -122.510935, times: ["6:33 AM", "6:46 AM", "7:01 AM", "7:15 AM", "7:29 AM", "7:43 AM", "7:58 AM", "8:14 AM"] },
  { stop_id: "4595", name: "SE Powell &amp; 145th", lat: 45.498943, lon: -122.513714, times: ["6:33 AM", "6:47 AM", "7:02 AM", "7:16 AM", "7:29 AM", "7:43 AM", "7:58 AM", "8:14 AM"] },
  { stop_id: "4591", name: "SE Powell &amp; 140th", lat: 45.498657, lon: -122.519212, times: ["6:20 AM", "6:34 AM", "6:48 AM", "7:03 AM", "7:17 AM", "7:31 AM", "7:45 AM", "8:00 AM"] },
  { stop_id: "4587", name: "SE Powell &amp; 138th", lat: 45.498329, lon: -122.52119, times: ["6:21 AM", "6:35 AM", "6:48 AM", "7:03 AM", "7:17 AM", "7:31 AM", "7:45 AM", "8:00 AM"] },
  { stop_id: "4586", name: "SE Powell &amp; 136th", lat: 45.497881, lon: -122.523925, times: ["6:21 AM", "6:35 AM", "6:49 AM", "7:04 AM", "7:18 AM", "7:32 AM", "7:46 AM", "8:01 AM"] },
  { stop_id: "14122", name: "13200 Block SE Powell", lat: 45.4976, lon: -122.526584, times: ["6:22 AM", "6:36 AM", "6:49 AM", "7:04 AM", "7:18 AM", "7:32 AM", "7:46 AM", "8:01 AM"] },
  { stop_id: "4579", name: "SE Powell &amp; 130th", lat: 45.497428, lon: -122.530313, times: ["6:22 AM", "6:36 AM", "6:50 AM", "7:05 AM", "7:19 AM", "7:33 AM", "7:47 AM", "8:02 AM"] },
  { stop_id: "14123", name: "SE Powell &amp; 125th Pl", lat: 45.497271, lon: -122.534683, times: ["6:23 AM", "6:37 AM", "6:51 AM", "7:06 AM", "7:20 AM", "7:34 AM", "7:48 AM", "8:03 AM"] },
  { stop_id: "4572", name: "SE Powell &amp; 122nd", lat: 45.497149, lon: -122.538075, times: ["6:24 AM", "6:38 AM", "6:52 AM", "7:07 AM", "7:21 AM", "7:35 AM", "7:49 AM", "8:04 AM"] },
  { stop_id: "4570", name: "SE Powell &amp; 119th", lat: 45.497049, lon: -122.540583, times: ["6:24 AM", "6:38 AM", "6:52 AM", "7:07 AM", "7:21 AM", "7:35 AM", "7:49 AM", "8:04 AM"] },
  { stop_id: "4569", name: "SE Powell &amp; 116th", lat: 45.496951, lon: -122.543174, times: ["6:24 AM", "6:38 AM", "6:52 AM", "7:07 AM", "7:21 AM", "7:35 AM", "7:49 AM", "8:04 AM"] },
  { stop_id: "4566", name: "SE Powell &amp; 112th", lat: 45.49661, lon: -122.548543, times: ["6:25 AM", "6:39 AM", "6:53 AM", "7:08 AM", "7:22 AM", "7:36 AM", "7:50 AM", "8:05 AM"] },
  { stop_id: "4503", name: "10800 Block SE Powell", lat: 45.496343, lon: -122.551665, times: ["6:26 AM", "6:40 AM", "6:54 AM", "7:09 AM", "7:23 AM", "7:37 AM", "7:51 AM", "8:06 AM"] },
  { stop_id: "4565", name: "SE Powell &amp; 104th", lat: 45.496001, lon: -122.555947, times: ["6:27 AM", "6:41 AM", "6:55 AM", "7:10 AM", "7:24 AM", "7:38 AM", "7:52 AM", "8:07 AM"] },
  { stop_id: "4563", name: "SE Powell &amp; 102nd", lat: 45.495906, lon: -122.557643, times: ["6:27 AM", "6:41 AM", "6:55 AM", "7:10 AM", "7:24 AM", "7:38 AM", "7:52 AM", "8:07 AM"] },
  { stop_id: "4561", name: "10000 Block SE Powell", lat: 45.496217, lon: -122.560679, times: ["6:28 AM", "6:42 AM", "6:56 AM", "7:11 AM", "7:25 AM", "7:39 AM", "7:53 AM", "8:08 AM"] },
  { stop_id: "4543", name: "SE Powell &amp; I-205 North On-Ramp", lat: 45.497158, lon: -122.563928, times: ["6:29 AM", "6:43 AM", "6:57 AM", "7:12 AM", "7:26 AM", "7:40 AM", "7:50 AM", "7:54 AM"] },
  { stop_id: "4709", name: "SE Powell &amp; 92nd", lat: 45.49749, lon: -122.569107, times: ["6:30 AM", "6:44 AM", "6:58 AM", "7:13 AM", "7:27 AM", "7:41 AM", "7:52 AM", "7:55 AM"] },
  { stop_id: "4700", name: "SE Powell &amp; 87th", lat: 45.497507, lon: -122.573873, times: ["6:32 AM", "6:46 AM", "7:00 AM", "7:15 AM", "7:29 AM", "7:43 AM", "7:53 AM", "7:57 AM"] },
  { stop_id: "4698", name: "SE Powell &amp; 84th", lat: 45.497511, lon: -122.576493, times: ["6:33 AM", "6:47 AM", "7:01 AM", "7:16 AM", "7:30 AM", "7:44 AM", "7:54 AM", "7:58 AM"] },
  { stop_id: "4695", name: "SE Powell &amp; 82nd", lat: 45.497541, lon: -122.579188, times: ["6:34 AM", "6:48 AM", "7:02 AM", "7:17 AM", "7:31 AM", "7:45 AM", "7:55 AM", "7:59 AM"] },
  { stop_id: "4692", name: "SE Powell &amp; 79th", lat: 45.497539, lon: -122.582185, times: ["6:34 AM", "6:48 AM", "7:02 AM", "7:17 AM", "7:31 AM", "7:45 AM", "7:55 AM", "7:59 AM"] },
  { stop_id: "11923", name: "SE Powell &amp; 75th", lat: 45.497528, lon: -122.586191, times: ["6:20 AM", "6:35 AM", "6:49 AM", "7:03 AM", "7:18 AM", "7:32 AM", "7:46 AM", "7:56 AM"] },
  { stop_id: "4684", name: "SE Powell &amp; 71st", lat: 45.497541, lon: -122.589764, times: ["6:20 AM", "6:35 AM", "6:50 AM", "7:04 AM", "7:19 AM", "7:33 AM", "7:47 AM", "7:57 AM"] },
  { stop_id: "4683", name: "SE Powell &amp; 69th", lat: 45.497532, lon: -122.592794, times: ["6:21 AM", "6:36 AM", "6:50 AM", "7:05 AM", "7:20 AM", "7:34 AM", "7:48 AM", "7:58 AM"] },
  { stop_id: "4681", name: "SE Powell &amp; 67th", lat: 45.497561, lon: -122.595061, times: ["6:21 AM", "6:36 AM", "6:51 AM", "7:05 AM", "7:20 AM", "7:34 AM", "7:49 AM", "7:59 AM"] },
  { stop_id: "11924", name: "SE Powell &amp; 65th", lat: 45.497563, lon: -122.597165, times: ["6:22 AM", "6:37 AM", "6:51 AM", "7:06 AM", "7:21 AM", "7:35 AM", "7:49 AM", "7:59 AM"] },
  { stop_id: "4676", name: "SE Powell &amp; 62nd", lat: 45.497589, lon: -122.599781, times: ["6:22 AM", "6:37 AM", "6:52 AM", "7:06 AM", "7:21 AM", "7:36 AM", "7:50 AM", "8:00 AM"] },
  { stop_id: "4674", name: "SE Powell &amp; 58th", lat: 45.497592, lon: -122.602898, times: ["6:23 AM", "6:38 AM", "6:52 AM", "7:07 AM", "7:22 AM", "7:36 AM", "7:51 AM", "8:01 AM"] },
  { stop_id: "11925", name: "SE Powell &amp; 55th", lat: 45.497565, lon: -122.606316, times: ["6:23 AM", "6:38 AM", "6:53 AM", "7:08 AM", "7:23 AM", "7:37 AM", "7:52 AM", "8:02 AM"] },
  { stop_id: "4668", name: "SE Powell &amp; 52nd", lat: 45.497592, lon: -122.609547, times: ["6:24 AM", "6:39 AM", "6:54 AM", "7:08 AM", "7:23 AM", "7:38 AM", "7:53 AM", "8:03 AM"] },
  { stop_id: "4664", name: "SE Powell &amp; 49th", lat: 45.497633, lon: -122.612346, times: ["6:25 AM", "6:40 AM", "6:54 AM", "7:09 AM", "7:24 AM", "7:39 AM", "7:54 AM", "8:04 AM"] },
  { stop_id: "4663", name: "SE Powell &amp; 47th", lat: 45.497614, lon: -122.615206, times: ["6:25 AM", "6:40 AM", "6:55 AM", "7:10 AM", "7:25 AM", "7:40 AM", "7:54 AM", "8:04 AM"] },
  { stop_id: "4657", name: "SE Powell &amp; 43rd", lat: 45.497653, lon: -122.61809, times: ["6:26 AM", "6:41 AM", "6:55 AM", "7:10 AM", "7:25 AM", "7:40 AM", "7:55 AM", "8:05 AM"] },
  { stop_id: "4654", name: "SE Powell &amp; 40th", lat: 45.49756, lon: -122.620626, times: ["6:26 AM", "6:41 AM", "6:56 AM", "7:11 AM", "7:26 AM", "7:41 AM", "7:56 AM", "8:06 AM"] },
  { stop_id: "4653", name: "SE Powell &amp; Cesar Chavez Blvd", lat: 45.497427, lon: -122.62303, times: ["6:27 AM", "6:42 AM", "6:57 AM", "7:12 AM", "7:27 AM", "7:42 AM", "7:57 AM", "8:07 AM"] },
  { stop_id: "4649", name: "SE Powell &amp; 36th", lat: 45.497101, lon: -122.62664, times: ["6:27 AM", "6:42 AM", "6:57 AM", "7:12 AM", "7:27 AM", "7:43 AM", "7:58 AM", "8:08 AM"] },
  { stop_id: "4646", name: "SE Powell &amp; 34th", lat: 45.496884, lon: -122.629834, times: ["6:28 AM", "6:43 AM", "6:58 AM", "7:13 AM", "7:28 AM", "7:44 AM", "7:59 AM", "8:09 AM"] },
  { stop_id: "4643", name: "SE Powell &amp; 33rd", lat: 45.496881, lon: -122.63195, times: ["6:28 AM", "6:43 AM", "6:58 AM", "7:13 AM", "7:29 AM", "7:44 AM", "7:59 AM", "8:09 AM"] },
  { stop_id: "4631", name: "SE Powell &amp; 28th", lat: 45.497842, lon: -122.637388, times: ["6:29 AM", "6:44 AM", "6:59 AM", "7:15 AM", "7:30 AM", "7:46 AM", "8:01 AM", "8:11 AM"] },
  { stop_id: "4626", name: "SE Powell &amp; 24th", lat: 45.498648, lon: -122.641882, times: ["6:29 AM", "6:45 AM", "7:00 AM", "7:16 AM", "7:31 AM", "7:47 AM", "8:02 AM", "8:12 AM"] },
  { stop_id: "4623", name: "SE Powell &amp; 21st", lat: 45.499397, lon: -122.644496, times: ["6:30 AM", "6:46 AM", "7:01 AM", "7:16 AM", "7:32 AM", "7:48 AM", "8:03 AM", "8:13 AM"] },
  { stop_id: "4538", name: "SE Powell &amp; Milwaukie", lat: 45.501412, lon: -122.654679, times: ["6:32 AM", "6:48 AM", "7:03 AM", "7:19 AM", "7:35 AM", "7:52 AM", "8:07 AM", "8:17 AM"] },
  { stop_id: "13825", name: "SE 7th &amp; Tilikum Way", lat: 45.505582, lon: -122.658631, times: ["6:34 AM", "6:50 AM", "7:05 AM", "7:21 AM", "7:37 AM", "7:54 AM", "8:09 AM", "8:19 AM"] },
  { stop_id: "13773", name: "OMSI/SE Water", lat: 45.506602, lon: -122.663155, times: ["6:20 AM", "6:35 AM", "6:51 AM", "7:06 AM", "7:22 AM", "7:38 AM", "7:55 AM", "8:10 AM"] },
  { stop_id: "13733", name: "South Waterfront/S Moody", lat: 45.502618, lon: -122.671791, times: ["6:23 AM", "6:38 AM", "6:54 AM", "7:09 AM", "7:25 AM", "7:41 AM", "7:58 AM", "8:13 AM"] },
  { stop_id: "3398", name: "SW Lincoln &amp; 1st", lat: 45.508043, lon: -122.679711, times: ["6:24 AM", "6:39 AM", "6:55 AM", "7:11 AM", "7:27 AM", "7:43 AM", "8:00 AM", "8:15 AM"] },
  { stop_id: "13780", name: "SW Hall &amp; 5th", lat: 45.510133, lon: -122.682088, times: ["6:27 AM", "6:42 AM", "6:58 AM", "7:13 AM", "7:29 AM", "7:45 AM", "8:02 AM", "8:18 AM"] },
  { stop_id: "7773", name: "SW 6th &amp; Mill", lat: 45.512233, lon: -122.682202, times: ["6:28 AM", "6:43 AM", "6:59 AM", "7:15 AM", "7:31 AM", "7:47 AM", "8:04 AM", "8:19 AM"] },
  { stop_id: "7756", name: "SW 6th &amp; Clay", lat: 45.513597, lon: -122.68144, times: ["6:29 AM", "6:44 AM", "7:00 AM", "7:16 AM", "7:32 AM", "7:48 AM", "8:05 AM", "8:20 AM"] },
  { stop_id: "7767", name: "SW 6th &amp; Main", lat: 45.516273, lon: -122.680039, times: ["6:31 AM", "6:46 AM", "7:02 AM", "7:17 AM", "7:33 AM", "7:49 AM", "8:06 AM", "8:22 AM"] },
  { stop_id: "7747", name: "SW 6th &amp; Alder", lat: 45.519607, lon: -122.67824, times: ["6:33 AM", "6:48 AM", "7:04 AM", "7:20 AM", "7:36 AM", "7:52 AM", "8:09 AM", "8:25 AM"] },
  { stop_id: "7751", name: "SW 6th &amp; W Burnside", lat: 45.52288, lon: -122.676415, times: ["6:20 AM", "6:35 AM", "6:50 AM", "7:06 AM", "7:22 AM", "7:38 AM", "7:54 AM", "8:11 AM"] },
  { stop_id: "9300", name: "NW 6th &amp; Flanders", lat: 45.525725, lon: -122.676441, times: ["6:22 AM", "6:37 AM", "6:52 AM", "7:08 AM", "7:24 AM", "7:40 AM", "7:56 AM", "8:13 AM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          📢 We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>