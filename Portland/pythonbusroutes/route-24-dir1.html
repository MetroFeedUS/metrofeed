<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 24 - To Gateway Transit Center | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-24-dir1-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 24 - To Gateway Transit Center</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 24;
    const direction = parseInt(1);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.517105, -122.691204],
  [45.516977, -122.690723],
  [45.516963, -122.690672],
  [45.516725, -122.689781],
  [45.516685, -122.689633],
  [45.516473, -122.688842],
  [45.516448, -122.688745],
  [45.516515, -122.688704],
  [45.516627, -122.688632],
  [45.516754, -122.688555],
  [45.516877, -122.688487],
  [45.51701, -122.688425],
  [45.517093, -122.688388],
  [45.51719, -122.688753],
  [45.517326, -122.689264],
  [45.517383, -122.689479],
  [45.517476, -122.689831],
  [45.517501, -122.689922],
  [45.517562, -122.690151],
  [45.517612, -122.690342],
  [45.517649, -122.690581],
  [45.517677, -122.690763],
  [45.517766, -122.69134],
  [45.517772, -122.691382],
  [45.517786, -122.691478],
  [45.517842, -122.691868],
  [45.517877, -122.692109],
  [45.517912, -122.692371],
  [45.517927, -122.692467],
  [45.517948, -122.692563],
  [45.51795, -122.692571],
  [45.518005, -122.692581],
  [45.51804, -122.692585],
  [45.518067, -122.692585],
  [45.518101, -122.692577],
  [45.518233, -122.69252],
  [45.518391, -122.692439],
  [45.51857, -122.692345],
  [45.518652, -122.692303],
  [45.519345, -122.691918],
  [45.519396, -122.691889],
  [45.519673, -122.691672],
  [45.519775, -122.691586],
  [45.519891, -122.691479],
  [45.519987, -122.691377],
  [45.520078, -122.691287],
  [45.520319, -122.691095],
  [45.520529, -122.690955],
  [45.520552, -122.690942],
  [45.520808, -122.690795],
  [45.520869, -122.69076],
  [45.521394, -122.690502],
  [45.521407, -122.690495],
  [45.521543, -122.690427],
  [45.52166, -122.690363],
  [45.521707, -122.690339],
  [45.521824, -122.690275],
  [45.521959, -122.690204],
  [45.522071, -122.690145],
  [45.522163, -122.690155],
  [45.522226, -122.690125],
  [45.522339, -122.690073],
  [45.522382, -122.689985],
  [45.522609, -122.689851],
  [45.522654, -122.689819],
  [45.522699, -122.689782],
  [45.522744, -122.689738],
  [45.522795, -122.689668],
  [45.522847, -122.689597],
  [45.522865, -122.689567],
  [45.522918, -122.689458],
  [45.522941, -122.689399],
  [45.522972, -122.689334],
  [45.52299, -122.689303],
  [45.523008, -122.689278],
  [45.523028, -122.689258],
  [45.523049, -122.689248],
  [45.52314, -122.689243],
  [45.523202, -122.689243],
  [45.523261, -122.689244],
  [45.5233, -122.689244],
  [45.523546, -122.68925],
  [45.524266, -122.689278],
  [45.524896, -122.689302],
  [45.524976, -122.689316],
  [45.525047, -122.689328],
  [45.525583, -122.689348],
  [45.525683, -122.689351],
  [45.526394, -122.689379],
  [45.526463, -122.689382],
  [45.52711, -122.689401],
  [45.527261, -122.689407],
  [45.52767, -122.689422],
  [45.527822, -122.689429],
  [45.528537, -122.689454],
  [45.528877, -122.689468],
  [45.529246, -122.689483],
  [45.529614, -122.689492],
  [45.529764, -122.689496],
  [45.529823, -122.689498],
  [45.529893, -122.689499],
  [45.529944, -122.689502],
  [45.529956, -122.689502],
  [45.53002, -122.689506],
  [45.530279, -122.689515],
  [45.530331, -122.689516],
  [45.530363, -122.689518],
  [45.530673, -122.689534],
  [45.530825, -122.689541],
  [45.531322, -122.689568],
  [45.531382, -122.689569],
  [45.531398, -122.68957],
  [45.531442, -122.689571],
  [45.531658, -122.689581],
  [45.531937, -122.689593],
  [45.532099, -122.6896],
  [45.532822, -122.689628],
  [45.533523, -122.689648],
  [45.534243, -122.689673],
  [45.534453, -122.689682],
  [45.534954, -122.689704],
  [45.535663, -122.689722],
  [45.535644, -122.690588],
  [45.535641, -122.690715],
  [45.535473, -122.692031],
  [45.535481, -122.692322],
  [45.535509, -122.692562],
  [45.535533, -122.692737],
  [45.535558, -122.692848],
  [45.535578, -122.692972],
  [45.535589, -122.693082],
  [45.5356, -122.693263],
  [45.535572, -122.694778],
  [45.535564, -122.695165],
  [45.535552, -122.695714],
  [45.535533, -122.696798],
  [45.535503, -122.698433],
  [45.5355, -122.698729],
  [45.535498, -122.698838],
  [45.535559, -122.698847],
  [45.53575, -122.698853],
  [45.536453, -122.698877],
  [45.536755, -122.698887],
  [45.536919, -122.698895],
  [45.536872, -122.698734],
  [45.536856, -122.698646],
  [45.536826, -122.698445],
  [45.53673, -122.697697],
  [45.53664, -122.697026],
  [45.53658, -122.696582],
  [45.536531, -122.696226],
  [45.536489, -122.695942],
  [45.536448, -122.695706],
  [45.536394, -122.695447],
  [45.536336, -122.695129],
  [45.536092, -122.694159],
  [45.535863, -122.693292],
  [45.535722, -122.692774],
  [45.535417, -122.691613],
  [45.535342, -122.691156],
  [45.535085, -122.690231],
  [45.534915, -122.689525],
  [45.534833, -122.689147],
  [45.534796, -122.688961],
  [45.534766, -122.688773],
  [45.534736, -122.688501],
  [45.534725, -122.688323],
  [45.534723, -122.688137],
  [45.534726, -122.687974],
  [45.534736, -122.687831],
  [45.534746, -122.687734],
  [45.534763, -122.687614],
  [45.534784, -122.687494],
  [45.534806, -122.687391],
  [45.534845, -122.68723],
  [45.53489, -122.687073],
  [45.534946, -122.686912],
  [45.534995, -122.686784],
  [45.535044, -122.686678],
  [45.535079, -122.686607],
  [45.535191, -122.686402],
  [45.535432, -122.686007],
  [45.536115, -122.685167],
  [45.536825, -122.6843],
  [45.540954, -122.679277],
  [45.542195, -122.677686],
  [45.542772, -122.676863],
  [45.54342, -122.675956],
  [45.543972, -122.675174],
  [45.544485, -122.67444],
  [45.544924, -122.673775],
  [45.545844, -122.672289],
  [45.546037, -122.671978],
  [45.54683, -122.670672],
  [45.546887, -122.670577],
  [45.546985, -122.670417],
  [45.547023, -122.670342],
  [45.547057, -122.67025],
  [45.547081, -122.670167],
  [45.547099, -122.670075],
  [45.547108, -122.669999],
  [45.547108, -122.669928],
  [45.547103, -122.669866],
  [45.547093, -122.669791],
  [45.547059, -122.669741],
  [45.54704, -122.669706],
  [45.54701, -122.669675],
  [45.54698, -122.669658],
  [45.546945, -122.669654],
  [45.546915, -122.669662],
  [45.546878, -122.669684],
  [45.546839, -122.669727],
  [45.546807, -122.669778],
  [45.5468, -122.669899],
  [45.546791, -122.670002],
  [45.546776, -122.670079],
  [45.54676, -122.670144],
  [45.546732, -122.670228],
  [45.546697, -122.670301],
  [45.546655, -122.670387],
  [45.546224, -122.671097],
  [45.545844, -122.671716],
  [45.545796, -122.671789],
  [45.545738, -122.671858],
  [45.545694, -122.6719],
  [45.545649, -122.671939],
  [45.545591, -122.671977],
  [45.545531, -122.672008],
  [45.545473, -122.672032],
  [45.545402, -122.67205],
  [45.544992, -122.672055],
  [45.5447, -122.672052],
  [45.54428, -122.672045],
  [45.544191, -122.671975],
  [45.543812, -122.671974],
  [45.543732, -122.671974],
  [45.543434, -122.671971],
  [45.542835, -122.671965],
  [45.542762, -122.67205],
  [45.542593, -122.672051],
  [45.542323, -122.672054],
  [45.542078, -122.672049],
  [45.542004, -122.672043],
  [45.541944, -122.672023],
  [45.541882, -122.671994],
  [45.541828, -122.671965],
  [45.541754, -122.671913],
  [45.541378, -122.671599],
  [45.541316, -122.671548],
  [45.54128, -122.671523],
  [45.541244, -122.671515],
  [45.541173, -122.67151],
  [45.541008, -122.671519],
  [45.540988, -122.671433],
  [45.540981, -122.671239],
  [45.540986, -122.670968],
  [45.54099, -122.670741],
  [45.540998, -122.670057],
  [45.540993, -122.669425],
  [45.540989, -122.668711],
  [45.540989, -122.668333],
  [45.540989, -122.668186],
  [45.540988, -122.66804],
  [45.540988, -122.667911],
  [45.540985, -122.666821],
  [45.540981, -122.666694],
  [45.541056, -122.666694],
  [45.541899, -122.666688],
  [45.542312, -122.666684],
  [45.542413, -122.66666],
  [45.542568, -122.66664],
  [45.542733, -122.666638],
  [45.54276, -122.666638],
  [45.542859, -122.666635],
  [45.54308, -122.66664],
  [45.543198, -122.666657],
  [45.543273, -122.66668],
  [45.543707, -122.666678],
  [45.543789, -122.666676],
  [45.543928, -122.666672],
  [45.544439, -122.666669],
  [45.544633, -122.666668],
  [45.544703, -122.666668],
  [45.545355, -122.66667],
  [45.546069, -122.666672],
  [45.546789, -122.666678],
  [45.546977, -122.666678],
  [45.547459, -122.666677],
  [45.547501, -122.666678],
  [45.54819, -122.666686],
  [45.548261, -122.666686],
  [45.54826, -122.666579],
  [45.548261, -122.666036],
  [45.548261, -122.665666],
  [45.548263, -122.66466],
  [45.548264, -122.664094],
  [45.548264, -122.66364],
  [45.548264, -122.663604],
  [45.548264, -122.662649],
  [45.548264, -122.662013],
  [45.548264, -122.661817],
  [45.548264, -122.661728],
  [45.548266, -122.661656],
  [45.548271, -122.661524],
  [45.548273, -122.661446],
  [45.548275, -122.660593],
  [45.548274, -122.659629],
  [45.54827, -122.658709],
  [45.548269, -122.658613],
  [45.548268, -122.658515],
  [45.548264, -122.658348],
  [45.548261, -122.658246],
  [45.548259, -122.65815],
  [45.548258, -122.657946],
  [45.548258, -122.657674],
  [45.548257, -122.656706],
  [45.548256, -122.656614],
  [45.548255, -122.655721],
  [45.548253, -122.654748],
  [45.54825, -122.654468],
  [45.548249, -122.65387],
  [45.548249, -122.653772],
  [45.548248, -122.653575],
  [45.548248, -122.653447],
  [45.548246, -122.652796],
  [45.548245, -122.652432],
  [45.548244, -122.651898],
  [45.548243, -122.651815],
  [45.548241, -122.651417],
  [45.54824, -122.65099],
  [45.548238, -122.650501],
  [45.548238, -122.650405],
  [45.548238, -122.650313],
  [45.548238, -122.650096],
  [45.548238, -122.649397],
  [45.548241, -122.648345],
  [45.548238, -122.647436],
  [45.548238, -122.647397],
  [45.548238, -122.647383],
  [45.548238, -122.647279],
  [45.548237, -122.647185],
  [45.548237, -122.647148],
  [45.548233, -122.646273],
  [45.548233, -122.645251],
  [45.548232, -122.64432],
  [45.548232, -122.6442],
  [45.548233, -122.644082],
  [45.548231, -122.643143],
  [45.548232, -122.642129],
  [45.54823, -122.641634],
  [45.548228, -122.64129],
  [45.548228, -122.641113],
  [45.548227, -122.641022],
  [45.54823, -122.6401],
  [45.548233, -122.639085],
  [45.548235, -122.638191],
  [45.548236, -122.638069],
  [45.548238, -122.637054],
  [45.548239, -122.636775],
  [45.54824, -122.635919],
  [45.548241, -122.635832],
  [45.548244, -122.634866],
  [45.548244, -122.634759],
  [45.548246, -122.633863],
  [45.548247, -122.633745],
  [45.548248, -122.632731],
  [45.54825, -122.631715],
  [45.548253, -122.630963],
  [45.548254, -122.630797],
  [45.548255, -122.630702],
  [45.548256, -122.630607],
  [45.548256, -122.630094],
  [45.548261, -122.629136],
  [45.548266, -122.628091],
  [45.54827, -122.627073],
  [45.548275, -122.626056],
  [45.548281, -122.62514],
  [45.548281, -122.624974],
  [45.548282, -122.624837],
  [45.548284, -122.624446],
  [45.548286, -122.623844],
  [45.548288, -122.623193],
  [45.54829, -122.622828],
  [45.548292, -122.622509],
  [45.548295, -122.621811],
  [45.5483, -122.621021],
  [45.5483, -122.620892],
  [45.5483, -122.620739],
  [45.548301, -122.620383],
  [45.548301, -122.620275],
  [45.548299, -122.61981],
  [45.548298, -122.619367],
  [45.548296, -122.618773],
  [45.548295, -122.618353],
  [45.548295, -122.617753],
  [45.548292, -122.617167],
  [45.548292, -122.617128],
  [45.54829, -122.616736],
  [45.548289, -122.616129],
  [45.548287, -122.615726],
  [45.548285, -122.615042],
  [45.548284, -122.61471],
  [45.548284, -122.614644],
  [45.548281, -122.613804],
  [45.548281, -122.613696],
  [45.548278, -122.612681],
  [45.548277, -122.612284],
  [45.548274, -122.611667],
  [45.548274, -122.611276],
  [45.54827, -122.610642],
  [45.548269, -122.610246],
  [45.548267, -122.60968],
  [45.548267, -122.609623],
  [45.548264, -122.609138],
  [45.548261, -122.608613],
  [45.548257, -122.607601],
  [45.54825, -122.606586],
  [45.548246, -122.605569],
  [45.548245, -122.605445],
  [45.54825, -122.60506],
  [45.548248, -122.604672],
  [45.548244, -122.60456],
  [45.54824, -122.604451],
  [45.548238, -122.604231],
  [45.548234, -122.603496],
  [45.548231, -122.602747],
  [45.548229, -122.602486],
  [45.548226, -122.601454],
  [45.548223, -122.600952],
  [45.54822, -122.600527],
  [45.548219, -122.600436],
  [45.548213, -122.599382],
  [45.548215, -122.598363],
  [45.548216, -122.597454],
  [45.548217, -122.597351],
  [45.54822, -122.596343],
  [45.548219, -122.595447],
  [45.548219, -122.595319],
  [45.548215, -122.594308],
  [45.548214, -122.593291],
  [45.548215, -122.593027],
  [45.548215, -122.592642],
  [45.548215, -122.592275],
  [45.548215, -122.592214],
  [45.548215, -122.591262],
  [45.548215, -122.591088],
  [45.548215, -122.590229],
  [45.548216, -122.589699],
  [45.548216, -122.589643],
  [45.548215, -122.589246],
  [45.548215, -122.588908],
  [45.548193, -122.588833],
  [45.548191, -122.588691],
  [45.548215, -122.588647],
  [45.54821, -122.588216],
  [45.548207, -122.587887],
  [45.548204, -122.587276],
  [45.548202, -122.587065],
  [45.548201, -122.586877],
  [45.548194, -122.58586],
  [45.548194, -122.585769],
  [45.548188, -122.584845],
  [45.548181, -122.583934],
  [45.54818, -122.583834],
  [45.548174, -122.582814],
  [45.548168, -122.581804],
  [45.548162, -122.580903],
  [45.548161, -122.580788],
  [45.548155, -122.579772],
  [45.548153, -122.578891],
  [45.548149, -122.578751],
  [45.548144, -122.578628],
  [45.548143, -122.578279],
  [45.548143, -122.578089],
  [45.548141, -122.577726],
  [45.548142, -122.577431],
  [45.548146, -122.577032],
  [45.548141, -122.576636],
  [45.548141, -122.576351],
  [45.54814, -122.576221],
  [45.54814, -122.576175],
  [45.548132, -122.573623],
  [45.54813, -122.572925],
  [45.548131, -122.572665],
  [45.548131, -122.572323],
  [45.548131, -122.572182],
  [45.548131, -122.57192],
  [45.548131, -122.571537],
  [45.548125, -122.571077],
  [45.548123, -122.570894],
  [45.548077, -122.570861],
  [45.548038, -122.570816],
  [45.54767, -122.570369],
  [45.547458, -122.570112],
  [45.547351, -122.56998],
  [45.547126, -122.569704],
  [45.547042, -122.569756],
  [45.546945, -122.56981],
  [45.54689, -122.569837],
  [45.546821, -122.569864],
  [45.546749, -122.569888],
  [45.54667, -122.569909],
  [45.546591, -122.569929],
  [45.546525, -122.569936],
  [45.546424, -122.569946],
  [45.545655, -122.56996],
  [45.545587, -122.569961],
  [45.545559, -122.569961],
  [45.544812, -122.569975],
  [45.544413, -122.56998],
  [45.543586, -122.569994],
  [45.543504, -122.569994],
  [45.543419, -122.569992],
  [45.54334, -122.569989],
  [45.543262, -122.569981],
  [45.543199, -122.569974],
  [45.54316, -122.569966],
  [45.542966, -122.569927],
  [45.542832, -122.569891],
  [45.542744, -122.569863],
  [45.542628, -122.569824],
  [45.542534, -122.56979],
  [45.542418, -122.569742],
  [45.542299, -122.569687],
  [45.542205, -122.569638],
  [45.542057, -122.569554],
  [45.541948, -122.56948],
  [45.54185, -122.569412],
  [45.541697, -122.569301],
  [45.541526, -122.569173],
  [45.541095, -122.568845],
  [45.54109, -122.568841],
  [45.541016, -122.568788],
  [45.540876, -122.568693],
  [45.540776, -122.568623],
  [45.540683, -122.568574],
  [45.540578, -122.568533],
  [45.540508, -122.568507],
  [45.540431, -122.568481],
  [45.540321, -122.568457],
  [45.540247, -122.568443],
  [45.540158, -122.568435],
  [45.540071, -122.568433],
  [45.540001, -122.568434],
  [45.539696, -122.568439],
  [45.539314, -122.568447],
  [45.538629, -122.568457],
  [45.538332, -122.568461],
  [45.537943, -122.568466],
  [45.537888, -122.568466],
  [45.537644, -122.568471],
  [45.537333, -122.568481],
  [45.537278, -122.568482],
  [45.537119, -122.568483],
  [45.536458, -122.568495],
  [45.535704, -122.568503],
  [45.5355, -122.568507],
  [45.535397, -122.568509],
  [45.534972, -122.568529],
  [45.534726, -122.568532],
  [45.534547, -122.568534],
  [45.534268, -122.568555],
  [45.534238, -122.568557],
  [45.533923, -122.56856],
  [45.533843, -122.568561],
  [45.53355, -122.568569],
  [45.533469, -122.56857],
  [45.533421, -122.568397],
  [45.533415, -122.568155],
  [45.533424, -122.567943],
  [45.53344, -122.567758],
  [45.533461, -122.567594],
  [45.533486, -122.567426],
  [45.533513, -122.567251],
  [45.533544, -122.567074],
  [45.533582, -122.566911],
  [45.533624, -122.566759],
  [45.533677, -122.566576],
  [45.533738, -122.566386],
  [45.533819, -122.566155],
  [45.533882, -122.565962],
  [45.533927, -122.565798],
  [45.533968, -122.56562],
  [45.534, -122.565458],
  [45.534025, -122.565297],
  [45.534046, -122.565138],
  [45.534062, -122.56498],
  [45.53407, -122.564823],
  [45.534074, -122.564653],
  [45.534073, -122.56447],
  [45.534067, -122.564279],
  [45.534057, -122.564091],
  [45.534038, -122.563896],
  [45.534012, -122.563715],
  [45.533973, -122.563517],
  [45.533929, -122.56333],
  [45.533881, -122.563138],
  [45.533757, -122.562701],
  [45.533644, -122.562256],
  [45.533589, -122.562027],
  [45.533559, -122.561882],
  [45.533541, -122.561768],
  [45.533526, -122.561445],
  [45.533521, -122.561371],
  [45.533519, -122.561269],
  [45.533516, -122.561053],
  [45.53349, -122.560927],
  [45.53349, -122.56083],
  [45.533494, -122.560418],
  [45.5335, -122.559974],
  [45.533528, -122.5596],
  [45.533533, -122.559289],
  [45.533535, -122.559063],
  [45.533537, -122.558838],
  [45.533539, -122.558646],
  [45.53354, -122.558547],
  [45.533542, -122.558224],
  [45.533538, -122.558063],
  [45.533186, -122.558066],
  [45.53309, -122.558067],
  [45.533005, -122.558068],
  [45.532947, -122.558069],
  [45.532791, -122.558072],
  [45.532051, -122.558083],
  [45.531766, -122.558086],
  [45.531407, -122.558089],
  [45.531357, -122.55809],
  [45.531275, -122.558091],
  [45.530888, -122.558096],
  [45.530683, -122.558098],
  [45.530643, -122.558099],
  [45.529991, -122.55811],
  [45.529903, -122.558111],
  [45.529679, -122.558113],
  [45.529486, -122.558114],
  [45.529487, -122.558267],
  [45.529484, -122.559244],
  [45.529483, -122.560035],
  [45.529482, -122.560464],
  [45.529481, -122.561113],
  [45.529488, -122.561828],
  [45.529477, -122.561942],
  [45.52947, -122.562054],
  [45.529468, -122.562594],
  [45.529467, -122.562813],
  [45.529466, -122.563],
  [45.529533, -122.563066],
  [45.529537, -122.563312],
  [45.529537, -122.563337],
  [45.529538, -122.563394],
  [45.529547, -122.563465],
  [45.529549, -122.563479],
  [45.529567, -122.563548],
  [45.529588, -122.563598],
  [45.529653, -122.563654],
  [45.529748, -122.56368],
  [45.529938, -122.563661],
  [45.530105, -122.56369],
  [45.530556, -122.563858]
];

const stopNames = {
  "21": "2800 Block NE 92nd",
  "26": "NE 92nd &amp; Hill",
  "1834": "NE Fremont &amp; Alameda",
  "1838": "NE Fremont &amp; Cleveland",
  "1842": "NE Fremont &amp; Mallory",
  "1846": "NE Fremont &amp; M L King",
  "1851": "NE Fremont &amp; 12th",
  "1856": "NE Fremont &amp; 15th",
  "1858": "NE Fremont &amp; 18th",
  "1863": "NE Fremont &amp; 24th",
  "1865": "NE Fremont &amp; 27th",
  "1868": "NE Fremont &amp; 31st",
  "1871": "NE Fremont &amp; 33rd",
  "1876": "NE Fremont &amp; 41st",
  "1882": "NE Fremont &amp; 48th",
  "1886": "NE Fremont &amp; 52nd",
  "1890": "NE Fremont &amp; 57th",
  "1894": "NE Fremont &amp; 61st",
  "1895": "NE Fremont &amp; 64th",
  "1900": "NE Fremont &amp; 7th",
  "1904": "NE Fremont &amp; 74th",
  "1906": "NE Fremont &amp; 77th",
  "1908": "NE Fremont &amp; 80th",
  "1911": "NE Fremont &amp; 82nd",
  "1912": "NE Fremont &amp; 85th",
  "1917": "NE Fremont &amp; 89th",
  "3052": "SW Jefferson &amp; 16th",
  "4288": "10000 Block NE Pacific St",
  "6359": "N Williams &amp; NE Cook",
  "6362": "N Williams &amp; NE Graham",
  "6364": "N Williams &amp; NE Morris",
  "6523": "1200 Block NE 102nd",
  "6525": "NE 102nd &amp; Pacific",
  "7169": "NW 23rd &amp; Thurman",
  "8114": "NE 92nd &amp; Russell",
  "8118": "NE 92nd &amp; Schuyler",
  "8124": "NE 92nd &amp; Thompson",
  "8126": "NE 92nd &amp; Tillamook",
  "8194": "Gateway TC (drop off only stop)",
  "8321": "NE Pacific St &amp; The Oregon Clinic",
  "9122": "SW 18th &amp; Morrison",
  "9253": "NE Fremont &amp; 66th",
  "9548": "NE Fremont &amp; Sandy",
  "10596": "NE Fremont &amp; 45th",
  "10597": "NE Fremont &amp; 68th",
  "10747": "NE Halsey &amp; 102nd",
  "12792": "SW Columbia &amp; 16th",
  "14037": "NW 18th &amp; Flanders",
  "14038": "NW 18th &amp; Lovejoy",
  "14039": "NW 18th &amp; Raleigh",
  "14040": "NW Thurman &amp; 21st",
  "14099": "N Kerby &amp; Graham"
};

const stops = [
  { stop_id: "12792", name: "SW Columbia &amp; 16th", lat: 45.516919, lon: -122.690692, times: ["10:10 AM", "10:40 AM", "11:10 AM", "11:40 AM", "12:10 PM", "12:40 PM", "1:10 PM", "1:40 PM"] },
  { stop_id: "3052", name: "SW Jefferson &amp; 16th", lat: 45.517636, lon: -122.690111, times: ["10:11 AM", "10:41 AM", "11:11 AM", "11:41 AM", "12:11 PM", "12:41 PM", "1:11 PM", "1:41 PM"] },
  { stop_id: "9122", name: "SW 18th &amp; Morrison", lat: 45.521935, lon: -122.690123, times: ["10:14 AM", "10:44 AM", "11:14 AM", "11:44 AM", "12:14 PM", "12:44 PM", "1:14 PM", "1:44 PM"] },
  { stop_id: "14037", name: "NW 18th &amp; Flanders", lat: 45.525585, lon: -122.689242, times: ["10:15 AM", "10:45 AM", "11:15 AM", "11:45 AM", "12:15 PM", "12:45 PM", "1:15 PM", "1:45 PM"] },
  { stop_id: "14038", name: "NW 18th &amp; Lovejoy", lat: 45.529825, lon: -122.6894, times: ["10:17 AM", "10:47 AM", "11:17 AM", "11:47 AM", "12:17 PM", "12:47 PM", "1:17 PM", "1:47 PM"] },
  { stop_id: "14039", name: "NW 18th &amp; Raleigh", lat: 45.534456, lon: -122.689571, times: ["10:20 AM", "10:50 AM", "11:20 AM", "11:50 AM", "12:20 PM", "12:50 PM", "1:20 PM", "1:50 PM"] },
  { stop_id: "14040", name: "NW Thurman &amp; 21st", lat: 45.535621, lon: -122.695164, times: ["10:20 AM", "10:50 AM", "11:21 AM", "11:51 AM", "12:21 PM", "12:51 PM", "1:21 PM", "1:51 PM"] },
  { stop_id: "7169", name: "NW 23rd &amp; Thurman", lat: 45.535752, lon: -122.698714, times: ["10:21 AM", "10:51 AM", "11:21 AM", "11:51 AM", "12:21 PM", "12:51 PM", "1:21 PM", "1:51 PM"] },
  { stop_id: "14099", name: "N Kerby &amp; Graham", lat: 45.542593, lon: -122.672101, times: ["10:27 AM", "10:57 AM", "11:28 AM", "11:58 AM", "12:28 PM", "12:58 PM", "1:28 PM", "1:58 PM"] },
  { stop_id: "6362", name: "N Williams &amp; NE Graham", lat: 45.542733, lon: -122.666571, times: ["10:29 AM", "10:59 AM", "11:30 AM", "12:00 PM", "12:30 PM", "1:00 PM", "1:30 PM", "2:00 PM"] },
  { stop_id: "6364", name: "N Williams &amp; NE Morris", lat: 45.544439, lon: -122.666542, times: ["10:30 AM", "11:00 AM", "11:31 AM", "12:01 PM", "12:31 PM", "1:01 PM", "1:31 PM", "2:01 PM"] },
  { stop_id: "6359", name: "N Williams &amp; NE Cook", lat: 45.546972, lon: -122.666597, times: ["10:31 AM", "11:01 AM", "11:32 AM", "12:02 PM", "12:32 PM", "1:02 PM", "1:32 PM", "2:02 PM"] },
  { stop_id: "1838", name: "NE Fremont &amp; Cleveland", lat: 45.548202, lon: -122.666036, times: ["10:31 AM", "11:01 AM", "11:32 AM", "12:02 PM", "12:32 PM", "1:02 PM", "1:32 PM", "2:02 PM"] },
  { stop_id: "1842", name: "NE Fremont &amp; Mallory", lat: 45.548209, lon: -122.663604, times: ["10:32 AM", "11:02 AM", "11:33 AM", "12:03 PM", "12:33 PM", "1:03 PM", "1:33 PM", "2:03 PM"] },
  { stop_id: "1846", name: "NE Fremont &amp; M L King", lat: 45.54821, lon: -122.661817, times: ["10:32 AM", "11:02 AM", "11:33 AM", "12:03 PM", "12:33 PM", "1:03 PM", "1:33 PM", "2:03 PM"] },
  { stop_id: "1900", name: "NE Fremont &amp; 7th", lat: 45.548203, lon: -122.658247, times: ["10:33 AM", "11:03 AM", "11:34 AM", "12:04 PM", "12:34 PM", "1:04 PM", "1:34 PM", "2:04 PM"] },
  { stop_id: "1851", name: "NE Fremont &amp; 12th", lat: 45.548193, lon: -122.653555, times: ["10:34 AM", "11:04 AM", "11:35 AM", "12:05 PM", "12:35 PM", "1:05 PM", "1:35 PM", "2:05 PM"] },
  { stop_id: "1856", name: "NE Fremont &amp; 15th", lat: 45.548187, lon: -122.650084, times: ["10:35 AM", "11:05 AM", "11:36 AM", "12:06 PM", "12:36 PM", "1:06 PM", "1:36 PM", "2:06 PM"] },
  { stop_id: "1858", name: "NE Fremont &amp; 18th", lat: 45.548185, lon: -122.647397, times: ["10:36 AM", "11:06 AM", "11:37 AM", "12:07 PM", "12:37 PM", "1:07 PM", "1:37 PM", "2:07 PM"] },
  { stop_id: "1863", name: "NE Fremont &amp; 24th", lat: 45.548179, lon: -122.641291, times: ["10:38 AM", "11:08 AM", "11:39 AM", "12:09 PM", "12:39 PM", "1:09 PM", "1:39 PM", "2:09 PM"] },
  { stop_id: "1865", name: "NE Fremont &amp; 27th", lat: 45.548175, lon: -122.638201, times: ["10:38 AM", "11:08 AM", "11:39 AM", "12:09 PM", "12:39 PM", "1:09 PM", "1:39 PM", "2:09 PM"] },
  { stop_id: "1868", name: "NE Fremont &amp; 31st", lat: 45.548196, lon: -122.633847, times: ["10:10 AM", "10:39 AM", "11:09 AM", "11:40 AM", "12:10 PM", "12:40 PM", "1:10 PM", "1:40 PM"] },
  { stop_id: "1871", name: "NE Fremont &amp; 33rd", lat: 45.548198, lon: -122.630963, times: ["10:11 AM", "10:40 AM", "11:10 AM", "11:41 AM", "12:11 PM", "12:41 PM", "1:11 PM", "1:41 PM"] },
  { stop_id: "1834", name: "NE Fremont &amp; Alameda", lat: 45.548221, lon: -122.62514, times: ["10:12 AM", "10:41 AM", "11:11 AM", "11:42 AM", "12:12 PM", "12:42 PM", "1:12 PM", "1:42 PM"] },
  { stop_id: "1876", name: "NE Fremont &amp; 41st", lat: 45.548236, lon: -122.62102, times: ["10:13 AM", "10:42 AM", "11:12 AM", "11:43 AM", "12:13 PM", "12:43 PM", "1:13 PM", "1:43 PM"] },
  { stop_id: "10596", name: "NE Fremont &amp; 45th", lat: 45.548233, lon: -122.61717, times: ["10:13 AM", "10:42 AM", "11:12 AM", "11:44 AM", "12:14 PM", "12:44 PM", "1:14 PM", "1:44 PM"] },
  { stop_id: "1882", name: "NE Fremont &amp; 48th", lat: 45.548226, lon: -122.613814, times: ["10:14 AM", "10:43 AM", "11:13 AM", "11:45 AM", "12:15 PM", "12:45 PM", "1:15 PM", "1:45 PM"] },
  { stop_id: "1886", name: "NE Fremont &amp; 52nd", lat: 45.548211, lon: -122.609137, times: ["10:15 AM", "10:44 AM", "11:14 AM", "11:46 AM", "12:16 PM", "12:46 PM", "1:16 PM", "1:46 PM"] },
  { stop_id: "1890", name: "NE Fremont &amp; 57th", lat: 45.548184, lon: -122.604231, times: ["10:16 AM", "10:45 AM", "11:15 AM", "11:47 AM", "12:17 PM", "12:47 PM", "1:17 PM", "1:47 PM"] },
  { stop_id: "1894", name: "NE Fremont &amp; 61st", lat: 45.548172, lon: -122.600526, times: ["10:17 AM", "10:46 AM", "11:16 AM", "11:48 AM", "12:18 PM", "12:48 PM", "1:18 PM", "1:48 PM"] },
  { stop_id: "1895", name: "NE Fremont &amp; 64th", lat: 45.548163, lon: -122.597453, times: ["10:18 AM", "10:47 AM", "11:17 AM", "11:48 AM", "12:18 PM", "12:48 PM", "1:18 PM", "1:48 PM"] },
  { stop_id: "9253", name: "NE Fremont &amp; 66th", lat: 45.548168, lon: -122.595446, times: ["10:18 AM", "10:47 AM", "11:17 AM", "11:49 AM", "12:19 PM", "12:49 PM", "1:19 PM", "1:49 PM"] },
  { stop_id: "10597", name: "NE Fremont &amp; 68th", lat: 45.548174, lon: -122.593026, times: ["10:18 AM", "10:47 AM", "11:17 AM", "11:49 AM", "12:19 PM", "12:49 PM", "1:19 PM", "1:49 PM"] },
  { stop_id: "9548", name: "NE Fremont &amp; Sandy", lat: 45.54817, lon: -122.589698, times: ["10:19 AM", "10:48 AM", "11:18 AM", "11:50 AM", "12:20 PM", "12:50 PM", "1:20 PM", "1:50 PM"] },
  { stop_id: "1904", name: "NE Fremont &amp; 74th", lat: 45.548137, lon: -122.587067, times: ["10:20 AM", "10:49 AM", "11:19 AM", "11:51 AM", "12:21 PM", "12:51 PM", "1:21 PM", "1:51 PM"] },
  { stop_id: "1906", name: "NE Fremont &amp; 77th", lat: 45.548128, lon: -122.583935, times: ["10:20 AM", "10:49 AM", "11:19 AM", "11:51 AM", "12:21 PM", "12:51 PM", "1:21 PM", "1:51 PM"] },
  { stop_id: "1908", name: "NE Fremont &amp; 80th", lat: 45.54811, lon: -122.580902, times: ["10:21 AM", "10:50 AM", "11:20 AM", "11:52 AM", "12:22 PM", "12:52 PM", "1:22 PM", "1:52 PM"] },
  { stop_id: "1911", name: "NE Fremont &amp; 82nd", lat: 45.548095, lon: -122.57828, times: ["10:22 AM", "10:51 AM", "11:21 AM", "11:53 AM", "12:23 PM", "12:53 PM", "1:23 PM", "1:53 PM"] },
  { stop_id: "1912", name: "NE Fremont &amp; 85th", lat: 45.548076, lon: -122.576221, times: ["10:22 AM", "10:51 AM", "11:21 AM", "11:53 AM", "12:23 PM", "12:53 PM", "1:23 PM", "1:53 PM"] },
  { stop_id: "1917", name: "NE Fremont &amp; 89th", lat: 45.548078, lon: -122.571078, times: ["10:23 AM", "10:52 AM", "11:22 AM", "11:54 AM", "12:24 PM", "12:54 PM", "1:24 PM", "1:54 PM"] },
  { stop_id: "26", name: "NE 92nd &amp; Hill", lat: 45.545655, lon: -122.570035, times: ["10:24 AM", "10:53 AM", "11:23 AM", "11:55 AM", "12:25 PM", "12:55 PM", "1:25 PM", "1:55 PM"] },
  { stop_id: "21", name: "2800 Block NE 92nd", lat: 45.543152, lon: -122.570032, times: ["10:25 AM", "10:54 AM", "11:24 AM", "11:56 AM", "12:26 PM", "12:56 PM", "1:26 PM", "1:56 PM"] },
  { stop_id: "8114", name: "NE 92nd &amp; Russell", lat: 45.541069, lon: -122.568897, times: ["10:26 AM", "10:55 AM", "11:25 AM", "11:57 AM", "12:27 PM", "12:57 PM", "1:27 PM", "1:57 PM"] },
  { stop_id: "8124", name: "NE 92nd &amp; Thompson", lat: 45.538334, lon: -122.568537, times: ["10:27 AM", "10:56 AM", "11:26 AM", "11:58 AM", "12:28 PM", "12:58 PM", "1:28 PM", "1:58 PM"] },
  { stop_id: "8126", name: "NE 92nd &amp; Tillamook", lat: 45.537279, lon: -122.568551, times: ["10:27 AM", "10:56 AM", "11:26 AM", "11:58 AM", "12:28 PM", "12:58 PM", "1:28 PM", "1:58 PM"] },
  { stop_id: "8118", name: "NE 92nd &amp; Schuyler", lat: 45.5355, lon: -122.568583, times: ["10:27 AM", "10:56 AM", "11:27 AM", "11:59 AM", "12:29 PM", "12:59 PM", "1:29 PM", "1:59 PM"] },
  { stop_id: "10747", name: "NE Halsey &amp; 102nd", lat: 45.533483, lon: -122.558544, times: ["10:30 AM", "10:59 AM", "11:30 AM", "12:02 PM", "12:32 PM", "1:02 PM", "1:32 PM", "2:02 PM"] },
  { stop_id: "6523", name: "1200 Block NE 102nd", lat: 45.531407, lon: -122.558228, times: ["10:31 AM", "11:00 AM", "11:31 AM", "12:03 PM", "12:33 PM", "1:03 PM", "1:33 PM", "2:03 PM"] },
  { stop_id: "6525", name: "NE 102nd &amp; Pacific", lat: 45.52968, lon: -122.558243, times: ["10:32 AM", "11:01 AM", "11:32 AM", "12:04 PM", "12:34 PM", "1:04 PM", "1:34 PM", "2:04 PM"] },
  { stop_id: "4288", name: "10000 Block NE Pacific St", lat: 45.529563, lon: -122.560465, times: ["10:32 AM", "11:01 AM", "11:32 AM", "12:04 PM", "12:34 PM", "1:04 PM", "1:34 PM", "2:04 PM"] },
  { stop_id: "8321", name: "NE Pacific St &amp; The Oregon Clinic", lat: 45.529559, lon: -122.562812, times: ["10:33 AM", "11:02 AM", "11:33 AM", "12:05 PM", "12:35 PM", "1:05 PM", "1:35 PM", "2:05 PM"] },
  { stop_id: "8194", name: "Gateway TC (drop off only stop)", lat: 45.530568, lon: -122.563773, times: ["10:34 AM", "11:03 AM", "11:34 AM", "12:06 PM", "12:36 PM", "1:06 PM", "1:36 PM", "2:06 PM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          📢 We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>