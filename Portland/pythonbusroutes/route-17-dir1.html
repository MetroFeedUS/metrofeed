<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 17 - To Saratoga & 27th | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 100px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0.5rem 0;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
  width: 100%;
  max-width: 970px;
  height: auto;
  max-height: 120px; /* üëà Caps desktop height */
  display: block;
  margin: 0 auto;
}
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

@media (max-width: 600px) {
  .ad-banner {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
}


  </style>
</head>

<body>
 
 <div class="ad-banner">
    <a href="advertise.html" target="_blank">
      <img src="assets/ad-placeholder.png" alt="Advertise Here">
    </a>
  </div>

 <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 17 - To Saratoga & 27th</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 17;
    const direction = parseInt(1);

    // Initialize map
    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    // Injected shape & stop data
    const shapeOutbound = [
  [45.489621, -122.537068],
  [45.489624, -122.536946],
  [45.489625, -122.53686],
  [45.489627, -122.536281],
  [45.489627, -122.536051],
  [45.489627, -122.535937],
  [45.489633, -122.534774],
  [45.489634, -122.534311],
  [45.489636, -122.533094],
  [45.489639, -122.532756],
  [45.48964, -122.532412],
  [45.48964, -122.532267],
  [45.489643, -122.531511],
  [45.489645, -122.531045],
  [45.489651, -122.530026],
  [45.489652, -122.529691],
  [45.489652, -122.529375],
  [45.489653, -122.529262],
  [45.489655, -122.528896],
  [45.489658, -122.528475],
  [45.489658, -122.528262],
  [45.489661, -122.527219],
  [45.489662, -122.526749],
  [45.489662, -122.526744],
  [45.489663, -122.526299],
  [45.489664, -122.525688],
  [45.48966, -122.525596],
  [45.489649, -122.525489],
  [45.489633, -122.52541],
  [45.489606, -122.525307],
  [45.489573, -122.525211],
  [45.489531, -122.525121],
  [45.489466, -122.525009],
  [45.489415, -122.52493],
  [45.489357, -122.52486],
  [45.489299, -122.524797],
  [45.489109, -122.524613],
  [45.489077, -122.524582],
  [45.489009, -122.524515],
  [45.488949, -122.524444],
  [45.488905, -122.524382],
  [45.488868, -122.524325],
  [45.488835, -122.524262],
  [45.488809, -122.524209],
  [45.48878, -122.524137],
  [45.488754, -122.524061],
  [45.488733, -122.523984],
  [45.488717, -122.523915],
  [45.488704, -122.52385],
  [45.48869, -122.523726],
  [45.488687, -122.523564],
  [45.488088, -122.52357],
  [45.488032, -122.52357],
  [45.487881, -122.52357],
  [45.4878, -122.52357],
  [45.487434, -122.523569],
  [45.486845, -122.523571],
  [45.486265, -122.523573],
  [45.485629, -122.523575],
  [45.485445, -122.523576],
  [45.485204, -122.523576],
  [45.485034, -122.523577],
  [45.484718, -122.523578],
  [45.484467, -122.523576],
  [45.484176, -122.523574],
  [45.483999, -122.523573],
  [45.483434, -122.523574],
  [45.483437, -122.524027],
  [45.483444, -122.524836],
  [45.483449, -122.525423],
  [45.483451, -122.525731],
  [45.483453, -122.526072],
  [45.483454, -122.526226],
  [45.483457, -122.526577],
  [45.483465, -122.527573],
  [45.483468, -122.528209],
  [45.48347, -122.528399],
  [45.483475, -122.528871],
  [45.483477, -122.52932],
  [45.483479, -122.529759],
  [45.48348, -122.529977],
  [45.483489, -122.531142],
  [45.483493, -122.531633],
  [45.483491, -122.531712],
  [45.483488, -122.531772],
  [45.483482, -122.531828],
  [45.483477, -122.531865],
  [45.483468, -122.531918],
  [45.48346, -122.531962],
  [45.483448, -122.532017],
  [45.483437, -122.532058],
  [45.483436, -122.532061],
  [45.483424, -122.532102],
  [45.483393, -122.532191],
  [45.483361, -122.53229],
  [45.483333, -122.532382],
  [45.483317, -122.532452],
  [45.483307, -122.532505],
  [45.483301, -122.532556],
  [45.483296, -122.532614],
  [45.483293, -122.53268],
  [45.483292, -122.53284],
  [45.483295, -122.532991],
  [45.483303, -122.533478],
  [45.483315, -122.533977],
  [45.483326, -122.534482],
  [45.48334, -122.534985],
  [45.48335, -122.535489],
  [45.483381, -122.536981],
  [45.483378, -122.537177],
  [45.483375, -122.537255],
  [45.483368, -122.537339],
  [45.483359, -122.537409],
  [45.483346, -122.537484],
  [45.483326, -122.537579],
  [45.4833, -122.53769],
  [45.483275, -122.537788],
  [45.483237, -122.537959],
  [45.483314, -122.537957],
  [45.483715, -122.53794],
  [45.484751, -122.537906],
  [45.485951, -122.537856],
  [45.486191, -122.537848],
  [45.486811, -122.537827],
  [45.486916, -122.537823],
  [45.487429, -122.537803],
  [45.487649, -122.537794],
  [45.48796, -122.537782],
  [45.488022, -122.537781],
  [45.488273, -122.537772],
  [45.488375, -122.537768],
  [45.488538, -122.537762],
  [45.489511, -122.537725],
  [45.489622, -122.537722],
  [45.489624, -122.537896],
  [45.489625, -122.538171],
  [45.489625, -122.538217],
  [45.489629, -122.538543],
  [45.489635, -122.538937],
  [45.489637, -122.53908],
  [45.48964, -122.539319],
  [45.489641, -122.539431],
  [45.489645, -122.539714],
  [45.48965, -122.540006],
  [45.489652, -122.540157],
  [45.489655, -122.540413],
  [45.489658, -122.540649],
  [45.489661, -122.540817],
  [45.489666, -122.541165],
  [45.48968, -122.542037],
  [45.489684, -122.542367],
  [45.489685, -122.542479],
  [45.489691, -122.542893],
  [45.489698, -122.543468],
  [45.489711, -122.544413],
  [45.489713, -122.544545],
  [45.489722, -122.545289],
  [45.489727, -122.545724],
  [45.48974, -122.546542],
  [45.489743, -122.546853],
  [45.489751, -122.547432],
  [45.489757, -122.547798],
  [45.489759, -122.547906],
  [45.489757, -122.548021],
  [45.489756, -122.548132],
  [45.489759, -122.54847],
  [45.489762, -122.548891],
  [45.489763, -122.549036],
  [45.489765, -122.549372],
  [45.489766, -122.549815],
  [45.489772, -122.551199],
  [45.489772, -122.551415],
  [45.489772, -122.551446],
  [45.489773, -122.552221],
  [45.489774, -122.552376],
  [45.489774, -122.55268],
  [45.489775, -122.552916],
  [45.489776, -122.553207],
  [45.489779, -122.553913],
  [45.489779, -122.554064],
  [45.48978, -122.554509],
  [45.489779, -122.555052],
  [45.489778, -122.555377],
  [45.489777, -122.555671],
  [45.489777, -122.555777],
  [45.489782, -122.556514],
  [45.489784, -122.556832],
  [45.489786, -122.557166],
  [45.489792, -122.558195],
  [45.489795, -122.558352],
  [45.489804, -122.558906],
  [45.489822, -122.559599],
  [45.489828, -122.559834],
  [45.489842, -122.560394],
  [45.489854, -122.560908],
  [45.489886, -122.562228],
  [45.489899, -122.562885],
  [45.489905, -122.563152],
  [45.489911, -122.563345],
  [45.489915, -122.563474],
  [45.489918, -122.563544],
  [45.489956, -122.565181],
  [45.489959, -122.565326],
  [45.489978, -122.566166],
  [45.489996, -122.566624],
  [45.49001, -122.566949],
  [45.490017, -122.567121],
  [45.490017, -122.567278],
  [45.490015, -122.56786],
  [45.490015, -122.567892],
  [45.490024, -122.56848],
  [45.490025, -122.568593],
  [45.490026, -122.568713],
  [45.490043, -122.569562],
  [45.490069, -122.570499],
  [45.490084, -122.57142],
  [45.490091, -122.571692],
  [45.490103, -122.572005],
  [45.490114, -122.572238],
  [45.490114, -122.572246],
  [45.490115, -122.57234],
  [45.490137, -122.573299],
  [45.490156, -122.574077],
  [45.490163, -122.574212],
  [45.490171, -122.574287],
  [45.490181, -122.574374],
  [45.490201, -122.574492],
  [45.490216, -122.574586],
  [45.490226, -122.574685],
  [45.490233, -122.574788],
  [45.490235, -122.574906],
  [45.490235, -122.575125],
  [45.490233, -122.575624],
  [45.490233, -122.575818],
  [45.490234, -122.576768],
  [45.490236, -122.577672],
  [45.490238, -122.577753],
  [45.490259, -122.578656],
  [45.490261, -122.578806],
  [45.490264, -122.578969],
  [45.490263, -122.579371],
  [45.490263, -122.579394],
  [45.490258, -122.579677],
  [45.490255, -122.579831],
  [45.490254, -122.580193],
  [45.490254, -122.580222],
  [45.490254, -122.580904],
  [45.490254, -122.581003],
  [45.490252, -122.582011],
  [45.490252, -122.582061],
  [45.490252, -122.582347],
  [45.490252, -122.582572],
  [45.490251, -122.583333],
  [45.490252, -122.583786],
  [45.490247, -122.584463],
  [45.490247, -122.584485],
  [45.490247, -122.58477],
  [45.490247, -122.585857],
  [45.490246, -122.586074],
  [45.490246, -122.586814],
  [45.490246, -122.587006],
  [45.490244, -122.588046],
  [45.490244, -122.588866],
  [45.490244, -122.588991],
  [45.490244, -122.589156],
  [45.490244, -122.589296],
  [45.490246, -122.59025],
  [45.490249, -122.591094],
  [45.49025, -122.59123],
  [45.490252, -122.592613],
  [45.490255, -122.593934],
  [45.490262, -122.594078],
  [45.490267, -122.594141],
  [45.490272, -122.594195],
  [45.490282, -122.594314],
  [45.490288, -122.594388],
  [45.490297, -122.594547],
  [45.490301, -122.594667],
  [45.490303, -122.594827],
  [45.490303, -122.5949],
  [45.490304, -122.595337],
  [45.490305, -122.59541],
  [45.490307, -122.595917],
  [45.490307, -122.596393],
  [45.490308, -122.596897],
  [45.490309, -122.597282],
  [45.490309, -122.59741],
  [45.49031, -122.597918],
  [45.49031, -122.598056],
  [45.490313, -122.598209],
  [45.490321, -122.59838],
  [45.490276, -122.598569],
  [45.490269, -122.598622],
  [45.49027, -122.598995],
  [45.49027, -122.599262],
  [45.490271, -122.599749],
  [45.490271, -122.599968],
  [45.490276, -122.60085],
  [45.490275, -122.601315],
  [45.490274, -122.601354],
  [45.490278, -122.602579],
  [45.490281, -122.603569],
  [45.490281, -122.603665],
  [45.490282, -122.603982],
  [45.490285, -122.604721],
  [45.490285, -122.605578],
  [45.490285, -122.605696],
  [45.490289, -122.606781],
  [45.490293, -122.607867],
  [45.490291, -122.608329],
  [45.490294, -122.609001],
  [45.490294, -122.6091],
  [45.490294, -122.609449],
  [45.490294, -122.609992],
  [45.490295, -122.610974],
  [45.490294, -122.611823],
  [45.490294, -122.611947],
  [45.490293, -122.612917],
  [45.490293, -122.613774],
  [45.490293, -122.613897],
  [45.490294, -122.614871],
  [45.490293, -122.615724],
  [45.490293, -122.615845],
  [45.49029, -122.61682],
  [45.490292, -122.617794],
  [45.49029, -122.619012],
  [45.49029, -122.619382],
  [45.490291, -122.619557],
  [45.490293, -122.621757],
  [45.490293, -122.621915],
  [45.490294, -122.622002],
  [45.490302, -122.62228],
  [45.490301, -122.622461],
  [45.490301, -122.622638],
  [45.490301, -122.62278],
  [45.490302, -122.622933],
  [45.4903, -122.623252],
  [45.490294, -122.623931],
  [45.490298, -122.624671],
  [45.490298, -122.625676],
  [45.490299, -122.626226],
  [45.4903, -122.626692],
  [45.490302, -122.627293],
  [45.490303, -122.627765],
  [45.490303, -122.628332],
  [45.490303, -122.628772],
  [45.490304, -122.629326],
  [45.490304, -122.629428],
  [45.490304, -122.629673],
  [45.49031, -122.629778],
  [45.490322, -122.629901],
  [45.490343, -122.630008],
  [45.49038, -122.630145],
  [45.490418, -122.630244],
  [45.490473, -122.630355],
  [45.490516, -122.630454],
  [45.490548, -122.630556],
  [45.490576, -122.630671],
  [45.490593, -122.63084],
  [45.490595, -122.631058],
  [45.490592, -122.631376],
  [45.490593, -122.631828],
  [45.490593, -122.632334],
  [45.490593, -122.632712],
  [45.490593, -122.632793],
  [45.490595, -122.633572],
  [45.490593, -122.633678],
  [45.490577, -122.633786],
  [45.490559, -122.633869],
  [45.490531, -122.633961],
  [45.490491, -122.634061],
  [45.490434, -122.634168],
  [45.490362, -122.634341],
  [45.490341, -122.634446],
  [45.490323, -122.634538],
  [45.49031, -122.634645],
  [45.490307, -122.634744],
  [45.490306, -122.635322],
  [45.490307, -122.635625],
  [45.490308, -122.635705],
  [45.490308, -122.636293],
  [45.490308, -122.636624],
  [45.490308, -122.637101],
  [45.490308, -122.63752],
  [45.490302, -122.637611],
  [45.490296, -122.6377],
  [45.490296, -122.637966],
  [45.490295, -122.638508],
  [45.490295, -122.638588],
  [45.490296, -122.639369],
  [45.490296, -122.639576],
  [45.490297, -122.640022],
  [45.490297, -122.640572],
  [45.490299, -122.641451],
  [45.4903, -122.642034],
  [45.490303, -122.642347],
  [45.490312, -122.642729],
  [45.490315, -122.642883],
  [45.490323, -122.644784],
  [45.490321, -122.646458],
  [45.49032, -122.646632],
  [45.490322, -122.64701],
  [45.49032, -122.647358],
  [45.490321, -122.647467],
  [45.490322, -122.647801],
  [45.490327, -122.648198],
  [45.490325, -122.648413],
  [45.490544, -122.648415],
  [45.491174, -122.648391],
  [45.491259, -122.648387],
  [45.491404, -122.648383],
  [45.491734, -122.648382],
  [45.491931, -122.648382],
  [45.492151, -122.648355],
  [45.492301, -122.648345],
  [45.492413, -122.648342],
  [45.492714, -122.648342],
  [45.492824, -122.648343],
  [45.493042, -122.648341],
  [45.493793, -122.648339],
  [45.493915, -122.648338],
  [45.493988, -122.648337],
  [45.494271, -122.648347],
  [45.494399, -122.648359],
  [45.494573, -122.648358],
  [45.495101, -122.648349],
  [45.495305, -122.648341],
  [45.495408, -122.64833],
  [45.495497, -122.648318],
  [45.495643, -122.648295],
  [45.496046, -122.648212],
  [45.496375, -122.648136],
  [45.496565, -122.648095],
  [45.496665, -122.648071],
  [45.496748, -122.648053],
  [45.4968, -122.648046],
  [45.49688, -122.648043],
  [45.497459, -122.648004],
  [45.497778, -122.647973],
  [45.497837, -122.647968],
  [45.497947, -122.647955],
  [45.498104, -122.647939],
  [45.498167, -122.647931],
  [45.498243, -122.647926],
  [45.498321, -122.64793],
  [45.498403, -122.647948],
  [45.498517, -122.64798],
  [45.498595, -122.648015],
  [45.498642, -122.648044],
  [45.498684, -122.648077],
  [45.498769, -122.64815],
  [45.498845, -122.648214],
  [45.499032, -122.648354],
  [45.499198, -122.648496],
  [45.499797, -122.648977],
  [45.500188, -122.649308],
  [45.500213, -122.649335],
  [45.500246, -122.649377],
  [45.500292, -122.649446],
  [45.500342, -122.649532],
  [45.500373, -122.649602],
  [45.500393, -122.649665],
  [45.500421, -122.649796],
  [45.500429, -122.649864],
  [45.500434, -122.649931],
  [45.500441, -122.65038],
  [45.500444, -122.650461],
  [45.500467, -122.650686],
  [45.500625, -122.6516],
  [45.500631, -122.651807],
  [45.500798, -122.652544],
  [45.500794, -122.652719],
  [45.500841, -122.652905],
  [45.500891, -122.653098],
  [45.500939, -122.653282],
  [45.501035, -122.653439],
  [45.501144, -122.653851],
  [45.501192, -122.654071],
  [45.501223, -122.654225],
  [45.501255, -122.654381],
  [45.501318, -122.654715],
  [45.501336, -122.654808],
  [45.501386, -122.655076],
  [45.501456, -122.655442],
  [45.501535, -122.655794],
  [45.501545, -122.655903],
  [45.501567, -122.656245],
  [45.501571, -122.656407],
  [45.501607, -122.656585],
  [45.501652, -122.656701],
  [45.501736, -122.656799],
  [45.501887, -122.656794],
  [45.502011, -122.656794],
  [45.502099, -122.656794],
  [45.504368, -122.656786],
  [45.504433, -122.65679],
  [45.504462, -122.656794],
  [45.504494, -122.656801],
  [45.504523, -122.656813],
  [45.504563, -122.656831],
  [45.504593, -122.656853],
  [45.504627, -122.656875],
  [45.504666, -122.65691],
  [45.504704, -122.656953],
  [45.504733, -122.656997],
  [45.504759, -122.657047],
  [45.504804, -122.657138],
  [45.504817, -122.657178],
  [45.504836, -122.657244],
  [45.504855, -122.657327],
  [45.504866, -122.657409],
  [45.50487, -122.657489],
  [45.504873, -122.657583],
  [45.504872, -122.657631],
  [45.50487, -122.657781],
  [45.504872, -122.658726],
  [45.505582, -122.658716],
  [45.505641, -122.658715],
  [45.505756, -122.658721],
  [45.505797, -122.658727],
  [45.505843, -122.65874],
  [45.505883, -122.658764],
  [45.505904, -122.65878],
  [45.505924, -122.6588],
  [45.505972, -122.658869],
  [45.506034, -122.658988],
  [45.506102, -122.659132],
  [45.50619, -122.659327],
  [45.506244, -122.659466],
  [45.506302, -122.659623],
  [45.506355, -122.659793],
  [45.5064, -122.659952],
  [45.506436, -122.660088],
  [45.506468, -122.660229],
  [45.506494, -122.660361],
  [45.506519, -122.66052],
  [45.506536, -122.660656],
  [45.506538, -122.660778],
  [45.50655, -122.660903],
  [45.506557, -122.661016],
  [45.506555, -122.66114],
  [45.506555, -122.661603],
  [45.50655, -122.661827],
  [45.506549, -122.661931],
  [45.506548, -122.662057],
  [45.506549, -122.662144],
  [45.506559, -122.663156],
  [45.506561, -122.663417],
  [45.506567, -122.663783],
  [45.506576, -122.663822],
  [45.506592, -122.66391],
  [45.506595, -122.663941],
  [45.506597, -122.664129],
  [45.506591, -122.664255],
  [45.506585, -122.664311],
  [45.506571, -122.664392],
  [45.506545, -122.664507],
  [45.506525, -122.66457],
  [45.506492, -122.664646],
  [45.506469, -122.664696],
  [45.506451, -122.664733],
  [45.506413, -122.664794],
  [45.506354, -122.664885],
  [45.506219, -122.665094],
  [45.506047, -122.665358],
  [45.5058, -122.665734],
  [45.505517, -122.666168],
  [45.505244, -122.66659],
  [45.504925, -122.667076],
  [45.50463, -122.667526],
  [45.504033, -122.668444],
  [45.503675, -122.668996],
  [45.503477, -122.669294],
  [45.503427, -122.669371],
  [45.503389, -122.669432],
  [45.50337, -122.669467],
  [45.503345, -122.669515],
  [45.503307, -122.669596],
  [45.503269, -122.669684],
  [45.50323, -122.669781],
  [45.503194, -122.669876],
  [45.503165, -122.669956],
  [45.503146, -122.670005],
  [45.503114, -122.670102],
  [45.503094, -122.670157],
  [45.503045, -122.670287],
  [45.502991, -122.670428],
  [45.502956, -122.670539],
  [45.502891, -122.670754],
  [45.502587, -122.671772],
  [45.502534, -122.671949],
  [45.502512, -122.67203],
  [45.502524, -122.672091],
  [45.502525, -122.67215],
  [45.50253, -122.6723],
  [45.502532, -122.672329],
  [45.502533, -122.672351],
  [45.502537, -122.672403],
  [45.502543, -122.67245],
  [45.50255, -122.672499],
  [45.502557, -122.672534],
  [45.502567, -122.672572],
  [45.502584, -122.672617],
  [45.502605, -122.67266],
  [45.502652, -122.672737],
  [45.50268, -122.672776],
  [45.502704, -122.672804],
  [45.502727, -122.67282],
  [45.502745, -122.672832],
  [45.502763, -122.672843],
  [45.502811, -122.672868],
  [45.503309, -122.67312],
  [45.503599, -122.673254],
  [45.50396, -122.673428],
  [45.504122, -122.673513],
  [45.504248, -122.673578],
  [45.504322, -122.673621],
  [45.504408, -122.673671],
  [45.504654, -122.673821],
  [45.504736, -122.673873],
  [45.504826, -122.673928],
  [45.505003, -122.674038],
  [45.505106, -122.674108],
  [45.505168, -122.674154],
  [45.505243, -122.67422],
  [45.505279, -122.67425],
  [45.505314, -122.674281],
  [45.505353, -122.67432],
  [45.505595, -122.674577],
  [45.505626, -122.674613],
  [45.505699, -122.67469],
  [45.505789, -122.674772],
  [45.505829, -122.674806],
  [45.505913, -122.674872],
  [45.505984, -122.674921],
  [45.506017, -122.674941],
  [45.506055, -122.674963],
  [45.506115, -122.674995],
  [45.506208, -122.675041],
  [45.506258, -122.675066],
  [45.50666, -122.675249],
  [45.506689, -122.675263],
  [45.506744, -122.675287],
  [45.506839, -122.675322],
  [45.506875, -122.675335],
  [45.506978, -122.675367],
  [45.507023, -122.675379],
  [45.507286, -122.675456],
  [45.507365, -122.675482],
  [45.507396, -122.675494],
  [45.507468, -122.675529],
  [45.507509, -122.675551],
  [45.507541, -122.675572],
  [45.507579, -122.675601],
  [45.507615, -122.675631],
  [45.507649, -122.675662],
  [45.507674, -122.675689],
  [45.507709, -122.675727],
  [45.507749, -122.675778],
  [45.507779, -122.675821],
  [45.507802, -122.675858],
  [45.507832, -122.67591],
  [45.507854, -122.675952],
  [45.507871, -122.675987],
  [45.507916, -122.676091],
  [45.50796, -122.676237],
  [45.507971, -122.676285],
  [45.507981, -122.676335],
  [45.507991, -122.676399],
  [45.507997, -122.676444],
  [45.508003, -122.676507],
  [45.508007, -122.676563],
  [45.508009, -122.676597],
  [45.508012, -122.676665],
  [45.508013, -122.676719],
  [45.508013, -122.676814],
  [45.508015, -122.677379],
  [45.508016, -122.677398],
  [45.508031, -122.677501],
  [45.508048, -122.677615],
  [45.508054, -122.678372],
  [45.508052, -122.678506],
  [45.508046, -122.678589],
  [45.508036, -122.678743],
  [45.508023, -122.678889],
  [45.508008, -122.679112],
  [45.507997, -122.679473],
  [45.507995, -122.679532],
  [45.507993, -122.679704],
  [45.507993, -122.679784],
  [45.507994, -122.679949],
  [45.507993, -122.680282],
  [45.50799, -122.680433],
  [45.508006, -122.680972],
  [45.508009, -122.681107],
  [45.508016, -122.681251],
  [45.508028, -122.681387],
  [45.508045, -122.681545],
  [45.508074, -122.681721],
  [45.508087, -122.68178],
  [45.508101, -122.681855],
  [45.508114, -122.681926],
  [45.50817, -122.681926],
  [45.508305, -122.681922],
  [45.508533, -122.681895],
  [45.508625, -122.681881],
  [45.50873, -122.681846],
  [45.508839, -122.681806],
  [45.508985, -122.681734],
  [45.509022, -122.681714],
  [45.509141, -122.68165],
  [45.509202, -122.681615],
  [45.509511, -122.681447],
  [45.5098, -122.681296],
  [45.509868, -122.681258],
  [45.509956, -122.68159],
  [45.510029, -122.681865],
  [45.510094, -122.682109],
  [45.510133, -122.682253],
  [45.510142, -122.682289],
  [45.510394, -122.683237],
  [45.510415, -122.683313],
  [45.510743, -122.683134],
  [45.510813, -122.683097],
  [45.511078, -122.682953],
  [45.511684, -122.682625],
  [45.511759, -122.682585],
  [45.512262, -122.682312],
  [45.512378, -122.682249],
  [45.512415, -122.682229],
  [45.51293, -122.68195],
  [45.512963, -122.681932],
  [45.513078, -122.68187],
  [45.513111, -122.681852],
  [45.513413, -122.681689],
  [45.513631, -122.681571],
  [45.513748, -122.681507],
  [45.514291, -122.681213],
  [45.514415, -122.681146],
  [45.515072, -122.68079],
  [45.515744, -122.680426],
  [45.515808, -122.680391],
  [45.5163, -122.680153],
  [45.516359, -122.680124],
  [45.516423, -122.680091],
  [45.516492, -122.680049],
  [45.517036, -122.679756],
  [45.517087, -122.67973],
  [45.517171, -122.679685],
  [45.517691, -122.679401],
  [45.51775, -122.679367],
  [45.517829, -122.679321],
  [45.518361, -122.679025],
  [45.518406, -122.679004],
  [45.518432, -122.678987],
  [45.518466, -122.67897],
  [45.519024, -122.67868],
  [45.51907, -122.678655],
  [45.519096, -122.678641],
  [45.519151, -122.678611],
  [45.519637, -122.678355],
  [45.519656, -122.678345],
  [45.519751, -122.678297],
  [45.519811, -122.678266],
  [45.520361, -122.677963],
  [45.520421, -122.677932],
  [45.520477, -122.677904],
  [45.521016, -122.677604],
  [45.521084, -122.677569],
  [45.521685, -122.677242],
  [45.521751, -122.677205],
  [45.521828, -122.677162],
  [45.522399, -122.676848],
  [45.522446, -122.676775],
  [45.52291, -122.676527],
  [45.522939, -122.676511],
  [45.523003, -122.676486],
  [45.523068, -122.676468],
  [45.523122, -122.676459],
  [45.52319, -122.676451],
  [45.523722, -122.676473],
  [45.523777, -122.676474],
  [45.523839, -122.676474],
  [45.524491, -122.676497],
  [45.525135, -122.676527],
  [45.525203, -122.676534],
  [45.525274, -122.676541],
  [45.525723, -122.676556],
  [45.525858, -122.67656],
  [45.525911, -122.676558],
  [45.525976, -122.676556],
  [45.526561, -122.676573],
  [45.526631, -122.676576],
  [45.526616, -122.677372],
  [45.526612, -122.677555],
  [45.52726, -122.677579],
  [45.527324, -122.677587],
  [45.527403, -122.677595],
  [45.527524, -122.677602],
  [45.527804, -122.677618],
  [45.527821, -122.677619],
  [45.528042, -122.677634],
  [45.528252, -122.677641],
  [45.528615, -122.677646],
  [45.528661, -122.677647],
  [45.528948, -122.677656],
  [45.529627, -122.677678],
  [45.52971, -122.677669],
  [45.529736, -122.677665],
  [45.529777, -122.677653],
  [45.529828, -122.677631],
  [45.529875, -122.67761],
  [45.5299, -122.6776],
  [45.529911, -122.677564],
  [45.529924, -122.677534],
  [45.529943, -122.677496],
  [45.529962, -122.677466],
  [45.529988, -122.677429],
  [45.530072, -122.677316],
  [45.530106, -122.677269],
  [45.530132, -122.677227],
  [45.530298, -122.676938],
  [45.530649, -122.676307],
  [45.531637, -122.674537],
  [45.531864, -122.67413],
  [45.532094, -122.673719],
  [45.533013, -122.672074],
  [45.533132, -122.671866],
  [45.533132, -122.671822],
  [45.533143, -122.671726],
  [45.533362, -122.671302],
  [45.533433, -122.671153],
  [45.533496, -122.671021],
  [45.533732, -122.670604],
  [45.533846, -122.6704],
  [45.533887, -122.670332],
  [45.534092, -122.669976],
  [45.534231, -122.669737],
  [45.53427, -122.669667],
  [45.534293, -122.669619],
  [45.534311, -122.669573],
  [45.534328, -122.669511],
  [45.534344, -122.669432],
  [45.534362, -122.669307],
  [45.534367, -122.66925],
  [45.534371, -122.669186],
  [45.534377, -122.669044],
  [45.534378, -122.668749],
  [45.534378, -122.668497],
  [45.534372, -122.668378],
  [45.534363, -122.668205],
  [45.534364, -122.667863],
  [45.534373, -122.667751],
  [45.534382, -122.667631],
  [45.534384, -122.66719],
  [45.534383, -122.666899],
  [45.534382, -122.666741],
  [45.534381, -122.666554],
  [45.534379, -122.665972],
  [45.534377, -122.6657],
  [45.534377, -122.665467],
  [45.534359, -122.665346],
  [45.534359, -122.664696],
  [45.534358, -122.664533],
  [45.534357, -122.663829],
  [45.534357, -122.663807],
  [45.534356, -122.663683],
  [45.534355, -122.663572],
  [45.534353, -122.662906],
  [45.534353, -122.662847],
  [45.534361, -122.662672],
  [45.534369, -122.662519],
  [45.534368, -122.66244],
  [45.534363, -122.662017],
  [45.53436, -122.661795],
  [45.534363, -122.661653],
  [45.534365, -122.661521],
  [45.534365, -122.661272],
  [45.534365, -122.661132],
  [45.534364, -122.660896],
  [45.534364, -122.660752],
  [45.53436, -122.66064],
  [45.534358, -122.660578],
  [45.534356, -122.660533],
  [45.534356, -122.660143],
  [45.534357, -122.659622],
  [45.534356, -122.659453],
  [45.534355, -122.659138],
  [45.534354, -122.658859],
  [45.534354, -122.658783],
  [45.534354, -122.658735],
  [45.534354, -122.658712],
  [45.534359, -122.6586],
  [45.534363, -122.658496],
  [45.534363, -122.658458],
  [45.53436, -122.65821],
  [45.534359, -122.658056],
  [45.534355, -122.657601],
  [45.534353, -122.65708],
  [45.534352, -122.656751],
  [45.534351, -122.65658],
  [45.534351, -122.656302],
  [45.53435, -122.656155],
  [45.53435, -122.656044],
  [45.534348, -122.655651],
  [45.534348, -122.655569],
  [45.534347, -122.655484],
  [45.534345, -122.654952],
  [45.534344, -122.654641],
  [45.534343, -122.654302],
  [45.534341, -122.653685],
  [45.534341, -122.653348],
  [45.534339, -122.652839],
  [45.534338, -122.652521],
  [45.534333, -122.651594],
  [45.534334, -122.651505],
  [45.534334, -122.650682],
  [45.534334, -122.650629],
  [45.534333, -122.650506],
  [45.534332, -122.65036],
  [45.53433, -122.649581],
  [45.534322, -122.649472],
  [45.534315, -122.649362],
  [45.534313, -122.649172],
  [45.53431, -122.648681],
  [45.534308, -122.648453],
  [45.534304, -122.646672],
  [45.534315, -122.645619],
  [45.534314, -122.644975],
  [45.534314, -122.644939],
  [45.534311, -122.644837],
  [45.534308, -122.644712],
  [45.534301, -122.643137],
  [45.534301, -122.643005],
  [45.534297, -122.641179],
  [45.534481, -122.641177],
  [45.534863, -122.641177],
  [45.534968, -122.641195],
  [45.535007, -122.641198],
  [45.535058, -122.641201],
  [45.535119, -122.6412],
  [45.535208, -122.641191],
  [45.535347, -122.641166],
  [45.535415, -122.641166],
  [45.535735, -122.641167],
  [45.53578, -122.641167],
  [45.536431, -122.641161],
  [45.537337, -122.64115],
  [45.537356, -122.64115],
  [45.537361, -122.641123],
  [45.537371, -122.641099],
  [45.537385, -122.64108],
  [45.537403, -122.641069],
  [45.537422, -122.641067],
  [45.53744, -122.641072],
  [45.537456, -122.641084],
  [45.537469, -122.641102],
  [45.537478, -122.641125],
  [45.537482, -122.64115],
  [45.538071, -122.641147],
  [45.538323, -122.641146],
  [45.538881, -122.641159],
  [45.538892, -122.641158],
  [45.538893, -122.641142],
  [45.538899, -122.641118],
  [45.538907, -122.641099],
  [45.538922, -122.641077],
  [45.538939, -122.641064],
  [45.538954, -122.641059],
  [45.538966, -122.641058],
  [45.538989, -122.641065],
  [45.539005, -122.641077],
  [45.53902, -122.641099],
  [45.539028, -122.641118],
  [45.539033, -122.64114],
  [45.539034, -122.641163],
  [45.540436, -122.641154],
  [45.54044, -122.641123],
  [45.540449, -122.6411],
  [45.540463, -122.64108],
  [45.540479, -122.641066],
  [45.540497, -122.641059],
  [45.540505, -122.641059],
  [45.540516, -122.64106],
  [45.540534, -122.641068],
  [45.54055, -122.641083],
  [45.540563, -122.641103],
  [45.540571, -122.641127],
  [45.540574, -122.641154],
  [45.541894, -122.641138],
  [45.541974, -122.641138],
  [45.542061, -122.641137],
  [45.543622, -122.64113],
  [45.544207, -122.64113],
  [45.545062, -122.641124],
  [45.545101, -122.641124],
  [45.545158, -122.641125],
  [45.545228, -122.641126],
  [45.545692, -122.641126],
  [45.545786, -122.641124],
  [45.545942, -122.641124],
  [45.546602, -122.64112],
  [45.546697, -122.64112],
  [45.547531, -122.641117],
  [45.548165, -122.641114],
  [45.548228, -122.641113],
  [45.54841, -122.641113],
  [45.549439, -122.641106],
  [45.549442, -122.640754],
  [45.549444, -122.640665],
  [45.549448, -122.640575],
  [45.549463, -122.640427],
  [45.549484, -122.64027],
  [45.549521, -122.640104],
  [45.549579, -122.639891],
  [45.549644, -122.639703],
  [45.549707, -122.639541],
  [45.549765, -122.639351],
  [45.549786, -122.63924],
  [45.549815, -122.639091],
  [45.549842, -122.63889],
  [45.549852, -122.638779],
  [45.549857, -122.638692],
  [45.549856, -122.6386],
  [45.549849, -122.638494],
  [45.549831, -122.638322],
  [45.549787, -122.638084],
  [45.549753, -122.637954],
  [45.549677, -122.637701],
  [45.549658, -122.63762],
  [45.549641, -122.637525],
  [45.549634, -122.637417],
  [45.549632, -122.637362],
  [45.549634, -122.637296],
  [45.54964, -122.637188],
  [45.549654, -122.637067],
  [45.549692, -122.636869],
  [45.549745, -122.636631],
  [45.549818, -122.636377],
  [45.5499, -122.636123],
  [45.549971, -122.635917],
  [45.55015, -122.635917],
  [45.550283, -122.635916],
  [45.55109, -122.635914],
  [45.551783, -122.635911],
  [45.55189, -122.635911],
  [45.55306, -122.635904],
  [45.554222, -122.635902],
  [45.554322, -122.635902],
  [45.554328, -122.636911],
  [45.55433, -122.637926],
  [45.555314, -122.637927],
  [45.555397, -122.637927],
  [45.556321, -122.637919],
  [45.557614, -122.637909],
  [45.557667, -122.637908],
  [45.558956, -122.637897],
  [45.559048, -122.637896],
  [45.560205, -122.637889],
  [45.560294, -122.637889],
  [45.561531, -122.637875],
  [45.562615, -122.637867],
  [45.562702, -122.637866],
  [45.562701, -122.638155],
  [45.564365, -122.638154],
  [45.564442, -122.638154],
  [45.565908, -122.638154],
  [45.566201, -122.638154],
  [45.566278, -122.638154],
  [45.566391, -122.638154],
  [45.566762, -122.638152],
  [45.568143, -122.638148],
  [45.568228, -122.638147],
  [45.568486, -122.638148],
  [45.569138, -122.638148],
  [45.569486, -122.638147],
  [45.56966, -122.638147],
  [45.570506, -122.638146],
  [45.571794, -122.638141],
  [45.571878, -122.638141],
  [45.571882, -122.636428]
];

const stopNames = {
  "611": "N Broadway &amp; Benton",
  "625": "NW Broadway &amp; Irving",
  "2506": "12400 Block SE Harold",
  "2507": "12900 Block SE Harold",
  "2510": "SE Harold &amp; 133rd",
  "2538": "SE Harold &amp; 128th",
  "2540": "SE Harold &amp; 136th",
  "2683": "SE Holgate &amp; 117th",
  "2684": "SE Holgate &amp; 125th",
  "2685": "SE Holgate &amp; 134th Dr",
  "2687": "SE Holgate &amp; 101st",
  "2690": "SE Holgate &amp; 103rd",
  "2695": "SE Holgate &amp; 108th Pl",
  "2697": "SE Holgate &amp; 112th",
  "2700": "SE Holgate &amp; 115th",
  "2703": "SE Holgate &amp; 122nd",
  "2705": "SE Holgate &amp; 122nd",
  "2706": "SE Holgate &amp; 128th",
  "2707": "SE Holgate &amp; 130th",
  "2708": "SE Holgate &amp; 136th",
  "2713": "SE Holgate &amp; 26th",
  "2715": "SE Holgate &amp; 28th",
  "2719": "SE Holgate &amp; 32nd",
  "2721": "SE Holgate &amp; 34th",
  "2723": "SE Holgate &amp; 36th",
  "2727": "SE Holgate &amp; Cesar Chavez Blvd",
  "2729": "SE Holgate &amp; 41st",
  "2733": "SE Holgate &amp; 45th",
  "2735": "SE Holgate &amp; 47th",
  "2737": "SE Holgate &amp; 49th",
  "2739": "SE Holgate &amp; 52nd",
  "2741": "SE Holgate &amp; 56th",
  "2743": "SE Holgate &amp; 58th",
  "2747": "SE Holgate &amp; 62nd",
  "2748": "SE Holgate &amp; 64th",
  "2751": "SE Holgate &amp; 67th",
  "2753": "SE Holgate &amp; 70th",
  "2755": "SE Holgate &amp; 72nd",
  "2756": "SE Holgate &amp; 74th",
  "2759": "SE Holgate &amp; 77th",
  "2761": "SE Holgate &amp; 79th",
  "2763": "SE Holgate &amp; 82nd",
  "2768": "SE Holgate &amp; 88th",
  "3398": "SW Lincoln &amp; 1st",
  "4538": "SE Powell &amp; Milwaukie",
  "4811": "NE Regents &amp; 26th",
  "6216": "NE Weidler &amp; Lloyd Center",
  "6218": "NE Weidler &amp; M L King",
  "6220": "N Weidler &amp; Williams",
  "6227": "NE Weidler &amp; 17th",
  "6232": "NE Weidler &amp; 2nd",
  "6235": "NE Weidler &amp; 21st",
  "6237": "NE Weidler &amp; 22nd",
  "6240": "NE Weidler &amp; 7th",
  "6242": "NE Weidler &amp; 9th",
  "6660": "SE 122nd &amp; Raymond",
  "6849": "SE 17th &amp; Center",
  "6876": "SE 17th &amp; Mall",
  "7188": "NE 24th &amp; Broadway",
  "7190": "NE 24th &amp; Fremont",
  "7194": "NE 24th &amp; Klickitat",
  "7197": "NE 24th &amp; Knott",
  "7201": "NE 24th &amp; Siskiyou",
  "7206": "NE 24th &amp; Thompson",
  "7208": "NE 24th &amp; Tillamook",
  "7235": "NE 27th &amp; Ainsworth",
  "7238": "NE 27th &amp; Alberta",
  "7240": "NE 27th &amp; Dekum",
  "7246": "NE 27th &amp; Holman",
  "7248": "NE 27th &amp; Jarrett",
  "7250": "NE 27th &amp; Killingsworth",
  "7256": "NE 27th &amp; Prescott",
  "7260": "NE 27th &amp; Sumner",
  "7267": "NE 27th &amp; Wygant",
  "7306": "NE 29th &amp; Alameda",
  "7309": "NE 29th &amp; Bryce",
  "7317": "NE 29th &amp; Skidmore",
  "7747": "SW 6th &amp; Alder",
  "7751": "SW 6th &amp; W Burnside",
  "7756": "SW 6th &amp; Clay",
  "7767": "SW 6th &amp; Main",
  "7773": "SW 6th &amp; Mill",
  "8727": "NE 27th &amp; Highland",
  "9300": "NW 6th &amp; Flanders",
  "9487": "SE 122nd &amp; Schiller",
  "10425": "NE Weidler &amp; 15th",
  "10593": "SE Holgate &amp; 85th",
  "12914": "SE Holgate &amp; 97th",
  "13219": "SE Holgate &amp; SE Holgate Blvd MAX Stn",
  "13693": "SE 17th &amp; Rhine",
  "13733": "South Waterfront/S Moody",
  "13773": "OMSI/SE Water",
  "13780": "SW Hall &amp; 5th",
  "13825": "SE 7th &amp; Tilikum Way",
  "14416": "SE 136th &amp; Mitchell",
  "14630": "4700 Block SE 136th"
};

const stops = [
  { stop_id: "2703", name: "SE Holgate &amp; 122nd", lat: 45.489521, lon: -122.537062, times: ["7:12 AM", "7:27 AM", "7:42 AM", "7:57 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM"] },
  { stop_id: "2684", name: "SE Holgate &amp; 125th", lat: 45.48958, lon: -122.534311, times: ["7:12 AM", "7:27 AM", "7:42 AM", "7:57 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM"] },
  { stop_id: "2706", name: "SE Holgate &amp; 128th", lat: 45.489596, lon: -122.532414, times: ["7:12 AM", "7:27 AM", "7:42 AM", "7:57 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM"] },
  { stop_id: "2707", name: "SE Holgate &amp; 130th", lat: 45.489578, lon: -122.529691, times: ["7:13 AM", "7:28 AM", "7:43 AM", "7:58 AM", "8:13 AM", "8:28 AM", "8:43 AM", "8:58 AM"] },
  { stop_id: "2685", name: "SE Holgate &amp; 134th Dr", lat: 45.489582, lon: -122.526748, times: ["7:13 AM", "7:28 AM", "7:43 AM", "7:58 AM", "8:13 AM", "8:28 AM", "8:43 AM", "8:58 AM"] },
  { stop_id: "2708", name: "SE Holgate &amp; 136th", lat: 45.488783, lon: -122.524312, times: ["7:14 AM", "7:29 AM", "7:44 AM", "7:59 AM", "8:14 AM", "8:29 AM", "8:44 AM", "8:59 AM"] },
  { stop_id: "14630", name: "4700 Block SE 136th", lat: 45.487807, lon: -122.523672, times: ["7:14 AM", "7:29 AM", "7:44 AM", "7:59 AM", "8:14 AM", "8:29 AM", "8:44 AM", "8:59 AM"] },
  { stop_id: "14416", name: "SE 136th &amp; Mitchell", lat: 45.485631, lon: -122.523661, times: ["7:15 AM", "7:30 AM", "7:45 AM", "8:00 AM", "8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM"] },
  { stop_id: "2540", name: "SE Harold &amp; 136th", lat: 45.483485, lon: -122.524025, times: ["7:15 AM", "7:30 AM", "7:45 AM", "8:00 AM", "8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM"] },
  { stop_id: "2510", name: "SE Harold &amp; 133rd", lat: 45.483502, lon: -122.526072, times: ["7:16 AM", "7:31 AM", "7:46 AM", "8:01 AM", "8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM"] },
  { stop_id: "2507", name: "12900 Block SE Harold", lat: 45.483529, lon: -122.529976, times: ["7:16 AM", "7:31 AM", "7:46 AM", "8:01 AM", "8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM"] },
  { stop_id: "2538", name: "SE Harold &amp; 128th", lat: 45.483542, lon: -122.532114, times: ["7:17 AM", "7:32 AM", "7:47 AM", "8:02 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM"] },
  { stop_id: "2506", name: "12400 Block SE Harold", lat: 45.483404, lon: -122.535487, times: ["7:17 AM", "7:32 AM", "7:47 AM", "8:02 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM"] },
  { stop_id: "6660", name: "SE 122nd &amp; Raymond", lat: 45.486193, lon: -122.537682, times: ["7:19 AM", "7:34 AM", "7:49 AM", "8:04 AM", "8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM"] },
  { stop_id: "9487", name: "SE 122nd &amp; Schiller", lat: 45.487645, lon: -122.537622, times: ["7:19 AM", "7:34 AM", "7:49 AM", "8:04 AM", "8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM"] },
  { stop_id: "2705", name: "SE Holgate &amp; 122nd", lat: 45.489727, lon: -122.538167, times: ["7:20 AM", "7:35 AM", "7:50 AM", "8:05 AM", "8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM"] },
  { stop_id: "2683", name: "SE Holgate &amp; 117th", lat: 45.489767, lon: -122.542366, times: ["7:20 AM", "7:35 AM", "7:50 AM", "8:05 AM", "8:20 AM", "8:35 AM", "8:50 AM", "9:05 AM"] },
  { stop_id: "2700", name: "SE Holgate &amp; 115th", lat: 45.489811, lon: -122.54441, times: ["7:21 AM", "7:36 AM", "7:51 AM", "8:06 AM", "8:21 AM", "8:36 AM", "8:51 AM", "9:06 AM"] },
  { stop_id: "2697", name: "SE Holgate &amp; 112th", lat: 45.489868, lon: -122.547791, times: ["7:21 AM", "7:37 AM", "7:52 AM", "8:07 AM", "8:22 AM", "8:37 AM", "8:51 AM", "9:06 AM"] },
  { stop_id: "2695", name: "SE Holgate &amp; 108th Pl", lat: 45.489867, lon: -122.551414, times: ["7:22 AM", "7:37 AM", "7:52 AM", "8:07 AM", "8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM"] },
  { stop_id: "2690", name: "SE Holgate &amp; 103rd", lat: 45.489877, lon: -122.556514, times: ["7:23 AM", "7:39 AM", "7:54 AM", "8:09 AM", "8:24 AM", "8:39 AM", "8:53 AM", "9:08 AM"] },
  { stop_id: "2687", name: "SE Holgate &amp; 101st", lat: 45.489944, lon: -122.560389, times: ["7:24 AM", "7:39 AM", "7:54 AM", "8:09 AM", "8:24 AM", "8:39 AM", "8:54 AM", "9:09 AM"] },
  { stop_id: "12914", name: "SE Holgate &amp; 97th", lat: 45.490012, lon: -122.563338, times: ["7:24 AM", "7:40 AM", "7:55 AM", "8:10 AM", "8:25 AM", "8:40 AM", "8:54 AM", "9:09 AM"] },
  { stop_id: "13219", name: "SE Holgate &amp; SE Holgate Blvd MAX Stn", lat: 45.490107, lon: -122.567278, times: ["7:25 AM", "7:41 AM", "7:56 AM", "8:11 AM", "8:26 AM", "8:41 AM", "8:55 AM", "9:10 AM"] },
  { stop_id: "2768", name: "SE Holgate &amp; 88th", lat: 45.490184, lon: -122.572247, times: ["7:10 AM", "7:26 AM", "7:42 AM", "7:57 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:56 AM"] },
  { stop_id: "10593", name: "SE Holgate &amp; 85th", lat: 45.4903, lon: -122.575624, times: ["7:11 AM", "7:27 AM", "7:43 AM", "7:58 AM", "8:13 AM", "8:28 AM", "8:43 AM", "8:57 AM"] },
  { stop_id: "2763", name: "SE Holgate &amp; 82nd", lat: 45.490348, lon: -122.579397, times: ["7:12 AM", "7:28 AM", "7:44 AM", "7:59 AM", "8:14 AM", "8:29 AM", "8:44 AM", "8:58 AM"] },
  { stop_id: "2761", name: "SE Holgate &amp; 79th", lat: 45.490295, lon: -122.582346, times: ["7:12 AM", "7:28 AM", "7:44 AM", "7:59 AM", "8:14 AM", "8:29 AM", "8:44 AM", "8:58 AM"] },
  { stop_id: "2759", name: "SE Holgate &amp; 77th", lat: 45.490308, lon: -122.584485, times: ["7:13 AM", "7:29 AM", "7:45 AM", "8:00 AM", "8:15 AM", "8:30 AM", "8:45 AM", "8:59 AM"] },
  { stop_id: "2756", name: "SE Holgate &amp; 74th", lat: 45.4903, lon: -122.586815, times: ["7:13 AM", "7:29 AM", "7:45 AM", "8:00 AM", "8:15 AM", "8:30 AM", "8:45 AM", "8:59 AM"] },
  { stop_id: "2755", name: "SE Holgate &amp; 72nd", lat: 45.490299, lon: -122.588867, times: ["7:14 AM", "7:30 AM", "7:46 AM", "8:01 AM", "8:16 AM", "8:31 AM", "8:46 AM", "8:59 AM"] },
  { stop_id: "2753", name: "SE Holgate &amp; 70th", lat: 45.490309, lon: -122.591094, times: ["7:14 AM", "7:30 AM", "7:46 AM", "8:01 AM", "8:16 AM", "8:31 AM", "8:46 AM", "9:00 AM"] },
  { stop_id: "2751", name: "SE Holgate &amp; 67th", lat: 45.490314, lon: -122.594131, times: ["7:15 AM", "7:31 AM", "7:47 AM", "8:02 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:01 AM"] },
  { stop_id: "2748", name: "SE Holgate &amp; 64th", lat: 45.490359, lon: -122.597281, times: ["7:16 AM", "7:32 AM", "7:48 AM", "8:03 AM", "8:18 AM", "8:33 AM", "8:48 AM", "9:01 AM"] },
  { stop_id: "2747", name: "SE Holgate &amp; 62nd", lat: 45.490317, lon: -122.599262, times: ["7:16 AM", "7:33 AM", "7:49 AM", "8:04 AM", "8:19 AM", "8:34 AM", "8:48 AM", "9:02 AM"] },
  { stop_id: "2743", name: "SE Holgate &amp; 58th", lat: 45.490327, lon: -122.603569, times: ["7:17 AM", "7:34 AM", "7:50 AM", "8:05 AM", "8:20 AM", "8:35 AM", "8:49 AM", "9:03 AM"] },
  { stop_id: "2741", name: "SE Holgate &amp; 56th", lat: 45.49034, lon: -122.605584, times: ["7:18 AM", "7:34 AM", "7:50 AM", "8:05 AM", "8:20 AM", "8:35 AM", "8:50 AM", "9:03 AM"] },
  { stop_id: "2739", name: "SE Holgate &amp; 52nd", lat: 45.490346, lon: -122.609449, times: ["7:18 AM", "7:35 AM", "7:51 AM", "8:06 AM", "8:21 AM", "8:36 AM", "8:50 AM", "9:04 AM"] },
  { stop_id: "2737", name: "SE Holgate &amp; 49th", lat: 45.490345, lon: -122.611822, times: ["7:19 AM", "7:36 AM", "7:52 AM", "8:07 AM", "8:22 AM", "8:37 AM", "8:51 AM", "9:04 AM"] },
  { stop_id: "2735", name: "SE Holgate &amp; 47th", lat: 45.490343, lon: -122.613776, times: ["7:19 AM", "7:36 AM", "7:52 AM", "8:07 AM", "8:22 AM", "8:37 AM", "8:51 AM", "9:05 AM"] },
  { stop_id: "2733", name: "SE Holgate &amp; 45th", lat: 45.490353, lon: -122.615726, times: ["7:20 AM", "7:37 AM", "7:53 AM", "8:08 AM", "8:23 AM", "8:38 AM", "8:52 AM", "9:05 AM"] },
  { stop_id: "2729", name: "SE Holgate &amp; 41st", lat: 45.490346, lon: -122.619382, times: ["7:21 AM", "7:38 AM", "7:54 AM", "8:09 AM", "8:24 AM", "8:39 AM", "8:53 AM", "9:06 AM"] },
  { stop_id: "2727", name: "SE Holgate &amp; Cesar Chavez Blvd", lat: 45.490347, lon: -122.622461, times: ["7:22 AM", "7:39 AM", "7:55 AM", "8:10 AM", "8:25 AM", "8:40 AM", "8:54 AM", "9:07 AM"] },
  { stop_id: "2723", name: "SE Holgate &amp; 36th", lat: 45.490363, lon: -122.626226, times: ["7:22 AM", "7:39 AM", "7:55 AM", "8:10 AM", "8:25 AM", "8:40 AM", "8:54 AM", "9:07 AM"] },
  { stop_id: "2721", name: "SE Holgate &amp; 34th", lat: 45.490362, lon: -122.629326, times: ["7:23 AM", "7:40 AM", "7:56 AM", "8:11 AM", "8:26 AM", "8:41 AM", "8:55 AM", "9:08 AM"] },
  { stop_id: "2719", name: "SE Holgate &amp; 32nd", lat: 45.490661, lon: -122.632334, times: ["7:24 AM", "7:41 AM", "7:57 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:56 AM", "9:09 AM"] },
  { stop_id: "2715", name: "SE Holgate &amp; 28th", lat: 45.490358, lon: -122.6371, times: ["7:25 AM", "7:42 AM", "7:58 AM", "8:13 AM", "8:28 AM", "8:43 AM", "8:57 AM", "9:10 AM"] },
  { stop_id: "2713", name: "SE Holgate &amp; 26th", lat: 45.490372, lon: -122.639368, times: ["7:25 AM", "7:42 AM", "7:58 AM", "8:13 AM", "8:28 AM", "8:43 AM", "8:57 AM", "9:10 AM"] },
  { stop_id: "6876", name: "SE 17th &amp; Mall", lat: 45.491734, lon: -122.648269, times: ["7:11 AM", "7:28 AM", "7:45 AM", "8:01 AM", "8:16 AM", "8:31 AM", "8:46 AM", "9:00 AM"] },
  { stop_id: "6849", name: "SE 17th &amp; Center", lat: 45.493793, lon: -122.648215, times: ["7:12 AM", "7:29 AM", "7:46 AM", "8:02 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:01 AM"] },
  { stop_id: "13693", name: "SE 17th &amp; Rhine", lat: 45.497779, lon: -122.647864, times: ["7:12 AM", "7:29 AM", "7:46 AM", "8:02 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:01 AM"] },
  { stop_id: "4538", name: "SE Powell &amp; Milwaukie", lat: 45.501412, lon: -122.654679, times: ["7:14 AM", "7:31 AM", "7:48 AM", "8:04 AM", "8:19 AM", "8:34 AM", "8:49 AM", "9:03 AM"] },
  { stop_id: "13825", name: "SE 7th &amp; Tilikum Way", lat: 45.505582, lon: -122.658631, times: ["7:16 AM", "7:33 AM", "7:50 AM", "8:06 AM", "8:21 AM", "8:36 AM", "8:51 AM", "9:05 AM"] },
  { stop_id: "13773", name: "OMSI/SE Water", lat: 45.506602, lon: -122.663155, times: ["7:17 AM", "7:34 AM", "7:51 AM", "8:07 AM", "8:22 AM", "8:37 AM", "8:52 AM", "9:06 AM"] },
  { stop_id: "13733", name: "South Waterfront/S Moody", lat: 45.502618, lon: -122.671791, times: ["7:20 AM", "7:37 AM", "7:54 AM", "8:10 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:09 AM"] },
  { stop_id: "3398", name: "SW Lincoln &amp; 1st", lat: 45.508043, lon: -122.679711, times: ["7:22 AM", "7:39 AM", "7:56 AM", "8:12 AM", "8:27 AM", "8:42 AM", "8:57 AM", "9:11 AM"] },
  { stop_id: "13780", name: "SW Hall &amp; 5th", lat: 45.510133, lon: -122.682088, times: ["7:25 AM", "7:42 AM", "7:59 AM", "8:15 AM", "8:30 AM", "8:45 AM", "9:00 AM", "9:14 AM"] },
  { stop_id: "7773", name: "SW 6th &amp; Mill", lat: 45.512233, lon: -122.682202, times: ["7:26 AM", "7:43 AM", "8:00 AM", "8:16 AM", "8:31 AM", "8:46 AM", "9:01 AM", "9:15 AM"] },
  { stop_id: "7756", name: "SW 6th &amp; Clay", lat: 45.513597, lon: -122.68144, times: ["7:10 AM", "7:27 AM", "7:44 AM", "8:01 AM", "8:17 AM", "8:32 AM", "8:47 AM", "9:02 AM"] },
  { stop_id: "7767", name: "SW 6th &amp; Main", lat: 45.516273, lon: -122.680039, times: ["7:12 AM", "7:29 AM", "7:46 AM", "8:03 AM", "8:19 AM", "8:34 AM", "8:49 AM", "9:04 AM"] },
  { stop_id: "7747", name: "SW 6th &amp; Alder", lat: 45.519607, lon: -122.67824, times: ["7:15 AM", "7:32 AM", "7:49 AM", "8:06 AM", "8:22 AM", "8:37 AM", "8:52 AM", "9:07 AM"] },
  { stop_id: "7751", name: "SW 6th &amp; W Burnside", lat: 45.52288, lon: -122.676415, times: ["7:16 AM", "7:34 AM", "7:50 AM", "8:08 AM", "8:23 AM", "8:39 AM", "8:53 AM", "9:09 AM"] },
  { stop_id: "9300", name: "NW 6th &amp; Flanders", lat: 45.525725, lon: -122.676441, times: ["7:18 AM", "7:35 AM", "7:52 AM", "8:09 AM", "8:25 AM", "8:40 AM", "8:55 AM", "9:10 AM"] },
  { stop_id: "625", name: "NW Broadway &amp; Irving", lat: 45.527807, lon: -122.677488, times: ["7:20 AM", "7:54 AM", "8:27 AM", "8:57 AM", "9:26 AM", "9:54 AM", "10:22 AM", "10:52 AM"] },
  { stop_id: "611", name: "N Broadway &amp; Benton", lat: 45.534032, lon: -122.669905, times: ["7:23 AM", "7:57 AM", "8:30 AM", "9:00 AM", "9:29 AM", "9:57 AM", "10:25 AM", "10:55 AM"] },
  { stop_id: "6220", name: "N Weidler &amp; Williams", lat: 45.534316, lon: -122.666898, times: ["7:23 AM", "7:58 AM", "8:30 AM", "9:00 AM", "9:29 AM", "9:57 AM", "10:25 AM", "10:56 AM"] },
  { stop_id: "6232", name: "NE Weidler &amp; 2nd", lat: 45.534271, lon: -122.66383, times: ["7:24 AM", "7:59 AM", "8:31 AM", "9:01 AM", "9:30 AM", "9:58 AM", "10:26 AM", "10:57 AM"] },
  { stop_id: "6218", name: "NE Weidler &amp; M L King", lat: 45.534274, lon: -122.661132, times: ["7:25 AM", "7:59 AM", "8:32 AM", "9:02 AM", "9:31 AM", "9:59 AM", "10:27 AM", "10:57 AM"] },
  { stop_id: "6240", name: "NE Weidler &amp; 7th", lat: 45.534273, lon: -122.658858, times: ["7:25 AM", "8:00 AM", "8:32 AM", "9:02 AM", "9:31 AM", "9:59 AM", "10:27 AM", "10:58 AM"] },
  { stop_id: "6242", name: "NE Weidler &amp; 9th", lat: 45.53429, lon: -122.65675, times: ["7:26 AM", "8:01 AM", "8:33 AM", "9:03 AM", "9:32 AM", "10:00 AM", "10:28 AM", "10:59 AM"] },
  { stop_id: "6216", name: "NE Weidler &amp; Lloyd Center", lat: 45.534276, lon: -122.653686, times: ["7:27 AM", "8:02 AM", "8:34 AM", "9:04 AM", "9:33 AM", "10:01 AM", "10:29 AM", "11:00 AM"] },
  { stop_id: "10425", name: "NE Weidler &amp; 15th", lat: 45.534255, lon: -122.650682, times: ["7:27 AM", "8:02 AM", "8:34 AM", "9:04 AM", "9:33 AM", "10:01 AM", "10:29 AM", "11:00 AM"] },
  { stop_id: "6227", name: "NE Weidler &amp; 17th", lat: 45.534266, lon: -122.648682, times: ["7:28 AM", "8:03 AM", "8:35 AM", "9:05 AM", "9:34 AM", "10:02 AM", "10:30 AM", "11:01 AM"] },
  { stop_id: "6235", name: "NE Weidler &amp; 21st", lat: 45.534252, lon: -122.644976, times: ["7:28 AM", "8:03 AM", "8:35 AM", "9:05 AM", "9:34 AM", "10:02 AM", "10:30 AM", "11:01 AM"] },
  { stop_id: "6237", name: "NE Weidler &amp; 22nd", lat: 45.53425, lon: -122.64315, times: ["7:29 AM", "8:04 AM", "8:36 AM", "9:06 AM", "9:35 AM", "10:03 AM", "10:31 AM", "11:02 AM"] },
  { stop_id: "7188", name: "NE 24th &amp; Broadway", lat: 45.535412, lon: -122.641067, times: ["7:30 AM", "8:05 AM", "8:37 AM", "9:07 AM", "9:36 AM", "10:04 AM", "10:32 AM", "11:03 AM"] },
  { stop_id: "7208", name: "NE 24th &amp; Tillamook", lat: 45.537332, lon: -122.641068, times: ["7:30 AM", "8:05 AM", "8:37 AM", "9:07 AM", "9:36 AM", "10:04 AM", "10:32 AM", "11:03 AM"] },
  { stop_id: "7206", name: "NE 24th &amp; Thompson", lat: 45.538903, lon: -122.641039, times: ["7:31 AM", "8:06 AM", "8:38 AM", "9:08 AM", "9:37 AM", "10:05 AM", "10:33 AM", "11:04 AM"] },
  { stop_id: "7197", name: "NE 24th &amp; Knott", lat: 45.541891, lon: -122.641048, times: ["7:32 AM", "8:07 AM", "8:39 AM", "9:09 AM", "9:38 AM", "10:06 AM", "10:34 AM", "11:05 AM"] },
  { stop_id: "7201", name: "NE 24th &amp; Siskiyou", lat: 45.545062, lon: -122.641077, times: ["7:32 AM", "8:07 AM", "8:39 AM", "9:09 AM", "9:38 AM", "10:06 AM", "10:34 AM", "11:05 AM"] },
  { stop_id: "7194", name: "NE 24th &amp; Klickitat", lat: 45.546599, lon: -122.641049, times: ["7:33 AM", "8:08 AM", "8:40 AM", "9:10 AM", "9:39 AM", "10:07 AM", "10:35 AM", "11:06 AM"] },
  { stop_id: "7190", name: "NE 24th &amp; Fremont", lat: 45.548411, lon: -122.64104, times: ["7:34 AM", "8:09 AM", "8:41 AM", "9:11 AM", "9:40 AM", "10:08 AM", "10:36 AM", "11:07 AM"] },
  { stop_id: "4811", name: "NE Regents &amp; 26th", lat: 45.549758, lon: -122.639228, times: ["7:35 AM", "8:10 AM", "8:42 AM", "9:12 AM", "9:41 AM", "10:09 AM", "10:37 AM", "11:08 AM"] },
  { stop_id: "7306", name: "NE 29th &amp; Alameda", lat: 45.55015, lon: -122.635879, times: ["7:36 AM", "8:11 AM", "8:43 AM", "9:13 AM", "9:42 AM", "10:10 AM", "10:38 AM", "11:09 AM"] },
  { stop_id: "7309", name: "NE 29th &amp; Bryce", lat: 45.551779, lon: -122.635824, times: ["7:36 AM", "8:12 AM", "8:44 AM", "9:14 AM", "9:43 AM", "10:11 AM", "10:39 AM", "11:10 AM"] },
  { stop_id: "7317", name: "NE 29th &amp; Skidmore", lat: 45.554221, lon: -122.635841, times: ["7:11 AM", "7:38 AM", "8:13 AM", "8:45 AM", "9:15 AM", "9:44 AM", "10:12 AM", "10:40 AM"] },
  { stop_id: "7256", name: "NE 27th &amp; Prescott", lat: 45.555314, lon: -122.637871, times: ["7:12 AM", "7:39 AM", "8:14 AM", "8:46 AM", "9:16 AM", "9:45 AM", "10:13 AM", "10:41 AM"] },
  { stop_id: "7267", name: "NE 27th &amp; Wygant", lat: 45.557609, lon: -122.637834, times: ["7:13 AM", "7:40 AM", "8:15 AM", "8:48 AM", "9:18 AM", "9:47 AM", "10:15 AM", "10:43 AM"] },
  { stop_id: "7238", name: "NE 27th &amp; Alberta", lat: 45.558955, lon: -122.637836, times: ["7:13 AM", "7:40 AM", "8:16 AM", "8:48 AM", "9:18 AM", "9:47 AM", "10:15 AM", "10:43 AM"] },
  { stop_id: "7260", name: "NE 27th &amp; Sumner", lat: 45.560206, lon: -122.637793, times: ["7:14 AM", "7:41 AM", "8:16 AM", "8:49 AM", "9:19 AM", "9:48 AM", "10:16 AM", "10:44 AM"] },
  { stop_id: "7250", name: "NE 27th &amp; Killingsworth", lat: 45.562615, lon: -122.637766, times: ["7:15 AM", "7:42 AM", "8:17 AM", "8:50 AM", "9:20 AM", "9:49 AM", "10:17 AM", "10:45 AM"] },
  { stop_id: "7248", name: "NE 27th &amp; Jarrett", lat: 45.564364, lon: -122.638056, times: ["7:16 AM", "7:43 AM", "8:18 AM", "8:51 AM", "9:21 AM", "9:50 AM", "10:18 AM", "10:46 AM"] },
  { stop_id: "7235", name: "NE 27th &amp; Ainsworth", lat: 45.566201, lon: -122.638048, times: ["7:16 AM", "7:43 AM", "8:19 AM", "8:52 AM", "9:22 AM", "9:51 AM", "10:19 AM", "10:47 AM"] },
  { stop_id: "7246", name: "NE 27th &amp; Holman", lat: 45.568138, lon: -122.638067, times: ["7:17 AM", "7:44 AM", "8:20 AM", "8:53 AM", "9:23 AM", "9:52 AM", "10:20 AM", "10:48 AM"] },
  { stop_id: "8727", name: "NE 27th &amp; Highland", lat: 45.569656, lon: -122.638074, times: ["7:18 AM", "7:45 AM", "8:21 AM", "8:54 AM", "9:24 AM", "9:53 AM", "10:21 AM", "10:49 AM"] },
  { stop_id: "7240", name: "NE 27th &amp; Dekum", lat: 45.571794, lon: -122.638044, times: ["7:19 AM", "7:46 AM", "8:22 AM", "8:55 AM", "9:25 AM", "9:54 AM", "10:22 AM", "10:50 AM"] },
]

    // Draw route polyline
    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    // 1. Get current time in PT
    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const datePT = nowPT.toDateString();

    // 2. Add stops with highlighted next time
    stops.forEach(stop => {
      const stamps = stop.times.map(t => new Date(`${datePT} ${t}`));
      const nextIdx = stamps.findIndex(ts => ts > nowPT);
      const timesHtml = stamps.slice(0, 8).map((ts, i) => {
        const lbl = ts.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        return i === nextIdx ? `<strong>${lbl}</strong>` : lbl;
      }).join('<br>');

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${timesHtml || 'No scheduled times'}`)
      .addTo(map);
    });

    // Bus markers fetch
    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
	   html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          üì¢ We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>