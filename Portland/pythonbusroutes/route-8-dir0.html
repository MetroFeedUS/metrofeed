<!DOCTYPE html>
<html lang="en">
<head>
  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2219550569810489"
     crossorigin="anonymous"></script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 8 - To Marquam Hill | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 8 - To Marquam Hill</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 8;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [45.580692, -122.661995],
  [45.580691, -122.662149],
  [45.580689, -122.663192],
  [45.580695, -122.66335],
  [45.580813, -122.66335],
  [45.581571, -122.663353],
  [45.581684, -122.663369],
  [45.581357, -122.6622],
  [45.581324, -122.66208],
  [45.581313, -122.662042],
  [45.581294, -122.66197],
  [45.581168, -122.661501],
  [45.581125, -122.661327],
  [45.581, -122.661327],
  [45.580782, -122.661334],
  [45.580694, -122.661337],
  [45.579985, -122.661337],
  [45.579223, -122.661341],
  [45.578532, -122.661347],
  [45.578114, -122.661342],
  [45.577941, -122.661344],
  [45.577697, -122.661345],
  [45.577621, -122.661346],
  [45.577219, -122.661349],
  [45.57679, -122.661352],
  [45.5767, -122.661415],
  [45.576487, -122.661417],
  [45.576259, -122.661418],
  [45.576183, -122.661354],
  [45.575955, -122.661354],
  [45.57581, -122.661354],
  [45.575708, -122.66142],
  [45.575121, -122.661425],
  [45.574849, -122.661428],
  [45.574657, -122.66143],
  [45.574434, -122.661432],
  [45.573498, -122.661436],
  [45.57326, -122.661438],
  [45.57211, -122.661441],
  [45.571875, -122.661442],
  [45.571788, -122.661437],
  [45.571788, -122.661319],
  [45.571787, -122.660499],
  [45.571787, -122.66037],
  [45.571784, -122.65946],
  [45.571783, -122.659356],
  [45.571781, -122.65834],
  [45.57178, -122.657942],
  [45.571779, -122.657364],
  [45.571778, -122.656974],
  [45.571776, -122.656679],
  [45.571776, -122.656624],
  [45.571749, -122.65658],
  [45.571748, -122.65652],
  [45.571748, -122.656282],
  [45.571752, -122.656266],
  [45.571773, -122.656172],
  [45.571772, -122.655849],
  [45.571772, -122.655128],
  [45.57177, -122.654632],
  [45.571768, -122.654288],
  [45.57176, -122.653837],
  [45.571765, -122.653561],
  [45.571765, -122.652717],
  [45.571764, -122.65265],
  [45.571767, -122.652449],
  [45.571779, -122.652265],
  [45.571802, -122.652053],
  [45.571823, -122.651865],
  [45.571837, -122.651757],
  [45.571853, -122.651654],
  [45.571861, -122.651561],
  [45.571864, -122.650143],
  [45.571864, -122.650056],
  [45.571801, -122.65005],
  [45.571276, -122.650047],
  [45.57118, -122.650046],
  [45.570492, -122.650046],
  [45.569943, -122.650044],
  [45.569807, -122.650044],
  [45.56912, -122.650045],
  [45.568525, -122.650043],
  [45.568475, -122.650039],
  [45.568442, -122.650034],
  [45.56839, -122.650023],
  [45.568316, -122.650006],
  [45.568255, -122.649997],
  [45.568131, -122.649999],
  [45.568122, -122.649999],
  [45.566519, -122.650012],
  [45.566456, -122.650012],
  [45.566397, -122.650021],
  [45.566284, -122.650036],
  [45.566212, -122.650046],
  [45.564669, -122.650063],
  [45.564536, -122.650065],
  [45.562828, -122.650081],
  [45.562792, -122.650082],
  [45.562724, -122.650082],
  [45.562723, -122.64968],
  [45.56265, -122.649678],
  [45.561577, -122.649689],
  [45.560414, -122.649699],
  [45.560341, -122.6497],
  [45.559199, -122.64971],
  [45.55909, -122.649711],
  [45.558823, -122.649713],
  [45.557707, -122.64972],
  [45.556598, -122.649735],
  [45.556567, -122.649737],
  [45.556528, -122.649741],
  [45.556482, -122.649781],
  [45.55645, -122.649782],
  [45.556371, -122.649782],
  [45.556255, -122.649783],
  [45.556209, -122.649744],
  [45.55616, -122.649738],
  [45.556112, -122.649735],
  [45.555777, -122.649741],
  [45.555716, -122.649751],
  [45.555639, -122.649771],
  [45.55562, -122.64978],
  [45.555534, -122.649827],
  [45.555463, -122.649899],
  [45.555395, -122.649969],
  [45.555231, -122.650148],
  [45.555214, -122.650165],
  [45.555187, -122.650193],
  [45.555143, -122.650237],
  [45.55509, -122.650286],
  [45.555038, -122.650321],
  [45.554983, -122.650343],
  [45.554944, -122.650352],
  [45.554901, -122.650354],
  [45.554808, -122.650355],
  [45.554374, -122.650356],
  [45.553214, -122.650366],
  [45.553114, -122.650367],
  [45.551863, -122.650374],
  [45.551324, -122.650379],
  [45.550857, -122.650381],
  [45.550773, -122.650381],
  [45.550665, -122.650382],
  [45.55034, -122.650387],
  [45.550008, -122.65039],
  [45.549472, -122.650394],
  [45.549421, -122.650394],
  [45.549298, -122.650396],
  [45.548935, -122.650401],
  [45.548773, -122.650402],
  [45.548465, -122.650404],
  [45.548238, -122.650405],
  [45.546729, -122.650415],
  [45.545287, -122.650425],
  [45.545192, -122.650425],
  [45.543727, -122.650436],
  [45.543652, -122.650436],
  [45.542737, -122.650442],
  [45.54222, -122.650446],
  [45.542088, -122.650446],
  [45.541793, -122.650449],
  [45.541026, -122.650454],
  [45.540713, -122.650456],
  [45.540606, -122.650457],
  [45.540529, -122.650457],
  [45.539085, -122.650467],
  [45.538991, -122.650468],
  [45.538552, -122.650471],
  [45.537449, -122.650478],
  [45.537176, -122.65048],
  [45.536468, -122.650485],
  [45.536297, -122.650486],
  [45.53576, -122.650489],
  [45.535031, -122.650495],
  [45.534762, -122.650499],
  [45.53471, -122.6505],
  [45.534663, -122.650501],
  [45.534455, -122.650504],
  [45.534333, -122.650506],
  [45.534223, -122.650508],
  [45.533706, -122.650515],
  [45.533609, -122.650518],
  [45.533521, -122.650566],
  [45.533449, -122.65056],
  [45.533381, -122.650554],
  [45.5333, -122.650535],
  [45.533253, -122.650513],
  [45.533189, -122.650484],
  [45.533125, -122.650439],
  [45.533056, -122.650382],
  [45.532984, -122.650304],
  [45.532947, -122.650254],
  [45.532911, -122.650196],
  [45.532841, -122.65005],
  [45.53279, -122.649931],
  [45.532712, -122.649804],
  [45.532618, -122.649706],
  [45.532534, -122.649639],
  [45.532439, -122.649593],
  [45.532354, -122.649569],
  [45.532055, -122.649546],
  [45.532018, -122.649543],
  [45.531856, -122.649544],
  [45.531575, -122.649545],
  [45.53147, -122.649483],
  [45.53147, -122.649656],
  [45.53147, -122.650394],
  [45.531471, -122.650513],
  [45.531476, -122.651321],
  [45.531476, -122.651451],
  [45.531479, -122.651906],
  [45.531481, -122.652351],
  [45.531482, -122.652543],
  [45.531487, -122.654436],
  [45.531488, -122.654494],
  [45.531487, -122.654597],
  [45.531486, -122.6547],
  [45.531492, -122.65648],
  [45.531493, -122.656597],
  [45.531495, -122.656729],
  [45.531495, -122.657075],
  [45.531497, -122.657721],
  [45.5315, -122.658493],
  [45.531501, -122.658609],
  [45.531501, -122.658652],
  [45.5315, -122.658734],
  [45.531504, -122.659645],
  [45.531503, -122.659709],
  [45.531507, -122.660483],
  [45.531507, -122.660597],
  [45.531507, -122.660659],
  [45.531509, -122.661551],
  [45.531511, -122.661673],
  [45.531512, -122.661812],
  [45.531509, -122.661879],
  [45.531502, -122.661972],
  [45.531485, -122.662062],
  [45.531483, -122.662072],
  [45.53147, -122.662125],
  [45.531445, -122.662198],
  [45.531416, -122.662269],
  [45.531343, -122.662413],
  [45.53129, -122.662513],
  [45.531106, -122.662873],
  [45.531049, -122.662985],
  [45.530966, -122.66314],
  [45.530916, -122.663245],
  [45.530893, -122.663299],
  [45.53087, -122.663358],
  [45.530844, -122.663438],
  [45.53082, -122.66354],
  [45.530807, -122.663625],
  [45.530794, -122.66372],
  [45.530785, -122.663828],
  [45.530784, -122.663947],
  [45.530789, -122.664629],
  [45.530791, -122.664722],
  [45.530797, -122.665528],
  [45.530796, -122.665669],
  [45.530794, -122.665782],
  [45.530704, -122.665831],
  [45.530627, -122.66584],
  [45.530504, -122.665878],
  [45.530408, -122.665911],
  [45.530305, -122.665948],
  [45.530258, -122.665977],
  [45.530221, -122.66602],
  [45.530185, -122.666084],
  [45.530056, -122.666313],
  [45.529979, -122.666427],
  [45.529978, -122.666429],
  [45.52988, -122.666547],
  [45.529824, -122.666612],
  [45.529802, -122.666637],
  [45.529769, -122.666672],
  [45.529651, -122.666796],
  [45.529605, -122.666842],
  [45.529561, -122.666885],
  [45.529524, -122.666918],
  [45.529487, -122.666937],
  [45.529445, -122.666948],
  [45.529383, -122.66696],
  [45.529304, -122.666981],
  [45.529093, -122.66705],
  [45.528988, -122.667116],
  [45.52887, -122.667158],
  [45.528774, -122.667212],
  [45.528694, -122.667259],
  [45.528584, -122.667346],
  [45.528514, -122.667415],
  [45.528435, -122.667506],
  [45.528354, -122.667624],
  [45.528269, -122.667779],
  [45.527772, -122.668873],
  [45.527588, -122.669277],
  [45.52745, -122.669581],
  [45.527077, -122.670373],
  [45.526965, -122.670603],
  [45.526904, -122.670724],
  [45.526867, -122.670807],
  [45.526859, -122.670828],
  [45.526845, -122.670881],
  [45.526834, -122.670939],
  [45.52683, -122.670996],
  [45.526828, -122.671101],
  [45.52688, -122.672382],
  [45.526879, -122.672503],
  [45.526872, -122.672738],
  [45.526863, -122.672975],
  [45.52686, -122.673192],
  [45.526844, -122.673331],
  [45.526834, -122.673421],
  [45.526817, -122.673573],
  [45.526809, -122.673643],
  [45.526755, -122.67409],
  [45.526714, -122.67443],
  [45.526679, -122.674539],
  [45.526674, -122.674659],
  [45.52667, -122.674755],
  [45.526661, -122.67494],
  [45.526646, -122.675469],
  [45.526645, -122.675527],
  [45.526585, -122.675524],
  [45.52599, -122.675512],
  [45.52593, -122.67551],
  [45.525224, -122.675481],
  [45.524707, -122.675459],
  [45.524508, -122.675451],
  [45.524455, -122.675457],
  [45.523856, -122.675435],
  [45.523796, -122.675434],
  [45.523744, -122.675433],
  [45.523208, -122.675414],
  [45.523141, -122.675403],
  [45.523025, -122.675386],
  [45.522962, -122.67538],
  [45.522922, -122.675383],
  [45.52288, -122.675394],
  [45.522703, -122.675478],
  [45.522612, -122.675527],
  [45.52258, -122.675542],
  [45.522549, -122.675556],
  [45.522214, -122.675716],
  [45.522184, -122.67573],
  [45.522128, -122.67575],
  [45.52206, -122.675774],
  [45.521534, -122.676064],
  [45.521457, -122.67611],
  [45.52137, -122.67616],
  [45.520857, -122.676429],
  [45.52079, -122.676466],
  [45.520181, -122.676796],
  [45.520125, -122.676825],
  [45.520048, -122.676865],
  [45.519566, -122.677133],
  [45.519507, -122.677166],
  [45.519457, -122.67719],
  [45.519358, -122.677239],
  [45.51891, -122.67748],
  [45.518833, -122.677521],
  [45.518798, -122.677543],
  [45.51877, -122.67756],
  [45.51874, -122.677579],
  [45.518179, -122.677878],
  [45.518142, -122.677899],
  [45.518112, -122.677916],
  [45.518045, -122.677953],
  [45.517539, -122.678221],
  [45.517462, -122.678283],
  [45.516795, -122.678644],
  [45.51613, -122.679004],
  [45.515658, -122.67926],
  [45.515462, -122.679366],
  [45.51479, -122.67973],
  [45.514133, -122.680086],
  [45.513466, -122.680448],
  [45.513249, -122.680565],
  [45.513019, -122.68069],
  [45.512929, -122.680738],
  [45.512796, -122.68081],
  [45.512727, -122.680848],
  [45.512371, -122.68104],
  [45.512133, -122.68117],
  [45.512001, -122.681241],
  [45.511705, -122.681401],
  [45.511595, -122.681461],
  [45.511468, -122.68153],
  [45.511448, -122.68154],
  [45.511222, -122.681664],
  [45.510879, -122.681849],
  [45.510797, -122.681893],
  [45.510523, -122.682043],
  [45.510426, -122.682095],
  [45.510251, -122.682189],
  [45.510239, -122.682195],
  [45.510133, -122.682253],
  [45.509636, -122.682522],
  [45.509467, -122.682613],
  [45.50905, -122.682839],
  [45.508858, -122.682943],
  [45.508787, -122.682973],
  [45.508748, -122.682988],
  [45.50871, -122.683002],
  [45.5086, -122.683042],
  [45.508501, -122.68312],
  [45.50835, -122.683227],
  [45.508307, -122.683256],
  [45.508169, -122.683345],
  [45.50788, -122.68351],
  [45.507751, -122.683576],
  [45.507612, -122.683648],
  [45.507516, -122.683697],
  [45.507414, -122.683729],
  [45.507325, -122.683748],
  [45.507231, -122.683756],
  [45.507125, -122.683761],
  [45.507087, -122.683758],
  [45.507027, -122.683754],
  [45.506949, -122.683751],
  [45.506823, -122.683727],
  [45.506629, -122.683681],
  [45.506376, -122.683419],
  [45.506262, -122.683313],
  [45.506195, -122.68326],
  [45.506131, -122.683221],
  [45.506035, -122.68318],
  [45.50597, -122.683176],
  [45.505902, -122.683177],
  [45.505905, -122.683295],
  [45.50591, -122.683557],
  [45.505911, -122.683615],
  [45.505915, -122.683857],
  [45.505923, -122.684313],
  [45.505542, -122.684308],
  [45.505521, -122.684308],
  [45.505374, -122.684301],
  [45.505298, -122.684299],
  [45.50521, -122.684291],
  [45.505151, -122.684287],
  [45.505007, -122.68427],
  [45.50493, -122.68426],
  [45.504879, -122.684257],
  [45.504671, -122.684259],
  [45.504537, -122.684275],
  [45.504434, -122.6843],
  [45.504355, -122.684336],
  [45.504268, -122.684396],
  [45.504197, -122.68446],
  [45.504124, -122.684549],
  [45.504079, -122.68462],
  [45.504039, -122.684691],
  [45.503711, -122.685371],
  [45.503612, -122.68556],
  [45.503248, -122.686209],
  [45.503181, -122.686351],
  [45.503111, -122.686527],
  [45.503061, -122.68672],
  [45.502991, -122.687027],
  [45.502958, -122.687183],
  [45.502929, -122.687304],
  [45.502891, -122.687478],
  [45.502865, -122.687607],
  [45.50278, -122.68758],
  [45.50271, -122.687555],
  [45.502638, -122.68752],
  [45.502602, -122.687492],
  [45.502584, -122.687478],
  [45.502572, -122.687463],
  [45.502537, -122.687419],
  [45.502516, -122.687385],
  [45.502494, -122.687343],
  [45.502478, -122.687303],
  [45.50246, -122.687241],
  [45.50245, -122.687201],
  [45.502437, -122.687137],
  [45.502413, -122.686996],
  [45.502408, -122.68695],
  [45.502397, -122.686804],
  [45.502393, -122.686686],
  [45.502396, -122.686574],
  [45.50242, -122.686356],
  [45.502457, -122.686113],
  [45.502499, -122.685904],
  [45.502549, -122.685671],
  [45.502608, -122.68544],
  [45.502673, -122.685239],
  [45.502862, -122.684674],
  [45.502937, -122.68438],
  [45.50295, -122.68428],
  [45.502954, -122.684191],
  [45.502947, -122.684068],
  [45.502915, -122.683926],
  [45.502877, -122.683813],
  [45.502817, -122.683687],
  [45.502795, -122.683658],
  [45.502752, -122.683594],
  [45.502711, -122.683557],
  [45.502671, -122.683522],
  [45.502618, -122.683483],
  [45.502527, -122.683422],
  [45.502295, -122.68329],
  [45.500554, -122.682349],
  [45.500471, -122.682312],
  [45.500409, -122.682293],
  [45.500334, -122.682277],
  [45.500253, -122.682265],
  [45.500163, -122.682268],
  [45.500091, -122.682279],
  [45.500023, -122.682293],
  [45.499948, -122.682322],
  [45.499846, -122.682401],
  [45.49964, -122.682598],
  [45.499594, -122.682633],
  [45.499553, -122.682657],
  [45.499487, -122.682686],
  [45.499445, -122.682695],
  [45.499389, -122.682697],
  [45.499341, -122.682684],
  [45.499306, -122.682668],
  [45.499289, -122.68266],
  [45.49924, -122.682613],
  [45.499199, -122.682561],
  [45.49916, -122.682459],
  [45.499131, -122.682336],
  [45.499083, -122.682117],
  [45.499038, -122.681876],
  [45.498975, -122.681687],
  [45.498932, -122.681596],
  [45.498875, -122.681515],
  [45.498789, -122.681407],
  [45.498693, -122.681324],
  [45.498486, -122.681201],
  [45.497131, -122.680488],
  [45.497064, -122.680463],
  [45.49697, -122.680443],
  [45.496889, -122.680427],
  [45.496782, -122.680424],
  [45.496657, -122.680431],
  [45.496562, -122.680456],
  [45.496439, -122.680499],
  [45.496229, -122.680637],
  [45.496182, -122.680676],
  [45.496139, -122.680714],
  [45.496086, -122.680767],
  [45.49606, -122.680798],
  [45.495936, -122.680974],
  [45.495894, -122.681043],
  [45.495854, -122.681118],
  [45.495812, -122.681204],
  [45.495657, -122.681623],
  [45.495583, -122.681849],
  [45.495492, -122.682065],
  [45.495447, -122.682142],
  [45.495412, -122.6822],
  [45.495337, -122.682309],
  [45.495257, -122.682374],
  [45.495125, -122.682444],
  [45.494996, -122.682463],
  [45.49494, -122.682465],
  [45.494892, -122.682459],
  [45.494841, -122.682443],
  [45.494781, -122.682418],
  [45.494682, -122.682364],
  [45.49443, -122.683075],
  [45.494418, -122.683136],
  [45.49441, -122.683192],
  [45.494408, -122.683238],
  [45.494417, -122.683295],
  [45.494428, -122.683338],
  [45.494443, -122.683374],
  [45.4945, -122.683454],
  [45.49456, -122.68351],
  [45.494602, -122.683537],
  [45.49463, -122.683552],
  [45.49466, -122.683563],
  [45.494687, -122.683563],
  [45.494805, -122.683541],
  [45.494839, -122.683524],
  [45.494906, -122.683497],
  [45.494998, -122.68345],
  [45.495076, -122.683401],
  [45.495142, -122.683346],
  [45.495189, -122.683284],
  [45.495231, -122.683224],
  [45.495327, -122.683079],
  [45.49541, -122.682969],
  [45.495492, -122.682871],
  [45.495561, -122.682812],
  [45.495619, -122.682769],
  [45.495687, -122.682724],
  [45.495831, -122.682646],
  [45.49601, -122.682547],
  [45.496071, -122.682455],
  [45.496307, -122.682329],
  [45.496387, -122.682283],
  [45.496432, -122.682257],
  [45.496502, -122.682218],
  [45.496548, -122.682186],
  [45.496598, -122.682153],
  [45.496773, -122.682022],
  [45.496969, -122.681869],
  [45.497011, -122.681857],
  [45.497057, -122.681878],
  [45.497079, -122.681869],
  [45.497111, -122.681865],
  [45.497142, -122.681866],
  [45.49718, -122.681871],
  [45.497216, -122.681883],
  [45.497278, -122.681876],
  [45.497355, -122.681923],
  [45.497412, -122.681981],
  [45.497472, -122.682079],
  [45.497491, -122.682121],
  [45.497511, -122.682173],
  [45.497529, -122.682233],
  [45.497543, -122.682298],
  [45.497554, -122.682363],
  [45.497556, -122.682416],
  [45.497553, -122.682476],
  [45.497548, -122.682537],
  [45.497538, -122.682603],
  [45.49752, -122.682668],
  [45.497497, -122.682736],
  [45.497473, -122.682791],
  [45.49745, -122.682834],
  [45.497422, -122.682875],
  [45.497371, -122.682936],
  [45.497316, -122.682994],
  [45.49722, -122.68307],
  [45.497037, -122.683215],
  [45.496585, -122.683572],
  [45.496449, -122.683674],
  [45.496407, -122.683689],
  [45.496333, -122.683663],
  [45.496274, -122.683674],
  [45.496008, -122.683872],
  [45.495956, -122.683921],
  [45.495911, -122.683947],
  [45.495897, -122.683981],
  [45.495884, -122.684022],
  [45.495875, -122.68407],
  [45.495871, -122.68411],
  [45.495871, -122.68416],
  [45.495872, -122.684227],
  [45.495878, -122.684277],
  [45.49589, -122.684331],
  [45.495921, -122.684417],
  [45.49597, -122.684497],
  [45.496022, -122.684554],
  [45.496059, -122.68458],
  [45.496092, -122.684596],
  [45.49613, -122.684605],
  [45.496163, -122.684607],
  [45.496236, -122.684604],
  [45.496303, -122.684583],
  [45.496373, -122.684547],
  [45.496446, -122.684531],
  [45.496476, -122.684531],
  [45.496518, -122.684549],
  [45.49655, -122.684588],
  [45.496573, -122.684634],
  [45.496585, -122.684697],
  [45.496586, -122.684753],
  [45.496581, -122.684816],
  [45.496553, -122.68494],
  [45.496409, -122.684881],
  [45.496223, -122.684814],
  [45.496009, -122.684745],
  [45.49593, -122.684748],
  [45.495845, -122.684786],
  [45.495765, -122.684841],
  [45.495688, -122.684924],
  [45.49562, -122.685048],
  [45.495566, -122.685188],
  [45.495548, -122.685286],
  [45.495544, -122.685391],
  [45.495546, -122.685479],
  [45.495574, -122.685675],
  [45.495622, -122.685924],
  [45.495641, -122.686035],
  [45.495661, -122.686118],
  [45.495693, -122.686247],
  [45.495725, -122.686348],
  [45.495857, -122.686751],
  [45.496023, -122.687257],
  [45.496178, -122.687731],
  [45.49625, -122.687951],
  [45.496279, -122.688029],
  [45.496333, -122.688173],
  [45.496399, -122.688324],
  [45.496444, -122.688396],
  [45.496544, -122.688521],
  [45.496642, -122.688657],
  [45.496737, -122.688815],
  [45.496805, -122.688958],
  [45.496851, -122.689103],
  [45.496888, -122.689267],
  [45.496891, -122.689278],
  [45.496896, -122.689324],
  [45.4969, -122.689379],
  [45.496936, -122.690373],
  [45.496953, -122.690873],
  [45.496964, -122.691225],
  [45.496968, -122.691345],
  [45.497148, -122.691346],
  [45.497673, -122.691324],
  [45.498365, -122.691281],
  [45.49842, -122.691277],
  [45.498983, -122.691225],
  [45.499032, -122.69122],
  [45.499053, -122.691216],
  [45.499106, -122.691189],
  [45.49909, -122.690767],
  [45.499078, -122.690449],
  [45.499069, -122.690207],
  [45.499056, -122.689772],
  [45.499054, -122.689681],
  [45.499059, -122.689602],
  [45.499066, -122.689516],
  [45.499074, -122.689444],
  [45.499099, -122.689261],
  [45.499147, -122.688983],
  [45.499211, -122.688644],
  [45.49923, -122.688463],
  [45.499232, -122.68837],
  [45.499233, -122.688293],
  [45.499221, -122.688145],
  [45.499212, -122.688072],
  [45.499195, -122.687973],
  [45.499147, -122.687694],
  [45.499136, -122.687615],
  [45.499129, -122.687525],
  [45.499126, -122.687455],
  [45.499134, -122.687296],
  [45.499118, -122.687218],
  [45.499123, -122.68718],
  [45.499164, -122.686855],
  [45.499171, -122.686801],
  [45.499195, -122.686608],
  [45.499238, -122.686527],
  [45.499288, -122.686159],
  [45.499309, -122.685979],
  [45.49932, -122.685901],
  [45.499333, -122.685828],
  [45.499344, -122.685769],
  [45.499357, -122.685713],
  [45.499376, -122.685645],
  [45.499398, -122.685589]
];

const stopNames = {
  "1264": "NE Dekum &amp; Dean",
  "1265": "NE Dekum &amp; Durham",
  "1293": "NE Dekum &amp; 6th",
  "1945": "SW Gaines &amp; 11th",
  "1947": "SW Gaines &amp; 6th",
  "1949": "SW Gaines &amp; 9th",
  "2592": "Rose Quarter Transit Center",
  "4043": "NE Multnomah &amp; Grand",
  "4044": "NE Multnomah &amp; 11th",
  "4045": "NE Multnomah &amp; 13th",
  "5028": "SW Sam Jackson Pk &amp; OHSU",
  "5032": "SW Sam Jackson Pk &amp; US Veterans",
  "5804": "SW Terwilliger &amp; Sam Jackson",
  "5900": "NE M L King &amp; Bryant",
  "5919": "NE M L King &amp; Holland",
  "5950": "NE M L King &amp; Russet",
  "5975": "Portland VA Medical Center",
  "6548": "SW 11th &amp; Gibbs",
  "6772": "NE 15th &amp; Ainsworth",
  "6774": "NE 15th &amp; Alberta",
  "6778": "NE 15th &amp; Brazee",
  "6779": "NE 15th &amp; Weidler",
  "6784": "NE 15th &amp; Failing",
  "6786": "NE 15th &amp; Fremont",
  "6788": "NE 15th &amp; Going",
  "6789": "NE 15th &amp; Halsey",
  "6793": "NE 15th &amp; Jarrett",
  "6794": "NE 15th &amp; Junior",
  "6796": "NE 15th &amp; Killingsworth",
  "6797": "NE 15th &amp; Holman",
  "6800": "NE 15th &amp; Knott",
  "6802": "NE 15th &amp; Mason",
  "6804": "NE 15th &amp; Rosa Parks Way",
  "6805": "NE 15th &amp; Prescott",
  "6809": "NE 15th &amp; Siskiyou",
  "6813": "NE 15th &amp; Sumner",
  "6816": "NE 15th &amp; Thompson",
  "6817": "NE 15th &amp; Tillamook",
  "6818": "NE 16th &amp; Multnomah",
  "7588": "SW 5th &amp; Broadway",
  "7612": "SW 5th &amp; Madison",
  "7616": "SW 5th &amp; Market",
  "7625": "SW 5th &amp; Morrison",
  "7631": "SW 5th &amp; Pine",
  "7794": "SW 6th &amp; Sheridan",
  "8455": "SW US Veterans Hosp Rd &amp; Bldg 16",
  "9301": "NW 5th &amp; Davis",
  "9311": "NW Glisan &amp; 3rd",
  "10491": "SW 5th &amp; Hall",
  "10494": "NE M L King &amp; Morgan",
  "10876": "NE Multnomah &amp; 9th",
  "11010": "SW Terwilliger &amp; Campus",
  "11492": "NE Multnomah &amp; 3rd"
};

const stops = [
  { stop_id: "5950", name: "NE M L King &amp; Russet", lat: 45.577698, lon: -122.661445, times: ["8:22 PM"] },
  { stop_id: "5919", name: "NE M L King &amp; Holland", lat: 45.575955, lon: -122.661469, times: ["8:23 PM"] },
  { stop_id: "10494", name: "NE M L King &amp; Morgan", lat: 45.574658, lon: -122.661477, times: ["8:23 PM"] },
  { stop_id: "5900", name: "NE M L King &amp; Bryant", lat: 45.573498, lon: -122.661484, times: ["8:24 PM"] },
  { stop_id: "1293", name: "NE Dekum &amp; 6th", lat: 45.571719, lon: -122.659459, times: ["8:25 PM"] },
  { stop_id: "1265", name: "NE Dekum &amp; Durham", lat: 45.571715, lon: -122.656249, times: ["8:25 PM"] },
  { stop_id: "1264", name: "NE Dekum &amp; Dean", lat: 45.571703, lon: -122.652717, times: ["8:25 PM"] },
  { stop_id: "6794", name: "NE 15th &amp; Junior", lat: 45.571272, lon: -122.650118, times: ["8:26 PM"] },
  { stop_id: "6804", name: "NE 15th &amp; Rosa Parks Way", lat: 45.569938, lon: -122.650112, times: ["8:26 PM"] },
  { stop_id: "6797", name: "NE 15th &amp; Holman", lat: 45.568122, lon: -122.650056, times: ["8:26 PM"] },
  { stop_id: "6772", name: "NE 15th &amp; Ainsworth", lat: 45.566516, lon: -122.650078, times: ["8:27 PM"] },
  { stop_id: "6793", name: "NE 15th &amp; Jarrett", lat: 45.564667, lon: -122.650139, times: ["8:27 PM"] },
  { stop_id: "6796", name: "NE 15th &amp; Killingsworth", lat: 45.562823, lon: -122.650147, times: ["8:27 PM"] },
  { stop_id: "6813", name: "NE 15th &amp; Sumner", lat: 45.560416, lon: -122.649781, times: ["8:28 PM"] },
  { stop_id: "6774", name: "NE 15th &amp; Alberta", lat: 45.559199, lon: -122.649779, times: ["8:29 PM"] },
  { stop_id: "6788", name: "NE 15th &amp; Going", lat: 45.556447, lon: -122.649797, times: ["8:30 PM"] },
  { stop_id: "6805", name: "NE 15th &amp; Prescott", lat: 45.555221, lon: -122.650258, times: ["8:30 PM"] },
  { stop_id: "6802", name: "NE 15th &amp; Mason", lat: 45.553213, lon: -122.650439, times: ["8:31 PM"] },
  { stop_id: "6784", name: "NE 15th &amp; Failing", lat: 45.550858, lon: -122.650462, times: ["8:32 PM"] },
  { stop_id: "6786", name: "NE 15th &amp; Fremont", lat: 45.548465, lon: -122.650474, times: ["8:32 PM"] },
  { stop_id: "6809", name: "NE 15th &amp; Siskiyou", lat: 45.545286, lon: -122.650483, times: ["8:33 PM"] },
  { stop_id: "6800", name: "NE 15th &amp; Knott", lat: 45.54222, lon: -122.650542, times: ["8:35 PM"] },
  { stop_id: "6778", name: "NE 15th &amp; Brazee", lat: 45.540605, lon: -122.650516, times: ["8:35 PM"] },
  { stop_id: "6816", name: "NE 15th &amp; Thompson", lat: 45.539086, lon: -122.650538, times: ["8:36 PM"] },
  { stop_id: "6817", name: "NE 15th &amp; Tillamook", lat: 45.537173, lon: -122.65055, times: ["8:37 PM"] },
  { stop_id: "6779", name: "NE 15th &amp; Weidler", lat: 45.534453, lon: -122.650588, times: ["8:11 PM"] },
  { stop_id: "6789", name: "NE 15th &amp; Halsey", lat: 45.533238, lon: -122.650564, times: ["8:11 PM"] },
  { stop_id: "6818", name: "NE 16th &amp; Multnomah", lat: 45.531857, lon: -122.649632, times: ["8:12 PM"] },
  { stop_id: "4045", name: "NE Multnomah &amp; 13th", lat: 45.531571, lon: -122.65235, times: ["8:13 PM"] },
  { stop_id: "4044", name: "NE Multnomah &amp; 11th", lat: 45.531575, lon: -122.654436, times: ["8:14 PM"] },
  { stop_id: "10876", name: "NE Multnomah &amp; 9th", lat: 45.531573, lon: -122.657075, times: ["8:14 PM"] },
  { stop_id: "4043", name: "NE Multnomah &amp; Grand", lat: 45.531586, lon: -122.660482, times: ["8:15 PM"] },
  { stop_id: "11492", name: "NE Multnomah &amp; 3rd", lat: 45.531159, lon: -122.66293, times: ["8:16 PM"] },
  { stop_id: "2592", name: "Rose Quarter Transit Center", lat: 45.530005, lon: -122.666476, times: ["8:18 PM"] },
  { stop_id: "9311", name: "NW Glisan &amp; 3rd", lat: 45.526817, lon: -122.674106, times: ["8:19 PM"] },
  { stop_id: "9301", name: "NW 5th &amp; Davis", lat: 45.524705, lon: -122.675552, times: ["8:21 PM"] },
  { stop_id: "7631", name: "SW 5th &amp; Pine", lat: 45.522236, lon: -122.675827, times: ["8:23 PM"] },
  { stop_id: "7625", name: "SW 5th &amp; Morrison", lat: 45.518932, lon: -122.677571, times: ["8:11 PM"] },
  { stop_id: "7612", name: "SW 5th &amp; Madison", lat: 45.515682, lon: -122.679352, times: ["8:12 PM"] },
  { stop_id: "7616", name: "SW 5th &amp; Market", lat: 45.512954, lon: -122.680837, times: ["8:13 PM"] },
  { stop_id: "10491", name: "SW 5th &amp; Hall", lat: 45.510277, lon: -122.682286, times: ["8:14 PM"] },
  { stop_id: "7588", name: "SW 5th &amp; Broadway", lat: 45.507079, lon: -122.68385, times: ["8:15 PM"] },
  { stop_id: "7794", name: "SW 6th &amp; Sheridan", lat: 45.505372, lon: -122.684446, times: ["8:16 PM"] },
  { stop_id: "5804", name: "SW Terwilliger &amp; Sam Jackson", lat: 45.502538, lon: -122.687516, times: ["8:18 PM"] },
  { stop_id: "11010", name: "SW Terwilliger &amp; Campus", lat: 45.499288, lon: -122.682745, times: ["8:20 PM"] },
  { stop_id: "8455", name: "SW US Veterans Hosp Rd &amp; Bldg 16", lat: 45.496418, lon: -122.68222, times: ["8:24 PM"] },
  { stop_id: "5975", name: "Portland VA Medical Center", lat: 45.497058, lon: -122.683271, times: ["8:25 PM"] },
  { stop_id: "1947", name: "SW Gaines &amp; 6th", lat: 45.495927, lon: -122.686706, times: ["8:12 PM"] },
  { stop_id: "1949", name: "SW Gaines &amp; 9th", lat: 45.496921, lon: -122.689252, times: ["8:12 PM"] },
  { stop_id: "1945", name: "SW Gaines &amp; 11th", lat: 45.497023, lon: -122.691222, times: ["8:13 PM"] },
  { stop_id: "6548", name: "SW 11th &amp; Gibbs", lat: 45.49898, lon: -122.691148, times: ["8:14 PM"] },
  { stop_id: "5032", name: "SW Sam Jackson Pk &amp; US Veterans", lat: 45.499042, lon: -122.687161, times: ["8:15 PM"] },
  { stop_id: "5028", name: "SW Sam Jackson Pk &amp; OHSU", lat: 45.499332, lon: -122.685535, times: ["8:16 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>