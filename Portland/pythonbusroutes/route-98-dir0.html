<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EL337T4JX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EL337T4JX4');
</script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 98 - Eastbound | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
      overflow-y: auto;
    }

    body {
      padding-top: 120px;
    }

    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0;
      z-index: 1000;
      box-shadow: 0 2px 2px rgba(0,0,0,0.5);
      text-align: center;
    }

    .ad-banner img {
      width: 100%;
      max-width: 728px;
      max-height: 120px;
      display: block;
      margin: 0 auto;
    }
    .home-button {
      position: fixed;
      top: 120px;
      left: 10px;
      background-color: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      z-index: 1001;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .home-button:hover {
      background-color: #00bcd4;
      color: #ffffff;
    }

    header {
      background-color: #0d0d0d;
      border-top: 4px solid #4dd0e1;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }

    header img {
      max-height: 60px;
    }

    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }

    .content-box {
      border-radius: 12px;
      padding: 0;
      margin: 0;
      background-color: #1e1e1e;
    }

    #map {
      width: 100%;
      height: 85vh;
      border: none;
      margin: 0 auto;
      display: block;
      border-radius: 8px;
    }

    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .button-bar a, .back-button {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 10px #4dd0e1;
    }

    .back-button:hover {
      background-color: #35c0d6;
    }

    .site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }

    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }

    .site-footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .ad-banner {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }
  </style>
</head>

<body>
  <div class="ad-banner">
    <iframe src="https://metrofeedus.com/portland/Ads/route-98-dir0-ad.html" style="border:none; width:100%; max-width: 728px; height:90px;"></iframe>
  </div>

  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
    <button class="back-button" onclick="history.back()">Back</button>
  </div>

  <h1>Route 98 - Eastbound</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  <script>
    if (document.referrer === "" && performance.navigation.type === 0) {
      window.location.href = "/index.html";
    }

    const apiKey = "2C4447D4A42083BCD84DE3B8E";
    const routeNumber = 98;
    const direction = parseInt(0);

    const map = L.map('map', {
      center: [45.6, -122.7],
      zoom: 12,
      minZoom: 12,
      maxZoom: 18,
      maxBounds: [[45.3, -123.1], [45.9, -122.3]],
      maxBoundsViscosity: 1.0
    });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const shapeOutbound = [
  [45.529872, -122.66573],
  [45.529881, -122.66573],
  [45.53002, -122.665731],
  [45.530089, -122.665732],
  [45.530161, -122.665732],
  [45.530204, -122.665732],
  [45.530255, -122.665732],
  [45.530704, -122.665728],
  [45.530794, -122.665782],
  [45.530796, -122.665669],
  [45.530797, -122.665528],
  [45.530792, -122.664881],
  [45.530791, -122.664722],
  [45.530789, -122.664629],
  [45.530784, -122.663947],
  [45.530785, -122.663828],
  [45.530794, -122.66372],
  [45.530298, -122.663719],
  [45.530114, -122.663719],
  [45.53008, -122.663719],
  [45.530001, -122.66372],
  [45.529997, -122.663034],
  [45.529996, -122.662736],
  [45.529993, -122.661828],
  [45.529995, -122.661682],
  [45.529997, -122.661555],
  [45.529995, -122.660792],
  [45.530005, -122.660669],
  [45.530011, -122.660604],
  [45.530015, -122.660555],
  [45.530013, -122.660008],
  [45.530012, -122.659672],
  [45.53001, -122.658783],
  [45.530007, -122.65866],
  [45.530006, -122.658624],
  [45.530003, -122.658479],
  [45.529995, -122.657625],
  [45.529997, -122.65715],
  [45.529997, -122.657098],
  [45.529998, -122.656592],
  [45.529999, -122.654804],
  [45.529999, -122.654735],
  [45.529999, -122.654583],
  [45.529938, -122.654585],
  [45.529522, -122.654586],
  [45.529491, -122.654585],
  [45.529446, -122.654574],
  [45.529409, -122.654557],
  [45.529301, -122.654482],
  [45.529237, -122.654443],
  [45.529147, -122.654388],
  [45.52906, -122.654334],
  [45.529104, -122.654163],
  [45.529238, -122.653617],
  [45.529111, -122.653607],
  [45.529044, -122.653605],
  [45.528175, -122.653596],
  [45.528043, -122.653596],
  [45.527932, -122.65359],
  [45.527952, -122.653449],
  [45.527948, -122.651916],
  [45.527946, -122.651293],
  [45.527944, -122.650541],
  [45.52794, -122.649532],
  [45.527994, -122.649495],
  [45.528091, -122.649495],
  [45.52815, -122.64949],
  [45.528202, -122.649474],
  [45.528254, -122.649438],
  [45.528303, -122.649395],
  [45.528362, -122.649335],
  [45.528457, -122.649235],
  [45.528565, -122.649117],
  [45.529226, -122.648379],
  [45.529293, -122.6483],
  [45.529384, -122.648182],
  [45.529414, -122.648139],
  [45.529469, -122.648059],
  [45.529516, -122.647972],
  [45.529554, -122.64789],
  [45.529592, -122.647782],
  [45.529625, -122.647668],
  [45.529651, -122.647535],
  [45.529674, -122.647401],
  [45.529697, -122.647233],
  [45.529719, -122.647063],
  [45.529738, -122.646873],
  [45.529905, -122.645043],
  [45.529969, -122.643698],
  [45.530071, -122.641493],
  [45.530229, -122.638198],
  [45.530286, -122.637129],
  [45.5303, -122.636886],
  [45.530316, -122.636652],
  [45.530336, -122.636404],
  [45.530362, -122.636158],
  [45.530395, -122.635922],
  [45.530438, -122.635685],
  [45.530488, -122.635451],
  [45.530551, -122.63522],
  [45.530618, -122.634999],
  [45.530697, -122.634776],
  [45.530781, -122.634578],
  [45.530883, -122.634373],
  [45.530988, -122.634187],
  [45.531099, -122.634006],
  [45.531222, -122.633831],
  [45.53135, -122.633671],
  [45.531485, -122.633516],
  [45.531604, -122.63339],
  [45.531751, -122.633247],
  [45.53189, -122.633124],
  [45.532044, -122.632988],
  [45.532278, -122.632785],
  [45.532596, -122.632513],
  [45.532732, -122.632392],
  [45.53287, -122.632256],
  [45.533001, -122.632123],
  [45.533138, -122.631976],
  [45.533256, -122.63184],
  [45.533367, -122.631697],
  [45.533485, -122.631529],
  [45.533588, -122.631363],
  [45.533693, -122.631177],
  [45.533784, -122.630995],
  [45.533864, -122.630813],
  [45.533937, -122.630623],
  [45.534001, -122.630415],
  [45.53406, -122.630212],
  [45.534109, -122.630001],
  [45.53415, -122.629785],
  [45.534184, -122.629557],
  [45.534205, -122.629349],
  [45.534218, -122.629137],
  [45.534224, -122.628912],
  [45.534219, -122.628694],
  [45.534208, -122.628458],
  [45.534188, -122.628231],
  [45.53416, -122.628014],
  [45.534125, -122.627782],
  [45.534071, -122.627479],
  [45.534013, -122.627187],
  [45.533946, -122.626884],
  [45.533839, -122.626418],
  [45.533576, -122.625625],
  [45.533197, -122.624263],
  [45.533181, -122.624207],
  [45.533137, -122.624022],
  [45.533116, -122.623933],
  [45.532929, -122.623115],
  [45.532893, -122.622967],
  [45.532961, -122.622966],
  [45.53343, -122.622961],
  [45.533732, -122.622953],
  [45.533773, -122.622951],
  [45.533809, -122.62295],
  [45.533844, -122.622754],
  [45.533836, -122.622487],
  [45.533833, -122.622454],
  [45.533821, -122.622306],
  [45.533806, -122.622061],
  [45.5338, -122.621934],
  [45.533798, -122.621887],
  [45.533793, -122.621732],
  [45.533795, -122.621292],
  [45.533795, -122.621142],
  [45.533795, -122.621029],
  [45.533796, -122.620943],
  [45.533798, -122.62045],
  [45.533799, -122.620308],
  [45.533795, -122.619981],
  [45.533794, -122.619781],
  [45.533793, -122.619652],
  [45.533792, -122.619553],
  [45.53379, -122.619171],
  [45.53379, -122.619096],
  [45.53379, -122.619032],
  [45.533784, -122.618336],
  [45.533782, -122.617853],
  [45.533775, -122.616948],
  [45.533769, -122.616146],
  [45.533768, -122.615974],
  [45.53376, -122.614993],
  [45.533758, -122.614725],
  [45.533752, -122.613977],
  [45.533745, -122.612967],
  [45.533743, -122.612698],
  [45.533738, -122.611952],
  [45.533733, -122.6113],
  [45.533731, -122.610935],
  [45.533727, -122.610117],
  [45.533726, -122.609917],
  [45.533723, -122.608855],
  [45.533722, -122.608699],
  [45.53372, -122.607893],
  [45.533719, -122.607593],
  [45.533717, -122.606878],
  [45.533714, -122.605867],
  [45.533714, -122.605333],
  [45.533713, -122.605079],
  [45.533713, -122.604994],
  [45.533714, -122.604754],
  [45.533713, -122.604648],
  [45.53371, -122.60406],
  [45.533709, -122.603702],
  [45.533708, -122.603182],
  [45.533708, -122.603123],
  [45.533707, -122.602656],
  [45.533707, -122.602281],
  [45.533707, -122.602163],
  [45.533633, -122.602165],
  [45.533617, -122.602165],
  [45.533011, -122.602173],
  [45.532284, -122.602184],
  [45.531637, -122.602193],
  [45.531001, -122.602207],
  [45.530319, -122.602214],
  [45.529559, -122.602224],
  [45.52895, -122.602239],
  [45.528642, -122.602246],
  [45.528603, -122.602248],
  [45.528312, -122.602257],
  [45.528217, -122.602259],
  [45.527957, -122.602265],
  [45.527219, -122.602274],
  [45.526952, -122.602262],
  [45.526582, -122.602264],
  [45.526481, -122.602265],
  [45.526476, -122.600846],
  [45.526477, -122.599698],
  [45.526477, -122.599574],
  [45.526474, -122.598696],
  [45.526474, -122.598566],
  [45.526474, -122.598415],
  [45.52648, -122.597701],
  [45.526481, -122.597097],
  [45.52648, -122.596387],
  [45.526478, -122.595682],
  [45.526478, -122.595395],
  [45.526468, -122.595077],
  [45.526465, -122.594563],
  [45.526464, -122.594483],
  [45.526462, -122.594375],
  [45.52646, -122.593732],
  [45.526459, -122.593465],
  [45.526458, -122.592444],
  [45.526454, -122.591431],
  [45.52645, -122.58986],
  [45.526447, -122.588927],
  [45.526447, -122.588775],
  [45.526447, -122.588159],
  [45.526447, -122.587895],
  [45.526446, -122.587791],
  [45.526446, -122.587569],
  [45.526445, -122.587229],
  [45.526444, -122.586815],
  [45.526444, -122.58673],
  [45.526438, -122.585835],
  [45.526437, -122.58471],
  [45.526434, -122.583539],
  [45.526429, -122.582427],
  [45.526428, -122.581466],
  [45.526425, -122.58025],
  [45.526425, -122.580015],
  [45.526422, -122.579535],
  [45.52642, -122.579197],
  [45.52642, -122.579056],
  [45.526515, -122.579058],
  [45.526742, -122.579056],
  [45.526968, -122.579053],
  [45.527999, -122.579055],
  [45.528385, -122.579052],
  [45.529475, -122.579045],
  [45.530187, -122.579044],
  [45.530957, -122.579039],
  [45.5316, -122.579041],
  [45.531713, -122.579041],
  [45.531779, -122.579041],
  [45.532143, -122.579032],
  [45.532343, -122.579032],
  [45.532414, -122.579034],
  [45.532501, -122.579036],
  [45.532764, -122.579036],
  [45.532846, -122.579036],
  [45.532963, -122.579036],
  [45.533025, -122.578964],
  [45.533171, -122.578964],
  [45.533772, -122.578962],
  [45.53382, -122.578962],
  [45.533972, -122.579039],
  [45.533966, -122.578853],
  [45.533964, -122.578775],
  [45.533963, -122.578736],
  [45.533956, -122.578654],
  [45.533949, -122.578609],
  [45.533927, -122.578538],
  [45.533809, -122.578232],
  [45.533717, -122.577994],
  [45.53365, -122.577803],
  [45.533612, -122.577683],
  [45.533607, -122.57766],
  [45.533592, -122.577599],
  [45.533577, -122.577519],
  [45.533566, -122.577393],
  [45.533563, -122.577328],
  [45.533561, -122.577268],
  [45.533552, -122.576687],
  [45.533553, -122.576617],
  [45.533533, -122.576424],
  [45.533529, -122.576086],
  [45.533581, -122.575878],
  [45.533572, -122.575812],
  [45.533566, -122.575727],
  [45.533555, -122.575497],
  [45.533552, -122.575325],
  [45.533569, -122.575213],
  [45.533565, -122.574547],
  [45.533525, -122.57258],
  [45.533523, -122.572499],
  [45.533518, -122.572042],
  [45.533516, -122.571747],
  [45.533497, -122.570855],
  [45.533485, -122.569779],
  [45.533481, -122.569537],
  [45.533475, -122.569202],
  [45.533469, -122.56857],
  [45.533421, -122.568397],
  [45.533415, -122.568155],
  [45.533424, -122.567943],
  [45.53344, -122.567758],
  [45.533461, -122.567594],
  [45.533486, -122.567426],
  [45.533513, -122.567251],
  [45.533544, -122.567074],
  [45.533582, -122.566911],
  [45.533624, -122.566759],
  [45.533677, -122.566576],
  [45.533738, -122.566386],
  [45.533819, -122.566155],
  [45.533882, -122.565962],
  [45.533927, -122.565798],
  [45.533968, -122.56562],
  [45.534, -122.565458],
  [45.534025, -122.565297],
  [45.534046, -122.565138],
  [45.534062, -122.56498],
  [45.53407, -122.564823],
  [45.534074, -122.564653],
  [45.534073, -122.56447],
  [45.534067, -122.564279],
  [45.534057, -122.564091],
  [45.534038, -122.563896],
  [45.534012, -122.563715],
  [45.533973, -122.563517],
  [45.533929, -122.56333],
  [45.533881, -122.563138],
  [45.533757, -122.562701],
  [45.533644, -122.562256],
  [45.533589, -122.562027],
  [45.533559, -122.561882],
  [45.533541, -122.561768],
  [45.533526, -122.561445],
  [45.533521, -122.561371],
  [45.533519, -122.561269],
  [45.533516, -122.561053],
  [45.53349, -122.560927],
  [45.53349, -122.56083],
  [45.533494, -122.560418],
  [45.5335, -122.559974],
  [45.533528, -122.5596],
  [45.533533, -122.559289],
  [45.533535, -122.559063],
  [45.533537, -122.558838],
  [45.533539, -122.558646],
  [45.533542, -122.558224],
  [45.533538, -122.558063],
  [45.533186, -122.558066],
  [45.53309, -122.558067],
  [45.533005, -122.558068],
  [45.532947, -122.558069],
  [45.532791, -122.558072],
  [45.532051, -122.558083],
  [45.531766, -122.558086],
  [45.531357, -122.55809],
  [45.531275, -122.558091],
  [45.530888, -122.558096],
  [45.530683, -122.558098],
  [45.530643, -122.558099],
  [45.529991, -122.55811],
  [45.529903, -122.558111],
  [45.529486, -122.558114],
  [45.529487, -122.558267],
  [45.529484, -122.559244],
  [45.529483, -122.560035],
  [45.529481, -122.561113],
  [45.529488, -122.561828],
  [45.529477, -122.561942],
  [45.52947, -122.562054],
  [45.529468, -122.562594],
  [45.529466, -122.563],
  [45.529533, -122.563066],
  [45.529537, -122.563312],
  [45.529537, -122.563337],
  [45.529538, -122.563394],
  [45.529547, -122.563465],
  [45.529549, -122.563479],
  [45.529567, -122.563548],
  [45.529588, -122.563598],
  [45.529653, -122.563654],
  [45.529748, -122.56368],
  [45.529938, -122.563661],
  [45.530105, -122.56369],
  [45.530393, -122.563797]
];

const stopNames = {
  "7828": "NE 60th &amp; 60th Ave MAX Stn/I-84",
  "7999": "NE 82nd &amp; 82nd Ave MAX Stn/I-84",
  "8193": "Gateway Transit Center",
  "8937": "NE Holladay &amp; 11th",
  "10271": "Rose Quarter TC &amp; Holladay",
  "13104": "NE Holladay &amp; 2nd (Oregon Convention Ctr)",
  "14112": "NE Holladay &amp; 9th",
  "14145": "NE Halsey &amp; 42nd (Hollywood)"
};

const stops = [
  { stop_id: "10271", name: "Rose Quarter TC &amp; Holladay", lat: 45.529872, lon: -122.66564, times: ["5:13 PM", "5:20 PM", "5:27 PM", "5:34 PM", "5:41 PM", "5:48 PM", "5:55 PM", "6:02 PM"] },
  { stop_id: "13104", name: "NE Holladay &amp; 2nd (Oregon Convention Ctr)", lat: 45.529928, lon: -122.663035, times: ["5:15 PM", "5:22 PM", "5:29 PM", "5:36 PM", "5:43 PM", "5:50 PM", "5:57 PM", "6:04 PM"] },
  { stop_id: "14112", name: "NE Holladay &amp; 9th", lat: 45.529959, lon: -122.657177, times: ["5:11 PM", "5:18 PM", "5:25 PM", "5:32 PM", "5:39 PM", "5:46 PM", "5:53 PM", "6:00 PM"] },
  { stop_id: "8937", name: "NE Holladay &amp; 11th", lat: 45.52995, lon: -122.654815, times: ["5:11 PM", "5:18 PM", "5:25 PM", "5:32 PM", "5:39 PM", "5:46 PM", "5:53 PM", "6:00 PM"] },
  { stop_id: "14145", name: "NE Halsey &amp; 42nd (Hollywood)", lat: 45.533697, lon: -122.619981, times: ["5:13 PM", "5:20 PM", "5:27 PM", "5:34 PM", "5:41 PM", "5:48 PM", "5:55 PM", "6:02 PM"] },
  { stop_id: "7828", name: "NE 60th &amp; 60th Ave MAX Stn/I-84", lat: 45.528606, lon: -122.602393, times: ["5:13 PM", "5:20 PM", "5:27 PM", "5:34 PM", "5:41 PM", "5:48 PM", "5:55 PM", "6:02 PM"] },
  { stop_id: "7999", name: "NE 82nd &amp; 82nd Ave MAX Stn/I-84", lat: 45.53378, lon: -122.578903, times: ["5:15 PM", "5:22 PM", "5:29 PM", "5:36 PM", "5:43 PM", "5:50 PM", "5:57 PM", "6:04 PM"] },
  { stop_id: "8193", name: "Gateway Transit Center", lat: 45.530408, lon: -122.563715, times: ["5:17 PM", "5:24 PM", "5:31 PM", "5:38 PM", "5:45 PM", "5:52 PM", "5:59 PM", "6:06 PM"] },
]

    const polylineOut = L.polyline(shapeOutbound, { color: 'blue', weight: 4, opacity: 0.7 }).addTo(map);
    map.fitBounds(polylineOut.getBounds());

    const nowPT = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
    const nowMins = nowPT.getHours() * 60 + nowPT.getMinutes();

    stops.forEach(stop => {
      let highlightedTimes = [];
      let foundNext = false;
      stop.times.forEach(timeStr => {
        let cleanTime = timeStr.trim();
        let [h, m] = cleanTime.split(":");
        let schedMins = parseInt(h, 10) * 60 + parseInt(m, 10);
        if (schedMins < nowMins && nowMins - schedMins > 720) {
          schedMins += 1440;
        }
        if (!foundNext && schedMins >= nowMins) {
          highlightedTimes.push(`<span style="background:#4dd0e1; color:#000; padding:2px 6px; border-radius:6px; font-weight:bold;">${cleanTime}</span>`);
          foundNext = true;
        } else {
          highlightedTimes.push(cleanTime);
        }
      });

      L.circleMarker([stop.lat, stop.lon], {
        radius: 6,
        color: '#4dd0e1',
        fillColor: '#4dd0e1',
        fillOpacity: 0.9,
        weight: 1
      })
      .bindPopup(`<strong>${stop.name}</strong><br>${highlightedTimes.join("<br>") || 'No scheduled times'}`)
      .addTo(map);
    });

    let busMarkers = {};
    async function fetchAndDisplay() {
      const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
      const data = await res.json();
      const buses = (data.resultSet.vehicle || []).filter(v => v.routeNumber == routeNumber && v.direction == direction);

      Object.values(busMarkers).forEach(m => map.removeLayer(m));
      busMarkers = {};
      if (!buses.length) return;

      buses.forEach(bus => {
        if (!bus.latitude || !bus.longitude || !bus.blockID) return;
        const icon = L.divIcon({    
           className: '',
           html: `
            <div style="text-align:center;">
              <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
              <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
            </div>
          `,
          iconSize: [40, 30], iconAnchor: [20, 30]
        });
        const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
        busMarkers[bus.vehicleID] = marker;
      });
    }
    fetchAndDisplay();
    setInterval(fetchAndDisplay, 15000);
  </script>

  <footer class="site-footer">
    <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
    <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
    <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
    <a href="dmca.html">DMCA</a> &nbsp;|&nbsp;
    <a href="privacy.html">Privacy Policy</a>
  </footer>

  <script>
    if (!localStorage.getItem('cookieConsent')) {
      document.write(`
        <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #333; color: #fff; padding: 1rem; z-index: 1000; font-size: 0.9rem; line-height: 1.4; text-align: center; box-sizing: border-box;">
          📢 We use cookies to improve functionality and analyze traffic.
          By using MetroFeed, you agree to our 
          <a href='privacy.html' style='color: #4dd0e1; text-decoration: underline;'>Privacy Policy</a>.<br>
          <button onclick='localStorage.setItem("cookieConsent", "true"); document.getElementById("cookie-banner").remove();' style='margin-top: 0.5rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-weight: bold;'>OK</button>
        </div>
      `);
    }
  </script>
</body>
</html>