<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 25 ‚Äì BRICE | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder ‚Äî 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">‚¨Ö Back</button>
  </div>

  <h1>Route 25 ‚Äì BRICE</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 25;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [39.86053, -82.826489],
  [39.860489, -82.82562],
  [39.86051, -82.825459],
  [39.86071, -82.825629],
  [39.861, -82.82588],
  [39.861309, -82.82615],
  [39.861819, -82.82657],
  [39.86199, -82.826709],
  [39.86208, -82.82678],
  [39.862109, -82.826799],
  [39.862179, -82.826859],
  [39.862559, -82.827169],
  [39.862639, -82.827259],
  [39.86289, -82.827529],
  [39.863269, -82.827479],
  [39.86333, -82.82747],
  [39.863529, -82.827439],
  [39.863629, -82.827429],
  [39.863789, -82.82741],
  [39.86387, -82.827399],
  [39.86402, -82.82738],
  [39.8643, -82.827339],
  [39.864329, -82.827339],
  [39.86438, -82.82733],
  [39.86466, -82.827299],
  [39.864879, -82.82727],
  [39.86502, -82.827249],
  [39.865059, -82.827249],
  [39.865269, -82.827219],
  [39.86564, -82.82718],
  [39.86654, -82.827079],
  [39.86676, -82.82706],
  [39.86712, -82.82702],
  [39.867159, -82.82702],
  [39.867589, -82.826979],
  [39.8678, -82.82696],
  [39.868409, -82.826889],
  [39.868489, -82.82688],
  [39.868589, -82.82687],
  [39.868949, -82.82683],
  [39.869, -82.82683],
  [39.869769, -82.82678],
  [39.87041, -82.82674],
  [39.870849, -82.826709],
  [39.872019, -82.82664],
  [39.872289, -82.826619],
  [39.873149, -82.82652],
  [39.873619, -82.82647],
  [39.87404, -82.82643],
  [39.87455, -82.82638],
  [39.87473, -82.826359],
  [39.8752, -82.826319],
  [39.875229, -82.826319],
  [39.8753, -82.826309],
  [39.875339, -82.826309],
  [39.87593, -82.826259],
  [39.87619, -82.82624],
  [39.87726, -82.82616],
  [39.87791, -82.82611],
  [39.877949, -82.82611],
  [39.878579, -82.82606],
  [39.87934, -82.825989],
  [39.879369, -82.825989],
  [39.8796, -82.82597],
  [39.879669, -82.82597],
  [39.87989, -82.825949],
  [39.880179, -82.82592],
  [39.880209, -82.82592],
  [39.8804, -82.825899],
  [39.881009, -82.82584],
  [39.88148, -82.8258],
  [39.881719, -82.825779],
  [39.881819, -82.825769],
  [39.88238, -82.825719],
  [39.883439, -82.82562],
  [39.885129, -82.825459],
  [39.88547, -82.82543],
  [39.88598, -82.82538],
  [39.887209, -82.825269],
  [39.888469, -82.825149],
  [39.888839, -82.82511],
  [39.88969, -82.82503],
  [39.88994, -82.825009],
  [39.890459, -82.824959],
  [39.89051, -82.824959],
  [39.890629, -82.82495],
  [39.89121, -82.8249],
  [39.89131, -82.82489],
  [39.89147, -82.824869],
  [39.89196, -82.824829],
  [39.89204, -82.824829],
  [39.892539, -82.8248],
  [39.89312, -82.8248],
  [39.89357, -82.8248],
  [39.89381, -82.8248],
  [39.894679, -82.824819],
  [39.89571, -82.82485],
  [39.896589, -82.824879],
  [39.898749, -82.82494],
  [39.89978, -82.824959],
  [39.90012, -82.824969],
  [39.900539, -82.82499],
  [39.90058, -82.82499],
  [39.901799, -82.82499],
  [39.90185, -82.82499],
  [39.902589, -82.82495],
  [39.90267, -82.82495],
  [39.902759, -82.82495],
  [39.902879, -82.82494],
  [39.903489, -82.82489],
  [39.90354, -82.82489],
  [39.903949, -82.82485],
  [39.904679, -82.824789],
  [39.9049, -82.82477],
  [39.90534, -82.82472],
  [39.905679, -82.824689],
  [39.905829, -82.82468],
  [39.906289, -82.82463],
  [39.90645, -82.82462],
  [39.90653, -82.824609],
  [39.90672, -82.82459],
  [39.907459, -82.82453],
  [39.90804, -82.82449],
  [39.90857, -82.824419],
  [39.908889, -82.82439],
  [39.909079, -82.824369],
  [39.90922, -82.82436],
  [39.9096, -82.82432],
  [39.91011, -82.82426],
  [39.910239, -82.824249],
  [39.910629, -82.824199],
  [39.91086, -82.82417],
  [39.91136, -82.82412],
  [39.911619, -82.824099],
  [39.912399, -82.82403],
  [39.91265, -82.824009],
  [39.91316, -82.823969],
  [39.91346, -82.82394],
  [39.914029, -82.823879],
  [39.915309, -82.82376],
  [39.915839, -82.823709],
  [39.91614, -82.82368],
  [39.91652, -82.82364],
  [39.916919, -82.82363],
  [39.91731, -82.82367],
  [39.91768, -82.82376],
  [39.91804, -82.823889],
  [39.9184, -82.824069],
  [39.918789, -82.824279],
  [39.919069, -82.824519],
  [39.919259, -82.82471],
  [39.919429, -82.82489],
  [39.919599, -82.82508],
  [39.919779, -82.8253],
  [39.91995, -82.825509],
  [39.920419, -82.826079],
  [39.920879, -82.82664],
  [39.921609, -82.827529],
  [39.921839, -82.82781],
  [39.92218, -82.82822],
  [39.922579, -82.828709],
  [39.92281, -82.82899],
  [39.922939, -82.829159],
  [39.92315, -82.829429],
  [39.92328, -82.829589],
  [39.92362, -82.829969],
  [39.923759, -82.83012],
  [39.924019, -82.830399],
  [39.92423, -82.830579],
  [39.92445, -82.830729],
  [39.924649, -82.830859],
  [39.924759, -82.830939],
  [39.92461, -82.831359],
  [39.92452, -82.831839],
  [39.9245, -82.832],
  [39.924479, -82.832159],
  [39.924469, -82.8325],
  [39.924469, -82.83263],
  [39.924489, -82.8329],
  [39.92451, -82.833329],
  [39.924559, -82.83421],
  [39.92462, -82.835219],
  [39.924729, -82.83713],
  [39.924839, -82.838999],
  [39.92488, -82.83984],
  [39.92488, -82.839949],
  [39.924939, -82.840899],
  [39.92497, -82.84142],
  [39.924989, -82.84177],
  [39.92504, -82.842009],
  [39.92506, -82.84212],
  [39.92516, -82.842459],
  [39.925289, -82.842779],
  [39.92552, -82.843279],
  [39.92567, -82.843589],
  [39.92596, -82.8442],
  [39.926079, -82.844499],
  [39.926249, -82.84483],
  [39.9265, -82.84464],
  [39.92657, -82.844589],
  [39.92711, -82.844179],
  [39.92758, -82.84383],
  [39.92811, -82.843409],
  [39.92838, -82.8432],
  [39.928719, -82.84293],
  [39.92919, -82.842549],
  [39.9293, -82.842459],
  [39.929599, -82.84222],
  [39.92947, -82.842019],
  [39.929399, -82.84178],
  [39.929349, -82.841439],
  [39.9293, -82.84051],
  [39.929249, -82.839399],
  [39.929219, -82.838729],
  [39.92919, -82.83817],
  [39.929149, -82.83735],
  [39.92912, -82.836789],
  [39.929129, -82.836529],
  [39.9292, -82.83628],
  [39.929309, -82.835989],
  [39.929439, -82.83566],
  [39.929489, -82.835539],
  [39.929769, -82.83489],
  [39.929259, -82.83443],
  [39.929059, -82.83425],
  [39.92846, -82.83363],
  [39.92823, -82.833339],
  [39.927999, -82.833059],
  [39.92786, -82.832879],
  [39.92768, -82.8326],
  [39.927639, -82.8325],
  [39.927519, -82.83215],
  [39.92751, -82.8321],
  [39.92751, -82.83205],
  [39.92749, -82.83174],
  [39.92747, -82.831269],
  [39.92768, -82.8312],
  [39.927799, -82.83116],
  [39.92787, -82.831139],
  [39.927999, -82.831129],
  [39.928089, -82.831129],
  [39.92831, -82.83111],
  [39.928449, -82.8311],
  [39.92855, -82.831089],
  [39.928899, -82.831049],
  [39.9291, -82.831029],
  [39.930059, -82.830939],
  [39.93101, -82.830849],
  [39.93234, -82.8307],
  [39.9326, -82.830669],
  [39.93264, -82.830669],
  [39.932939, -82.830639],
  [39.93343, -82.830599],
  [39.934009, -82.83056],
  [39.934989, -82.83048],
  [39.93551, -82.83044],
  [39.93568, -82.830449],
  [39.935889, -82.83047],
  [39.936269, -82.83043],
  [39.93642, -82.830419],
  [39.936699, -82.83039],
  [39.936909, -82.830369],
  [39.93713, -82.83035],
  [39.937429, -82.830319],
  [39.938349, -82.830229],
  [39.93839, -82.830229],
  [39.93847, -82.830219],
  [39.939229, -82.830149],
  [39.939949, -82.83008],
  [39.94029, -82.830049],
  [39.940319, -82.830049],
  [39.940759, -82.83002],
  [39.941029, -82.82999],
  [39.941219, -82.829969],
  [39.94126, -82.829969],
  [39.94134, -82.829959],
  [39.941469, -82.82994],
  [39.941559, -82.82993],
  [39.941589, -82.82993],
  [39.94181, -82.8299],
  [39.941829, -82.8299],
  [39.94208, -82.829879],
  [39.942489, -82.82984],
  [39.942669, -82.829819],
  [39.94271, -82.829819],
  [39.942759, -82.82981],
  [39.942829, -82.8298],
  [39.94304, -82.829779],
  [39.94316, -82.829769],
  [39.943259, -82.82976],
  [39.943359, -82.82975],
  [39.943449, -82.829739],
  [39.943909, -82.829699],
  [39.94397, -82.829689],
  [39.944369, -82.829649],
  [39.94443, -82.829639],
  [39.94479, -82.829609],
  [39.94512, -82.82958],
  [39.94522, -82.82957],
  [39.94542, -82.829549],
  [39.94566, -82.82953],
  [39.94587, -82.829509],
  [39.946159, -82.82948],
  [39.94648, -82.82945],
  [39.946719, -82.829419],
  [39.946889, -82.829419],
  [39.947059, -82.8294],
  [39.947159, -82.82939],
  [39.94764, -82.82935],
  [39.947779, -82.829339],
  [39.947969, -82.829319],
  [39.94827, -82.829289],
  [39.94857, -82.82926],
  [39.948669, -82.829249],
  [39.949129, -82.82921],
  [39.94919, -82.829199],
  [39.94965, -82.829159],
  [39.94998, -82.82913],
  [39.95007, -82.82912],
  [39.95152, -82.828979],
  [39.95169, -82.828959],
  [39.951809, -82.82895],
  [39.95198, -82.828929],
  [39.952209, -82.82891],
  [39.9525, -82.828889],
  [39.952829, -82.82886],
  [39.95322, -82.82882],
  [39.953539, -82.828789],
  [39.95386, -82.82876],
  [39.954179, -82.82872],
  [39.954259, -82.828709],
  [39.95449, -82.828689],
  [39.9546, -82.82868],
  [39.954819, -82.82868],
  [39.954809, -82.82926],
  [39.954809, -82.82936],
  [39.954809, -82.829469],
  [39.954809, -82.82954],
  [39.954809, -82.82967],
  [39.954809, -82.82981],
  [39.954799, -82.830449],
  [39.954789, -82.830779],
  [39.954789, -82.83092],
  [39.954789, -82.83107],
  [39.95478, -82.83143],
  [39.95477, -82.832069],
  [39.95477, -82.83237],
  [39.95477, -82.83249],
  [39.95477, -82.83263],
  [39.95477, -82.832969],
  [39.95477, -82.833109],
  [39.95476, -82.833469],
  [39.95476, -82.83375],
  [39.95475, -82.83438],
  [39.95475, -82.83467],
  [39.95475, -82.83537],
  [39.95474, -82.83668],
  [39.95474, -82.837119],
  [39.95474, -82.837299],
  [39.95474, -82.8374],
  [39.954729, -82.837749],
  [39.954729, -82.83782],
  [39.954719, -82.838459],
  [39.955339, -82.8384],
  [39.95548, -82.83839],
  [39.955879, -82.838339],
  [39.95612, -82.838319],
  [39.9563, -82.8383],
  [39.95639, -82.838289],
  [39.95665, -82.83827],
  [39.956849, -82.83826],
  [39.95708, -82.838239],
  [39.95774, -82.83818],
  [39.95799, -82.838159],
  [39.95933, -82.83804],
  [39.96034, -82.837959],
  [39.960999, -82.837889],
  [39.961569, -82.837839],
  [39.96214, -82.837789],
  [39.96234, -82.83777],
  [39.962709, -82.837739],
  [39.963089, -82.837699],
  [39.963179, -82.837689],
  [39.9636, -82.837649],
  [39.963799, -82.83763],
  [39.96414, -82.837609],
  [39.964439, -82.83759],
  [39.964959, -82.83754],
  [39.9652, -82.837519],
  [39.9663, -82.8374],
  [39.966609, -82.837379],
  [39.96709, -82.837339],
  [39.96752, -82.837289],
  [39.9678, -82.837249],
  [39.96807, -82.83722],
  [39.96879, -82.837149],
  [39.96924, -82.8371],
  [39.969899, -82.837029],
  [39.970379, -82.836979],
  [39.97088, -82.836929],
  [39.97114, -82.83691],
  [39.97148, -82.836889],
  [39.97185, -82.83687],
  [39.97242, -82.83681],
  [39.97285, -82.83677],
  [39.97349, -82.836709],
  [39.973769, -82.83669],
  [39.97457, -82.83664],
  [39.97499, -82.836609],
  [39.975519, -82.836569],
  [39.975879, -82.83654],
  [39.97617, -82.836519],
  [39.976589, -82.836479],
  [39.976949, -82.83645],
  [39.977309, -82.83642],
  [39.977649, -82.836389],
  [39.977849, -82.83637],
  [39.97808, -82.836349],
  [39.97826, -82.83633],
  [39.97862, -82.836309],
  [39.978919, -82.83629],
  [39.97897, -82.83629],
  [39.979089, -82.83628],
  [39.97941, -82.83624],
  [39.97962, -82.836219],
  [39.979829, -82.8362],
  [39.980079, -82.83618],
  [39.9803, -82.8362],
  [39.98023, -82.83687],
  [39.980189, -82.837199],
  [39.98016, -82.837469],
  [39.98012, -82.837879],
  [39.980089, -82.83813],
  [39.97998, -82.839049],
  [39.979899, -82.83961],
  [39.97986, -82.839859],
  [39.97985, -82.83993],
  [39.979829, -82.84007],
  [39.97977, -82.840499],
  [39.97968, -82.841079],
  [39.9796, -82.84164],
  [39.9795, -82.84232],
  [39.97941, -82.84295],
  [39.97933, -82.843549],
  [39.97995, -82.843509],
  [39.980709, -82.843449],
  [39.98079, -82.84344],
  [39.981359, -82.8434],
  [39.982439, -82.84331],
  [39.98309, -82.84325],
  [39.983129, -82.84325],
  [39.98401, -82.84317],
  [39.984759, -82.84311],
  [39.985049, -82.843089],
  [39.98552, -82.843059],
  [39.985759, -82.84304],
  [39.98609, -82.84302],
  [39.986109, -82.84302],
  [39.986489, -82.843009],
  [39.98672, -82.843009],
  [39.987099, -82.842999],
  [39.98751, -82.842969],
  [39.987829, -82.84294],
  [39.98814, -82.84289],
  [39.98844, -82.8428],
  [39.988729, -82.84268],
  [39.98889, -82.842599],
  [39.989019, -82.84254],
  [39.98907, -82.8425],
  [39.98949, -82.842199],
  [39.98985, -82.84191],
  [39.990359, -82.84151],
  [39.991069, -82.84096],
  [39.99111, -82.840929],
  [39.991679, -82.840529],
  [39.992519, -82.83998],
  [39.99255, -82.84065],
  [39.99255, -82.840759],
  [39.99258, -82.841299],
  [39.992599, -82.841829],
  [39.992609, -82.84209],
  [39.99263, -82.84257],
  [39.99264, -82.842869],
  [39.99265, -82.84311],
  [39.992689, -82.84334],
  [39.99273, -82.844229],
  [39.99347, -82.844179],
  [39.993939, -82.84415],
  [39.994139, -82.8441],
  [39.994299, -82.844039],
  [39.99454, -82.843899],
  [39.994599, -82.843859],
  [39.99473, -82.843769],
  [39.99491, -82.843639],
  [39.99508, -82.84353],
  [39.995319, -82.843449],
  [39.99545, -82.84343],
  [39.9957, -82.8434],
  [39.995839, -82.8434],
  [39.99614, -82.84338],
  [39.99668, -82.84334],
  [39.996939, -82.84331],
  [39.997099, -82.843329],
  [39.997269, -82.84338],
  [39.99741, -82.843369],
  [39.99751, -82.843369],
  [39.997989, -82.843329],
  [39.999519, -82.8432],
  [39.99956, -82.84415],
  [39.999529, -82.84446],
  [39.999369, -82.844889],
  [39.998909, -82.846059],
  [39.998799, -82.84641],
  [39.99875, -82.846599],
  [39.99875, -82.846779],
  [39.99876, -82.84699],
  [39.99879, -82.847189],
  [39.998899, -82.847509],
  [39.99911, -82.847959],
  [39.999269, -82.848269],
  [39.99941, -82.848579],
  [39.9995, -82.848869],
  [39.99956, -82.849179],
  [39.999599, -82.849889],
  [39.999629, -82.85049],
  [39.999729, -82.852239],
  [39.999729, -82.852319],
  [39.99977, -82.85248],
  [39.99986, -82.8527],
  [39.99992, -82.85285],
  [39.999959, -82.853179],
  [39.999979, -82.853439],
  [40.000049, -82.85409],
  [40.00011, -82.854799],
  [40.000159, -82.854939],
  [40.000239, -82.855119],
  [40.000429, -82.855479],
  [40.00048, -82.855619],
  [40.000509, -82.855739],
  [40.000519, -82.855799],
  [40.00049, -82.856159],
  [40.000439, -82.856329],
  [40.00038, -82.85644],
  [39.99994, -82.857279],
  [40.00038, -82.85766],
  [40.000449, -82.857719],
  [40.00091, -82.85819],
  [40.001049, -82.858319],
  [40.001439, -82.858759],
  [40.00154, -82.858889],
  [40.001769, -82.85918],
  [40.002319, -82.85991],
  [40.002789, -82.860739],
  [40.00293, -82.86099],
  [40.00316, -82.861319],
  [40.00363, -82.86216],
  [40.003669, -82.86224],
  [40.00426, -82.86332],
  [40.004369, -82.86347],
  [40.004549, -82.86365],
  [40.004769, -82.86377],
  [40.00568, -82.86405],
  [40.006199, -82.86422],
  [40.006379, -82.86427],
  [40.006729, -82.86437],
  [40.007629, -82.86467],
  [40.0085, -82.864919],
  [40.008699, -82.864979],
  [40.008909, -82.86504],
  [40.009089, -82.865159],
  [40.009259, -82.865319],
  [40.00931, -82.8654],
  [40.009449, -82.86562],
  [40.00955, -82.86608],
  [40.00955, -82.866149],
  [40.00956, -82.86656],
  [40.00957, -82.86683],
  [40.009589, -82.86729],
  [40.009879, -82.867259],
  [40.010149, -82.86724],
  [40.010249, -82.867229],
  [40.01039, -82.867219],
  [40.01046, -82.867209],
  [40.010689, -82.86719],
  [40.011219, -82.86715],
  [40.011769, -82.8671],
  [40.012389, -82.867049],
  [40.012919, -82.86701],
  [40.013029, -82.866999],
  [40.013129, -82.866989],
  [40.01354, -82.866959],
  [40.01405, -82.86692],
  [40.01461, -82.866869],
  [40.014829, -82.866849],
  [40.01522, -82.866819],
  [40.015269, -82.866819],
  [40.01603, -82.866759],
  [40.01622, -82.86674],
  [40.016279, -82.866729],
  [40.016349, -82.866719],
  [40.01685, -82.866679],
  [40.017699, -82.86661],
  [40.017889, -82.866589],
  [40.018339, -82.866549],
  [40.018359, -82.8671],
  [40.018359, -82.867229],
  [40.01838, -82.86777],
  [40.01839, -82.86804],
  [40.0184, -82.868299],
  [40.018409, -82.868439],
  [40.018409, -82.868529],
  [40.018409, -82.868609],
  [40.018419, -82.86881],
  [40.018429, -82.8689],
  [40.018449, -82.869249],
  [40.018449, -82.8693],
  [40.01846, -82.869469],
  [40.01847, -82.869819],
  [40.01848, -82.870229],
  [40.018509, -82.870859],
  [40.018519, -82.871179],
  [40.01855, -82.871849],
  [40.01856, -82.87218],
  [40.01858, -82.87278],
  [40.018609, -82.87336],
  [40.018629, -82.87363],
  [40.01865, -82.874009],
  [40.01867, -82.874319],
  [40.01867, -82.874419],
  [40.018679, -82.874599],
  [40.018689, -82.87475],
  [40.018699, -82.874999],
  [40.018709, -82.87517],
  [40.01873, -82.87561],
  [40.01873, -82.8757],
  [40.01873, -82.875729],
  [40.01875, -82.876039],
  [40.01875, -82.876119],
  [40.01876, -82.87637],
  [40.01876, -82.876529],
  [40.01877, -82.87669],
  [40.018779, -82.87687],
  [40.018789, -82.8771],
  [40.018789, -82.877259],
  [40.018799, -82.877559],
  [40.018809, -82.877739],
  [40.01882, -82.877969],
  [40.01884, -82.8783],
  [40.01886, -82.87862],
  [40.01886, -82.878689],
  [40.018879, -82.878969],
  [40.018899, -82.879229],
  [40.01892, -82.87958],
  [40.01892, -82.87976],
  [40.01892, -82.87984],
  [40.01891, -82.88025],
  [40.01891, -82.88039],
  [40.018899, -82.880709],
  [40.018899, -82.88082],
  [40.018889, -82.88128],
  [40.018879, -82.882079],
  [40.018869, -82.88264],
  [40.01884, -82.88399],
  [40.01882, -82.88483],
  [40.018809, -82.88529],
  [40.018799, -82.88559],
  [40.018719, -82.887379],
  [40.018679, -82.887879],
  [40.01856, -82.889669],
  [40.01855, -82.889849],
  [40.018529, -82.890069],
  [40.018509, -82.890439],
  [40.018499, -82.890579],
  [40.01849, -82.89068],
  [40.01856, -82.89068],
  [40.01864, -82.890669],
  [40.018799, -82.89065],
  [40.01911, -82.890619],
  [40.019329, -82.8906],
  [40.01958, -82.890569],
  [40.019699, -82.89056],
  [40.019799, -82.89055],
  [40.01999, -82.890529],
  [40.02012, -82.89051],
  [40.02048, -82.89047],
  [40.02063, -82.890449],
  [40.020859, -82.890429],
  [40.021649, -82.89037],
  [40.021949, -82.890349],
  [40.022139, -82.890339],
  [40.022309, -82.89033],
  [40.022649, -82.890299],
  [40.02452, -82.89014],
  [40.02478, -82.890119],
  [40.025469, -82.89006],
  [40.02575, -82.890039],
  [40.026259, -82.89],
  [40.02656, -82.889979],
  [40.026629, -82.88997],
  [40.02683, -82.889949],
  [40.027269, -82.88992],
  [40.027599, -82.889889],
  [40.02767, -82.88988],
  [40.027789, -82.88987],
  [40.028049, -82.889849],
  [40.028419, -82.88982],
  [40.02948, -82.88973],
  [40.03046, -82.88964],
  [40.03145, -82.88955],
  [40.03196, -82.889499],
  [40.03261, -82.889439],
  [40.033089, -82.889399],
  [40.03343, -82.88937],
  [40.034789, -82.88925],
  [40.036359, -82.88912],
  [40.037619, -82.88901],
  [40.03782, -82.888989],
  [40.038959, -82.88888],
  [40.03989, -82.88879],
  [40.04072, -82.88871],
  [40.04108, -82.888679],
  [40.04142, -82.888639],
  [40.04222, -82.888549],
  [40.04286, -82.88848],
  [40.042919, -82.88847],
  [40.04394, -82.888359],
  [40.044159, -82.88834],
  [40.04458, -82.88829],
  [40.04477, -82.8883],
  [40.044899, -82.888319],
  [40.04502, -82.888359],
  [40.0451, -82.88839],
  [40.04521, -82.888449],
  [40.045359, -82.888549],
  [40.04549, -82.888679],
  [40.04564, -82.88888],
  [40.04577, -82.88907],
  [40.045879, -82.889219],
  [40.04592, -82.889269],
  [40.04613, -82.88948],
  [40.046229, -82.889579],
  [40.046429, -82.88982],
  [40.04654, -82.88996],
  [40.04665, -82.890129],
  [40.046879, -82.890529],
  [40.04694, -82.890629],
  [40.04701, -82.890719],
  [40.04708, -82.890789],
  [40.04728, -82.89096],
  [40.04747, -82.891079],
  [40.04765, -82.891169],
  [40.047749, -82.891199],
  [40.04792, -82.891239],
  [40.048059, -82.891259],
  [40.04828, -82.89128],
  [40.04871, -82.891259],
  [40.049209, -82.891249],
  [40.05041, -82.89122],
  [40.05071, -82.891209],
  [40.05099, -82.89118],
  [40.05113, -82.891149],
  [40.052359, -82.890929],
  [40.052609, -82.890889],
  [40.052719, -82.89087],
  [40.05304, -82.89083],
  [40.05313, -82.89082],
  [40.053349, -82.890809],
  [40.05348, -82.89082],
  [40.05358, -82.89083],
  [40.05367, -82.890849],
  [40.05401, -82.890929],
  [40.05421, -82.89096],
  [40.054439, -82.890969],
  [40.054539, -82.890969],
  [40.05501, -82.89095],
  [40.055139, -82.890939],
  [40.05539, -82.890929],
  [40.05567, -82.89086],
  [40.055789, -82.89082],
  [40.055859, -82.89077],
  [40.05592, -82.890719],
  [40.05626, -82.89046],
  [40.056569, -82.89024],
  [40.056669, -82.892239],
  [40.056689, -82.89263],
  [40.05672, -82.893229],
  [40.056779, -82.894269],
  [40.05681, -82.894839],
  [40.05682, -82.89497],
  [40.056849, -82.89572],
  [40.056879, -82.89639],
  [40.05689, -82.89668],
  [40.056949, -82.897689],
  [40.05698, -82.89834],
  [40.057, -82.898669],
  [40.057019, -82.899079],
  [40.057039, -82.89956],
  [40.05707, -82.90014],
  [40.05708, -82.900329],
  [40.0571, -82.90072],
  [40.057129, -82.90136],
  [40.057209, -82.902629],
  [40.057229, -82.903029],
  [40.057239, -82.903259],
  [40.05726, -82.90364],
  [40.05728, -82.904289],
  [40.057299, -82.90459],
  [40.05734, -82.905429],
  [40.05745, -82.90567],
  [40.05755, -82.90721],
  [40.057569, -82.907589],
  [40.057599, -82.90811],
  [40.05762, -82.90842],
  [40.057649, -82.9091],
  [40.057669, -82.909439],
  [40.05772, -82.91044],
  [40.05816, -82.910409],
  [40.058229, -82.910409],
  [40.058309, -82.9104],
  [40.05861, -82.910379],
  [40.05887, -82.91036],
  [40.059109, -82.910339],
  [40.05927, -82.910329],
  [40.05943, -82.91031],
  [40.059829, -82.910279],
  [40.06016, -82.910249],
  [40.060379, -82.910189],
  [40.060469, -82.91017],
  [40.060739, -82.910139],
  [40.060839, -82.910139],
  [40.060839, -82.909979],
  [40.060919, -82.90994],
  [40.06096, -82.909869],
  [40.060979, -82.90963],
  [40.060929, -82.909029],
  [40.060829, -82.90877],
  [40.060719, -82.908849],
  [40.0607, -82.909029],
  [40.060719, -82.90946]
];

const stopNames = {
  "MAIBRICW": "E MAIN ST &amp; BRICE RD",
  "MAIMCNW": "E MAIN ST &amp; MCNAUGHTEN RD",
  "MAIMAIW": "E MAIN ST &amp; MAIN 270 CENTER",
  "TAYWESBN": "TAYLOR STATION RD &amp; WESTBOURNE AVE",
  "TAYOPPN": "TAYLOR STATION RD &amp; BELLTOWNE BLVD",
  "SCAALSE": "SCARBOROUGH BLVD &amp; ALSHIRE RD",
  "BRIEASN": "BRICE RD &amp; EASTGREEN BLVD",
  "BRILIVN": "BRICE RD &amp; LIVINGSTON AVE",
  "BRICENN": "BRICE RD &amp; CENTURY CITY S",
  "BRIROSLN": "BRICE RD &amp; ROSELAWN AVE",
  "BRIRYGN": "BRICE RD &amp; RYGATE DR",
  "BRICMN": "BRICE RD &amp; MAIN ST",
  "MORAPPW": "MORSE RD &amp; APPIAN WAY",
  "MORSTYW": "MORSE RD &amp; N STYGLER RD",
  "BROMCNW": "E BROAD ST &amp; MCNAUGHTEN RD",
  "TECMORW": "TECHCENTER DR &amp; MORRISON RD",
  "MORTAYNW": "MORRISON RD &amp; TAYLOR RD",
  "STE418N": "4180 STELZER RD",
  "CHANBRIW": "CHANTRY DR &amp; BRICE RD",
  "CHANMEIW": "CHANTRY DR AT 2ND SVC RD ENTRANCE",
  "CHANCHAW": "CHANTRY DR &amp; CHANTRY BLVD",
  "PARCCHAN": "PARK CRESCENT DR &amp; CHANTRY DR",
  "TECAEPW": "TECHCENTER DR &amp; AEP",
  "GENUPRN": "GENDER RD &amp; UPPERIDGE DR",
  "GENLEHN": "GENDER RD &amp; LEHMAN RD",
  "PACRALSN": "PARK CRESCENT DR &amp; ALSHIRE RD",
  "HAMROCN1": "HAMILTON RD &amp; ROCKY FORK BLVD",
  "MORHEMN": "MORRISON RD &amp; HEMSTON DR",
  "GENBRIN": "GENDER RD &amp; BRICE RD",
  "GENCENN": "GENDER RD &amp; CENTENIAL DR",
  "MCNCHEN": "MCNAUGHTEN &amp; CHERRY HILL DR",
  "MCNOLDN": "MCNAUGHTEN RD &amp; OLDE ORCHARD DR",
  "MCNBASN": "MCNAUGHTEN &amp; BASKERVILLE DR",
  "MCNBILLN": "MCNAUGHTEN RD &amp; BILLINGTON DR",
  "MCNKNIN": "MCNAUGHTEN RD &amp; KNIVERS EDGE WAY",
  "MCNGANN": "MCNAUGHTEN RD &amp; GANSE",
  "TAYGAHN": "TAYLOR STATION RD &amp; GAHANNA PKWY",
  "CLASCIW": "CLAYCRAFT RD &amp; SCIENCE BLVD",
  "790SCIN": "790 SCIENCE BLVD",
  "SCITECN": "SCIENCE BLVD &amp; TECH CENTER DR",
  "GRASHAW": "GRANVILLE ST &amp; N HAMILTON RD",
  "GRALINW": "GRANVILLE ST &amp; LINCOLN CIR",
  "GRASHIW": "GRANVILLE ST &amp; S HIGH ST",
  "US6OLDW": "US 62 &amp; OLD RIDENOUR RD",
  "NSTAGLN": "N STYGLER RD &amp; AGLER RD",
  "NSTDUNN": "N STYGLER RD &amp; DUNNCHURCH RD",
  "NSTCHAN": "N STYGLER RD &amp; CHAPELFIELD RD",
  "NSTMCCN": "N STYGLER RD &amp; MCCUTCHEON RD",
  "STYMCCN": "STYGLER RD &amp; MCCUTCHEON RD",
  "STYWOON": "STYGLER RD &amp; WOODMARK RUN",
  "STYFORN": "STYGLER RD &amp; FORESTWOOD DR",
  "STYRIDN": "STYGLER RD &amp; RIDENOUR RD",
  "5677ALE": "5677 ALSHIRE RD",
  "STEMORN1": "STELZER RD &amp; MORSE RD",
  "298HAMN": "298 HAMILTON RD",
  "TAYBRON1": "TAYLOR STATION RD &amp; E BROAD ST",
  "EASTER4": "EASTON TERMINAL BAY 4",
  "CLATAYW": "CLAYCRAFT RD &amp; TAYLOR STATION RD",
  "CANWIPR": "CANAL WINCHESTER PARK &amp; RIDE",
  "GENGENN": "GENDER RD &amp; GENDER PARK BLVD",
  "GENPFEN": "GENDER RD &amp; PFEIFER ASH DR",
  "GENNOTN": "GENDER RD &amp; NOTTINGHILL TRAIL DR",
  "GENSHAN": "GENDER RD &amp; SHANNON RD",
  "GENABBN": "GENDER RD &amp; ABBIE TRAILS DR"
};

const stops = [
  { stop_id: "CANWIPR", name: "CANAL WINCHESTER PARK &amp; RIDE", lat: 39.860402, lon: -82.825778, times: ["9:01 AM"] },
  { stop_id: "GENLEHN", name: "GENDER RD &amp; LEHMAN RD", lat: 39.869352, lon: -82.826716, times: ["9:02 AM"] },
  { stop_id: "GENGENN", name: "GENDER RD &amp; GENDER PARK BLVD", lat: 39.875748, lon: -82.826196, times: ["9:03 AM"] },
  { stop_id: "GENPFEN", name: "GENDER RD &amp; PFEIFER ASH DR", lat: 39.879, lon: -82.825889, times: ["9:03 AM"] },
  { stop_id: "GENNOTN", name: "GENDER RD &amp; NOTTINGHILL TRAIL DR", lat: 39.88223, lon: -82.825629, times: ["9:04 AM"] },
  { stop_id: "GENSHAN", name: "GENDER RD &amp; SHANNON RD", lat: 39.892194, lon: -82.824713, times: ["9:05 AM"] },
  { stop_id: "GENABBN", name: "GENDER RD &amp; ABBIE TRAILS DR", lat: 39.902262, lon: -82.824854, times: ["9:07 AM"] },
  { stop_id: "GENUPRN", name: "GENDER RD &amp; UPPERIDGE DR", lat: 39.908394, lon: -82.824279, times: ["9:08 AM"] },
  { stop_id: "GENCENN", name: "GENDER RD &amp; CENTENIAL DR", lat: 39.920096, lon: -82.825538, times: ["9:10 AM"] },
  { stop_id: "GENBRIN", name: "GENDER RD &amp; BRICE RD", lat: 39.923176, lon: -82.829279, times: ["9:11 AM"] },
  { stop_id: "CHANBRIW", name: "CHANTRY DR &amp; BRICE RD", lat: 39.92451, lon: -82.8322, times: ["9:12 AM"] },
  { stop_id: "CHANMEIW", name: "CHANTRY DR AT 2ND SVC RD ENTRANCE", lat: 39.924632, lon: -82.835145, times: ["9:13 AM"] },
  { stop_id: "CHANCHAW", name: "CHANTRY DR &amp; CHANTRY BLVD", lat: 39.924928, lon: -82.840296, times: ["9:14 AM"] },
  { stop_id: "PARCCHAN", name: "PARK CRESCENT DR &amp; CHANTRY DR", lat: 39.926801, lon: -82.844298, times: ["9:15 AM"] },
  { stop_id: "PACRALSN", name: "PARK CRESCENT DR &amp; ALSHIRE RD", lat: 39.929435, lon: -82.842238, times: ["9:16 AM"] },
  { stop_id: "5677ALE", name: "5677 ALSHIRE RD", lat: 39.92915, lon: -82.838645, times: ["9:16 AM"] },
  { stop_id: "SCAALSE", name: "SCARBOROUGH BLVD &amp; ALSHIRE RD", lat: 39.929004, lon: -82.83437, times: ["9:17 AM"] },
  { stop_id: "BRIEASN", name: "BRICE RD &amp; EASTGREEN BLVD", lat: 39.938808, lon: -82.830066, times: ["9:21 AM"] },
  { stop_id: "BRILIVN", name: "BRICE RD &amp; LIVINGSTON AVE", lat: 39.942561, lon: -82.829739, times: ["9:23 AM"] },
  { stop_id: "BRICENN", name: "BRICE RD &amp; CENTURY CITY S", lat: 39.944673, lon: -82.829543, times: ["9:23 AM"] },
  { stop_id: "BRIROSLN", name: "BRICE RD &amp; ROSELAWN AVE", lat: 39.946411, lon: -82.829386, times: ["9:24 AM"] },
  { stop_id: "BRIRYGN", name: "BRICE RD &amp; RYGATE DR", lat: 39.950372, lon: -82.82901, times: ["9:25 AM"] },
  { stop_id: "BRICMN", name: "BRICE RD &amp; MAIN ST", lat: 39.953092, lon: -82.828763, times: ["9:25 AM"] },
  { stop_id: "MAIBRICW", name: "E MAIN ST &amp; BRICE RD", lat: 39.954886, lon: -82.829671, times: ["9:26 AM"] },
  { stop_id: "MAIMAIW", name: "E MAIN ST &amp; MAIN 270 CENTER", lat: 39.954861, lon: -82.835095, times: ["9:27 AM"] },
  { stop_id: "MAIMCNW", name: "E MAIN ST &amp; MCNAUGHTEN RD", lat: 39.954865, lon: -82.837129, times: ["9:28 AM"] },
  { stop_id: "MCNCHEN", name: "MCNAUGHTEN &amp; CHERRY HILL DR", lat: 39.959127, lon: -82.837966, times: ["9:29 AM"] },
  { stop_id: "MCNOLDN", name: "MCNAUGHTEN RD &amp; OLDE ORCHARD DR", lat: 39.963456, lon: -82.837587, times: ["9:30 AM"] },
  { stop_id: "MCNBASN", name: "MCNAUGHTEN &amp; BASKERVILLE DR", lat: 39.966374, lon: -82.837314, times: ["9:30 AM"] },
  { stop_id: "MCNBILLN", name: "MCNAUGHTEN RD &amp; BILLINGTON DR", lat: 39.969266, lon: -82.837018, times: ["9:31 AM"] },
  { stop_id: "MCNKNIN", name: "MCNAUGHTEN RD &amp; KNIVERS EDGE WAY", lat: 39.972898, lon: -82.836698, times: ["9:32 AM"] },
  { stop_id: "MCNGANN", name: "MCNAUGHTEN RD &amp; GANSE", lat: 39.97745, lon: -82.836306, times: ["9:33 AM"] },
  { stop_id: "BROMCNW", name: "E BROAD ST &amp; MCNAUGHTEN RD", lat: 39.980259, lon: -82.83711, times: ["9:33 AM"] },
  { stop_id: "TAYBRON1", name: "TAYLOR STATION RD &amp; E BROAD ST", lat: 39.979929, lon: -82.843356, times: ["9:35 AM"] },
  { stop_id: "TAYWESBN", name: "TAYLOR STATION RD &amp; WESTBOURNE AVE", lat: 39.98361, lon: -82.843115, times: ["9:35 AM"] },
  { stop_id: "TAYOPPN", name: "TAYLOR STATION RD &amp; BELLTOWNE BLVD", lat: 39.985355, lon: -82.842963, times: ["9:36 AM"] },
  { stop_id: "TAYGAHN", name: "TAYLOR STATION RD &amp; GAHANNA PKWY", lat: 39.990311, lon: -82.841441, times: ["9:37 AM"] },
  { stop_id: "CLATAYW", name: "CLAYCRAFT RD &amp; TAYLOR STATION RD", lat: 39.992556, lon: -82.840393, times: ["9:37 AM"] },
  { stop_id: "CLASCIW", name: "CLAYCRAFT RD &amp; SCIENCE BLVD", lat: 39.992766, lon: -82.844134, times: ["9:38 AM"] },
  { stop_id: "790SCIN", name: "790 SCIENCE BLVD", lat: 39.996488, lon: -82.843247, times: ["9:39 AM"] },
  { stop_id: "SCITECN", name: "SCIENCE BLVD &amp; TECH CENTER DR", lat: 39.999362, lon: -82.843128, times: ["9:40 AM"] },
  { stop_id: "TECAEPW", name: "TECHCENTER DR &amp; AEP", lat: 39.999917, lon: -82.852721, times: ["9:41 AM"] },
  { stop_id: "TECMORW", name: "TECHCENTER DR &amp; MORRISON RD", lat: 40.000256, lon: -82.856797, times: ["9:42 AM"] },
  { stop_id: "MORTAYNW", name: "MORRISON RD &amp; TAYLOR RD", lat: 40.003532, lon: -82.861858, times: ["9:44 AM"] },
  { stop_id: "MORHEMN", name: "MORRISON RD &amp; HEMSTON DR", lat: 40.008752, lon: -82.864895, times: ["9:45 AM"] },
  { stop_id: "298HAMN", name: "298 HAMILTON RD", lat: 40.010991, lon: -82.867038, times: ["9:46 AM"] },
  { stop_id: "HAMROCN1", name: "HAMILTON RD &amp; ROCKY FORK BLVD", lat: 40.013312, lon: -82.866801, times: ["9:47 AM"] },
  { stop_id: "GRASHAW", name: "GRANVILLE ST &amp; N HAMILTON RD", lat: 40.018409, lon: -82.866668, times: ["9:48 AM"] },
  { stop_id: "GRALINW", name: "GRANVILLE ST &amp; LINCOLN CIR", lat: 40.018659, lon: -82.872886, times: ["9:49 AM"] },
  { stop_id: "GRASHIW", name: "GRANVILLE ST &amp; S HIGH ST", lat: 40.018846, lon: -82.877436, times: ["9:50 AM"] },
  { stop_id: "US6OLDW", name: "US 62 &amp; OLD RIDENOUR RD", lat: 40.018934, lon: -82.882543, times: ["9:51 AM"] },
  { stop_id: "NSTAGLN", name: "N STYGLER RD &amp; AGLER RD", lat: 40.019424, lon: -82.890474, times: ["9:01 AM"] },
  { stop_id: "NSTDUNN", name: "N STYGLER RD &amp; DUNNCHURCH RD", lat: 40.022726, lon: -82.890203, times: ["9:01 AM"] },
  { stop_id: "NSTCHAN", name: "N STYGLER RD &amp; CHAPELFIELD RD", lat: 40.026795, lon: -82.889871, times: ["9:02 AM"] },
  { stop_id: "NSTMCCN", name: "N STYGLER RD &amp; MCCUTCHEON RD", lat: 40.029717, lon: -82.889608, times: ["9:02 AM"] },
  { stop_id: "STYMCCN", name: "STYGLER RD &amp; MCCUTCHEON RD", lat: 40.032859, lon: -82.889331, times: ["9:03 AM"] },
  { stop_id: "STYWOON", name: "STYGLER RD &amp; WOODMARK RUN", lat: 40.037533, lon: -82.888909, times: ["9:04 AM"] },
  { stop_id: "STYFORN", name: "STYGLER RD &amp; FORESTWOOD DR", lat: 40.041356, lon: -82.888555, times: ["9:04 AM"] },
  { stop_id: "STYRIDN", name: "STYGLER RD &amp; RIDENOUR RD", lat: 40.044397, lon: -82.888227, times: ["9:05 AM"] },
  { stop_id: "MORSTYW", name: "MORSE RD &amp; N STYGLER RD", lat: 40.056689, lon: -82.890737, times: ["9:07 AM"] },
  { stop_id: "MORAPPW", name: "MORSE RD &amp; APPIAN WAY", lat: 40.057098, lon: -82.898194, times: ["9:08 AM"] },
  { stop_id: "STEMORN1", name: "STELZER RD &amp; MORSE RD", lat: 40.058409, lon: -82.910245, times: ["9:10 AM"] },
  { stop_id: "STE418N", name: "4180 STELZER RD", lat: 40.05963, lon: -82.910153, times: ["9:10 AM"] },
  { stop_id: "EASTER4", name: "EASTON TERMINAL BAY 4", lat: 40.060719, lon: -82.909141, times: ["9:11 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  üì¢ We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>