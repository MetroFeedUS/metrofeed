<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 73 – DUBLIN | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 73 – DUBLIN</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 73;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [39.95757, -82.99901],
  [39.956249, -82.998749],
  [39.95627, -82.998569],
  [39.95629, -82.99838],
  [39.956309, -82.998179],
  [39.956329, -82.998029],
  [39.95638, -82.997579],
  [39.95639, -82.99751],
  [39.956399, -82.997359],
  [39.95646, -82.996819],
  [39.956499, -82.996459],
  [39.95656, -82.99594],
  [39.95666, -82.995069],
  [39.957319, -82.995189],
  [39.95799, -82.99532],
  [39.958859, -82.995509],
  [39.958939, -82.99553],
  [39.959299, -82.995599],
  [39.959999, -82.995729],
  [39.960659, -82.995869],
  [39.961269, -82.99598],
  [39.96131, -82.99599],
  [39.96141, -82.996009],
  [39.96168, -82.996059],
  [39.96178, -82.99608],
  [39.962009, -82.99613],
  [39.962719, -82.996229],
  [39.96297, -82.996279],
  [39.963439, -82.996369],
  [39.96413, -82.996499],
  [39.964779, -82.99661],
  [39.965499, -82.996739],
  [39.965849, -82.996809],
  [39.966, -82.99684],
  [39.96611, -82.996859],
  [39.966319, -82.996899],
  [39.966489, -82.99693],
  [39.96654, -82.99694],
  [39.966779, -82.996989],
  [39.966759, -82.997309],
  [39.96673, -82.99751],
  [39.966679, -82.997899],
  [39.96665, -82.998169],
  [39.966589, -82.99877],
  [39.96656, -82.99909],
  [39.966509, -82.99953],
  [39.96644, -83.000189],
  [39.966399, -83.00052],
  [39.966339, -83.001009],
  [39.96629, -83.00142],
  [39.96617, -83.00233],
  [39.966139, -83.00259],
  [39.966069, -83.00324],
  [39.965979, -83.004059],
  [39.965879, -83.004919],
  [39.965769, -83.005809],
  [39.96573, -83.006169],
  [39.96573, -83.00643],
  [39.96573, -83.006619],
  [39.96574, -83.00675],
  [39.96575, -83.00688],
  [39.965759, -83.006989],
  [39.965769, -83.007389],
  [39.965779, -83.007609],
  [39.965789, -83.007799],
  [39.96581, -83.00841],
  [39.96582, -83.008739],
  [39.96584, -83.009099],
  [39.965849, -83.00948],
  [39.965859, -83.009769],
  [39.965889, -83.01039],
  [39.96591, -83.011039],
  [39.96592, -83.01124],
  [39.965969, -83.012429],
  [39.96602, -83.013609],
  [39.96603, -83.01389],
  [39.966049, -83.014099],
  [39.966059, -83.014279],
  [39.96609, -83.01484],
  [39.96611, -83.01525],
  [39.9661, -83.01597],
  [39.9661, -83.016129],
  [39.9661, -83.016249],
  [39.96612, -83.016519],
  [39.96612, -83.01678],
  [39.96612, -83.01705],
  [39.96608, -83.01763],
  [39.966069, -83.01773],
  [39.96602, -83.018499],
  [39.96599, -83.01902],
  [39.965979, -83.019179],
  [39.965979, -83.01933],
  [39.965969, -83.0196],
  [39.965979, -83.019819],
  [39.965979, -83.020039],
  [39.965979, -83.020569],
  [39.966, -83.020929],
  [39.96602, -83.021109],
  [39.966069, -83.02146],
  [39.96619, -83.02199],
  [39.966339, -83.022459],
  [39.96647, -83.022819],
  [39.966579, -83.02308],
  [39.966769, -83.023499],
  [39.96699, -83.02388],
  [39.96707, -83.02406],
  [39.967149, -83.024279],
  [39.96719, -83.024439],
  [39.967239, -83.02461],
  [39.967319, -83.024939],
  [39.96734, -83.025209],
  [39.967389, -83.025709],
  [39.96737, -83.026239],
  [39.967299, -83.02686],
  [39.967209, -83.02757],
  [39.96716, -83.02817],
  [39.96716, -83.02829],
  [39.96716, -83.028589],
  [39.96718, -83.02905],
  [39.9672, -83.029309],
  [39.96725, -83.02988],
  [39.96735, -83.030879],
  [39.967389, -83.031239],
  [39.967409, -83.03136],
  [39.96746, -83.03176],
  [39.96754, -83.03226],
  [39.96763, -83.03266],
  [39.96774, -83.033039],
  [39.96791, -83.033459],
  [39.96807, -83.03384],
  [39.968199, -83.034079],
  [39.96836, -83.034349],
  [39.9687, -83.034849],
  [39.96878, -83.034979],
  [39.969089, -83.035429],
  [39.96926, -83.03571],
  [39.969399, -83.035959],
  [39.96944, -83.03603],
  [39.969569, -83.03631],
  [39.969759, -83.03672],
  [39.969899, -83.03703],
  [39.97062, -83.038889],
  [39.97103, -83.039979],
  [39.97121, -83.040469],
  [39.97139, -83.040969],
  [39.9715, -83.04126],
  [39.971639, -83.041639],
  [39.971709, -83.041829],
  [39.97175, -83.041949],
  [39.97177, -83.04202],
  [39.97184, -83.042229],
  [39.971979, -83.04265],
  [39.971999, -83.042709],
  [39.97206, -83.04287],
  [39.972349, -83.043709],
  [39.9725, -83.044209],
  [39.972529, -83.044299],
  [39.972609, -83.044559],
  [39.97274, -83.04498],
  [39.972799, -83.04518],
  [39.972969, -83.045739],
  [39.9731, -83.046179],
  [39.973179, -83.04643],
  [39.973259, -83.04671],
  [39.9733, -83.04684],
  [39.973409, -83.0472],
  [39.973449, -83.04734],
  [39.973509, -83.04756],
  [39.973589, -83.04782],
  [39.973609, -83.04788],
  [39.973779, -83.04846],
  [39.97382, -83.0486],
  [39.973869, -83.048749],
  [39.973989, -83.04922],
  [39.974, -83.04926],
  [39.97402, -83.049329],
  [39.974079, -83.049559],
  [39.97411, -83.04968],
  [39.9742, -83.050109],
  [39.974229, -83.05025],
  [39.97429, -83.05058],
  [39.974339, -83.05085],
  [39.974499, -83.051679],
  [39.97464, -83.052439],
  [39.97474, -83.052969],
  [39.97483, -83.053469],
  [39.97494, -83.05408],
  [39.97502, -83.05449],
  [39.975039, -83.05458],
  [39.975069, -83.05476],
  [39.975159, -83.05524],
  [39.97518, -83.05535],
  [39.9752, -83.055449],
  [39.97529, -83.055899],
  [39.975339, -83.05615],
  [39.975429, -83.05664],
  [39.97546, -83.05678],
  [39.97547, -83.05683],
  [39.975589, -83.057299],
  [39.97564, -83.057519],
  [39.9758, -83.05796],
  [39.975869, -83.058159],
  [39.975949, -83.05835],
  [39.97601, -83.058479],
  [39.97611, -83.05872],
  [39.976229, -83.05895],
  [39.976239, -83.058969],
  [39.976399, -83.059289],
  [39.976599, -83.05962],
  [39.976659, -83.059689],
  [39.97697, -83.06011],
  [39.97708, -83.060269],
  [39.97719, -83.060409],
  [39.977319, -83.060579],
  [39.97736, -83.060619],
  [39.97744, -83.0607],
  [39.977569, -83.060849],
  [39.977939, -83.061219],
  [39.97824, -83.061479],
  [39.978359, -83.06156],
  [39.978479, -83.06163],
  [39.978559, -83.06168],
  [39.978719, -83.061789],
  [39.97931, -83.06214],
  [39.98025, -83.06264],
  [39.98034, -83.062689],
  [39.980709, -83.06289],
  [39.98095, -83.063009],
  [39.9812, -83.06316],
  [39.98149, -83.063329],
  [39.981879, -83.06354],
  [39.981909, -83.063559],
  [39.982679, -83.06397],
  [39.98276, -83.064009],
  [39.98302, -83.06415],
  [39.98383, -83.06457],
  [39.983859, -83.064589],
  [39.984149, -83.06475],
  [39.984499, -83.06493],
  [39.984869, -83.065119],
  [39.98491, -83.06514],
  [39.98527, -83.065309],
  [39.98547, -83.06541],
  [39.98572, -83.065529],
  [39.985849, -83.065579],
  [39.985939, -83.065619],
  [39.98606, -83.065669],
  [39.986319, -83.06578],
  [39.98715, -83.066119],
  [39.987489, -83.066249],
  [39.9878, -83.06637],
  [39.98831, -83.066559],
  [39.98896, -83.066759],
  [39.989379, -83.066889],
  [39.98968, -83.06699],
  [39.98994, -83.06709],
  [39.9902, -83.06723],
  [39.99048, -83.0674],
  [39.991269, -83.0679],
  [39.991809, -83.068239],
  [39.992329, -83.068599],
  [39.99257, -83.068769],
  [39.992789, -83.068919],
  [39.993319, -83.0693],
  [39.99374, -83.069769],
  [39.99391, -83.06996],
  [39.994, -83.070069],
  [39.99488, -83.07123],
  [39.99506, -83.071469],
  [39.99544, -83.07199],
  [39.995469, -83.07203],
  [39.995659, -83.072289],
  [39.9959, -83.072599],
  [39.996179, -83.07294],
  [39.99626, -83.07303],
  [39.99653, -83.073309],
  [39.996629, -83.07342],
  [39.996849, -83.07365],
  [39.9969, -83.0737],
  [39.99716, -83.073939],
  [39.99753, -83.07429],
  [39.9977, -83.074449],
  [39.99795, -83.07469],
  [39.998009, -83.07474],
  [39.99814, -83.074859],
  [39.99831, -83.075019],
  [39.99841, -83.075109],
  [39.998539, -83.07524],
  [39.998619, -83.075309],
  [39.99878, -83.07546],
  [39.999189, -83.075839],
  [39.999639, -83.076249],
  [39.99977, -83.076369],
  [39.999869, -83.076459],
  [39.99994, -83.07653],
  [40.00046, -83.077009],
  [40.00064, -83.077179],
  [40.000869, -83.07739],
  [40.001049, -83.077549],
  [40.00245, -83.07878],
  [40.002949, -83.07923],
  [40.003239, -83.07947],
  [40.003959, -83.08008],
  [40.00434, -83.08041],
  [40.004589, -83.08062],
  [40.004729, -83.080739],
  [40.004849, -83.08085],
  [40.005219, -83.08118],
  [40.00544, -83.08139],
  [40.00572, -83.08171],
  [40.005759, -83.08176],
  [40.006099, -83.082279],
  [40.006909, -83.083719],
  [40.007009, -83.08391],
  [40.007109, -83.084039],
  [40.007529, -83.084849],
  [40.00778, -83.085289],
  [40.007979, -83.08563],
  [40.008349, -83.086139],
  [40.00858, -83.0864],
  [40.008789, -83.086559],
  [40.009269, -83.086899],
  [40.009589, -83.087079],
  [40.01084, -83.08779],
  [40.01129, -83.08805],
  [40.011599, -83.088219],
  [40.011939, -83.0885],
  [40.012209, -83.08874],
  [40.012509, -83.089069],
  [40.012949, -83.0895],
  [40.01336, -83.08985],
  [40.01361, -83.09],
  [40.013929, -83.09017],
  [40.014279, -83.090329],
  [40.014739, -83.09053],
  [40.015019, -83.09062],
  [40.01524, -83.090689],
  [40.01535, -83.0907],
  [40.01541, -83.09071],
  [40.015459, -83.09072],
  [40.01579, -83.090769],
  [40.01623, -83.090829],
  [40.01634, -83.09084],
  [40.0166, -83.090869],
  [40.016729, -83.0909],
  [40.016829, -83.09093],
  [40.016999, -83.09099],
  [40.01705, -83.091009],
  [40.01711, -83.091039],
  [40.01741, -83.09117],
  [40.01748, -83.0912],
  [40.017519, -83.091219],
  [40.017539, -83.091229],
  [40.017689, -83.0913],
  [40.018319, -83.091579],
  [40.018809, -83.091809],
  [40.019079, -83.09193],
  [40.01921, -83.091989],
  [40.01957, -83.09216],
  [40.01975, -83.092219],
  [40.01994, -83.092269],
  [40.02021, -83.09229],
  [40.020399, -83.092299],
  [40.020789, -83.092269],
  [40.02083, -83.092269],
  [40.02119, -83.09224],
  [40.022479, -83.092119],
  [40.02288, -83.092039],
  [40.02359, -83.09187],
  [40.02363, -83.091859],
  [40.02386, -83.091809],
  [40.02395, -83.09179],
  [40.0244, -83.091679],
  [40.025019, -83.09153],
  [40.02533, -83.091449],
  [40.02559, -83.09139],
  [40.026009, -83.09129],
  [40.026259, -83.09124],
  [40.026359, -83.091229],
  [40.026539, -83.091219],
  [40.02665, -83.09121],
  [40.026809, -83.0912],
  [40.026869, -83.09121],
  [40.02704, -83.091229],
  [40.0271, -83.09124],
  [40.02713, -83.09124],
  [40.02737, -83.0913],
  [40.027599, -83.091369],
  [40.028049, -83.091489],
  [40.02811, -83.09151],
  [40.028409, -83.091589],
  [40.02858, -83.091639],
  [40.029129, -83.0918],
  [40.02928, -83.09184],
  [40.029419, -83.09188],
  [40.030029, -83.09205],
  [40.03053, -83.09216],
  [40.0307, -83.0922],
  [40.03097, -83.092259],
  [40.03099, -83.092259],
  [40.03106, -83.09228],
  [40.031209, -83.092309],
  [40.031479, -83.09234],
  [40.032129, -83.092439],
  [40.03403, -83.092799],
  [40.034969, -83.093],
  [40.03593, -83.09319],
  [40.036449, -83.093289],
  [40.03692, -83.093399],
  [40.039059, -83.093879],
  [40.039389, -83.09395],
  [40.0409, -83.094289],
  [40.04163, -83.09445],
  [40.04187, -83.0945],
  [40.042119, -83.09454],
  [40.04235, -83.094569],
  [40.042569, -83.09459],
  [40.04287, -83.09459],
  [40.0434, -83.094559],
  [40.04384, -83.09453],
  [40.043979, -83.094519],
  [40.044519, -83.094509],
  [40.044969, -83.094519],
  [40.04532, -83.094569],
  [40.046509, -83.0948],
  [40.047059, -83.0949],
  [40.047879, -83.095049],
  [40.048139, -83.095089],
  [40.04836, -83.09513],
  [40.049139, -83.09525],
  [40.04971, -83.09534],
  [40.050559, -83.09548],
  [40.051299, -83.095599],
  [40.052179, -83.095769],
  [40.05266, -83.095859],
  [40.05303, -83.09594],
  [40.05322, -83.09601],
  [40.053439, -83.0961],
  [40.053609, -83.096179],
  [40.05383, -83.0963],
  [40.05423, -83.096579],
  [40.05475, -83.097],
  [40.055709, -83.0979],
  [40.055859, -83.098029],
  [40.056339, -83.098479],
  [40.057109, -83.09926],
  [40.058119, -83.100269],
  [40.05878, -83.10093],
  [40.05915, -83.10128],
  [40.05925, -83.10137],
  [40.059559, -83.10164],
  [40.059819, -83.101809],
  [40.059839, -83.10182],
  [40.060199, -83.102069],
  [40.06076, -83.102429],
  [40.060899, -83.102519],
  [40.0614, -83.10277],
  [40.061699, -83.103],
  [40.061889, -83.103099],
  [40.06221, -83.10326],
  [40.062279, -83.103299],
  [40.062719, -83.10353],
  [40.06322, -83.103749],
  [40.063419, -83.103819],
  [40.063629, -83.1039],
  [40.063989, -83.10403],
  [40.064429, -83.104189],
  [40.064879, -83.104329],
  [40.06537, -83.10449],
  [40.065789, -83.104589],
  [40.065969, -83.104629],
  [40.06616, -83.104679],
  [40.066299, -83.10471],
  [40.06679, -83.10483],
  [40.066839, -83.10484],
  [40.06709, -83.10489],
  [40.067379, -83.10494],
  [40.0678, -83.10502],
  [40.06805, -83.10507],
  [40.06824, -83.105139],
  [40.068379, -83.1052],
  [40.06887, -83.10543],
  [40.06907, -83.10552],
  [40.06916, -83.10556],
  [40.069279, -83.10561],
  [40.069459, -83.10569],
  [40.06961, -83.105759],
  [40.06976, -83.10583],
  [40.069809, -83.105859],
  [40.070099, -83.10601],
  [40.070719, -83.10633],
  [40.07094, -83.106439],
  [40.072329, -83.107149],
  [40.07277, -83.10737],
  [40.07293, -83.10745],
  [40.07372, -83.107839],
  [40.07401, -83.10798],
  [40.074119, -83.108019],
  [40.074249, -83.108059],
  [40.074669, -83.10826],
  [40.074869, -83.108329],
  [40.075149, -83.108419],
  [40.07598, -83.10866],
  [40.07633, -83.10876],
  [40.07745, -83.10906],
  [40.078199, -83.10926],
  [40.07877, -83.109409],
  [40.07921, -83.10952],
  [40.080899, -83.109949],
  [40.08122, -83.110029],
  [40.082599, -83.110319],
  [40.08291, -83.11038],
  [40.083339, -83.110399],
  [40.083929, -83.110349],
  [40.08452, -83.110229],
  [40.085019, -83.11015],
  [40.08553, -83.11007],
  [40.086009, -83.109989],
  [40.08627, -83.109939],
  [40.087479, -83.10974],
  [40.08777, -83.10969],
  [40.088269, -83.10961],
  [40.088619, -83.109549],
  [40.088699, -83.10953],
  [40.08911, -83.109449],
  [40.089369, -83.10939],
  [40.08976, -83.109279],
  [40.090079, -83.109189],
  [40.09029, -83.10912],
  [40.090539, -83.109039],
  [40.09073, -83.10898],
  [40.091049, -83.108859],
  [40.091329, -83.10876],
  [40.09147, -83.10871],
  [40.092129, -83.108469],
  [40.092249, -83.10843],
  [40.09237, -83.10839],
  [40.092669, -83.1083],
  [40.093209, -83.108199],
  [40.093659, -83.10816],
  [40.093779, -83.108149],
  [40.094219, -83.10813],
  [40.09428, -83.10813],
  [40.0949, -83.108109],
  [40.095099, -83.108109],
  [40.09552, -83.108139],
  [40.095999, -83.10825],
  [40.096269, -83.10831],
  [40.096649, -83.1084],
  [40.09695, -83.108469],
  [40.097339, -83.10861],
  [40.097439, -83.108639],
  [40.09748, -83.10866],
  [40.097799, -83.108779],
  [40.097979, -83.108869],
  [40.098529, -83.109089],
  [40.09876, -83.10916],
  [40.09893, -83.109219],
  [40.0991, -83.109229],
  [40.099159, -83.109219],
  [40.09922, -83.1092],
  [40.09928, -83.10916],
  [40.099329, -83.109099],
  [40.09938, -83.10902],
  [40.099429, -83.108909],
  [40.09947, -83.1088],
  [40.099509, -83.10844],
  [40.09958, -83.10807],
  [40.09957, -83.107839],
  [40.09956, -83.10754],
  [40.09955, -83.107109],
  [40.099989, -83.10709],
  [40.100059, -83.10709],
  [40.10075, -83.107059],
  [40.100879, -83.107059],
  [40.101119, -83.107059],
  [40.10118, -83.107069],
  [40.101249, -83.10709],
  [40.10145, -83.10717]
];

const stopNames = {
  "SOUTER9": "COTA TRANSIT TERMINAL BAY 9",
  "4THTOWN": "S 4TH ST &amp; E TOWN ST",
  "SPRFROW": "W SPRING ST &amp; N FRONT ST",
  "SPRMARW": "W SPRING ST &amp; MARCONI BLVD",
  "FRA161N": "FRANTZ RD &amp; W BRIDGE ST",
  "BLA515E": "5151 BLAZER PKWY",
  "BLA505E": "5050 BLAZER PKWY",
  "FRAMONN": "FRANTZ RD &amp; MONTEREY DR",
  "RIVNOTN": "RIVERSIDE DR &amp; NOTTINGHAM RD",
  "EMESTEN": "EMERALD PKWY &amp; STERLING COMMERCE",
  "EMEGLEN": "EMERALD PKWY &amp; GLENDON CT",
  "4THATHN": "N 4TH ST &amp; E GAY ST",
  "METUMETW": "METRO PL N &amp; UPPER METRO PL",
  "METCRPW": "METRO PL N &amp; CROWN PLAZA",
  "METS565S": "565 METRO PL S",
  "METS495E": "495 METRO PL S",
  "SPR4THW": "E SPRING ST &amp; N 4TH ST",
  "MET485E": "485 METRO PL S",
  "4THCAPN": "S 4TH ST &amp; E CAPITAL ST",
  "DALDUBN": "DUBLIN DALE DR PARK &amp; RIDE",
  "PBLAZACE": "PAUL G BLAZER &amp; ASHLAND CHEMICAL",
  "181WBRE": "181 W BRIDGE ST",
  "BRICORE": "W BRIDGE ST &amp; CORBIN MILL DR",
  "BRIHIGE": "E BRIDGE ST &amp; N HIGH ST",
  "BLARINN1": "BLAZER PKWY &amp; RINGS RD",
  "WOEEMEE": "WOERNER TEMPLE RD &amp; EMERALD PKWY"
};

const stops = [
  { stop_id: "SOUTER9", name: "COTA TRANSIT TERMINAL BAY 9", lat: 39.956477, lon: -82.998817, times: ["3:52 PM"] },
  { stop_id: "4THTOWN", name: "S 4TH ST &amp; E TOWN ST", lat: 39.958965, lon: -82.995424, times: ["3:55 PM"] },
  { stop_id: "4THCAPN", name: "S 4TH ST &amp; E CAPITAL ST", lat: 39.961951, lon: -82.995987, times: ["3:57 PM"] },
  { stop_id: "4THATHN", name: "N 4TH ST &amp; E GAY ST", lat: 39.963808, lon: -82.996336, times: ["3:57 PM"] },
  { stop_id: "SPR4THW", name: "E SPRING ST &amp; N 4TH ST", lat: 39.966769, lon: -82.997738, times: ["3:59 PM"] },
  { stop_id: "SPRFROW", name: "W SPRING ST &amp; N FRONT ST", lat: 39.966198, lon: -83.002659, times: ["4:01 PM"] },
  { stop_id: "SPRMARW", name: "W SPRING ST &amp; MARCONI BLVD", lat: 39.965979, lon: -83.004621, times: ["4:02 PM"] },
  { stop_id: "RIVNOTN", name: "RIVERSIDE DR &amp; NOTTINGHAM RD", lat: 40.02633, lon: -83.09106, times: ["4:15 PM"] },
  { stop_id: "DALDUBN", name: "DUBLIN DALE DR PARK &amp; RIDE", lat: 40.101557, lon: -83.107152, times: ["4:27 PM"] },
  { stop_id: "EMESTEN", name: "EMERALD PKWY &amp; STERLING COMMERCE", lat: 40.076191, lon: -83.140366, times: ["7:57 AM"] },
  { stop_id: "EMEGLEN", name: "EMERALD PKWY &amp; GLENDON CT", lat: 40.080109, lon: -83.141489, times: ["7:57 AM"] },
  { stop_id: "WOEEMEE", name: "WOERNER TEMPLE RD &amp; EMERALD PKWY", lat: 40.084421, lon: -83.142797, times: ["7:58 AM"] },
  { stop_id: "BLARINN1", name: "BLAZER PKWY &amp; RINGS RD", lat: 40.084421, lon: -83.130424, times: ["7:59 AM"] },
  { stop_id: "PBLAZACE", name: "PAUL G BLAZER &amp; ASHLAND CHEMICAL", lat: 40.088942, lon: -83.132456, times: ["8:00 AM"] },
  { stop_id: "BLA515E", name: "5151 BLAZER PKWY", lat: 40.089732, lon: -83.130609, times: ["8:00 AM"] },
  { stop_id: "BLA505E", name: "5050 BLAZER PKWY", lat: 40.088194, lon: -83.12603, times: ["8:00 AM"] },
  { stop_id: "FRAMONN", name: "FRANTZ RD &amp; MONTEREY DR", lat: 40.090515, lon: -83.12395, times: ["8:01 AM"] },
  { stop_id: "METUMETW", name: "METRO PL N &amp; UPPER METRO PL", lat: 40.095976, lon: -83.128721, times: ["8:03 AM"] },
  { stop_id: "METCRPW", name: "METRO PL N &amp; CROWN PLAZA", lat: 40.096114, lon: -83.132086, times: ["8:03 AM"] },
  { stop_id: "METS565S", name: "565 METRO PL S", lat: 40.095083, lon: -83.133166, times: ["8:03 AM"] },
  { stop_id: "METS495E", name: "495 METRO PL S", lat: 40.093614, lon: -83.132103, times: ["8:04 AM"] },
  { stop_id: "MET485E", name: "485 METRO PL S", lat: 40.093365, lon: -83.129031, times: ["8:04 AM"] },
  { stop_id: "FRA161N", name: "FRANTZ RD &amp; W BRIDGE ST", lat: 40.098416, lon: -83.124572, times: ["8:06 AM"] },
  { stop_id: "BRICORE", name: "W BRIDGE ST &amp; CORBIN MILL DR", lat: 40.099107, lon: -83.120338, times: ["8:07 AM"] },
  { stop_id: "181WBRE", name: "181 W BRIDGE ST", lat: 40.099178, lon: -83.117455, times: ["8:08 AM"] },
  { stop_id: "BRIHIGE", name: "E BRIDGE ST &amp; N HIGH ST", lat: 40.099523, lon: -83.113417, times: ["8:09 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>