<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 35 ‚Äì DUBLIN-GRANVILLE | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder ‚Äî 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ‚ö†Ô∏è This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">‚¨Ö Back</button>
  </div>

  <h1>Route 35 ‚Äì DUBLIN-GRANVILLE</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 35;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [40.088619, -82.991859],
  [40.08905, -82.99184],
  [40.08911, -82.99184],
  [40.08941, -82.99181],
  [40.08951, -82.99181],
  [40.09002, -82.99179],
  [40.09001, -82.9926],
  [40.09001, -82.992769],
  [40.088909, -82.99284],
  [40.087889, -82.992909],
  [40.087739, -82.992809],
  [40.0877, -82.991779],
  [40.08767, -82.990969],
  [40.087659, -82.990829],
  [40.087649, -82.99068],
  [40.08758, -82.98893],
  [40.087549, -82.98788],
  [40.087539, -82.98743],
  [40.087539, -82.98716],
  [40.087529, -82.9868],
  [40.08749, -82.98573],
  [40.087459, -82.98513],
  [40.08743, -82.984669],
  [40.087439, -82.983129],
  [40.08743, -82.982769],
  [40.08741, -82.982109],
  [40.087379, -82.9811],
  [40.087299, -82.979539],
  [40.087279, -82.979219],
  [40.087179, -82.9773],
  [40.08716, -82.97682],
  [40.08713, -82.97619],
  [40.08708, -82.97529],
  [40.086999, -82.973319],
  [40.08697, -82.972699],
  [40.086919, -82.97156],
  [40.0869, -82.97105],
  [40.08688, -82.970529],
  [40.086839, -82.969539],
  [40.08678, -82.96821],
  [40.086669, -82.96561],
  [40.08663, -82.964559],
  [40.08652, -82.961989],
  [40.08651, -82.961729],
  [40.086489, -82.961279],
  [40.08644, -82.960279],
  [40.086399, -82.95959],
  [40.086369, -82.95894],
  [40.08632, -82.95836],
  [40.086289, -82.9581],
  [40.086279, -82.95801],
  [40.086199, -82.95751],
  [40.08617, -82.95732],
  [40.086039, -82.9566],
  [40.08555, -82.95414],
  [40.085199, -82.952359],
  [40.085129, -82.95202],
  [40.085039, -82.951589],
  [40.084949, -82.951059],
  [40.084679, -82.951089],
  [40.084559, -82.951099],
  [40.084379, -82.95112],
  [40.084019, -82.951149],
  [40.08337, -82.95121],
  [40.083329, -82.95121],
  [40.08291, -82.951239],
  [40.082799, -82.95125],
  [40.08255, -82.951269],
  [40.081889, -82.951319],
  [40.08192, -82.952259],
  [40.08192, -82.952259],
  [40.08255, -82.951269],
  [40.08255, -82.951269],
  [40.08192, -82.952259],
  [40.08209, -82.95224],
  [40.08227, -82.952229],
  [40.08229, -82.951729],
  [40.082329, -82.951689],
  [40.08292, -82.95166],
  [40.083, -82.951809],
  [40.08302, -82.952169],
  [40.082969, -82.952189],
  [40.0829, -82.9522],
  [40.082799, -82.95221],
  [40.08273, -82.95221],
  [40.082609, -82.952219],
  [40.082529, -82.952219],
  [40.082439, -82.952219],
  [40.08237, -82.952229],
  [40.08227, -82.952229],
  [40.08209, -82.95224],
  [40.08192, -82.952259],
  [40.081889, -82.951319],
  [40.08186, -82.9508],
  [40.08183, -82.95035],
  [40.08182, -82.950159],
  [40.081809, -82.95003],
  [40.08182, -82.94991],
  [40.081879, -82.949699],
  [40.081899, -82.949649],
  [40.08202, -82.949429],
  [40.08209, -82.94936],
  [40.08221, -82.94924],
  [40.082419, -82.94913],
  [40.08256, -82.949109],
  [40.082599, -82.9491],
  [40.082949, -82.94904],
  [40.083209, -82.94901],
  [40.083309, -82.94897],
  [40.083409, -82.948889],
  [40.083589, -82.948659],
  [40.08371, -82.948389],
  [40.08374, -82.94832],
  [40.083759, -82.9482],
  [40.083769, -82.947939],
  [40.08374, -82.947719],
  [40.08371, -82.947589],
  [40.083669, -82.94747],
  [40.083609, -82.94738],
  [40.083579, -82.94734],
  [40.08345, -82.947179],
  [40.08329, -82.946959],
  [40.083149, -82.946729],
  [40.08302, -82.946249],
  [40.08301, -82.94609],
  [40.08302, -82.94577],
  [40.083229, -82.945699],
  [40.083859, -82.94549],
  [40.08398, -82.94545],
  [40.084289, -82.945339],
  [40.08417, -82.94487],
  [40.08408, -82.944669],
  [40.084, -82.94451],
  [40.083869, -82.943899],
  [40.083689, -82.94312],
  [40.08346, -82.94221],
  [40.08345, -82.94203],
  [40.08346, -82.941599],
  [40.08337, -82.94114],
  [40.083249, -82.94072],
  [40.083129, -82.940439],
  [40.082979, -82.94009],
  [40.0829, -82.939659],
  [40.08273, -82.93892],
  [40.08257, -82.93825],
  [40.08254, -82.93806],
  [40.08257, -82.937639],
  [40.082429, -82.93703],
  [40.0821, -82.937159],
  [40.081969, -82.937199],
  [40.08176, -82.936289],
  [40.08159, -82.93556],
  [40.08139, -82.934759],
  [40.08138, -82.934709],
  [40.081249, -82.93421],
  [40.08121, -82.934049],
  [40.08111, -82.933689],
  [40.081079, -82.93348],
  [40.08105, -82.933319],
  [40.08103, -82.93316],
  [40.08105, -82.93302],
  [40.08123, -82.932919],
  [40.08129, -82.93285],
  [40.08131, -82.93275],
  [40.0813, -82.932639],
  [40.080989, -82.9315],
  [40.08078, -82.930799],
  [40.08074, -82.93055],
  [40.080719, -82.930309],
  [40.080719, -82.929949],
  [40.080729, -82.92969],
  [40.080729, -82.92948],
  [40.08075, -82.92911],
  [40.08076, -82.928519],
  [40.08031, -82.92854],
  [40.080249, -82.92854],
  [40.07996, -82.92854],
  [40.079829, -82.92854],
  [40.079109, -82.928549],
  [40.078639, -82.928549],
  [40.0786, -82.928549],
  [40.078389, -82.928559],
  [40.07826, -82.928559],
  [40.077999, -82.928559],
  [40.07744, -82.92857],
  [40.07733, -82.92857],
  [40.077039, -82.92858],
  [40.07679, -82.92858],
  [40.076379, -82.928589],
  [40.075389, -82.928599],
  [40.075049, -82.928609],
  [40.07499, -82.928609],
  [40.07491, -82.928609],
  [40.074339, -82.92862],
  [40.07411, -82.92862],
  [40.073879, -82.92862],
  [40.07354, -82.92863],
  [40.07311, -82.928639],
  [40.07295, -82.928639],
  [40.072879, -82.928639],
  [40.072709, -82.928649],
  [40.07219, -82.92866],
  [40.07213, -82.92866],
  [40.07176, -82.92867],
  [40.07139, -82.928699],
  [40.071329, -82.92871],
  [40.07113, -82.928739],
  [40.070899, -82.928779],
  [40.070729, -82.92884],
  [40.07049, -82.928949],
  [40.070469, -82.928959],
  [40.070179, -82.929099],
  [40.069889, -82.929279],
  [40.069739, -82.92939],
  [40.069389, -82.929629],
  [40.06843, -82.93034],
  [40.06752, -82.931019],
  [40.067489, -82.93104],
  [40.066919, -82.931469],
  [40.066419, -82.931829],
  [40.065699, -82.93236],
  [40.06482, -82.933009],
  [40.06328, -82.93415],
  [40.06247, -82.93474],
  [40.06223, -82.93492],
  [40.06167, -82.93533],
  [40.061079, -82.935749],
  [40.060839, -82.93595],
  [40.06042, -82.93627],
  [40.06032, -82.936339],
  [40.06007, -82.936529],
  [40.05998, -82.936599],
  [40.059639, -82.93686],
  [40.05959, -82.9369],
  [40.059289, -82.93712],
  [40.058829, -82.937469],
  [40.05879, -82.936799],
  [40.058769, -82.936469],
  [40.05871, -82.93546],
  [40.0587, -82.935209],
  [40.058669, -82.93434],
  [40.058659, -82.934129],
  [40.058659, -82.934079],
  [40.058649, -82.93376],
  [40.05864, -82.93352],
  [40.058589, -82.932559],
  [40.058579, -82.93241],
  [40.058569, -82.932249],
  [40.058569, -82.93217],
  [40.058559, -82.931739],
  [40.05853, -82.93123],
  [40.058499, -82.93059],
  [40.058479, -82.930129],
  [40.05845, -82.929629],
  [40.058379, -82.92817],
  [40.05833, -82.92701],
  [40.05824, -82.926749],
  [40.058229, -82.9266],
  [40.058199, -82.925949],
  [40.05815, -82.925039],
  [40.058129, -82.924589],
  [40.058119, -82.924459],
  [40.058109, -82.924189],
  [40.05809, -82.923869],
  [40.05808, -82.92362],
  [40.05807, -82.92353],
  [40.058019, -82.922739],
  [40.05798, -82.92137],
  [40.057959, -82.920849],
  [40.057929, -82.919429],
  [40.057869, -82.91823],
  [40.05782, -82.91719],
  [40.057759, -82.9161],
  [40.057739, -82.91567],
  [40.05773, -82.915539],
  [40.05773, -82.91543],
  [40.05771, -82.91499],
  [40.057679, -82.91436],
  [40.05764, -82.91314],
  [40.057589, -82.91197],
  [40.057589, -82.91187],
  [40.057569, -82.91138],
  [40.057559, -82.911009],
  [40.05754, -82.910559],
  [40.05753, -82.910369],
  [40.05772, -82.91044],
  [40.05816, -82.910409],
  [40.058229, -82.910409],
  [40.058309, -82.9104],
  [40.05861, -82.910379],
  [40.05887, -82.91036],
  [40.059109, -82.910339],
  [40.05927, -82.910329],
  [40.05943, -82.91031],
  [40.059829, -82.910279],
  [40.06016, -82.910249],
  [40.060379, -82.910189],
  [40.060469, -82.91017],
  [40.060739, -82.910139],
  [40.060839, -82.910139],
  [40.060839, -82.909979],
  [40.060919, -82.90994],
  [40.06096, -82.909869],
  [40.060979, -82.90963],
  [40.060929, -82.909029],
  [40.060829, -82.90877],
  [40.060719, -82.908849],
  [40.0607, -82.909029],
  [40.060719, -82.90946],
  [40.060739, -82.90982],
  [40.06078, -82.909929],
  [40.060839, -82.909979],
  [40.060919, -82.90994],
  [40.06096, -82.909869],
  [40.060979, -82.90963],
  [40.060929, -82.909029],
  [40.060829, -82.90877],
  [40.060989, -82.90851],
  [40.06105, -82.90865],
  [40.061109, -82.908889],
  [40.061109, -82.909119],
  [40.06112, -82.909529],
  [40.06113, -82.91013],
  [40.061269, -82.910139],
  [40.061379, -82.910159],
  [40.0615, -82.910189],
  [40.061539, -82.910199],
  [40.061619, -82.910229],
  [40.061709, -82.91027],
  [40.061969, -82.91044],
  [40.062059, -82.910499],
  [40.062189, -82.91063],
  [40.062329, -82.910789],
  [40.062369, -82.91085],
  [40.06247, -82.91102],
  [40.062539, -82.911139],
  [40.06266, -82.911449],
  [40.062729, -82.91175],
  [40.06277, -82.912029],
  [40.062789, -82.912439],
  [40.062819, -82.91322],
  [40.06285, -82.91385],
  [40.06287, -82.914149],
  [40.062879, -82.91422],
  [40.062899, -82.91436],
  [40.06295, -82.914559],
  [40.06301, -82.91475],
  [40.063059, -82.91489],
  [40.06312, -82.91503],
  [40.0632, -82.9152],
  [40.063239, -82.91529],
  [40.063329, -82.91544],
  [40.063359, -82.91548],
  [40.06355, -82.915729],
  [40.064149, -82.914869],
  [40.06463, -82.914199],
  [40.064769, -82.914009],
  [40.065309, -82.913249],
  [40.065579, -82.91286],
  [40.06643, -82.91165],
  [40.067199, -82.910559],
  [40.06744, -82.910229],
  [40.06808, -82.909339],
  [40.06823, -82.909119],
  [40.06863, -82.908569],
  [40.068999, -82.908039],
  [40.06915, -82.90784],
  [40.069179, -82.907799],
  [40.06933, -82.907589],
  [40.069539, -82.9073],
  [40.069719, -82.907049],
  [40.06997, -82.90667],
  [40.070369, -82.90612],
  [40.070829, -82.9055],
  [40.070979, -82.9053],
  [40.07185, -82.904069],
  [40.072259, -82.90352],
  [40.07331, -82.902089],
  [40.073509, -82.90181],
  [40.073679, -82.90158],
  [40.074479, -82.90049],
  [40.074599, -82.900329],
  [40.07482, -82.90004],
  [40.075199, -82.899519],
  [40.075389, -82.899259],
  [40.07562, -82.89896],
  [40.076219, -82.898179],
  [40.076649, -82.89761],
  [40.077029, -82.897089],
  [40.07717, -82.89694],
  [40.077299, -82.89681],
  [40.077369, -82.89676],
  [40.07752, -82.89663],
  [40.07768, -82.896509],
  [40.077729, -82.89648],
  [40.07798, -82.89632],
  [40.078289, -82.89618],
  [40.078629, -82.896059],
  [40.078839, -82.896019],
  [40.079069, -82.895979],
  [40.07958, -82.895919],
  [40.080059, -82.895889],
  [40.08066, -82.89585],
  [40.08113, -82.89581],
  [40.08122, -82.89567],
  [40.081249, -82.895609],
  [40.08129, -82.895529],
  [40.081339, -82.89542],
  [40.08132, -82.89531],
  [40.08119, -82.89479],
  [40.081079, -82.894349],
  [40.080999, -82.894039],
  [40.08086, -82.89347],
  [40.08069, -82.892699],
  [40.080639, -82.89245],
  [40.080619, -82.892139],
  [40.0805, -82.89158],
  [40.08039, -82.890889],
  [40.080369, -82.890749],
  [40.08033, -82.890429],
  [40.080259, -82.889899],
  [40.08024, -82.88939],
  [40.08024, -82.88921],
  [40.08021, -82.888089],
  [40.08021, -82.88799],
  [40.08021, -82.88766],
  [40.080259, -82.88686],
  [40.08031, -82.886439],
  [40.0804, -82.88552],
  [40.080519, -82.884219],
  [40.080539, -82.88381],
  [40.080549, -82.88336],
  [40.080539, -82.8825],
  [40.08051, -82.881849],
  [40.0804, -82.88123],
  [40.080369, -82.88028],
  [40.080339, -82.879859],
  [40.0803, -82.879099],
  [40.08021, -82.87751],
  [40.080169, -82.87679],
  [40.080089, -82.87556],
  [40.080059, -82.87521],
  [40.079979, -82.87435],
  [40.079889, -82.873469],
  [40.079829, -82.872799],
  [40.079629, -82.870909],
  [40.079559, -82.870049],
  [40.079519, -82.86936],
  [40.07951, -82.86854],
  [40.079529, -82.86768],
  [40.079559, -82.867219],
  [40.07958, -82.866989],
  [40.07966, -82.866269],
  [40.07977, -82.865519],
  [40.079879, -82.864979],
  [40.080059, -82.86423],
  [40.080159, -82.863879],
  [40.080269, -82.863489],
  [40.080549, -82.86266],
  [40.08078, -82.86201],
  [40.08122, -82.86081],
  [40.08157, -82.85986],
  [40.081889, -82.858849],
  [40.08204, -82.85847],
  [40.08256, -82.857149],
  [40.083129, -82.855569],
  [40.083519, -82.854489],
  [40.08373, -82.853899],
  [40.083769, -82.85379],
  [40.08382, -82.853629],
  [40.08399, -82.85315],
  [40.0849, -82.850559],
  [40.08534, -82.849299],
  [40.085769, -82.84821],
  [40.08587, -82.847969],
  [40.086369, -82.846609],
  [40.08707, -82.844669],
  [40.088089, -82.841839],
  [40.08866, -82.840259],
  [40.08896, -82.83938],
  [40.08924, -82.838609],
  [40.090089, -82.83629],
  [40.090689, -82.83461],
  [40.090969, -82.833689],
  [40.091139, -82.83299],
  [40.09128, -82.83231],
  [40.09137, -82.831719],
  [40.091429, -82.831269],
  [40.09148, -82.830759],
  [40.091509, -82.83039],
  [40.091529, -82.82993],
  [40.091529, -82.829689],
  [40.09154, -82.829049],
  [40.091509, -82.82792],
  [40.09145, -82.82675],
  [40.091349, -82.82467],
  [40.0913, -82.82305],
  [40.091259, -82.822179],
  [40.091229, -82.821599],
  [40.09121, -82.82116],
  [40.09119, -82.82076],
  [40.091169, -82.82035],
  [40.091149, -82.819969],
  [40.091149, -82.819879],
  [40.09113, -82.8195],
  [40.0911, -82.818889],
  [40.091059, -82.818259],
  [40.09102, -82.817499],
  [40.091, -82.81683],
  [40.090979, -82.816369],
  [40.090969, -82.8162],
  [40.09093, -82.815199],
  [40.09091, -82.814619],
  [40.09084, -82.813139],
  [40.090789, -82.811949],
  [40.09074, -82.810929],
  [40.09068, -82.80959],
  [40.090619, -82.80821],
  [40.090529, -82.806379],
  [40.0905, -82.80595],
  [40.09046, -82.80554],
  [40.09041, -82.80515],
  [40.09037, -82.804859],
  [40.09032, -82.80455],
  [40.090269, -82.80428],
  [40.09014, -82.80365],
  [40.089979, -82.80294],
  [40.089709, -82.802329],
  [40.089629, -82.802139],
  [40.08942, -82.80176],
  [40.08921, -82.80145],
  [40.089089, -82.80131],
  [40.08905, -82.80126],
  [40.088699, -82.800879],
  [40.088199, -82.80033],
  [40.08778, -82.79978],
  [40.087549, -82.799489],
  [40.087739, -82.79907],
  [40.087889, -82.79874],
  [40.087999, -82.79849],
  [40.08815, -82.7982],
  [40.0884, -82.797699],
  [40.08867, -82.797149],
  [40.08905, -82.796349],
  [40.089189, -82.79605],
  [40.089259, -82.79591],
  [40.08938, -82.795679],
  [40.089539, -82.795349],
  [40.08966, -82.79511],
  [40.089789, -82.79484],
  [40.089909, -82.79457],
  [40.089989, -82.79439],
  [40.090349, -82.793599],
  [40.08995, -82.79326],
  [40.08967, -82.793],
  [40.089459, -82.79276],
  [40.089259, -82.79249],
  [40.08911, -82.79228],
  [40.08884, -82.79183],
  [40.08894, -82.79173],
  [40.089079, -82.791579],
  [40.08922, -82.79132],
  [40.089429, -82.79088],
  [40.08995, -82.789809],
  [40.090429, -82.788829],
  [40.09102, -82.7876]
];

const stopNames = {
  "WESWALS": "WESTERVILLE RD &amp; WALLINGFORD AVE",
  "161FORE": "STATE ROUTE 161 &amp; FOREST HILLS BLVD",
  "CLE161SF": "CLEVELAND AVE &amp; STATE ROUTE 161",
  "161PONE": "STATE RTE 161 N SVC RD &amp; PONDEROSA",
  "161NOAKE": "STATE ROUTE 161 &amp; OAK KNOLL DR",
  "MORTRIE": "MORSE RD &amp; TRINDEL WAY",
  "MORSUNBE": "MORSE RD &amp; SUNBURY RD",
  "MORWESE": "MORSE RD &amp; WESTERVILLE RD",
  "STE418N": "4180 STELZER RD",
  "161PONE1": "STATE RTE 161 SVC RD &amp; PONDEROSA DR",
  "BOASHAN": "BOARDWALK ST &amp; SHAPTER AVE",
  "MORCHAE": "MORSE RD &amp; CHATEAU MORSE DR",
  "FORFORE": "NEW ALBANY PARK &amp; RIDE",
  "161BEEE1": "STATE RTE 161 AND BEECHCROFT",
  "161MAPE1": "STATE RTE 161 AND MAPLE CANYON AVE",
  "161PARE1": "STATE RTE 161 AND PARKVILLE ST",
  "161KARE": "STATE RTE 161 &amp; KARL RD",
  "WESFRES1": "WESTERVILLE RD &amp; FRENCHPARK DR",
  "WESVALS1": "WESTERVILLE RD &amp; VALLEY PARK AVE",
  "WESJONS": "WESTERVILLE RD &amp; JONATHAN NOBLE WAY",
  "WESMINS": "WESTERVILLE RD &amp; MINERVA LAKE RD",
  "161SATE": "STATE RTE 161 &amp; SATINWOOD DR",
  "161TAME1": "STATE RTE 161 AND TAMARACK BLVD",
  "NORSERE": "NORTHLAND PLAZA DR &amp; S SERVICE RD",
  "FORNORN": "FOREST HILLS BLVD &amp;  NORTHLAND PLAZA DR",
  "STEMORN1": "STELZER RD &amp; MORSE RD",
  "NORCLEE1": "NORTHLAND PLAZA DR &amp; CLEVELAND AVE",
  "MORMORE1": "MORSE RD &amp; MORSE CROSSING",
  "EASTER5": "EASTON TERMINAL BAY 5",
  "NORTRA6": "NORTHLAND TRANSIT CENTER BAY 6",
  "ODGWESE": "OLD DUBLIN-GRANVILLE &amp; WESTERVILLE RD",
  "ODGVALE": "OLD DUBLIN-GRANVILLE RD &amp; VALLEY LN"
};

const stops = [
  { stop_id: "BOASHAN", name: "BOARDWALK ST &amp; SHAPTER AVE", lat: 40.088748, lon: -82.991793, times: ["5:04 AM"] },
  { stop_id: "161SATE", name: "STATE RTE 161 &amp; SATINWOOD DR", lat: 40.087248, lon: -82.980604, times: ["5:07 AM"] },
  { stop_id: "161KARE", name: "STATE RTE 161 &amp; KARL RD", lat: 40.086991, lon: -82.974761, times: ["5:09 AM"] },
  { stop_id: "161TAME1", name: "STATE RTE 161 AND TAMARACK BLVD", lat: 40.086743, lon: -82.969115, times: ["5:09 AM"] },
  { stop_id: "161BEEE1", name: "STATE RTE 161 AND BEECHCROFT", lat: 40.08654, lon: -82.964142, times: ["5:10 AM"] },
  { stop_id: "161MAPE1", name: "STATE RTE 161 AND MAPLE CANYON AVE", lat: 40.086348, lon: -82.959807, times: ["5:11 AM"] },
  { stop_id: "161PARE1", name: "STATE RTE 161 AND PARKVILLE ST", lat: 40.085885, lon: -82.956158, times: ["5:12 AM"] },
  { stop_id: "CLE161SF", name: "CLEVELAND AVE &amp; STATE ROUTE 161", lat: 40.084291, lon: -82.951256, times: ["5:13 AM"] },
  { stop_id: "NORTRA6", name: "NORTHLAND TRANSIT CENTER BAY 6", lat: 40.083097, lon: -82.951959, times: ["5:15 AM"] },
  { stop_id: "NORCLEE1", name: "NORTHLAND PLAZA DR &amp; CLEVELAND AVE", lat: 40.081765, lon: -82.950817, times: ["5:15 AM"] },
  { stop_id: "NORSERE", name: "NORTHLAND PLAZA DR &amp; S SERVICE RD", lat: 40.083678, lon: -82.948265, times: ["5:17 AM"] },
  { stop_id: "FORNORN", name: "FOREST HILLS BLVD &amp;  NORTHLAND PLAZA DR", lat: 40.08344, lon: -82.945519, times: ["5:18 AM"] },
  { stop_id: "161FORE", name: "STATE ROUTE 161 &amp; FOREST HILLS BLVD", lat: 40.084097, lon: -82.944773, times: ["5:19 AM"] },
  { stop_id: "161NOAKE", name: "STATE ROUTE 161 &amp; OAK KNOLL DR", lat: 40.08341, lon: -82.941571, times: ["5:19 AM"] },
  { stop_id: "161PONE", name: "STATE RTE 161 N SVC RD &amp; PONDEROSA", lat: 40.082441, lon: -82.937417, times: ["5:20 AM"] },
  { stop_id: "161PONE1", name: "STATE RTE 161 SVC RD &amp; PONDEROSA DR", lat: 40.081739, lon: -82.936542, times: ["5:21 AM"] },
  { stop_id: "ODGVALE", name: "OLD DUBLIN-GRANVILLE RD &amp; VALLEY LN", lat: 40.081032, lon: -82.932061, times: ["5:22 AM"] },
  { stop_id: "ODGWESE", name: "OLD DUBLIN-GRANVILLE &amp; WESTERVILLE RD", lat: 40.080646, lon: -82.92897, times: ["5:22 AM"] },
  { stop_id: "WESMINS", name: "WESTERVILLE RD &amp; MINERVA LAKE RD", lat: 40.077129, lon: -82.92869, times: ["5:24 AM"] },
  { stop_id: "WESJONS", name: "WESTERVILLE RD &amp; JONATHAN NOBLE WAY", lat: 40.073354, lon: -82.928758, times: ["5:24 AM"] },
  { stop_id: "WESFRES1", name: "WESTERVILLE RD &amp; FRENCHPARK DR", lat: 40.069239, lon: -82.929866, times: ["5:25 AM"] },
  { stop_id: "WESVALS1", name: "WESTERVILLE RD &amp; VALLEY PARK AVE", lat: 40.06543, lon: -82.932656, times: ["5:25 AM"] },
  { stop_id: "WESWALS", name: "WESTERVILLE RD &amp; WALLINGFORD AVE", lat: 40.062004, lon: -82.935192, times: ["5:26 AM"] },
  { stop_id: "MORWESE", name: "MORSE RD &amp; WESTERVILLE RD", lat: 40.058635, lon: -82.936686, times: ["5:27 AM"] },
  { stop_id: "MORCHAE", name: "MORSE RD &amp; CHATEAU MORSE DR", lat: 40.058505, lon: -82.932964, times: ["5:27 AM"] },
  { stop_id: "MORTRIE", name: "MORSE RD &amp; TRINDEL WAY", lat: 40.058135, lon: -82.92635, times: ["5:28 AM"] },
  { stop_id: "MORSUNBE", name: "MORSE RD &amp; SUNBURY RD", lat: 40.057925, lon: -82.922176, times: ["5:29 AM"] },
  { stop_id: "MORMORE1", name: "MORSE RD &amp; MORSE CROSSING", lat: 40.057769, lon: -82.917598, times: ["5:30 AM"] },
  { stop_id: "STEMORN1", name: "STELZER RD &amp; MORSE RD", lat: 40.058409, lon: -82.910245, times: ["5:31 AM"] },
  { stop_id: "STE418N", name: "4180 STELZER RD", lat: 40.05963, lon: -82.910153, times: ["5:32 AM"] },
  { stop_id: "EASTER5", name: "EASTON TERMINAL BAY 5", lat: 40.060719, lon: -82.909141, times: ["5:33 AM"] },
  { stop_id: "FORFORE", name: "NEW ALBANY PARK &amp; RIDE", lat: 40.090778, lon: -82.78788, times: ["5:45 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  üì¢ We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>