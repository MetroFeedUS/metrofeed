<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 43 – WESTERVILLE | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 43 – WESTERVILLE</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 43;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [39.956235, -82.998909],
  [39.957556, -82.999183],
  [39.95754, -82.99928],
  [39.95748, -82.999749],
  [39.95819, -82.999879],
  [39.95872, -82.99998],
  [39.95881, -83.0],
  [39.958849, -83.000009],
  [39.95892, -83.00003],
  [39.95943, -83.000139],
  [39.96017, -83.0003],
  [39.961009, -83.00045],
  [39.96116, -83.00048],
  [39.96131, -83.000509],
  [39.961469, -83.00054],
  [39.96221, -83.000679],
  [39.96293, -83.000819],
  [39.963629, -83.000949],
  [39.96411, -83.001039],
  [39.964259, -83.00107],
  [39.96494, -83.001189],
  [39.965069, -83.00026],
  [39.96509, -83.00008],
  [39.96511, -82.999879],
  [39.96518, -82.999339],
  [39.9652, -82.999149],
  [39.965219, -82.999],
  [39.965239, -82.99887],
  [39.965249, -82.998749],
  [39.96528, -82.998529],
  [39.96538, -82.997639],
  [39.965409, -82.99739],
  [39.965499, -82.996739],
  [39.965519, -82.996549],
  [39.96554, -82.99635],
  [39.96556, -82.99607],
  [39.96557, -82.99589],
  [39.965579, -82.99577],
  [39.965619, -82.995419],
  [39.965679, -82.994889],
  [39.965779, -82.99406],
  [39.96581, -82.99378],
  [39.96583, -82.993569],
  [39.96592, -82.992849],
  [39.965939, -82.99269],
  [39.966, -82.99217],
  [39.966069, -82.991559],
  [39.966139, -82.991019],
  [39.966149, -82.99091],
  [39.96621, -82.99046],
  [39.966239, -82.990209],
  [39.96635, -82.989269],
  [39.96639, -82.988889],
  [39.966409, -82.988719],
  [39.96647, -82.98824],
  [39.96654, -82.987589],
  [39.966589, -82.98717],
  [39.966599, -82.987059],
  [39.966609, -82.98694],
  [39.966689, -82.98623],
  [39.966699, -82.98618],
  [39.96674, -82.985829],
  [39.966779, -82.985479],
  [39.966789, -82.985349],
  [39.966849, -82.984939],
  [39.966879, -82.98456],
  [39.96689, -82.984449],
  [39.966939, -82.984039],
  [39.966959, -82.98389],
  [39.96698, -82.983719],
  [39.967, -82.983589],
  [39.967029, -82.98334],
  [39.967039, -82.9832],
  [39.967059, -82.98302],
  [39.96709, -82.98272],
  [39.96728, -82.982739],
  [39.96745, -82.982769],
  [39.96755, -82.9828],
  [39.9677, -82.98285],
  [39.9679, -82.982959],
  [39.968119, -82.983099],
  [39.96828, -82.983179],
  [39.96842, -82.983219],
  [39.968639, -82.98326],
  [39.968919, -82.98334],
  [39.96933, -82.98339],
  [39.96969, -82.98342],
  [39.970009, -82.98343],
  [39.970209, -82.98343],
  [39.970649, -82.98339],
  [39.97113, -82.98338],
  [39.97161, -82.98334],
  [39.972169, -82.983279],
  [39.972619, -82.9832],
  [39.97294, -82.98316],
  [39.97319, -82.98317],
  [39.973429, -82.98321],
  [39.97373, -82.98317],
  [39.97383, -82.98316],
  [39.9742, -82.98311],
  [39.97445, -82.98311],
  [39.974709, -82.98312],
  [39.9751, -82.98316],
  [39.97529, -82.983179],
  [39.975489, -82.98321],
  [39.97589, -82.983269],
  [39.97697, -82.98344],
  [39.97725, -82.983499],
  [39.977389, -82.98353],
  [39.977949, -82.983629],
  [39.978269, -82.98369],
  [39.978639, -82.983769],
  [39.978759, -82.98379],
  [39.978809, -82.9838],
  [39.97914, -82.983859],
  [39.97934, -82.983899],
  [39.97986, -82.983989],
  [39.980469, -82.984119],
  [39.98111, -82.98424],
  [39.98156, -82.98432],
  [39.9816, -82.98433],
  [39.982169, -82.984439],
  [39.98273, -82.98455],
  [39.982889, -82.98459],
  [39.983439, -82.984709],
  [39.98428, -82.98487],
  [39.985479, -82.985109],
  [39.985869, -82.98518],
  [39.986309, -82.985259],
  [39.987029, -82.98536],
  [39.987289, -82.985389],
  [39.98752, -82.98542],
  [39.988009, -82.985469],
  [39.9885, -82.985479],
  [39.988739, -82.985469],
  [39.989109, -82.98545],
  [39.989359, -82.985429],
  [39.9897, -82.98542],
  [39.99006, -82.9854],
  [39.99012, -82.985389],
  [39.9902, -82.985379],
  [39.991439, -82.985249],
  [39.991779, -82.98522],
  [39.992259, -82.985169],
  [39.993589, -82.98504],
  [39.99384, -82.985019],
  [39.99489, -82.98491],
  [39.996009, -82.984799],
  [39.996209, -82.98479],
  [39.99644, -82.98477],
  [39.997539, -82.984659],
  [39.99814, -82.98461],
  [39.99913, -82.98451],
  [40.0002, -82.984449],
  [40.000719, -82.98443],
  [40.001519, -82.98442],
  [40.001709, -82.98442],
  [40.002, -82.98442],
  [40.002699, -82.98442],
  [40.00283, -82.98442],
  [40.003599, -82.98443],
  [40.00382, -82.98443],
  [40.004129, -82.98443],
  [40.00488, -82.984439],
  [40.005379, -82.98447],
  [40.005569, -82.9845],
  [40.00589, -82.98455],
  [40.00641, -82.98469],
  [40.006899, -82.98488],
  [40.00724, -82.98506],
  [40.00752, -82.985199],
  [40.00784, -82.98541],
  [40.00804, -82.985569],
  [40.0083, -82.98576],
  [40.008719, -82.986149],
  [40.00912, -82.98658],
  [40.00949, -82.987059],
  [40.009809, -82.987549],
  [40.010079, -82.988049],
  [40.010419, -82.98875],
  [40.010869, -82.98964],
  [40.01101, -82.98992],
  [40.01117, -82.99023],
  [40.011489, -82.99081],
  [40.011769, -82.99127],
  [40.01199, -82.991589],
  [40.0122, -82.99188],
  [40.01262, -82.99233],
  [40.013049, -82.99278],
  [40.013499, -82.993179],
  [40.01397, -82.99355],
  [40.01444, -82.99386],
  [40.01488, -82.9941],
  [40.01497, -82.99414],
  [40.01544, -82.994349],
  [40.01589, -82.994519],
  [40.01597, -82.99455],
  [40.016079, -82.99458],
  [40.0165, -82.99469],
  [40.01703, -82.99478],
  [40.01757, -82.99485],
  [40.017869, -82.994879],
  [40.01838, -82.994929],
  [40.0192, -82.995],
  [40.01975, -82.99503],
  [40.02057, -82.99504],
  [40.021209, -82.99503],
  [40.022229, -82.99499],
  [40.02306, -82.994919],
  [40.0236, -82.994839],
  [40.02408, -82.99477],
  [40.024829, -82.99459],
  [40.02523, -82.9945],
  [40.026349, -82.994249],
  [40.026599, -82.994209],
  [40.026809, -82.99418],
  [40.027139, -82.99414],
  [40.02773, -82.994109],
  [40.028249, -82.994109],
  [40.02864, -82.99413],
  [40.0289, -82.994159],
  [40.029139, -82.99419],
  [40.02964, -82.994249],
  [40.03018, -82.99436],
  [40.030649, -82.99449],
  [40.030949, -82.99458],
  [40.03153, -82.99478],
  [40.03161, -82.99481],
  [40.03205, -82.995],
  [40.03225, -82.99509],
  [40.033099, -82.99548],
  [40.03335, -82.99559],
  [40.03352, -82.99566],
  [40.03388, -82.99581],
  [40.034559, -82.996049],
  [40.03522, -82.99625],
  [40.035369, -82.996289],
  [40.03577, -82.996379],
  [40.03631, -82.99649],
  [40.03686, -82.99657],
  [40.03746, -82.996629],
  [40.037679, -82.996649],
  [40.038779, -82.996729],
  [40.0416, -82.99693],
  [40.042449, -82.996989],
  [40.042929, -82.99702],
  [40.04376, -82.997079],
  [40.04486, -82.997179],
  [40.045959, -82.997229],
  [40.046339, -82.997259],
  [40.047059, -82.997319],
  [40.048059, -82.99739],
  [40.04873, -82.99743],
  [40.049829, -82.99751],
  [40.050189, -82.997539],
  [40.05054, -82.99756],
  [40.05089, -82.997589],
  [40.05276, -82.997729],
  [40.056409, -82.997989],
  [40.057399, -82.99806],
  [40.057829, -82.998089],
  [40.058379, -82.998119],
  [40.058929, -82.99815],
  [40.059479, -82.99815],
  [40.060029, -82.99811],
  [40.06058, -82.998039],
  [40.06113, -82.99793],
  [40.0616, -82.997799],
  [40.06212, -82.997619],
  [40.06238, -82.99751],
  [40.06268, -82.99738],
  [40.06283, -82.997309],
  [40.063249, -82.997099],
  [40.06376, -82.99679],
  [40.06437, -82.996369],
  [40.06472, -82.996089],
  [40.06503, -82.995819],
  [40.06518, -82.995689],
  [40.065519, -82.995369],
  [40.06565, -82.995239],
  [40.066049, -82.99481],
  [40.06646, -82.99433],
  [40.067479, -82.99311],
  [40.068299, -82.992139],
  [40.06871, -82.991649],
  [40.069009, -82.9913],
  [40.069119, -82.99117],
  [40.069559, -82.99073],
  [40.069999, -82.990299],
  [40.070469, -82.98991],
  [40.07094, -82.98955],
  [40.071429, -82.98923],
  [40.072069, -82.98887],
  [40.072709, -82.98857],
  [40.073239, -82.988369],
  [40.073779, -82.9882],
  [40.074329, -82.98807],
  [40.074879, -82.98798],
  [40.075229, -82.987949],
  [40.075849, -82.987899],
  [40.07715, -82.987819],
  [40.077399, -82.9878],
  [40.0775, -82.98779],
  [40.07823, -82.98775],
  [40.079559, -82.98767],
  [40.08186, -82.98752],
  [40.08245, -82.98748],
  [40.08337, -82.987419],
  [40.08452, -82.98735],
  [40.08508, -82.987149],
  [40.08518, -82.98712],
  [40.085569, -82.986999],
  [40.085839, -82.98689],
  [40.086009, -82.986789],
  [40.08616, -82.98667],
  [40.086199, -82.986639],
  [40.08645, -82.98641],
  [40.08681, -82.98608],
  [40.08706, -82.98586],
  [40.08722, -82.98578],
  [40.087369, -82.985739],
  [40.08749, -82.98573],
  [40.087459, -82.98513],
  [40.08743, -82.984669],
  [40.087439, -82.983129],
  [40.08743, -82.982769],
  [40.08741, -82.982109],
  [40.087379, -82.9811],
  [40.087299, -82.979539],
  [40.087279, -82.979219],
  [40.087179, -82.9773],
  [40.08716, -82.97682],
  [40.08713, -82.97619],
  [40.08708, -82.97529],
  [40.086999, -82.973319],
  [40.08697, -82.972699],
  [40.086919, -82.97156],
  [40.0869, -82.97105],
  [40.08688, -82.970529],
  [40.086839, -82.969539],
  [40.08678, -82.96821],
  [40.086669, -82.96561],
  [40.08663, -82.964559],
  [40.08652, -82.961989],
  [40.08651, -82.961729],
  [40.086489, -82.961279],
  [40.08644, -82.960279],
  [40.086399, -82.95959],
  [40.086369, -82.95894],
  [40.08632, -82.95836],
  [40.086289, -82.9581],
  [40.086279, -82.95801],
  [40.086199, -82.95751],
  [40.08617, -82.95732],
  [40.086039, -82.9566],
  [40.08555, -82.95414],
  [40.085199, -82.952359],
  [40.085129, -82.95202],
  [40.085039, -82.951589],
  [40.084949, -82.951059],
  [40.084679, -82.951089],
  [40.084559, -82.951099],
  [40.084379, -82.95112],
  [40.084019, -82.951149],
  [40.08337, -82.95121],
  [40.083329, -82.95121],
  [40.08291, -82.951239],
  [40.082799, -82.95125],
  [40.08255, -82.951269],
  [40.081889, -82.951319],
  [40.08192, -82.952259],
  [40.08209, -82.95224],
  [40.08227, -82.952229],
  [40.08229, -82.951729],
  [40.082329, -82.951689],
  [40.08292, -82.95166],
  [40.083, -82.951809],
  [40.08302, -82.952169],
  [40.082969, -82.952189],
  [40.0829, -82.9522],
  [40.082799, -82.95221],
  [40.08273, -82.95221],
  [40.082609, -82.952219],
  [40.082529, -82.952219],
  [40.082439, -82.952219],
  [40.08237, -82.952229],
  [40.08227, -82.952229],
  [40.08209, -82.95224],
  [40.08192, -82.952259],
  [40.081889, -82.951319],
  [40.08255, -82.951269],
  [40.082799, -82.95125],
  [40.08291, -82.951239],
  [40.083329, -82.95121],
  [40.08337, -82.95121],
  [40.084019, -82.951149],
  [40.084379, -82.95112],
  [40.084559, -82.951099],
  [40.084679, -82.951089],
  [40.084949, -82.951059],
  [40.08509, -82.95104],
  [40.08561, -82.95099],
  [40.08564, -82.95099],
  [40.08579, -82.95098],
  [40.08616, -82.950959],
  [40.086479, -82.95095],
  [40.08659, -82.95094],
  [40.08662, -82.95094],
  [40.086819, -82.95093],
  [40.08752, -82.95089],
  [40.08778, -82.950869],
  [40.08833, -82.95084],
  [40.08849, -82.950829],
  [40.088989, -82.950789],
  [40.0892, -82.95077],
  [40.089259, -82.95077],
  [40.089609, -82.950739],
  [40.08967, -82.950739],
  [40.09001, -82.95071],
  [40.09029, -82.950689],
  [40.090879, -82.950649],
  [40.09118, -82.95063],
  [40.09149, -82.950599],
  [40.0919, -82.95057],
  [40.092159, -82.950549],
  [40.092299, -82.95054],
  [40.092589, -82.950519],
  [40.092879, -82.95049],
  [40.092969, -82.95048],
  [40.093039, -82.95048],
  [40.093139, -82.950469],
  [40.093229, -82.950459],
  [40.09354, -82.95044],
  [40.094109, -82.9504],
  [40.09419, -82.95039],
  [40.094319, -82.950379],
  [40.09444, -82.950369],
  [40.094679, -82.95035],
  [40.09478, -82.950339],
  [40.095, -82.950329],
  [40.09509, -82.950329],
  [40.095219, -82.95032],
  [40.095299, -82.95031],
  [40.09551, -82.950289],
  [40.095579, -82.950289],
  [40.09614, -82.950249],
  [40.096829, -82.950189],
  [40.09723, -82.950159],
  [40.097429, -82.95014],
  [40.097729, -82.95012],
  [40.09815, -82.95009],
  [40.098429, -82.950069],
  [40.09867, -82.950059],
  [40.09874, -82.950059],
  [40.099169, -82.95003],
  [40.099529, -82.950009],
  [40.099599, -82.95],
  [40.09976, -82.949979],
  [40.099969, -82.94995],
  [40.10021, -82.94991],
  [40.10055, -82.94986],
  [40.10084, -82.949829],
  [40.10127, -82.949799],
  [40.10174, -82.94977],
  [40.102039, -82.949749],
  [40.102409, -82.94973],
  [40.10371, -82.94964],
  [40.104199, -82.949609],
  [40.10452, -82.94959],
  [40.104749, -82.949569],
  [40.105009, -82.94955],
  [40.10514, -82.94954],
  [40.10525, -82.949529],
  [40.105379, -82.949529],
  [40.10558, -82.949519],
  [40.105739, -82.9495],
  [40.10606, -82.94949],
  [40.10648, -82.949479],
  [40.107159, -82.94945],
  [40.107629, -82.94942],
  [40.108449, -82.94937],
  [40.108869, -82.949349],
  [40.10901, -82.94933],
  [40.109159, -82.94932],
  [40.10928, -82.94931],
  [40.10945, -82.949289],
  [40.109789, -82.949259],
  [40.110329, -82.949199],
  [40.11062, -82.949159],
  [40.110669, -82.948839],
  [40.110759, -82.948309],
  [40.11082, -82.94796],
  [40.110859, -82.94769],
  [40.11089, -82.94729],
  [40.11089, -82.946919],
  [40.110869, -82.946499],
  [40.110849, -82.946019],
  [40.11083, -82.94554],
  [40.11081, -82.94522],
  [40.110779, -82.944659],
  [40.11074, -82.94419],
  [40.11071, -82.943809],
  [40.11062, -82.942809],
  [40.110579, -82.94221],
  [40.110569, -82.94195],
  [40.11056, -82.94176],
  [40.11053, -82.94109],
  [40.110519, -82.940889],
  [40.110509, -82.940749],
  [40.110489, -82.940339],
  [40.11047, -82.940069],
  [40.110419, -82.93907],
  [40.11037, -82.938039],
  [40.110309, -82.936979],
  [40.11026, -82.93609],
  [40.11026, -82.93605],
  [40.110219, -82.935249],
  [40.110149, -82.93394],
  [40.110119, -82.933539],
  [40.110119, -82.93349],
  [40.11009, -82.93276],
  [40.11008, -82.93248],
  [40.110039, -82.931349],
  [40.11002, -82.93091],
  [40.10999, -82.930479],
  [40.10999, -82.93043],
  [40.109979, -82.93034],
  [40.109979, -82.93028],
  [40.109949, -82.92969],
  [40.109939, -82.929579],
  [40.10993, -82.929449],
  [40.10991, -82.928949],
  [40.109869, -82.928589],
  [40.10983, -82.928159],
  [40.10981, -82.9279],
  [40.109799, -82.92777],
  [40.109769, -82.927379],
  [40.109759, -82.927199],
  [40.10973, -82.92673],
  [40.10972, -82.92642],
  [40.109709, -82.926169],
  [40.109709, -82.92602],
  [40.10972, -82.9256],
  [40.110069, -82.925729],
  [40.110249, -82.925799],
  [40.11029, -82.925809],
  [40.11038, -82.925849],
  [40.110519, -82.925899],
  [40.110669, -82.925949],
  [40.110769, -82.925989],
  [40.110859, -82.92602],
  [40.111049, -82.926079],
  [40.11135, -82.9262],
  [40.111769, -82.926349],
  [40.11182, -82.92637],
  [40.11189, -82.926399],
  [40.112, -82.926439],
  [40.112109, -82.926479],
  [40.112209, -82.926519],
  [40.11245, -82.926609],
  [40.112499, -82.926629],
  [40.11261, -82.926669],
  [40.112679, -82.92669],
  [40.112859, -82.926759],
  [40.112939, -82.926789],
  [40.11299, -82.926809],
  [40.11314, -82.92686],
  [40.113479, -82.926989],
  [40.11368, -82.927059],
  [40.11389, -82.92714],
  [40.11407, -82.927209],
  [40.114299, -82.927289],
  [40.114569, -82.927389],
  [40.11524, -82.927649],
  [40.11568, -82.92782],
  [40.116269, -82.928049],
  [40.11633, -82.928069],
  [40.11641, -82.928099],
  [40.116529, -82.928139],
  [40.1166, -82.92817],
  [40.116699, -82.92821],
  [40.11686, -82.92827],
  [40.11722, -82.9284],
  [40.11759, -82.92854],
  [40.11768, -82.92857],
  [40.11775, -82.928599],
  [40.118129, -82.928739],
  [40.11845, -82.928859],
  [40.11873, -82.928969],
  [40.11908, -82.929099],
  [40.11935, -82.9292],
  [40.11946, -82.92924],
  [40.11972, -82.92934],
  [40.119939, -82.92942],
  [40.120229, -82.92953],
  [40.12046, -82.92961],
  [40.12054, -82.929639],
  [40.12065, -82.929679],
  [40.121129, -82.929849],
  [40.121219, -82.92988],
  [40.12169, -82.93006],
  [40.1219, -82.930129],
  [40.122019, -82.930169],
  [40.12207, -82.93019],
  [40.122129, -82.930219],
  [40.122189, -82.93024],
  [40.122289, -82.93028],
  [40.12233, -82.93029],
  [40.12252, -82.930359],
  [40.122919, -82.93051],
  [40.123189, -82.93061],
  [40.123469, -82.930709],
  [40.1236, -82.930759],
  [40.12368, -82.93079],
  [40.123999, -82.930899],
  [40.124019, -82.93091],
  [40.124439, -82.93106],
  [40.124549, -82.9311],
  [40.12466, -82.93114],
  [40.124739, -82.931169],
  [40.12504, -82.93128],
  [40.125069, -82.931289],
  [40.12538, -82.9314],
  [40.125619, -82.93149],
  [40.12593, -82.9316],
  [40.12601, -82.93163],
  [40.126149, -82.93168],
  [40.12667, -82.931879],
  [40.126629, -82.932199],
  [40.126599, -82.93245],
  [40.12657, -82.93266],
  [40.12656, -82.932779],
  [40.1265, -82.933269],
  [40.12649, -82.933359],
  [40.126439, -82.933729],
  [40.126419, -82.933909],
  [40.1264, -82.93411],
  [40.126329, -82.934719],
  [40.12632, -82.934809],
  [40.12631, -82.93492],
  [40.126249, -82.93537],
  [40.12621, -82.93574],
  [40.12621, -82.93578],
  [40.12614, -82.93631],
  [40.126069, -82.9369],
  [40.12603, -82.937149],
  [40.12601, -82.937319],
  [40.12601, -82.93735],
  [40.125989, -82.937509],
  [40.12596, -82.9378],
  [40.125909, -82.938179],
  [40.125909, -82.93821],
  [40.125899, -82.938279],
  [40.125889, -82.93838],
  [40.12586, -82.9386],
  [40.125819, -82.938999],
  [40.12574, -82.93961],
  [40.125699, -82.939929],
  [40.12566, -82.940289],
  [40.1256, -82.94073],
  [40.12558, -82.940919],
  [40.125549, -82.94113],
  [40.125459, -82.94184],
  [40.125429, -82.942059],
  [40.125359, -82.94261],
  [40.125279, -82.94324],
  [40.125159, -82.94423],
  [40.12529, -82.944269],
  [40.12539, -82.944259],
  [40.12549, -82.94423],
  [40.12551, -82.944119],
  [40.125539, -82.944029],
  [40.125619, -82.94393],
  [40.12569, -82.94397],
  [40.125729, -82.94402]
];

const stopNames = {
  "SOUTER6": "COTA TRANSIT TERMINAL BAY 6",
  "CLEFUJN": "CLEVELAND AVE &amp; FUJI DR",
  "STAHIAN": "S STATE ST &amp; HIAWATHA AVE",
  "CLEMAINN": "CLEVELAND AVE &amp; W MAIN ST",
  "CLEBLEN1": "CLEVELAND AVE &amp; BLENDON WOODS BLVD",
  "CLEBELLN": "CLEVELAND AVE &amp; BELLA VIA AVE",
  "CLEHOMN": "CLEVELAND AVE &amp; HOME ACRE DR",
  "CLESCHN": "S CLEVELAND AVE &amp; SCHROCK RD",
  "CLE340N": "340 S CLEVELAND AVE",
  "STASCHN": "S STATE ST &amp; E SCHROCK RD",
  "STACHEN": "S STATE ST &amp; CHERRINGTON RD",
  "STAWALN": "S STATE ST &amp; E WALNUT ST",
  "CLE161SF": "CLEVELAND AVE &amp; STATE ROUTE 161",
  "MAISTAW": "W MAIN ST &amp; N STATE ST",
  "CLECOMN": "CLEVELAND AVE &amp; COMMUNITY PARK DR",
  "HIGSTANN": "S HIGH ST &amp; E STATE ST",
  "LON4THE": "E LONG ST &amp; N 4TH ST",
  "LONWASE": "E LONG ST &amp; N WASHINGTON AVE",
  "SCH99BE": "99 W SCHROCK RD",
  "SCHCOOE": "W SCHROCK RD &amp; COOPER RD",
  "SCHPARE": "W SCHROCK RD &amp; PARK MEADOW RD",
  "CLE161NF": "CLEVELAND AVE &amp; STATE ROUTE 161",
  "HIGLONN2": "N HIGH ST &amp; E LONG ST",
  "WESP&RW": "WESTERVILLE PARK AND RIDE",
  "CLECOON": "S CLEVELAND AVE &amp; COOPER RD",
  "HIGBRONN": "S HIGH ST &amp; E BROAD ST",
  "SCHCLEE": "W SCHROCK RD &amp; CLEVELAND AVE",
  "161BEEE1": "STATE RTE 161 AND BEECHCROFT",
  "161MAPE1": "STATE RTE 161 AND MAPLE CANYON AVE",
  "161PARE1": "STATE RTE 161 AND PARKVILLE ST",
  "161KARE": "STATE RTE 161 &amp; KARL RD",
  "161SATE": "STATE RTE 161 &amp; SATINWOOD DR",
  "161TAME1": "STATE RTE 161 AND TAMARACK BLVD",
  "NORTRA6": "NORTHLAND TRANSIT CENTER BAY 6",
  "500CLEN": "500 S CLEVELAND AVE"
};

const stops = [
  { stop_id: "SOUTER6", name: "COTA TRANSIT TERMINAL BAY 6", lat: 39.956939, lon: -82.999038, times: ["5:03 PM"] },
  { stop_id: "HIGSTANN", name: "S HIGH ST &amp; E STATE ST", lat: 39.959828, lon: -83.000011, times: ["5:07 PM"] },
  { stop_id: "HIGBRONN", name: "S HIGH ST &amp; E BROAD ST", lat: 39.961674, lon: -83.000405, times: ["5:09 PM"] },
  { stop_id: "HIGLONN2", name: "N HIGH ST &amp; E LONG ST", lat: 39.964416, lon: -83.000956, times: ["5:10 PM"] },
  { stop_id: "LON4THE", name: "E LONG ST &amp; N 4TH ST", lat: 39.965299, lon: -82.996981, times: ["5:10 PM"] },
  { stop_id: "LONWASE", name: "E LONG ST &amp; N WASHINGTON AVE", lat: 39.966475, lon: -82.987289, times: ["5:11 PM"] },
  { stop_id: "161SATE", name: "STATE RTE 161 &amp; SATINWOOD DR", lat: 40.087248, lon: -82.980604, times: ["7:05 AM"] },
  { stop_id: "161KARE", name: "STATE RTE 161 &amp; KARL RD", lat: 40.086991, lon: -82.974761, times: ["7:06 AM"] },
  { stop_id: "161TAME1", name: "STATE RTE 161 AND TAMARACK BLVD", lat: 40.086743, lon: -82.969115, times: ["7:06 AM"] },
  { stop_id: "161BEEE1", name: "STATE RTE 161 AND BEECHCROFT", lat: 40.08654, lon: -82.964142, times: ["7:07 AM"] },
  { stop_id: "161MAPE1", name: "STATE RTE 161 AND MAPLE CANYON AVE", lat: 40.086348, lon: -82.959807, times: ["7:07 AM"] },
  { stop_id: "161PARE1", name: "STATE RTE 161 AND PARKVILLE ST", lat: 40.085885, lon: -82.956158, times: ["7:08 AM"] },
  { stop_id: "CLE161SF", name: "CLEVELAND AVE &amp; STATE ROUTE 161", lat: 40.084291, lon: -82.951256, times: ["7:09 AM"] },
  { stop_id: "NORTRA6", name: "NORTHLAND TRANSIT CENTER BAY 6", lat: 40.083097, lon: -82.951959, times: ["7:10 AM"] },
  { stop_id: "CLE161NF", name: "CLEVELAND AVE &amp; STATE ROUTE 161", lat: 40.086291, lon: -82.950847, times: ["7:12 AM"] },
  { stop_id: "CLEFUJN", name: "CLEVELAND AVE &amp; FUJI DR", lat: 40.088773, lon: -82.950661, times: ["7:12 AM"] },
  { stop_id: "CLEBLEN1", name: "CLEVELAND AVE &amp; BLENDON WOODS BLVD", lat: 40.093262, lon: -82.950309, times: ["7:13 AM"] },
  { stop_id: "CLEBELLN", name: "CLEVELAND AVE &amp; BELLA VIA AVE", lat: 40.096009, lon: -82.950126, times: ["7:13 AM"] },
  { stop_id: "CLEHOMN", name: "CLEVELAND AVE &amp; HOME ACRE DR", lat: 40.097984, lon: -82.94997, times: ["7:14 AM"] },
  { stop_id: "CLECOMN", name: "CLEVELAND AVE &amp; COMMUNITY PARK DR", lat: 40.100943, lon: -82.949676, times: ["7:14 AM"] },
  { stop_id: "SCHCLEE", name: "W SCHROCK RD &amp; CLEVELAND AVE", lat: 40.11071, lon: -82.947825, times: ["7:16 AM"] },
  { stop_id: "SCHCOOE", name: "W SCHROCK RD &amp; COOPER RD", lat: 40.110468, lon: -82.942214, times: ["7:17 AM"] },
  { stop_id: "SCHPARE", name: "W SCHROCK RD &amp; PARK MEADOW RD", lat: 40.110175, lon: -82.936557, times: ["7:18 AM"] },
  { stop_id: "SCH99BE", name: "99 W SCHROCK RD", lat: 40.109766, lon: -82.928585, times: ["7:19 AM"] },
  { stop_id: "STASCHN", name: "S STATE ST &amp; E SCHROCK RD", lat: 40.110048, lon: -82.925579, times: ["7:19 AM"] },
  { stop_id: "STACHEN", name: "S STATE ST &amp; CHERRINGTON RD", lat: 40.113792, lon: -82.926981, times: ["7:20 AM"] },
  { stop_id: "STAHIAN", name: "S STATE ST &amp; HIAWATHA AVE", lat: 40.117892, lon: -82.928534, times: ["7:21 AM"] },
  { stop_id: "STAWALN", name: "S STATE ST &amp; E WALNUT ST", lat: 40.121968, lon: -82.93005, times: ["7:22 AM"] },
  { stop_id: "MAISTAW", name: "W MAIN ST &amp; N STATE ST", lat: 40.126509, lon: -82.932843, times: ["7:23 AM"] },
  { stop_id: "WESP&RW", name: "WESTERVILLE PARK AND RIDE", lat: 40.125778, lon: -82.943967, times: ["5:45 PM"] },
  { stop_id: "CLESCHN", name: "S CLEVELAND AVE &amp; SCHROCK RD", lat: 40.111202, lon: -82.948981, times: ["5:40 PM"] },
  { stop_id: "500CLEN", name: "500 S CLEVELAND AVE", lat: 40.11461, lon: -82.948725, times: ["5:40 PM"] },
  { stop_id: "CLE340N", name: "340 S CLEVELAND AVE", lat: 40.11617, lon: -82.948658, times: ["5:41 PM"] },
  { stop_id: "CLECOON", name: "S CLEVELAND AVE &amp; COOPER RD", lat: 40.120612, lon: -82.948366, times: ["5:42 PM"] },
  { stop_id: "CLEMAINN", name: "CLEVELAND AVE &amp; W MAIN ST", lat: 40.124349, lon: -82.948058, times: ["5:43 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>