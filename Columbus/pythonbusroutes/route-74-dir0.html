<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 74 – SMOKY ROW | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 74 – SMOKY ROW</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 74;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [39.95757, -82.99901],
  [39.956249, -82.998749],
  [39.95627, -82.998569],
  [39.95629, -82.99838],
  [39.956309, -82.998179],
  [39.956329, -82.998029],
  [39.95638, -82.997579],
  [39.95639, -82.99751],
  [39.956399, -82.997359],
  [39.95646, -82.996819],
  [39.956499, -82.996459],
  [39.95656, -82.99594],
  [39.95666, -82.995069],
  [39.957319, -82.995189],
  [39.95799, -82.99532],
  [39.958859, -82.995509],
  [39.958939, -82.99553],
  [39.959299, -82.995599],
  [39.959999, -82.995729],
  [39.960659, -82.995869],
  [39.961269, -82.99598],
  [39.96131, -82.99599],
  [39.96141, -82.996009],
  [39.96168, -82.996059],
  [39.96178, -82.99608],
  [39.962009, -82.99613],
  [39.962719, -82.996229],
  [39.96297, -82.996279],
  [39.963439, -82.996369],
  [39.96413, -82.996499],
  [39.964779, -82.99661],
  [39.965499, -82.996739],
  [39.965849, -82.996809],
  [39.966, -82.99684],
  [39.96611, -82.996859],
  [39.966319, -82.996899],
  [39.966489, -82.99693],
  [39.96654, -82.99694],
  [39.966779, -82.996989],
  [39.966759, -82.997309],
  [39.96673, -82.99751],
  [39.966679, -82.997899],
  [39.96665, -82.998169],
  [39.966589, -82.99877],
  [39.96656, -82.99909],
  [39.966509, -82.99953],
  [39.96644, -83.000189],
  [39.966399, -83.00052],
  [39.966339, -83.001009],
  [39.96629, -83.00142],
  [39.96617, -83.00233],
  [39.966139, -83.00259],
  [39.966069, -83.00324],
  [39.96663, -83.003349],
  [39.967139, -83.00345],
  [39.96816, -83.00363],
  [39.96881, -83.003739],
  [39.969449, -83.00387],
  [39.969719, -83.003919],
  [39.96988, -83.00395],
  [39.97005, -83.003979],
  [39.970179, -83.00404],
  [39.970289, -83.00409],
  [39.97069, -83.004289],
  [39.970809, -83.00435],
  [39.970919, -83.00441],
  [39.97121, -83.004549],
  [39.971379, -83.004639],
  [39.97148, -83.004689],
  [39.97152, -83.00534],
  [39.971529, -83.005409],
  [39.97159, -83.006099],
  [39.971619, -83.006759],
  [39.971619, -83.007429],
  [39.97161, -83.007719],
  [39.97159, -83.00796],
  [39.9715, -83.00853],
  [39.97148, -83.00867],
  [39.971459, -83.008829],
  [39.971449, -83.009009],
  [39.971459, -83.00925],
  [39.97148, -83.009469],
  [39.97157, -83.009949],
  [39.97177, -83.01096],
  [39.971799, -83.011119],
  [39.97186, -83.011399],
  [39.971919, -83.01169],
  [39.97202, -83.01218],
  [39.97213, -83.01269],
  [39.97249, -83.01444],
  [39.97256, -83.014739],
  [39.97269, -83.01512],
  [39.97276, -83.015309],
  [39.97294, -83.01557],
  [39.973169, -83.015889],
  [39.973349, -83.016129],
  [39.973519, -83.01637],
  [39.97373, -83.01669],
  [39.97385, -83.0169],
  [39.973969, -83.017149],
  [39.973989, -83.017209],
  [39.974069, -83.01741],
  [39.974139, -83.017659],
  [39.97418, -83.017929],
  [39.9742, -83.018189],
  [39.974349, -83.018189],
  [39.974509, -83.01818],
  [39.97466, -83.01818],
  [39.974869, -83.01817],
  [39.97511, -83.01816],
  [39.97521, -83.018149],
  [39.97539, -83.018139],
  [39.975499, -83.018139],
  [39.97563, -83.01813],
  [39.97584, -83.01817],
  [39.97599, -83.018189],
  [39.976129, -83.018239],
  [39.976239, -83.01831],
  [39.97634, -83.01839],
  [39.976479, -83.01854],
  [39.976599, -83.01875],
  [39.97692, -83.019449],
  [39.97719, -83.02001],
  [39.977379, -83.020359],
  [39.977479, -83.020529],
  [39.97761, -83.02069],
  [39.977749, -83.02079],
  [39.97787, -83.02086],
  [39.978189, -83.02101],
  [39.9785, -83.02114],
  [39.978819, -83.021249],
  [39.979299, -83.02142],
  [39.97997, -83.021619],
  [39.98031, -83.02172],
  [39.980529, -83.021829],
  [39.980829, -83.021979],
  [39.98114, -83.02203],
  [39.98166, -83.02209],
  [39.981889, -83.022109],
  [39.98211, -83.022109],
  [39.982269, -83.022099],
  [39.982349, -83.022099],
  [39.982769, -83.022059],
  [39.983259, -83.022019],
  [39.983599, -83.02199],
  [39.98366, -83.02199],
  [39.983959, -83.021979],
  [39.98411, -83.021979],
  [39.98427, -83.022],
  [39.98439, -83.022009],
  [39.984669, -83.02205],
  [39.985049, -83.02217],
  [39.98545, -83.022339],
  [39.985679, -83.022469],
  [39.986319, -83.022919],
  [39.987759, -83.02407],
  [39.988299, -83.024489],
  [39.9886, -83.024679],
  [39.98905, -83.024889],
  [39.989279, -83.02497],
  [39.98951, -83.025039],
  [39.989829, -83.025089],
  [39.989989, -83.025119],
  [39.99031, -83.025129],
  [39.99084, -83.02511],
  [39.991419, -83.02497],
  [39.992049, -83.02483],
  [39.992309, -83.024769],
  [39.992589, -83.024719],
  [39.99291, -83.02469],
  [39.993149, -83.024669],
  [39.994139, -83.02461],
  [39.99515, -83.02457],
  [39.99543, -83.024579],
  [39.995649, -83.0246],
  [39.995909, -83.02466],
  [39.996089, -83.0247],
  [39.99635, -83.02479],
  [39.996559, -83.024899],
  [39.99679, -83.02505],
  [39.997189, -83.02537],
  [39.997469, -83.02564],
  [39.99767, -83.025889],
  [39.997909, -83.026239],
  [39.99824, -83.0268],
  [39.998619, -83.02745],
  [39.998829, -83.0278],
  [39.99902, -83.02812],
  [39.99924, -83.02847],
  [39.9994, -83.02871],
  [39.99959, -83.028949],
  [39.99965, -83.02902],
  [39.99983, -83.029179],
  [40.000079, -83.029359],
  [40.00047, -83.02959],
  [40.00074, -83.029709],
  [40.000989, -83.02979],
  [40.001339, -83.02988],
  [40.001799, -83.02997],
  [40.00302, -83.030199],
  [40.003499, -83.030289],
  [40.003849, -83.030349],
  [40.00397, -83.030379],
  [40.00409, -83.0304],
  [40.00478, -83.030529],
  [40.00598, -83.030749],
  [40.00634, -83.03082],
  [40.006459, -83.030849],
  [40.00759, -83.031029],
  [40.009799, -83.031459],
  [40.009989, -83.0315],
  [40.010609, -83.031659],
  [40.01075, -83.031699],
  [40.010869, -83.031729],
  [40.01103, -83.03177],
  [40.012959, -83.032269],
  [40.01489, -83.032779],
  [40.01543, -83.032919],
  [40.016279, -83.03315],
  [40.017279, -83.033539],
  [40.017459, -83.03361],
  [40.018519, -83.03402],
  [40.018589, -83.03405],
  [40.019159, -83.03428],
  [40.02136, -83.035149],
  [40.02199, -83.03537],
  [40.02217, -83.035429],
  [40.02245, -83.035519],
  [40.023199, -83.035739],
  [40.023369, -83.035789],
  [40.02352, -83.035829],
  [40.02361, -83.03586],
  [40.02389, -83.03594],
  [40.024989, -83.03626],
  [40.02543, -83.03631],
  [40.02584, -83.036329],
  [40.02621, -83.036289],
  [40.026459, -83.036229],
  [40.026699, -83.036139],
  [40.02712, -83.03591],
  [40.027419, -83.035699],
  [40.02758, -83.035559],
  [40.027779, -83.035329],
  [40.02795, -83.03514],
  [40.02811, -83.0349],
  [40.02828, -83.03463],
  [40.02846, -83.03428],
  [40.028529, -83.0341],
  [40.0291, -83.032629],
  [40.02947, -83.031659],
  [40.02972, -83.031109],
  [40.03009, -83.030389],
  [40.03017, -83.03024],
  [40.03025, -83.030109],
  [40.030469, -83.02974],
  [40.030589, -83.02956],
  [40.03079, -83.02928],
  [40.031099, -83.02893],
  [40.03144, -83.0286],
  [40.03161, -83.02847],
  [40.03187, -83.0283],
  [40.03214, -83.02815],
  [40.03235, -83.028049],
  [40.03271, -83.027919],
  [40.03314, -83.027829],
  [40.033539, -83.02779],
  [40.03389, -83.02781],
  [40.03414, -83.027859],
  [40.034359, -83.0279],
  [40.034729, -83.028009],
  [40.034999, -83.02812],
  [40.03522, -83.028229],
  [40.035899, -83.02862],
  [40.03685, -83.0292],
  [40.03766, -83.0297],
  [40.03791, -83.029839],
  [40.038049, -83.029899],
  [40.038239, -83.030019],
  [40.038579, -83.03024],
  [40.03952, -83.030829],
  [40.04186, -83.032239],
  [40.042459, -83.032589],
  [40.042839, -83.032779],
  [40.04323, -83.03294],
  [40.043559, -83.033039],
  [40.043879, -83.03312],
  [40.044459, -83.033229],
  [40.0453, -83.033279],
  [40.04611, -83.03333],
  [40.047059, -83.033359],
  [40.047429, -83.033369],
  [40.04763, -83.03338],
  [40.0481, -83.03339],
  [40.04843, -83.03339],
  [40.048779, -83.033359],
  [40.04925, -83.033179],
  [40.0496, -83.033049],
  [40.050009, -83.032859],
  [40.050219, -83.032769],
  [40.05041, -83.032679],
  [40.050749, -83.03253],
  [40.05187, -83.032109],
  [40.05188, -83.03257],
  [40.05189, -83.032819],
  [40.05189, -83.03288],
  [40.052009, -83.03312],
  [40.05213, -83.03333],
  [40.05223, -83.033439],
  [40.052359, -83.033539],
  [40.05248, -83.0336],
  [40.052829, -83.033759],
  [40.052999, -83.033759],
  [40.053269, -83.033769],
  [40.053429, -83.033769],
  [40.05377, -83.03378],
  [40.054069, -83.03378],
  [40.05413, -83.03378],
  [40.05428, -83.03378],
  [40.05511, -83.03384],
  [40.05567, -83.03392],
  [40.055969, -83.033979],
  [40.0562, -83.034029],
  [40.05635, -83.03406],
  [40.05663, -83.03411],
  [40.05672, -83.034129],
  [40.057669, -83.03438],
  [40.05779, -83.03441],
  [40.05807, -83.034489],
  [40.05836, -83.034569],
  [40.058409, -83.03459],
  [40.058919, -83.034789],
  [40.059199, -83.034889],
  [40.05943, -83.035029],
  [40.059569, -83.03514],
  [40.060729, -83.035929],
  [40.060899, -83.036049],
  [40.06142, -83.0364],
  [40.061639, -83.036549],
  [40.062059, -83.03684],
  [40.0624, -83.03708],
  [40.06259, -83.03721],
  [40.062729, -83.0373],
  [40.063059, -83.03751],
  [40.063539, -83.03783],
  [40.06366, -83.037909],
  [40.06376, -83.03798],
  [40.064, -83.03815],
  [40.064049, -83.038179],
  [40.06412, -83.03823],
  [40.064599, -83.038579],
  [40.06537, -83.039109],
  [40.06609, -83.039569],
  [40.06653, -83.039759],
  [40.066919, -83.03987],
  [40.06728, -83.039939],
  [40.06761, -83.04018],
  [40.067939, -83.04044],
  [40.068279, -83.040729],
  [40.06872, -83.041089],
  [40.069029, -83.0413],
  [40.07003, -83.041899],
  [40.070529, -83.04224],
  [40.070619, -83.0423],
  [40.070999, -83.042539],
  [40.071059, -83.04257],
  [40.071359, -83.0427],
  [40.07158, -83.04279],
  [40.0721, -83.04302],
  [40.07238, -83.04315],
  [40.072709, -83.04329],
  [40.073049, -83.04346],
  [40.07355, -83.043709],
  [40.074049, -83.044],
  [40.074479, -83.044239],
  [40.07463, -83.04435],
  [40.075049, -83.04473],
  [40.07528, -83.044969],
  [40.07546, -83.045149],
  [40.0757, -83.04549],
  [40.07608, -83.04608],
  [40.076219, -83.046269],
  [40.076409, -83.04648],
  [40.0766, -83.046639],
  [40.07688, -83.046849],
  [40.07787, -83.04755],
  [40.07813, -83.04774],
  [40.078659, -83.048079],
  [40.078909, -83.048209],
  [40.079289, -83.048349],
  [40.08014, -83.048649],
  [40.08128, -83.04908],
  [40.08245, -83.0495],
  [40.082979, -83.049649],
  [40.083059, -83.04967],
  [40.08338, -83.049749],
  [40.083589, -83.049789],
  [40.083759, -83.049829],
  [40.08401, -83.0499],
  [40.08417, -83.049909],
  [40.084399, -83.049919],
  [40.08462, -83.049909],
  [40.085019, -83.049839],
  [40.085759, -83.04972],
  [40.08588, -83.049699],
  [40.08662, -83.04958],
  [40.086939, -83.04954],
  [40.08717, -83.049519],
  [40.08749, -83.049519],
  [40.08806, -83.04953],
  [40.088089, -83.04953],
  [40.088519, -83.049519],
  [40.08902, -83.049519],
  [40.089189, -83.049519],
  [40.08941, -83.049519],
  [40.089459, -83.049519],
  [40.089699, -83.049519],
  [40.090159, -83.04953],
  [40.090329, -83.04954],
  [40.09057, -83.049559],
  [40.090689, -83.049569],
  [40.09082, -83.04958],
  [40.09112, -83.04962],
  [40.091229, -83.049639],
  [40.091599, -83.04968],
  [40.091869, -83.049689],
  [40.091959, -83.049699],
  [40.092389, -83.049659],
  [40.093149, -83.04958],
  [40.09446, -83.04941],
  [40.0948, -83.049339],
  [40.09509, -83.049249],
  [40.09545, -83.04914],
  [40.095829, -83.04899],
  [40.09599, -83.048929],
  [40.09624, -83.048829],
  [40.096289, -83.04881],
  [40.09811, -83.04805],
  [40.09905, -83.047659],
  [40.09938, -83.04751],
  [40.09956, -83.047449],
  [40.099599, -83.04743],
  [40.10063, -83.04697],
  [40.101589, -83.046499],
  [40.10228, -83.046179],
  [40.10272, -83.04597],
  [40.10336, -83.045689],
  [40.103399, -83.04693],
  [40.10344, -83.048],
  [40.10346, -83.048529],
  [40.103469, -83.04878],
  [40.103479, -83.049189],
  [40.103499, -83.05021],
  [40.10351, -83.050559],
  [40.10353, -83.051449],
  [40.10353, -83.05166],
  [40.10354, -83.052209],
  [40.103559, -83.0535],
  [40.103569, -83.05389],
  [40.103569, -83.054019],
  [40.103569, -83.05408],
  [40.103589, -83.05485],
  [40.10361, -83.055369],
  [40.10363, -83.05598],
  [40.103669, -83.057259],
  [40.10369, -83.05799],
  [40.10371, -83.059279],
  [40.10373, -83.060009],
  [40.103749, -83.06051],
  [40.10378, -83.06156],
  [40.1038, -83.06217],
  [40.10381, -83.06276],
  [40.103829, -83.063459],
  [40.103839, -83.063959],
  [40.104199, -83.06403],
  [40.104549, -83.064099],
  [40.10514, -83.06424],
  [40.10524, -83.06426],
  [40.105299, -83.064279],
  [40.106169, -83.064489],
  [40.10679, -83.06465],
  [40.10723, -83.06475],
  [40.107789, -83.06489],
  [40.108979, -83.065169],
  [40.10984, -83.065389],
  [40.110309, -83.065489],
  [40.110479, -83.065529],
  [40.11072, -83.06559],
  [40.11091, -83.06564],
  [40.11116, -83.065709],
  [40.11126, -83.06574],
  [40.11144, -83.06579],
  [40.11165, -83.065849],
  [40.111759, -83.06588],
  [40.11188, -83.06591],
  [40.11228, -83.065989],
  [40.112679, -83.06609],
  [40.11307, -83.06618],
  [40.11332, -83.06624],
  [40.113909, -83.066389],
  [40.11476, -83.06659],
  [40.115709, -83.066829],
  [40.116349, -83.06699],
  [40.11656, -83.06704],
  [40.11677, -83.06709],
  [40.11732, -83.06723],
  [40.117529, -83.067279],
  [40.117899, -83.06736],
  [40.118059, -83.067389],
  [40.118139, -83.06741],
  [40.118589, -83.06753],
  [40.11891, -83.06762],
  [40.11918, -83.067689],
  [40.11929, -83.06772],
  [40.119489, -83.06776],
  [40.1201, -83.0679],
  [40.120399, -83.067969],
  [40.12082, -83.06807],
  [40.12182, -83.06831],
  [40.123009, -83.068599],
  [40.123449, -83.0687],
  [40.12413, -83.068859],
  [40.1252, -83.069089],
  [40.1255, -83.06916],
  [40.125879, -83.06924],
  [40.126269, -83.069319],
  [40.126349, -83.06933],
  [40.12665, -83.06939],
  [40.12709, -83.069489],
  [40.127879, -83.069669],
  [40.12911, -83.06992],
  [40.130669, -83.070259],
  [40.131039, -83.070339],
  [40.13144, -83.070429],
  [40.131899, -83.070529],
  [40.13241, -83.07064],
  [40.133279, -83.070839],
  [40.13361, -83.07092],
  [40.13397, -83.071],
  [40.13458, -83.07114],
  [40.135089, -83.07126],
  [40.13538, -83.071329],
  [40.13582, -83.071429],
  [40.13591, -83.07145],
  [40.13585, -83.071839],
  [40.135789, -83.072279],
  [40.135709, -83.072639],
  [40.13566, -83.0729],
  [40.13556, -83.073359],
  [40.13512, -83.073269],
  [40.13484, -83.07326],
  [40.13424, -83.073279],
  [40.1342, -83.073639],
  [40.134089, -83.073939],
  [40.13403, -83.07405],
  [40.13386, -83.074209],
  [40.133729, -83.074309],
  [40.13359, -83.07437],
  [40.13333, -83.074449],
  [40.13252, -83.074489],
  [40.132529, -83.07465],
  [40.132619, -83.077539],
  [40.13267, -83.078719],
  [40.132749, -83.080789],
  [40.13276, -83.081239],
  [40.132799, -83.082989],
  [40.132799, -83.083039],
  [40.132809, -83.0835],
  [40.132829, -83.084039],
  [40.13288, -83.08527],
  [40.132919, -83.08622],
  [40.13294, -83.08658],
  [40.13294, -83.086689],
  [40.13294, -83.087269],
  [40.13296, -83.08823],
  [40.13297, -83.08904],
  [40.13298, -83.08963],
  [40.132719, -83.08963],
  [40.132079, -83.08968],
  [40.131639, -83.08971],
  [40.13099, -83.089739],
  [40.13078, -83.089749],
  [40.130499, -83.08976],
  [40.13009, -83.089779],
  [40.127409, -83.08991],
  [40.126079, -83.08998],
  [40.12574, -83.08999],
  [40.12547, -83.09],
  [40.1245, -83.090049],
  [40.124189, -83.09007],
  [40.123839, -83.09009],
  [40.12358, -83.090099],
  [40.123389, -83.090109],
  [40.123289, -83.09012],
  [40.12323, -83.09012],
  [40.12316, -83.09012],
  [40.12297, -83.09013],
  [40.12262, -83.090149],
  [40.12216, -83.09018],
  [40.121649, -83.090199],
  [40.12144, -83.09021],
  [40.121399, -83.09021],
  [40.120779, -83.090239],
  [40.120489, -83.09026],
  [40.1201, -83.090279],
  [40.119519, -83.0903],
  [40.11935, -83.09031],
  [40.11929, -83.09031],
  [40.118939, -83.090319],
  [40.11872, -83.090329]
];

const stopNames = {
  "SOUTER7": "COTA TRANSIT TERMINAL BAY 7",
  "4THTOWN": "S 4TH ST &amp; E TOWN ST",
  "LINLINN": "LINWORTH RD &amp; STATE ROUTE 161",
  "LINLOCN": "LINWORTH RD &amp; LOCH NESS AVE",
  "SPRFROW": "W SPRING ST &amp; N FRONT ST",
  "LINSHANW": "LINWORTH RD &amp; SHARON HILL DR",
  "LINMEENW": "LINWORTH RD &amp; MEEKLYNN DR",
  "LINROCN": "LINWORTH RD &amp; ROCKY RILL RD",
  "LINSEDN": "LINWORTH RD &amp; SEDGWICK RD",
  "LIN161N": "LINWORTH RD &amp; STATE ROUTE 161",
  "OLEOLDEN": "OLENTANGY RIVER RD &amp; OLDE TOWNE AVE",
  "SNOLAUW": "SNOUFFER RD &amp; LAUREN PL",
  "SNOBRIW": "SNOUFFER RD &amp; BRIDE WATER BLVD",
  "SNOOPPW": "SNOUFFER RD &amp; DONAHUE CT",
  "SMOQUEN": "SMOKY ROW RD &amp; QUEENSBRIDGE DR",
  "SMOHARN": "SMOKY ROW RD &amp; HARD RD",
  "SMOSUTN": "SMOKY ROW RD &amp; SUTTER PKWY",
  "SMOPLAN": "SMOKY ROW RD &amp; PLAINS BLVD",
  "SMOSTON": "SMOKY ROW RD &amp; STOWBRIDGE RD",
  "OLERIDN": "OLENTANGY RIVER RD &amp; BETHEL RD",
  "SMOHAMN": "SMOKY ROW RD &amp; HAMROCK DR",
  "SMOSWAN": "SMOKY ROW RD &amp; SWANSFORD DR",
  "SMOSTPRN": "SMOKY ROW &amp; ST PETERS PARK AND RIDE",
  "SMOWATN": "SMOKY ROW RD &amp; WATERTOWER DR",
  "4THATHN": "N 4TH ST &amp; E GAY ST",
  "FROSPRN": "N FRONT ST &amp; W SPRING ST",
  "VINPARW": "VINE ST &amp; N PARK ST",
  "SMOGARN": "SMOKY ROW RD &amp; GARDENSTONE DR",
  "LINWODMN": "LINWORTH RD &amp; WOODMAN DR",
  "SPR4THW": "E SPRING ST &amp; N 4TH ST",
  "SAWHARS": "SAWMILL RD &amp; HARD RD",
  "SAWSUMS": "SAWMILL RD &amp; SUMMER DR",
  "SAWCOPS": "SAWMILL RD &amp; COPPERHILL DR",
  "SUMCOPW": "SUMMIT VIEW RD &amp; COPPERVIEW DR",
  "SUMSHIW": "SUMMIT VIEW RD &amp; SHILLINGTON DR",
  "SUMSUMS": "SUMMIT ROW BLVD &amp; SUMMIT VIEW RD",
  "SMOSMOW": "SMOKY VIEW BLVD &amp; SMOKY ROW RD",
  "SMOSUMN1": "SMOKY ROW RD &amp; SUMMIT ROW BLVD",
  "4THCAPN": "S 4TH ST &amp; E CAPITAL ST"
};

const stops = [
  { stop_id: "SOUTER7", name: "COTA TRANSIT TERMINAL BAY 7", lat: 39.956667, lon: -82.99885, times: ["5:15 PM"] },
  { stop_id: "4THTOWN", name: "S 4TH ST &amp; E TOWN ST", lat: 39.958965, lon: -82.995424, times: ["5:20 PM"] },
  { stop_id: "4THCAPN", name: "S 4TH ST &amp; E CAPITAL ST", lat: 39.961951, lon: -82.995987, times: ["5:22 PM"] },
  { stop_id: "4THATHN", name: "N 4TH ST &amp; E GAY ST", lat: 39.963808, lon: -82.996336, times: ["5:23 PM"] },
  { stop_id: "SPR4THW", name: "E SPRING ST &amp; N 4TH ST", lat: 39.966769, lon: -82.997738, times: ["5:24 PM"] },
  { stop_id: "SPRFROW", name: "W SPRING ST &amp; N FRONT ST", lat: 39.966198, lon: -83.002659, times: ["5:27 PM"] },
  { stop_id: "FROSPRN", name: "N FRONT ST &amp; W SPRING ST", lat: 39.966804, lon: -83.003236, times: ["5:27 PM"] },
  { stop_id: "VINPARW", name: "VINE ST &amp; N PARK ST", lat: 39.971546, lon: -83.005171, times: ["5:27 PM"] },
  { stop_id: "OLEOLDEN", name: "OLENTANGY RIVER RD &amp; OLDE TOWNE AVE", lat: 40.05827, lon: -83.034474, times: ["5:41 PM"] },
  { stop_id: "OLERIDN", name: "OLENTANGY RIVER RD &amp; BETHEL RD", lat: 40.061701, lon: -83.03647, times: ["5:42 PM"] },
  { stop_id: "LINSHANW", name: "LINWORTH RD &amp; SHARON HILL DR", lat: 40.068122, lon: -83.040525, times: ["5:43 PM"] },
  { stop_id: "LINMEENW", name: "LINWORTH RD &amp; MEEKLYNN DR", lat: 40.075223, lon: -83.044871, times: ["5:44 PM"] },
  { stop_id: "LINROCN", name: "LINWORTH RD &amp; ROCKY RILL RD", lat: 40.07779, lon: -83.047443, times: ["5:44 PM"] },
  { stop_id: "LINSEDN", name: "LINWORTH RD &amp; SEDGWICK RD", lat: 40.083399, lon: -83.049701, times: ["5:45 PM"] },
  { stop_id: "LIN161N", name: "LINWORTH RD &amp; STATE ROUTE 161", lat: 40.0899, lon: -83.049447, times: ["5:46 PM"] },
  { stop_id: "LINLINN", name: "LINWORTH RD &amp; STATE ROUTE 161", lat: 40.0914, lon: -83.049666, times: ["5:47 PM"] },
  { stop_id: "LINWODMN", name: "LINWORTH RD &amp; WOODMAN DR", lat: 40.096494, lon: -83.048727, times: ["5:47 PM"] },
  { stop_id: "LINLOCN", name: "LINWORTH RD &amp; LOCH NESS AVE", lat: 40.099462, lon: -83.047468, times: ["5:48 PM"] },
  { stop_id: "SNOLAUW", name: "SNOUFFER RD &amp; LAUREN PL", lat: 40.103503, lon: -83.048989, times: ["5:49 PM"] },
  { stop_id: "SNOBRIW", name: "SNOUFFER RD &amp; BRIDE WATER BLVD", lat: 40.103725, lon: -83.057736, times: ["5:50 PM"] },
  { stop_id: "SNOOPPW", name: "SNOUFFER RD &amp; DONAHUE CT", lat: 40.103813, lon: -83.061404, times: ["5:51 PM"] },
  { stop_id: "SMOSTPRN", name: "SMOKY ROW &amp; ST PETERS PARK AND RIDE", lat: 40.106608, lon: -83.064559, times: ["5:52 PM"] },
  { stop_id: "SMOQUEN", name: "SMOKY ROW RD &amp; QUEENSBRIDGE DR", lat: 40.108736, lon: -83.065046, times: ["5:52 PM"] },
  { stop_id: "SMOWATN", name: "SMOKY ROW RD &amp; WATERTOWER DR", lat: 40.112132, lon: -83.06586, times: ["5:53 PM"] },
  { stop_id: "SMOGARN", name: "SMOKY ROW RD &amp; GARDENSTONE DR", lat: 40.114582, lon: -83.066484, times: ["5:54 PM"] },
  { stop_id: "SMOHARN", name: "SMOKY ROW RD &amp; HARD RD", lat: 40.117773, lon: -83.067226, times: ["5:55 PM"] },
  { stop_id: "SMOSUTN", name: "SMOKY ROW RD &amp; SUTTER PKWY", lat: 40.120453, lon: -83.067887, times: ["5:55 PM"] },
  { stop_id: "SMOSWAN", name: "SMOKY ROW RD &amp; SWANSFORD DR", lat: 40.123357, lon: -83.068605, times: ["5:55 PM"] },
  { stop_id: "SMOPLAN", name: "SMOKY ROW RD &amp; PLAINS BLVD", lat: 40.125989, lon: -83.069186, times: ["5:56 PM"] },
  { stop_id: "SMOSTON", name: "SMOKY ROW RD &amp; STOWBRIDGE RD", lat: 40.128909, lon: -83.069835, times: ["5:56 PM"] },
  { stop_id: "SMOHAMN", name: "SMOKY ROW RD &amp; HAMROCK DR", lat: 40.13127, lon: -83.070318, times: ["5:57 PM"] },
  { stop_id: "SMOSUMN1", name: "SMOKY ROW RD &amp; SUMMIT ROW BLVD", lat: 40.133673, lon: -83.070874, times: ["5:57 PM"] },
  { stop_id: "SMOSMOW", name: "SMOKY VIEW BLVD &amp; SMOKY ROW RD", lat: 40.135824, lon: -83.07192, times: ["5:58 PM"] },
  { stop_id: "SUMSUMS", name: "SUMMIT ROW BLVD &amp; SUMMIT VIEW RD", lat: 40.132771, lon: -83.074564, times: ["5:58 PM"] },
  { stop_id: "SUMSHIW", name: "SUMMIT VIEW RD &amp; SHILLINGTON DR", lat: 40.132807, lon: -83.081399, times: ["5:59 PM"] },
  { stop_id: "SUMCOPW", name: "SUMMIT VIEW RD &amp; COPPERVIEW DR", lat: 40.132976, lon: -83.087069, times: ["6:00 PM"] },
  { stop_id: "SAWCOPS", name: "SAWMILL RD &amp; COPPERHILL DR", lat: 40.131208, lon: -83.089853, times: ["6:01 PM"] },
  { stop_id: "SAWSUMS", name: "SAWMILL RD &amp; SUMMER DR", lat: 40.121559, lon: -83.090339, times: ["6:03 PM"] },
  { stop_id: "SAWHARS", name: "SAWMILL RD &amp; HARD RD", lat: 40.118362, lon: -83.090595, times: ["6:04 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>