<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 72 – TUTTLE | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 72 – TUTTLE</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 72;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [39.95757, -82.99901],
  [39.956249, -82.998749],
  [39.95627, -82.998569],
  [39.95629, -82.99838],
  [39.956309, -82.998179],
  [39.956329, -82.998029],
  [39.95638, -82.997579],
  [39.95639, -82.99751],
  [39.956399, -82.997359],
  [39.95646, -82.996819],
  [39.956499, -82.996459],
  [39.95656, -82.99594],
  [39.95666, -82.995069],
  [39.957319, -82.995189],
  [39.95799, -82.99532],
  [39.958859, -82.995509],
  [39.958939, -82.99553],
  [39.959299, -82.995599],
  [39.959999, -82.995729],
  [39.960659, -82.995869],
  [39.961269, -82.99598],
  [39.96131, -82.99599],
  [39.96141, -82.996009],
  [39.96168, -82.996059],
  [39.96178, -82.99608],
  [39.962009, -82.99613],
  [39.962719, -82.996229],
  [39.96297, -82.996279],
  [39.963439, -82.996369],
  [39.96413, -82.996499],
  [39.964779, -82.99661],
  [39.965499, -82.996739],
  [39.965849, -82.996809],
  [39.966, -82.99684],
  [39.96611, -82.996859],
  [39.966319, -82.996899],
  [39.966489, -82.99693],
  [39.96654, -82.99694],
  [39.966779, -82.996989],
  [39.966759, -82.997309],
  [39.96673, -82.99751],
  [39.966679, -82.997899],
  [39.96665, -82.998169],
  [39.966589, -82.99877],
  [39.96656, -82.99909],
  [39.966509, -82.99953],
  [39.96644, -83.000189],
  [39.966399, -83.00052],
  [39.966339, -83.001009],
  [39.96629, -83.00142],
  [39.96617, -83.00233],
  [39.966139, -83.00259],
  [39.966069, -83.00324],
  [39.96663, -83.003349],
  [39.967139, -83.00345],
  [39.96816, -83.00363],
  [39.96881, -83.003739],
  [39.969449, -83.00387],
  [39.969719, -83.003919],
  [39.96988, -83.00395],
  [39.97005, -83.003979],
  [39.970179, -83.00404],
  [39.970289, -83.00409],
  [39.97069, -83.004289],
  [39.970809, -83.00435],
  [39.970919, -83.00441],
  [39.97121, -83.004549],
  [39.971379, -83.004639],
  [39.97148, -83.004689],
  [39.97152, -83.00534],
  [39.971529, -83.005409],
  [39.97159, -83.006099],
  [39.971619, -83.006759],
  [39.971619, -83.007429],
  [39.97161, -83.007719],
  [39.97159, -83.00796],
  [39.9715, -83.00853],
  [39.97148, -83.00867],
  [39.971459, -83.008829],
  [39.971449, -83.009009],
  [39.971459, -83.00925],
  [39.97148, -83.009469],
  [39.97157, -83.009949],
  [39.97177, -83.01096],
  [39.971799, -83.011119],
  [39.97186, -83.011399],
  [39.971919, -83.01169],
  [39.97202, -83.01218],
  [39.97213, -83.01269],
  [39.97249, -83.01444],
  [39.97256, -83.014739],
  [39.97269, -83.01512],
  [39.97276, -83.015309],
  [39.97294, -83.01557],
  [39.973169, -83.015889],
  [39.973349, -83.016129],
  [39.973519, -83.01637],
  [39.97373, -83.01669],
  [39.97385, -83.0169],
  [39.973969, -83.017149],
  [39.973989, -83.017209],
  [39.974069, -83.01741],
  [39.974139, -83.017659],
  [39.97418, -83.017929],
  [39.9742, -83.018189],
  [39.974349, -83.018189],
  [39.974509, -83.01818],
  [39.97466, -83.01818],
  [39.974869, -83.01817],
  [39.97511, -83.01816],
  [39.97521, -83.018149],
  [39.97539, -83.018139],
  [39.975499, -83.018139],
  [39.97563, -83.01813],
  [39.97584, -83.01817],
  [39.97599, -83.018189],
  [39.976129, -83.018239],
  [39.976239, -83.01831],
  [39.97634, -83.01839],
  [39.976479, -83.01854],
  [39.976599, -83.01875],
  [39.97692, -83.019449],
  [39.97719, -83.02001],
  [39.977379, -83.020359],
  [39.977479, -83.020529],
  [39.97761, -83.02069],
  [39.977749, -83.02079],
  [39.97787, -83.02086],
  [39.978189, -83.02101],
  [39.9785, -83.02114],
  [39.978819, -83.021249],
  [39.979299, -83.02142],
  [39.97997, -83.021619],
  [39.98031, -83.02172],
  [39.980529, -83.021829],
  [39.980829, -83.021979],
  [39.98114, -83.02203],
  [39.98166, -83.02209],
  [39.981889, -83.022109],
  [39.98211, -83.022109],
  [39.982269, -83.022099],
  [39.982349, -83.022099],
  [39.982769, -83.022059],
  [39.983259, -83.022019],
  [39.983599, -83.02199],
  [39.98366, -83.02199],
  [39.983959, -83.021979],
  [39.98411, -83.021979],
  [39.98427, -83.022],
  [39.98439, -83.022009],
  [39.984669, -83.02205],
  [39.985049, -83.02217],
  [39.98545, -83.022339],
  [39.985679, -83.022469],
  [39.986319, -83.022919],
  [39.987759, -83.02407],
  [39.988299, -83.024489],
  [39.9886, -83.024679],
  [39.98905, -83.024889],
  [39.989279, -83.02497],
  [39.98951, -83.025039],
  [39.989829, -83.025089],
  [39.989989, -83.025119],
  [39.99031, -83.025129],
  [39.99084, -83.02511],
  [39.991419, -83.02497],
  [39.992049, -83.02483],
  [39.992309, -83.024769],
  [39.992589, -83.024719],
  [39.99291, -83.02469],
  [39.993149, -83.024669],
  [39.994139, -83.02461],
  [39.99515, -83.02457],
  [39.99543, -83.024579],
  [39.995649, -83.0246],
  [39.995909, -83.02466],
  [39.996089, -83.0247],
  [39.99635, -83.02479],
  [39.996559, -83.024899],
  [39.99679, -83.02505],
  [39.997189, -83.02537],
  [39.997469, -83.02564],
  [39.99767, -83.025889],
  [39.997909, -83.026239],
  [39.99824, -83.0268],
  [39.998619, -83.02745],
  [39.998829, -83.0278],
  [39.99902, -83.02812],
  [39.99924, -83.02847],
  [39.9994, -83.02871],
  [39.99959, -83.028949],
  [39.99965, -83.02902],
  [39.99983, -83.029179],
  [40.000079, -83.029359],
  [40.00047, -83.02959],
  [40.00074, -83.029709],
  [40.000989, -83.02979],
  [40.001339, -83.02988],
  [40.001799, -83.02997],
  [40.00302, -83.030199],
  [40.003499, -83.030289],
  [40.003849, -83.030349],
  [40.00397, -83.030379],
  [40.00409, -83.0304],
  [40.00478, -83.030529],
  [40.00598, -83.030749],
  [40.00634, -83.03082],
  [40.006459, -83.030849],
  [40.00759, -83.031029],
  [40.009799, -83.031459],
  [40.009989, -83.0315],
  [40.010609, -83.031659],
  [40.01075, -83.031699],
  [40.010869, -83.031729],
  [40.01103, -83.03177],
  [40.012959, -83.032269],
  [40.01489, -83.032779],
  [40.01543, -83.032919],
  [40.016279, -83.03315],
  [40.017279, -83.033539],
  [40.017459, -83.03361],
  [40.018519, -83.03402],
  [40.018589, -83.03405],
  [40.019159, -83.03428],
  [40.02136, -83.035149],
  [40.02199, -83.03537],
  [40.02217, -83.035429],
  [40.02245, -83.035519],
  [40.023199, -83.035739],
  [40.023369, -83.035789],
  [40.02352, -83.035829],
  [40.02361, -83.03586],
  [40.02389, -83.03594],
  [40.024989, -83.03626],
  [40.025639, -83.03616],
  [40.026009, -83.03608],
  [40.026359, -83.035959],
  [40.02668, -83.035789],
  [40.026989, -83.035569],
  [40.02722, -83.035379],
  [40.027439, -83.03517],
  [40.0275, -83.0351],
  [40.027609, -83.034969],
  [40.027719, -83.03483],
  [40.02793, -83.03464],
  [40.02809, -83.03451],
  [40.028239, -83.03442],
  [40.02846, -83.03428],
  [40.02866, -83.0342],
  [40.029049, -83.03406],
  [40.02936, -83.03402],
  [40.02946, -83.03396],
  [40.02946, -83.03424],
  [40.02946, -83.034359],
  [40.02946, -83.034789],
  [40.029509, -83.03567],
  [40.02956, -83.03679],
  [40.029579, -83.03725],
  [40.029599, -83.03784],
  [40.02962, -83.038209],
  [40.029609, -83.038439],
  [40.02957, -83.038759],
  [40.029499, -83.03949],
  [40.02945, -83.039979],
  [40.029399, -83.04041],
  [40.02926, -83.04176],
  [40.0292, -83.042369],
  [40.0292, -83.04242],
  [40.029149, -83.04284],
  [40.02909, -83.04338],
  [40.02903, -83.043849],
  [40.02891, -83.04437],
  [40.02882, -83.045229],
  [40.02874, -83.04598],
  [40.028689, -83.04648],
  [40.028619, -83.0471],
  [40.028499, -83.04729],
  [40.02944, -83.048109],
  [40.029689, -83.04832],
  [40.03045, -83.048969],
  [40.0308, -83.04927],
  [40.030829, -83.049299],
  [40.03091, -83.049379],
  [40.031119, -83.049559],
  [40.031839, -83.05022],
  [40.032279, -83.05058],
  [40.032819, -83.050919],
  [40.033029, -83.05097],
  [40.03326, -83.05098],
  [40.033639, -83.050959],
  [40.03377, -83.050949],
  [40.03467, -83.05089],
  [40.034989, -83.050869],
  [40.03584, -83.050819],
  [40.036599, -83.05076],
  [40.03686, -83.050739],
  [40.037079, -83.050719],
  [40.03855, -83.05062],
  [40.03881, -83.050599],
  [40.039049, -83.050589],
  [40.039309, -83.05057],
  [40.039759, -83.050539],
  [40.040049, -83.05052],
  [40.040479, -83.05049],
  [40.041099, -83.05044],
  [40.041219, -83.05043],
  [40.0415, -83.050409],
  [40.041549, -83.050409],
  [40.042189, -83.050359],
  [40.0434, -83.050269],
  [40.04522, -83.050139],
  [40.046699, -83.05003],
  [40.046979, -83.050019],
  [40.0488, -83.049879],
  [40.04924, -83.04985],
  [40.049369, -83.049839],
  [40.04942, -83.049839],
  [40.049669, -83.049819],
  [40.049749, -83.04981],
  [40.049829, -83.0498],
  [40.04988, -83.0498],
  [40.050009, -83.049789],
  [40.05018, -83.049779],
  [40.05023, -83.049779],
  [40.050559, -83.04976],
  [40.05061, -83.04976],
  [40.050829, -83.049749],
  [40.05116, -83.049729],
  [40.05133, -83.04972],
  [40.051539, -83.04971],
  [40.05194, -83.049689],
  [40.05214, -83.04968],
  [40.052249, -83.04968],
  [40.052359, -83.04967],
  [40.052549, -83.049659],
  [40.052699, -83.049649],
  [40.05303, -83.04963],
  [40.053149, -83.049609],
  [40.0533, -83.049599],
  [40.053819, -83.04958],
  [40.053989, -83.049569],
  [40.05414, -83.049559],
  [40.054709, -83.049519],
  [40.05476, -83.049519],
  [40.055069, -83.0495],
  [40.055259, -83.04949],
  [40.05554, -83.049469],
  [40.05563, -83.049459],
  [40.055969, -83.04944],
  [40.056659, -83.049389],
  [40.056689, -83.049389],
  [40.0568, -83.049379],
  [40.056939, -83.049369],
  [40.05728, -83.049339],
  [40.057329, -83.049339],
  [40.05764, -83.04931],
  [40.05771, -83.049299],
  [40.05788, -83.049289],
  [40.05798, -83.049279],
  [40.05818, -83.04927],
  [40.058229, -83.04927],
  [40.05834, -83.04926],
  [40.05845, -83.04926],
  [40.0586, -83.04926],
  [40.05879, -83.049279],
  [40.05896, -83.04932],
  [40.05909, -83.04936],
  [40.059209, -83.04941],
  [40.05935, -83.04953],
  [40.059489, -83.049649],
  [40.059659, -83.049819],
  [40.05977, -83.049969],
  [40.059919, -83.05022],
  [40.059939, -83.050269],
  [40.060029, -83.050469],
  [40.06013, -83.05076],
  [40.06022, -83.051139],
  [40.06024, -83.051189],
  [40.06085, -83.052569],
  [40.061019, -83.052749],
  [40.06131, -83.05304],
  [40.061349, -83.05308],
  [40.061529, -83.05328],
  [40.06169, -83.053509],
  [40.06176, -83.053609],
  [40.06186, -83.05381],
  [40.06187, -83.053839],
  [40.061909, -83.054019],
  [40.06195, -83.054229],
  [40.061969, -83.054509],
  [40.061979, -83.05488],
  [40.061979, -83.05507],
  [40.061989, -83.055279],
  [40.06202, -83.05547],
  [40.06205, -83.055669],
  [40.06212, -83.055899],
  [40.06221, -83.05606],
  [40.062259, -83.05615],
  [40.06231, -83.05623],
  [40.062349, -83.05629],
  [40.062419, -83.056399],
  [40.062539, -83.056539],
  [40.06257, -83.056569],
  [40.062599, -83.05659],
  [40.06266, -83.05664],
  [40.062809, -83.056759],
  [40.06292, -83.05682],
  [40.062999, -83.05687],
  [40.063169, -83.056929],
  [40.0632, -83.056939],
  [40.0633, -83.056979],
  [40.063449, -83.056989],
  [40.06348, -83.056989],
  [40.063709, -83.056979],
  [40.063719, -83.057249],
  [40.06373, -83.05745],
  [40.06374, -83.057709],
  [40.06375, -83.058289],
  [40.06376, -83.05849],
  [40.063779, -83.058969],
  [40.063789, -83.059239],
  [40.063789, -83.059369],
  [40.063789, -83.059419],
  [40.063799, -83.05993],
  [40.063799, -83.05997],
  [40.063799, -83.060009],
  [40.063809, -83.06021],
  [40.06382, -83.06038],
  [40.06383, -83.0606],
  [40.06384, -83.06083],
  [40.06385, -83.0611],
  [40.06386, -83.06129],
  [40.06386, -83.06136],
  [40.06386, -83.06145],
  [40.063879, -83.062059],
  [40.063889, -83.062249],
  [40.06391, -83.06271],
  [40.06392, -83.063149],
  [40.06394, -83.063739],
  [40.06395, -83.064309],
  [40.063959, -83.0648],
  [40.063969, -83.06528],
  [40.063979, -83.06559],
  [40.063979, -83.06564],
  [40.064, -83.06623],
  [40.06401, -83.066529],
  [40.06402, -83.066839],
  [40.064049, -83.067469],
  [40.064069, -83.068049],
  [40.064079, -83.068199],
  [40.0641, -83.06879],
  [40.0641, -83.068829],
  [40.06411, -83.06894],
  [40.06413, -83.069399],
  [40.064149, -83.07001],
  [40.064159, -83.070209],
  [40.06418, -83.07072],
  [40.06421, -83.0715],
  [40.06422, -83.071839],
  [40.064229, -83.072139],
  [40.064229, -83.072189],
  [40.064249, -83.072959],
  [40.06427, -83.07357],
  [40.06429, -83.07406],
  [40.06429, -83.074129],
  [40.064319, -83.074949],
  [40.064349, -83.075939],
  [40.06438, -83.076689],
  [40.0644, -83.077199],
  [40.064419, -83.077739],
  [40.064419, -83.07785],
  [40.064439, -83.078589],
  [40.064509, -83.08059],
  [40.064529, -83.081289],
  [40.06455, -83.081999],
  [40.06458, -83.082809],
  [40.064589, -83.083209],
  [40.064619, -83.08383],
  [40.064619, -83.083899],
  [40.06464, -83.084429],
  [40.06465, -83.084799],
  [40.064679, -83.085649],
  [40.064689, -83.085869],
  [40.064709, -83.08653],
  [40.065599, -83.086549],
  [40.066209, -83.08649],
  [40.066579, -83.086459],
  [40.066679, -83.08648],
  [40.067019, -83.086449],
  [40.067199, -83.086499],
  [40.067389, -83.086599],
  [40.06751, -83.086719],
  [40.067679, -83.086949],
  [40.067749, -83.08721],
  [40.0678, -83.087529],
  [40.067839, -83.088839],
  [40.067849, -83.08904],
  [40.067929, -83.09125],
  [40.067949, -83.09169],
  [40.06798, -83.092089],
  [40.068009, -83.09309],
  [40.067469, -83.093109],
  [40.067319, -83.093119],
  [40.067199, -83.093129],
  [40.067139, -83.093129],
  [40.066779, -83.093159],
  [40.066289, -83.093169],
  [40.066109, -83.09318],
  [40.066029, -83.09318],
  [40.065849, -83.093199],
  [40.06581, -83.093199],
  [40.065609, -83.093219],
  [40.06556, -83.093219],
  [40.06527, -83.09324],
  [40.06521, -83.093249],
  [40.06494, -83.093299],
  [40.064949, -83.09381],
  [40.064959, -83.09405],
  [40.064979, -83.094339],
  [40.06499, -83.094519],
  [40.065, -83.094659],
  [40.06503, -83.09513],
  [40.065039, -83.095329],
  [40.065049, -83.09544],
  [40.06508, -83.09566],
  [40.06511, -83.09579],
  [40.065159, -83.09597],
  [40.06521, -83.096139],
  [40.06527, -83.096319],
  [40.065399, -83.0966],
  [40.065569, -83.096899],
  [40.065759, -83.097159],
  [40.065939, -83.09733],
  [40.06635, -83.097659],
  [40.066389, -83.09769],
  [40.066479, -83.097759],
  [40.06652, -83.097789],
  [40.066949, -83.098119],
  [40.06715, -83.09827],
  [40.06737, -83.09849],
  [40.067479, -83.09864],
  [40.06769, -83.098959],
  [40.06779, -83.099139],
  [40.067939, -83.099559],
  [40.06796, -83.099599],
  [40.068, -83.099769],
  [40.06805, -83.09999],
  [40.06807, -83.100139],
  [40.06808, -83.100279],
  [40.06809, -83.10033],
  [40.06809, -83.10048],
  [40.068099, -83.10069],
  [40.068119, -83.101219],
  [40.068119, -83.10125],
  [40.068119, -83.10129],
  [40.06814, -83.10191],
  [40.06816, -83.102519],
  [40.06817, -83.102759],
  [40.06818, -83.103029],
  [40.06818, -83.10322],
  [40.068189, -83.103469],
  [40.068189, -83.1035],
  [40.068189, -83.10353],
  [40.068199, -83.103739],
  [40.06824, -83.105139],
  [40.06825, -83.10533],
  [40.06826, -83.10573],
  [40.06826, -83.10611],
  [40.06823, -83.10682],
  [40.068219, -83.107059],
  [40.06818, -83.10755],
  [40.06815, -83.108019],
  [40.068099, -83.10835],
  [40.06806, -83.108599],
  [40.068, -83.10893],
  [40.0679, -83.10947],
  [40.067739, -83.11033],
  [40.06762, -83.110989],
  [40.067589, -83.111309],
  [40.067569, -83.11169],
  [40.06754, -83.112639],
  [40.067769, -83.112689],
  [40.0679, -83.112739],
  [40.068099, -83.11285],
  [40.068289, -83.11295],
  [40.06842, -83.113049],
  [40.068639, -83.113279],
  [40.06886, -83.113539],
  [40.06898, -83.11375],
  [40.069119, -83.11401],
  [40.06931, -83.114489],
  [40.069369, -83.114709],
  [40.06941, -83.114979],
  [40.069449, -83.115249],
  [40.06952, -83.11596],
  [40.069659, -83.11725],
  [40.06976, -83.11817],
  [40.069809, -83.11847],
  [40.06988, -83.1188],
  [40.069909, -83.11889],
  [40.069979, -83.119119],
  [40.07012, -83.119489],
  [40.070199, -83.119629],
  [40.070349, -83.119889],
  [40.070519, -83.120119],
  [40.070799, -83.12045],
  [40.07113, -83.12073],
  [40.071249, -83.12081],
  [40.07141, -83.1209],
  [40.071629, -83.121],
  [40.071809, -83.121059],
  [40.071899, -83.12109],
  [40.071999, -83.121119],
  [40.072359, -83.121239],
  [40.07303, -83.12145],
  [40.0733, -83.12153],
  [40.07374, -83.12167],
  [40.07453, -83.121919],
  [40.07499, -83.122059],
  [40.075659, -83.12226],
  [40.075949, -83.12235],
  [40.07615, -83.122409],
  [40.077469, -83.1228],
  [40.07779, -83.12283],
  [40.07805, -83.122869],
  [40.07832, -83.12292],
  [40.078539, -83.122899],
  [40.07876, -83.12289],
  [40.07921, -83.1228],
  [40.079259, -83.12279],
  [40.079339, -83.122769],
  [40.079339, -83.12288],
  [40.079359, -83.123079],
  [40.079379, -83.12338],
  [40.079379, -83.12356],
  [40.079339, -83.123949],
  [40.07932, -83.124069],
  [40.079259, -83.124349],
  [40.079189, -83.124579],
  [40.079159, -83.124849],
  [40.07915, -83.124929],
  [40.07913, -83.12523],
  [40.07913, -83.12545],
  [40.07913, -83.125599]
];

const stopNames = {
  "SOUTER7": "COTA TRANSIT TERMINAL BAY 7",
  "4THTOWN": "S 4TH ST &amp; E TOWN ST",
  "SPRFROW": "W SPRING ST &amp; N FRONT ST",
  "NORSHAW": "W NORTH BROADWAY &amp; SHATTUCK AVE",
  "NORCLEW": "W NORTH BROADWAY &amp; CLEARVIEW AVE",
  "KENKENBN": "KENNY RD &amp; KENBROOK COMMON ST",
  "KENHIGN": "KENNY RD &amp; HIGHLAND DR",
  "KENWINN": "KENNY RD &amp; WINDHAM RD",
  "KENFOLN": "KENNY RD &amp; FOLKESTONE RD",
  "KENMERN": "KENNY RD &amp; MERRIMAR CIR S",
  "KENWEYN": "KENNY RD &amp; WEYBRIDGE RD",
  "NOREXIW": "W NORTH BROADWAY &amp; RIVERSIDE EXIT",
  "GODCHEW": "GODOWN RD &amp; CHEVIOT DR",
  "GODCAMN": "GODOWN RD &amp; CAMBRIAN DR",
  "BETDIEW": "BETHEL RD &amp; DIERKER RD",
  "PICGARN": "PICKFORDE DR &amp; GARDENIA DR",
  "RESSAWW": "RESLER DR &amp; SAWMILL RD",
  "BETCOAW": "BETHEL RD &amp; COACHMAN RD",
  "FRANORNW": "FRANTZ RD &amp; NORTHBRIDGE PLAZA",
  "FRABALN": "FRANTZ RD &amp; BALLYMEAD BLVD",
  "FRABREN": "FRANTZ RD &amp; BRELSFORD LN",
  "BETMCKW": "BETHEL RD &amp; MCKITRICK BLVD",
  "BETBETW": "BETHEL RD &amp; BETHEL PARK DR",
  "BETREEW": "BETHEL RD &amp; REED RD",
  "BETPORW": "BETHEL RD &amp; PORTLAND ST",
  "BETGODW": "BETHEL RD &amp; GODOWN RD",
  "HAY316W": "3166 HAYDEN RD",
  "HAYDONW": "HAYDEN RD &amp; DONNYLANE BLVD",
  "4THATHN": "N 4TH ST &amp; E GAY ST",
  "FROSPRN": "N FRONT ST &amp; W SPRING ST",
  "VINPARW": "VINE ST &amp; N PARK ST",
  "SAWBETS": "SAWMILL RD &amp; BETHEL RD",
  "SPR4THW": "E SPRING ST &amp; N 4TH ST",
  "4THCAPN": "S 4TH ST &amp; E CAPITAL ST",
  "DUBHAYN": "DUBLIN RD &amp; HAYDEN RUN RD",
  "5054PARW": "5054 PARKCENTER AVE"
};

const stops = [
  { stop_id: "SOUTER7", name: "COTA TRANSIT TERMINAL BAY 7", lat: 39.956667, lon: -82.99885, times: ["5:07 PM"] },
  { stop_id: "4THTOWN", name: "S 4TH ST &amp; E TOWN ST", lat: 39.958965, lon: -82.995424, times: ["5:10 PM"] },
  { stop_id: "4THCAPN", name: "S 4TH ST &amp; E CAPITAL ST", lat: 39.961951, lon: -82.995987, times: ["5:12 PM"] },
  { stop_id: "4THATHN", name: "N 4TH ST &amp; E GAY ST", lat: 39.963808, lon: -82.996336, times: ["5:12 PM"] },
  { stop_id: "SPR4THW", name: "E SPRING ST &amp; N 4TH ST", lat: 39.966769, lon: -82.997738, times: ["5:14 PM"] },
  { stop_id: "SPRFROW", name: "W SPRING ST &amp; N FRONT ST", lat: 39.966198, lon: -83.002659, times: ["5:16 PM"] },
  { stop_id: "FROSPRN", name: "N FRONT ST &amp; W SPRING ST", lat: 39.966804, lon: -83.003236, times: ["5:16 PM"] },
  { stop_id: "VINPARW", name: "VINE ST &amp; N PARK ST", lat: 39.971546, lon: -83.005171, times: ["5:16 PM"] },
  { stop_id: "NOREXIW", name: "W NORTH BROADWAY &amp; RIVERSIDE EXIT", lat: 40.029548, lon: -83.035654, times: ["5:26 PM"] },
  { stop_id: "NORSHAW", name: "W NORTH BROADWAY &amp; SHATTUCK AVE", lat: 40.029263, lon: -83.042184, times: ["5:27 PM"] },
  { stop_id: "NORCLEW", name: "W NORTH BROADWAY &amp; CLEARVIEW AVE", lat: 40.028778, lon: -83.04627, times: ["5:28 PM"] },
  { stop_id: "KENKENBN", name: "KENNY RD &amp; KENBROOK COMMON ST", lat: 40.030699, lon: -83.049124, times: ["5:28 PM"] },
  { stop_id: "KENHIGN", name: "KENNY RD &amp; HIGHLAND DR", lat: 40.040338, lon: -83.050394, times: ["5:30 PM"] },
  { stop_id: "KENWINN", name: "KENNY RD &amp; WINDHAM RD", lat: 40.046911, lon: -83.049948, times: ["5:31 PM"] },
  { stop_id: "KENFOLN", name: "KENNY RD &amp; FOLKESTONE RD", lat: 40.050027, lon: -83.049705, times: ["5:32 PM"] },
  { stop_id: "KENMERN", name: "KENNY RD &amp; MERRIMAR CIR S", lat: 40.054186, lon: -83.04946, times: ["5:32 PM"] },
  { stop_id: "KENWEYN", name: "KENNY RD &amp; WEYBRIDGE RD", lat: 40.056467, lon: -83.049341, times: ["5:33 PM"] },
  { stop_id: "GODCHEW", name: "GODOWN RD &amp; CHEVIOT DR", lat: 40.060222, lon: -83.050998, times: ["5:34 PM"] },
  { stop_id: "GODCAMN", name: "GODOWN RD &amp; CAMBRIAN DR", lat: 40.062016, lon: -83.054927, times: ["5:34 PM"] },
  { stop_id: "BETGODW", name: "BETHEL RD &amp; GODOWN RD", lat: 40.063832, lon: -83.057482, times: ["5:35 PM"] },
  { stop_id: "BETPORW", name: "BETHEL RD &amp; PORTLAND ST", lat: 40.063994, lon: -83.062528, times: ["5:35 PM"] },
  { stop_id: "BETREEW", name: "BETHEL RD &amp; REED RD", lat: 40.064199, lon: -83.067332, times: ["5:36 PM"] },
  { stop_id: "BETMCKW", name: "BETHEL RD &amp; MCKITRICK BLVD", lat: 40.064285, lon: -83.071321, times: ["5:36 PM"] },
  { stop_id: "BETDIEW", name: "BETHEL RD &amp; DIERKER RD", lat: 40.064417, lon: -83.075515, times: ["5:37 PM"] },
  { stop_id: "BETBETW", name: "BETHEL RD &amp; BETHEL PARK DR", lat: 40.064501, lon: -83.078198, times: ["5:37 PM"] },
  { stop_id: "BETCOAW", name: "BETHEL RD &amp; COACHMAN RD", lat: 40.064618, lon: -83.081696, times: ["5:38 PM"] },
  { stop_id: "PICGARN", name: "PICKFORDE DR &amp; GARDENIA DR", lat: 40.066433, lon: -83.086371, times: ["5:39 PM"] },
  { stop_id: "RESSAWW", name: "RESLER DR &amp; SAWMILL RD", lat: 40.067987, lon: -83.091604, times: ["5:40 PM"] },
  { stop_id: "SAWBETS", name: "SAWMILL RD &amp; BETHEL RD", lat: 40.06596, lon: -83.093366, times: ["5:40 PM"] },
  { stop_id: "HAYDONW", name: "HAYDEN RD &amp; DONNYLANE BLVD", lat: 40.066997, lon: -83.098091, times: ["5:41 PM"] },
  { stop_id: "HAY316W", name: "3166 HAYDEN RD", lat: 40.068195, lon: -83.102236, times: ["5:42 PM"] },
  { stop_id: "DUBHAYN", name: "DUBLIN RD &amp; HAYDEN RUN RD", lat: 40.068024, lon: -83.112647, times: ["5:43 PM"] },
  { stop_id: "FRANORNW", name: "FRANTZ RD &amp; NORTHBRIDGE PLAZA", lat: 40.069862, lon: -83.118358, times: ["5:44 PM"] },
  { stop_id: "FRABALN", name: "FRANTZ RD &amp; BALLYMEAD BLVD", lat: 40.072757, lon: -83.121245, times: ["5:44 PM"] },
  { stop_id: "FRABREN", name: "FRANTZ RD &amp; BRELSFORD LN", lat: 40.07552, lon: -83.12204, times: ["5:45 PM"] },
  { stop_id: "5054PARW", name: "5054 PARKCENTER AVE", lat: 40.079194, lon: -83.125792, times: ["5:46 PM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>