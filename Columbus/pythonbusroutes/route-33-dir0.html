<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route 33 – HENDERSON | MetroFeed Portland</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #cccccc;
    }
    header {
      background-color: #0d0d0d;
      border-bottom: 3px solid #4dd0e1;
      padding: 1rem;
      text-align: center;
    }
    header img {
      max-height: 60px;
    }
    .ad-banner {
      text-align: center;
      margin: 1rem auto;
      background-color: #222;
      color: #888;
      padding: 1rem;
      border: 2px dashed #4dd0e1;
      font-size: 0.9rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      margin: 1rem 0;
      font-size: 2rem;
      color: #f0f0f0;
    }
    .content-box {
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 400px;
      border-radius: 8px;
    }
    .button-bar {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }
    .button-bar a {
      background: #4dd0e1;
      color: #0d0d0d;
      padding: 0.5rem 1rem;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
    }

.back-button {
  background-color: #4dd0e1;
  color: #0d0d0d;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 0 10px #4dd0e1;
  text-decoration: none;
}
.back-button:hover {
  background-color: #35c0d6;
}
.site-footer {
      text-align: center;
      margin-top: 3rem;
      margin-bottom: 120px;
      font-size: 0.85rem;
      color: #aaa;
    }
    .site-footer a {
      color: #00BFFF;
      text-decoration: none;
    }
    .site-footer a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <header>
    <img src="MetroFeedPortlandLogo.png" alt="MetroFeed Portland">
  </header>

  <div class="ad-banner">
    [Ad Banner Placeholder — 300x250]
  </div>

  <div class="disclaimer" style="margin: 1rem auto 0.5rem; max-width: 600px; font-size: 0.8rem; color: #bbb; text-align: center; padding: 0.5rem 1rem; background-color: #111; border: 1px dashed #444; border-radius: 6px;">
    ⚠️ This is a Beta program, work in progress. Please REPORT bugs and pretend to be impressed.
  </div>
  <div class="disclaimer" style="margin: 0 auto 1rem; max-width: 600px; font-size: 0.75rem; color: #888; text-align: center; padding: 0.25rem 1rem;">
    This tool is not affiliated with or endorsed by TriMet. For official schedules and service alerts, visit <a href="https://trimet.org" style="color:#4dd0e1;">trimet.org</a>.
  </div>

  <div style="margin: 2rem 0; text-align: center;">
  <button class="back-button" onclick="history.back()">⬅ Back</button>
  </div>

  <h1>Route 33 – HENDERSON</h1>

  <div class="content-box">
    <div id="map"></div>
    <div style="text-align:right; font-size: 0.7rem; color: #777; margin-top: 0.5rem;">
      Data courtesy of TriMet.
    </div>
  </div>

  
  <script>
  const apiKey = "2C4447D4A42083BCD84DE3B8E";
  const routeNumber = 33;
  const direction = parseInt(0);

  const map = L.map('map').setView([45.6, -122.7], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const shapeOutbound = [
  [40.06987, -83.019639],
  [40.069889, -83.01952],
  [40.069979, -83.01938],
  [40.069999, -83.019139],
  [40.06995, -83.019139],
  [40.06958, -83.01916],
  [40.06952, -83.01916],
  [40.06933, -83.01916],
  [40.06906, -83.01917],
  [40.068939, -83.01917],
  [40.068819, -83.019179],
  [40.06868, -83.019179],
  [40.06853, -83.019189],
  [40.06845, -83.019189],
  [40.06835, -83.019189],
  [40.068189, -83.0192],
  [40.06806, -83.01921],
  [40.06782, -83.019219],
  [40.06772, -83.019229],
  [40.06762, -83.019229],
  [40.067479, -83.01924],
  [40.06737, -83.01924],
  [40.067129, -83.01925],
  [40.06681, -83.01926],
  [40.06661, -83.019269],
  [40.066419, -83.019279],
  [40.065929, -83.01929],
  [40.06553, -83.019319],
  [40.065229, -83.01934],
  [40.06483, -83.019369],
  [40.064679, -83.01938],
  [40.064429, -83.019399],
  [40.064349, -83.019409],
  [40.064159, -83.01943],
  [40.064, -83.01944],
  [40.063869, -83.019449],
  [40.063719, -83.019459],
  [40.063689, -83.019459],
  [40.063629, -83.01947],
  [40.06349, -83.01948],
  [40.063329, -83.01948],
  [40.06313, -83.019489],
  [40.06294, -83.019499],
  [40.062799, -83.01951],
  [40.06249, -83.01952],
  [40.06229, -83.01952],
  [40.062009, -83.019539],
  [40.06195, -83.019539],
  [40.06157, -83.01957],
  [40.0614, -83.019579],
  [40.06071, -83.01961],
  [40.06051, -83.01962],
  [40.06042, -83.019629],
  [40.059819, -83.01966],
  [40.05951, -83.019679],
  [40.05945, -83.019679],
  [40.05935, -83.019679],
  [40.05882, -83.01971],
  [40.0586, -83.019729],
  [40.05845, -83.019729],
  [40.058199, -83.01974],
  [40.058119, -83.01974],
  [40.058039, -83.01974],
  [40.058009, -83.01974],
  [40.057689, -83.019759],
  [40.05745, -83.019769],
  [40.057019, -83.0198],
  [40.05662, -83.01983],
  [40.056489, -83.01984],
  [40.05644, -83.01984],
  [40.05628, -83.019849],
  [40.055959, -83.019859],
  [40.05582, -83.01987],
  [40.055769, -83.01987],
  [40.055679, -83.01988],
  [40.055419, -83.01989],
  [40.05539, -83.01989],
  [40.054959, -83.01992],
  [40.05486, -83.01993],
  [40.054809, -83.01993],
  [40.054509, -83.019939],
  [40.054419, -83.019939],
  [40.054069, -83.01996],
  [40.05356, -83.019989],
  [40.053179, -83.02002],
  [40.052819, -83.020039],
  [40.05259, -83.02005],
  [40.05223, -83.020079],
  [40.05196, -83.020089],
  [40.051829, -83.0201],
  [40.051809, -83.0201],
  [40.05143, -83.020119],
  [40.05144, -83.020359],
  [40.051459, -83.020719],
  [40.051469, -83.02087],
  [40.051479, -83.02114],
  [40.051539, -83.02258],
  [40.051639, -83.024669],
  [40.05169, -83.025889],
  [40.05171, -83.02668],
  [40.051729, -83.027199],
  [40.051749, -83.027859],
  [40.05178, -83.02865],
  [40.05179, -83.028939],
  [40.051819, -83.02959],
  [40.051829, -83.03036],
  [40.051829, -83.030789],
  [40.051839, -83.030979],
  [40.051839, -83.03117],
  [40.051839, -83.031339],
  [40.05185, -83.03162],
  [40.05187, -83.032109],
  [40.05188, -83.03257],
  [40.05189, -83.032819],
  [40.05189, -83.03288],
  [40.05194, -83.033309],
  [40.051989, -83.03374],
  [40.052009, -83.034249],
  [40.052079, -83.03653],
  [40.052109, -83.03726],
  [40.05213, -83.03778],
  [40.052199, -83.0381],
  [40.05221, -83.038439],
  [40.05222, -83.03864],
  [40.05224, -83.039079],
  [40.052279, -83.04],
  [40.052349, -83.040639],
  [40.052469, -83.04143],
  [40.052529, -83.041779],
  [40.0526, -83.04221],
  [40.052609, -83.042269],
  [40.052699, -83.04274],
  [40.052799, -83.04341],
  [40.05287, -83.0439],
  [40.05293, -83.04427],
  [40.052969, -83.044689],
  [40.05302, -83.045189],
  [40.05305, -83.0459],
  [40.05305, -83.04597],
  [40.053069, -83.0468],
  [40.053079, -83.04715],
  [40.053099, -83.047799],
  [40.05311, -83.04824],
  [40.05311, -83.048349],
  [40.05312, -83.048489],
  [40.05312, -83.048579],
  [40.05313, -83.048929],
  [40.053149, -83.049609],
  [40.053179, -83.050599],
  [40.053189, -83.05102],
  [40.053189, -83.05115],
  [40.053249, -83.053389],
  [40.053279, -83.054689],
  [40.05332, -83.055989],
  [40.053339, -83.05687],
  [40.053339, -83.056939],
  [40.053349, -83.05732],
  [40.053359, -83.057759],
  [40.053369, -83.05826],
  [40.05341, -83.05971],
  [40.053459, -83.061669],
  [40.05348, -83.062239],
  [40.053529, -83.063689],
  [40.05356, -83.06425],
  [40.05359, -83.06461],
  [40.053629, -83.06497],
  [40.053719, -83.06556],
  [40.05383, -83.066039],
  [40.053909, -83.066389],
  [40.053979, -83.066669],
  [40.053979, -83.066919],
  [40.05413, -83.067329],
  [40.05419, -83.067509],
  [40.05421, -83.067569],
  [40.054249, -83.067659],
  [40.05429, -83.06776],
  [40.05437, -83.067969],
  [40.05449, -83.0683],
  [40.05467, -83.068769],
  [40.05484, -83.06921],
  [40.05491, -83.06938],
  [40.05504, -83.069709],
  [40.05511, -83.069889],
  [40.055139, -83.06996],
  [40.055169, -83.07005],
  [40.05521, -83.07015],
  [40.055319, -83.07042],
  [40.055409, -83.07065],
  [40.055429, -83.070699],
  [40.055499, -83.07087],
  [40.05555, -83.071],
  [40.05591, -83.0719],
  [40.05603, -83.07222],
  [40.056159, -83.072549],
  [40.056229, -83.072729],
  [40.05638, -83.07311],
  [40.05672, -83.073989],
  [40.056929, -83.074529],
  [40.056939, -83.07456],
  [40.056969, -83.07465],
  [40.057059, -83.07487],
  [40.05709, -83.074949],
  [40.057239, -83.075339],
  [40.057509, -83.07532],
  [40.057679, -83.075309],
  [40.057759, -83.075309],
  [40.05789, -83.075299],
  [40.058009, -83.075289],
  [40.058219, -83.07528],
  [40.05837, -83.07527],
  [40.05844, -83.07527],
  [40.05891, -83.075249],
  [40.05932, -83.07523],
  [40.05943, -83.075219],
  [40.0595, -83.075219],
  [40.0596, -83.075209],
  [40.0599, -83.075199],
  [40.06041, -83.075159],
  [40.06053, -83.07515],
  [40.061099, -83.075129],
  [40.061719, -83.07509],
  [40.06232, -83.07506],
  [40.06275, -83.075039],
  [40.0631, -83.075019],
  [40.06339, -83.07501],
  [40.0635, -83.075],
  [40.06368, -83.074989],
  [40.064319, -83.074949],
  [40.064349, -83.075939],
  [40.06438, -83.076689],
  [40.0644, -83.077199],
  [40.064419, -83.077739],
  [40.064419, -83.07785],
  [40.064439, -83.078589],
  [40.064509, -83.08059],
  [40.064529, -83.081289],
  [40.06455, -83.081999],
  [40.06458, -83.082809],
  [40.064589, -83.083209],
  [40.064619, -83.08383],
  [40.064619, -83.083899],
  [40.06464, -83.084429],
  [40.06465, -83.084799],
  [40.064679, -83.085649],
  [40.064689, -83.085869],
  [40.064709, -83.08653],
  [40.065599, -83.086549],
  [40.066209, -83.08649],
  [40.066579, -83.086459],
  [40.066679, -83.08648],
  [40.067019, -83.086449],
  [40.067199, -83.086499],
  [40.067389, -83.086599],
  [40.06751, -83.086719],
  [40.067679, -83.086949],
  [40.067749, -83.08721],
  [40.0678, -83.087529],
  [40.067839, -83.088839],
  [40.067849, -83.08904],
  [40.067929, -83.09125],
  [40.067949, -83.09169],
  [40.06798, -83.092089],
  [40.068009, -83.09309],
  [40.06853, -83.09305],
  [40.06905, -83.09301],
  [40.06916, -83.093],
  [40.06933, -83.092989],
  [40.069539, -83.09297],
  [40.06997, -83.092939],
  [40.07067, -83.092889],
  [40.070909, -83.092859],
  [40.071089, -83.092839],
  [40.07131, -83.092769],
  [40.07159, -83.092749],
  [40.07232, -83.092709],
  [40.072809, -83.092679],
  [40.073, -83.092669],
  [40.073609, -83.092629],
  [40.07447, -83.092579],
  [40.077579, -83.092409],
  [40.079189, -83.09232],
  [40.079639, -83.092299],
  [40.079889, -83.09228],
  [40.08024, -83.092259],
  [40.08183, -83.092179],
  [40.082609, -83.09214],
  [40.08392, -83.09207],
  [40.084039, -83.09206],
  [40.08445, -83.092039],
  [40.085019, -83.09202],
  [40.08519, -83.09201],
  [40.085309, -83.091999],
  [40.08605, -83.09197],
  [40.087009, -83.09192],
  [40.08725, -83.091909],
  [40.087829, -83.09188],
  [40.08804, -83.09187],
  [40.088459, -83.091849],
  [40.09041, -83.09175],
  [40.09068, -83.09174],
  [40.091059, -83.091719],
  [40.09145, -83.0917],
  [40.091889, -83.091679],
  [40.092239, -83.091669],
  [40.09245, -83.09166],
  [40.09344, -83.09161],
  [40.093689, -83.0916],
  [40.094039, -83.091579],
  [40.09454, -83.09156],
  [40.095189, -83.09151],
  [40.09525, -83.091499],
  [40.095569, -83.09147],
  [40.095839, -83.09147],
  [40.09604, -83.09147],
  [40.096389, -83.09151],
  [40.096439, -83.09151],
  [40.09652, -83.09151],
  [40.096979, -83.091489],
  [40.09713, -83.091669],
  [40.097259, -83.09189],
  [40.097469, -83.092269],
  [40.09757, -83.09246],
  [40.09769, -83.09269],
  [40.09786, -83.093],
  [40.09804, -83.093339],
  [40.098089, -83.093439],
  [40.098249, -83.093749],
  [40.098359, -83.09395],
  [40.0984, -83.09404],
  [40.098719, -83.094749],
  [40.09894, -83.095509],
  [40.099079, -83.096129],
  [40.0991, -83.0962],
  [40.099179, -83.09679],
  [40.099239, -83.09764],
  [40.099259, -83.098249],
  [40.099269, -83.098559],
  [40.099349, -83.10056],
  [40.099349, -83.10069],
  [40.099429, -83.102559],
  [40.099439, -83.102749],
  [40.099509, -83.104589],
  [40.099519, -83.10488],
  [40.09955, -83.10542],
  [40.09957, -83.105889],
  [40.09958, -83.10606],
  [40.09958, -83.106169],
  [40.09959, -83.10654],
  [40.099599, -83.106839],
  [40.09955, -83.107109],
  [40.09956, -83.10754],
  [40.09957, -83.107839],
  [40.09958, -83.10807],
  [40.099629, -83.108289],
  [40.099619, -83.108589],
  [40.099619, -83.10867],
  [40.09964, -83.108769],
  [40.09966, -83.108829],
  [40.09977, -83.10902],
  [40.09982, -83.10906],
  [40.099879, -83.109139],
  [40.09991, -83.109219],
  [40.09991, -83.109409],
  [40.099879, -83.10952],
  [40.09982, -83.10961],
  [40.099779, -83.109639],
  [40.09973, -83.10983],
  [40.099689, -83.109999],
  [40.09967, -83.1101],
  [40.09965, -83.110169],
  [40.099629, -83.110219],
  [40.09964, -83.110449],
  [40.09964, -83.11073],
  [40.099629, -83.11159],
  [40.099629, -83.112509],
  [40.099619, -83.112999],
  [40.09959, -83.113289],
  [40.09958, -83.11344],
  [40.09955, -83.11376],
  [40.09947, -83.11452],
  [40.099429, -83.11484],
  [40.099419, -83.11492],
  [40.099419, -83.11497],
  [40.09941, -83.11506],
  [40.09939, -83.115259],
  [40.09937, -83.115399],
  [40.099329, -83.11577],
  [40.09932, -83.11587],
  [40.09928, -83.11622],
  [40.099259, -83.11664],
  [40.099259, -83.116919],
  [40.099259, -83.11713],
  [40.099249, -83.11739],
  [40.099249, -83.11788],
  [40.099239, -83.118139],
  [40.099239, -83.11817],
  [40.09923, -83.11874],
  [40.09922, -83.119749],
  [40.09921, -83.12005],
  [40.0992, -83.120489],
  [40.099179, -83.121069],
  [40.099269, -83.12145],
  [40.0993, -83.121909],
  [40.09931, -83.122289],
  [40.09931, -83.12265],
  [40.0993, -83.12303],
  [40.099269, -83.12465],
  [40.099069, -83.12473],
  [40.09869, -83.12478],
  [40.09804, -83.12487],
  [40.097619, -83.12492],
  [40.09757, -83.124929],
  [40.09714, -83.12496],
  [40.096889, -83.124979],
  [40.09658, -83.12501],
  [40.096179, -83.12504],
  [40.095919, -83.125059],
  [40.095459, -83.1251],
  [40.095579, -83.125959],
  [40.09563, -83.126369],
  [40.095669, -83.1267],
  [40.09577, -83.12751],
  [40.09581, -83.1278],
  [40.095849, -83.128079],
  [40.09588, -83.128309],
  [40.095939, -83.128769],
  [40.09597, -83.12906],
  [40.096109, -83.13],
  [40.096169, -83.13035],
  [40.09625, -83.130779],
  [40.096259, -83.13103],
  [40.09624, -83.131369],
  [40.096179, -83.13166],
  [40.096109, -83.131899],
  [40.095939, -83.132309],
  [40.09578, -83.13255],
  [40.09568, -83.13269],
  [40.095569, -83.13279],
  [40.095379, -83.132949],
  [40.095119, -83.133079],
  [40.094939, -83.133119]
];

const stopNames = {
  "HIGFENS": "N HIGH ST &amp; FENWAY RD",
  "HIG521S": "5211 N HIGH ST",
  "HIGGRA2S": "N HIGH ST &amp; GRACELAND BLVD 2",
  "HIGJEFS": "N HIGH ST &amp; E JEFFREY PL",
  "HIGBEES": "N HIGH ST &amp; W BEECHWOLD BLVD",
  "HIGSHES": "N HIGH ST &amp; SHEFFIELD RD",
  "HIGHENS": "N HIGH ST &amp; W HENDERSON RD",
  "HENZELW": "W HENDERSON RD &amp; ZELLER RD",
  "HENOLEBW": "W HENDERSON RD &amp; OLENTANGY BLVD",
  "HENLAUW": "W HENDERSON RD &amp; LAURALAND DR E",
  "HENOLEW": "W HENDERSON RD &amp; OLENTANGY RIVER RD",
  "BETDIEW": "BETHEL RD &amp; DIERKER RD",
  "PICGARN": "PICKFORDE DR &amp; GARDENIA DR",
  "RESSAWW": "RESLER DR &amp; SAWMILL RD",
  "BETCOAW": "BETHEL RD &amp; COACHMAN RD",
  "BETBETW": "BETHEL RD &amp; BETHEL PARK DR",
  "FRA161S": "FRANTZ RD &amp; W BRIDGE ST",
  "HIGMORS": "N HIGH ST &amp; MORSE RD",
  "DIEPKRN": "DIERKER RD &amp; PARK RUN DR",
  "DIEWENN": "DIERKER RD &amp; WENDYS DR",
  "METUMETW": "METRO PL N &amp; UPPER METRO PL",
  "METCRPW": "METRO PL N &amp; CROWN PLAZA",
  "METS565S": "565 METRO PL S",
  "SAWCRAN": "SAWMILL RD &amp; CRANSTON DR",
  "SAWWESN": "SAWMILL RD &amp; WEST CASE RD",
  "620SAWN": "6200 SAWMILL RD",
  "SAWDUBN": "SAWMILL RD &amp; DUBLIN-GRANVILLE RD",
  "WESHIGW": "WESTVIEW TURNAROUND",
  "SAWKAYN": "SAWMILL RD &amp; KAYS RD",
  "SAWSBN": "SAWMILL RD &amp; SAWBURY BLVD",
  "SAWSNON": "SAWMILL RD &amp; SNOUFFER RD",
  "SAWFEDN": "SAWMILL RD &amp; FEDERATED BLVD",
  "SAWSAWN": "SAWMILL RD &amp; SAWMILL PLACE BLVD",
  "DUBSAWW": "W DUBLIN GRANVILLE RD &amp; SAWMILL",
  "DUBDUBW": "W DUBLIN GRANVILLE RD &amp; DUBLIN CENTER DR",
  "DUBSHAW": "W DUBLIN GRANVILLE RD &amp;  SHAMROCKBLVD",
  "DUBDALW": "W DUBLIN GRANVILLE RD &amp; DALE DR",
  "BRINHIW": "E BRIDGE ST &amp; N HIGH ST",
  "80WBRIW": "80 W BRIDGE ST",
  "BRISHAW": "W BRIDGE ST &amp; SHAWAN FALLS DR",
  "HENKNIW": "W HENDERSON RD &amp;  KNIGHTSBRIDGE BLVD",
  "HENKENW": "W HENDERSON RD &amp; KENNY RD",
  "HENWINW": "W HENDERSON RD &amp; WINTERSET DR",
  "HENLARW": "W HENDERSON RD &amp; LARWELL DR",
  "HENREEW": "W HENDERSON RD &amp; REED RD",
  "HENGETW1": "W HENDERSON RD &amp; GETTYSBURG RD",
  "HENDIEW1": "W HENDERSON RD &amp; DIERKER RD",
  "HARHEAE": "HARD RD &amp; HEATHERMOOR DR",
  "STAHARN": "STANDBURN RD &amp; HARD RD",
  "SUMSUTW": "SUMMER DR &amp; SUTTER PKWY",
  "SUMSAWW": "SUMMER DR &amp; SAWMILL COMMONS LN",
  "SUM2555W": "2555 SUMMER DR",
  "HARSAWE": "HARD RD &amp; SAWMILL RD",
  "SAWMTULN": "SAWMILL RD &amp; TULLER PARKWAY"
};

const stops = [
  { stop_id: "WESHIGW", name: "WESTVIEW TURNAROUND", lat: 40.069979, lon: -83.019601, times: ["5:13 AM"] },
  { stop_id: "HIG521S", name: "5211 N HIGH ST", lat: 40.06893, lon: -83.019249, times: ["5:14 AM"] },
  { stop_id: "HIGFENS", name: "N HIGH ST &amp; FENWAY RD", lat: 40.067693, lon: -83.019303, times: ["5:14 AM"] },
  { stop_id: "HIGGRA2S", name: "N HIGH ST &amp; GRACELAND BLVD 2", lat: 40.064664, lon: -83.019455, times: ["5:15 AM"] },
  { stop_id: "HIGMORS", name: "N HIGH ST &amp; MORSE RD", lat: 40.062794, lon: -83.019598, times: ["5:16 AM"] },
  { stop_id: "HIGJEFS", name: "N HIGH ST &amp; E JEFFREY PL", lat: 40.061614, lon: -83.019629, times: ["5:16 AM"] },
  { stop_id: "HIGBEES", name: "N HIGH ST &amp; W BEECHWOLD BLVD", lat: 40.058728, lon: -83.019781, times: ["5:17 AM"] },
  { stop_id: "HIGSHES", name: "N HIGH ST &amp; SHEFFIELD RD", lat: 40.056118, lon: -83.019938, times: ["5:17 AM"] },
  { stop_id: "HIGHENS", name: "N HIGH ST &amp; W HENDERSON RD", lat: 40.051642, lon: -83.020212, times: ["5:19 AM"] },
  { stop_id: "HENZELW", name: "W HENDERSON RD &amp; ZELLER RD", lat: 40.051658, lon: -83.024445, times: ["5:19 AM"] },
  { stop_id: "HENOLEBW", name: "W HENDERSON RD &amp; OLENTANGY BLVD", lat: 40.051785, lon: -83.027116, times: ["5:19 AM"] },
  { stop_id: "HENOLEW", name: "W HENDERSON RD &amp; OLENTANGY RIVER RD", lat: 40.052119, lon: -83.034536, times: ["5:21 AM"] },
  { stop_id: "HENLAUW", name: "W HENDERSON RD &amp; LAURALAND DR E", lat: 40.052214, lon: -83.038007, times: ["5:21 AM"] },
  { stop_id: "HENKNIW", name: "W HENDERSON RD &amp;  KNIGHTSBRIDGE BLVD", lat: 40.052653, lon: -83.042086, times: ["5:21 AM"] },
  { stop_id: "HENKENW", name: "W HENDERSON RD &amp; KENNY RD", lat: 40.053182, lon: -83.050176, times: ["5:23 AM"] },
  { stop_id: "HENWINW", name: "W HENDERSON RD &amp; WINTERSET DR", lat: 40.053415, lon: -83.057521, times: ["5:23 AM"] },
  { stop_id: "HENLARW", name: "W HENDERSON RD &amp; LARWELL DR", lat: 40.053532, lon: -83.062876, times: ["5:24 AM"] },
  { stop_id: "HENREEW", name: "W HENDERSON RD &amp; REED RD", lat: 40.053924, lon: -83.06629, times: ["5:25 AM"] },
  { stop_id: "HENGETW1", name: "W HENDERSON RD &amp; GETTYSBURG RD", lat: 40.056185, lon: -83.072419, times: ["5:26 AM"] },
  { stop_id: "HENDIEW1", name: "W HENDERSON RD &amp; DIERKER RD", lat: 40.057209, lon: -83.07506, times: ["5:26 AM"] },
  { stop_id: "DIEWENN", name: "DIERKER RD &amp; WENDYS DR", lat: 40.057992, lon: -83.07519, times: ["5:26 AM"] },
  { stop_id: "DIEPKRN", name: "DIERKER RD &amp; PARK RUN DR", lat: 40.060661, lon: -83.075033, times: ["5:27 AM"] },
  { stop_id: "BETDIEW", name: "BETHEL RD &amp; DIERKER RD", lat: 40.064417, lon: -83.075515, times: ["5:28 AM"] },
  { stop_id: "BETBETW", name: "BETHEL RD &amp; BETHEL PARK DR", lat: 40.064501, lon: -83.078198, times: ["5:28 AM"] },
  { stop_id: "BETCOAW", name: "BETHEL RD &amp; COACHMAN RD", lat: 40.064618, lon: -83.081696, times: ["5:29 AM"] },
  { stop_id: "PICGARN", name: "PICKFORDE DR &amp; GARDENIA DR", lat: 40.066433, lon: -83.086371, times: ["5:30 AM"] },
  { stop_id: "RESSAWW", name: "RESLER DR &amp; SAWMILL RD", lat: 40.067987, lon: -83.091604, times: ["5:32 AM"] },
  { stop_id: "SAWWESN", name: "SAWMILL RD &amp; WEST CASE RD", lat: 40.073183, lon: -83.092583, times: ["5:33 AM"] },
  { stop_id: "SAWKAYN", name: "SAWMILL RD &amp; KAYS RD", lat: 40.080186, lon: -83.092173, times: ["5:35 AM"] },
  { stop_id: "SAWCRAN", name: "SAWMILL RD &amp; CRANSTON DR", lat: 40.085843, lon: -83.091922, times: ["5:36 AM"] },
  { stop_id: "SAWMTULN", name: "SAWMILL RD &amp; TULLER PARKWAY", lat: 40.08894, lon: -83.091766, times: ["5:37 AM"] },
  { stop_id: "620SAWN", name: "6200 SAWMILL RD", lat: 40.091971, lon: -83.091607, times: ["5:38 AM"] },
  { stop_id: "SAWDUBN", name: "SAWMILL RD &amp; DUBLIN-GRANVILLE RD", lat: 40.095902, lon: -83.091369, times: ["6:08 AM"] },
  { stop_id: "SAWSAWN", name: "SAWMILL RD &amp; SAWMILL PLACE BLVD", lat: 40.099922, lon: -83.091077, times: ["6:09 AM"] },
  { stop_id: "SAWFEDN", name: "SAWMILL RD &amp; FEDERATED BLVD", lat: 40.102295, lon: -83.09105, times: ["6:09 AM"] },
  { stop_id: "SAWSNON", name: "SAWMILL RD &amp; SNOUFFER RD", lat: 40.104278, lon: -83.090972, times: ["6:10 AM"] },
  { stop_id: "SAWSBN", name: "SAWMILL RD &amp; SAWBURY BLVD", lat: 40.113945, lon: -83.090471, times: ["6:13 AM"] },
  { stop_id: "HARSAWE", name: "HARD RD &amp; SAWMILL RD", lat: 40.117794, lon: -83.089644, times: ["6:14 AM"] },
  { stop_id: "HARHEAE", name: "HARD RD &amp; HEATHERMOOR DR", lat: 40.11767, lon: -83.084186, times: ["6:15 AM"] },
  { stop_id: "STAHARN", name: "STANDBURN RD &amp; HARD RD", lat: 40.118223, lon: -83.080365, times: ["6:16 AM"] },
  { stop_id: "SUMSUTW", name: "SUMMER DR &amp; SUTTER PKWY", lat: 40.121251, lon: -83.08325, times: ["6:17 AM"] },
  { stop_id: "SUMSAWW", name: "SUMMER DR &amp; SAWMILL COMMONS LN", lat: 40.120727, lon: -83.085531, times: ["6:18 AM"] },
  { stop_id: "SUM2555W", name: "2555 SUMMER DR", lat: 40.121527, lon: -83.088293, times: ["6:19 AM"] },
  { stop_id: "DUBSAWW", name: "W DUBLIN GRANVILLE RD &amp; SAWMILL", lat: 40.097354, lon: -83.092011, times: ["5:40 AM"] },
  { stop_id: "DUBDUBW", name: "W DUBLIN GRANVILLE RD &amp; DUBLIN CENTER DR", lat: 40.098891, lon: -83.095128, times: ["5:40 AM"] },
  { stop_id: "DUBSHAW", name: "W DUBLIN GRANVILLE RD &amp;  SHAMROCKBLVD", lat: 40.099424, lon: -83.101115, times: ["5:42 AM"] },
  { stop_id: "DUBDALW", name: "W DUBLIN GRANVILLE RD &amp; DALE DR", lat: 40.099646, lon: -83.106737, times: ["5:43 AM"] },
  { stop_id: "BRINHIW", name: "E BRIDGE ST &amp; N HIGH ST", lat: 40.099653, lon: -83.113582, times: ["5:44 AM"] },
  { stop_id: "80WBRIW", name: "80 W BRIDGE ST", lat: 40.099352, lon: -83.116863, times: ["5:45 AM"] },
  { stop_id: "BRISHAW", name: "W BRIDGE ST &amp; SHAWAN FALLS DR", lat: 40.099308, lon: -83.120761, times: ["5:46 AM"] },
  { stop_id: "FRA161S", name: "FRANTZ RD &amp; W BRIDGE ST", lat: 40.098418, lon: -83.124878, times: ["5:47 AM"] },
  { stop_id: "METUMETW", name: "METRO PL N &amp; UPPER METRO PL", lat: 40.095976, lon: -83.128721, times: ["5:48 AM"] },
  { stop_id: "METCRPW", name: "METRO PL N &amp; CROWN PLAZA", lat: 40.096114, lon: -83.132086, times: ["5:49 AM"] },
  { stop_id: "METS565S", name: "565 METRO PL S", lat: 40.095083, lon: -83.133166, times: ["5:50 AM"] },
]

  const polylineOut = L.polyline(shapeOutbound, {
    color: 'blue',
    weight: 4,
    opacity: 0.7
  }).addTo(map);

  map.fitBounds(polylineOut.getBounds());

  stops.forEach(stop => {
    const marker = L.circleMarker([stop.lat, stop.lon], {
      radius: 6,
      color: '#4dd0e1',
      fillColor: '#4dd0e1',
      fillOpacity: 0.9,
      weight: 1
    });

    const popupContent = `
      <strong>${stop.name}</strong><br>
      ${stop.times && stop.times.length ? stop.times.join("<br>") : "No scheduled times"}
    `;

    marker.bindPopup(popupContent);
    marker.addTo(map);
  });

  let busMarkers = {};

  async function fetchAndDisplay() {
    const res = await fetch(`https://developer.trimet.org/ws/v2/vehicles?route=${routeNumber}&appID=${apiKey}&json=true`);
    const data = await res.json();
    const buses = (data.resultSet.vehicle || []).filter(v =>
      v.routeNumber == routeNumber && v.direction == direction
    );

    Object.values(busMarkers).forEach(m => map.removeLayer(m));
    busMarkers = {};

    if (buses.length === 0) return;

    buses.forEach(bus => {
      if (!bus.latitude || !bus.longitude || !bus.blockID) return;

      const icon = L.divIcon({
        className: '',
        html: `
          <div style="text-align:center;">
            <div style="background:#0071CE;color:#fff;padding:2px 6px;border-radius:6px;font-weight:bold;">${bus.vehicleID}</div>
            <div style="width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #00bfff;margin:auto;"></div>
          </div>
        `,
        iconSize: [40, 30],
        iconAnchor: [20, 30]
      });

      const marker = L.marker([bus.latitude, bus.longitude], { icon }).addTo(map);
      busMarkers[bus.vehicleID] = marker;
    });
  }

  fetchAndDisplay();
  setInterval(fetchAndDisplay, 15000);
  </script>

<footer class="site-footer">
  <a href="terms.html">Terms of Use</a> &nbsp;|&nbsp;
  <a href="contact.html">Contact Us</a> &nbsp;|&nbsp;
  <a href="report.html">Report a Problem</a> &nbsp;|&nbsp;
  <a href="privacy.html">Privacy Policy</a>
</footer>

<div id="cookie-banner" style="display: none; position: fixed; bottom: 0; width: 100%; background: #333; color: #fff; text-align: center; padding: 1rem; z-index: 1000; font-size: 0.9rem;">
  📢 We use cookies for personalized ads and analytics. By using MetroFeed, you agree to our 
  <a href="privacy.html" style="color: #4dd0e1; text-decoration: underline;">Privacy Policy</a>.
  <button onclick="acceptCookies()" style="margin-left: 1rem; background: #4dd0e1; color: #000; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">OK</button>
</div>

<script>
  function acceptCookies() {
    localStorage.setItem('cookieConsent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  }

  window.onload = function() {
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }
  }
</script>


</body>
</html>